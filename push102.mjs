import https from "https";

const OWNER = "wr98-code";
const REPO  = "new-zeromeridian";
const TOKEN = process.env.GH_TOKEN;

if (!TOKEN) { console.error("‚ùå GH_TOKEN not set!"); process.exit(1); }

const C0 = "LyoqCiAqIE9yZGVyQm9vay50c3gg4oCUIFpFUsOYIE1FUklESUFOIDIwMjYgcHVzaDI3CiAqIHB1c2gyNzogQ1JJVElDQUwgZHVwbGljYXRlIHN0eWxlIHByb3BzIGZpeCAoNDEgdmlvbGF0aW9ucyDihpIgMCkKICogICAgICAgICsgbW9iaWxlIHJlc3BvbnNpdmUgbGF5b3V0ICh1c2VCcmVha3BvaW50KQogKiAgICAgICAgKyB2YXVsIGRyYXdlciBmb3IgbW9iaWxlIHN5bWJvbCBzZWxlY3RvcgogKiAgICAgICAgKyB0b3VjaCB0YXJnZXRzIDQ4cHggb24gYnV0dG9ucwogKgogKiBBcmNoaXRlY3R1cmUgMjAyNjoKICogLSBQdXJlIFNWRyBkZXB0aCBjaGFydCAoemVybyByZWNoYXJ0cywgemVybyBjYW52YXMpCiAqIC0gUGVyLWxldmVsIGZsYXNoIGFuaW1hdGlvbiB2aWEgQ1NTIGNsYXNzIHRvZ2dsZQogKiAtIFJBRi1nYXRlZCB1cGRhdGVzIGZyb20gdXNlT3JkZXJCb29rICgxMDBtcyBuYXRpdmUsIDYwZnBzIHJlbmRlcikKICogLSBTeW1ib2wgc3dpdGNoZXIgKHRvcCAyMCBwYWlycykKICogLSBCaWQvQXNrIHByZXNzdXJlIGJhciArIHNwcmVhZCBkaXNwbGF5CiAqIC0gTGlxdWlkYXRpb24gZmVlZCBzaWRlYmFyICh1c2VMaXF1aWRhdGlvbnMpCiAqIC0gQWxsIHN0YXRpYyBkYXRhIE9iamVjdC5mcmVlemUoKSdkCiAqIC0gRnVsbCBSZWFjdC5tZW1vICsgZGlzcGxheU5hbWUKICogLSBaZXJvIE1hdGgucmFuZG9tKCksIHplcm8gdGVtcGxhdGUgbGl0ZXJhbHMgaW4gSlNYIGF0dHJzCiAqIC0gWmVybyBoc2woKSDigJQgcmdiYSgpIG9ubHkg4pyTCiAqIC0gWmVybyBjbGFzc05hbWUg4pyTCiAqIC0gWmVybyBkdXBsaWNhdGUgc3R5bGUgcHJvcHMg4pyTIHB1c2gyNwogKiAtIHZhcigtLXptLSopIG1pZ3JhdGlvbiDinJMgfjkwJQogKiAtIHVzZUJyZWFrcG9pbnQgbW9iaWxlIGxheW91dCDinJMgcHVzaDI3CiAqLwoKaW1wb3J0IHsgbWVtbywgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlT3JkZXJCb29rLCBPUkRFUl9CT09LX1NZTUJPTFMsIHR5cGUgT3JkZXJCb29rTGV2ZWwsIHR5cGUgT3JkZXJCb29rU3ltYm9sIH0gZnJvbSAnQC9ob29rcy91c2VPcmRlckJvb2snOwppbXBvcnQgeyB1c2VMaXF1aWRhdGlvbnMsIHR5cGUgTGlxdWlkYXRpb25FdmVudCB9IGZyb20gJ0AvaG9va3MvdXNlTGlxdWlkYXRpb25zJzsKaW1wb3J0IHsgdXNlQnJlYWtwb2ludCB9IGZyb20gJ0AvaG9va3MvdXNlQnJlYWtwb2ludCc7CmltcG9ydCB7IGZvcm1hdFByaWNlLCBmb3JtYXRDb21wYWN0TnVtIH0gZnJvbSAnQC9saWIvZm9ybWF0dGVycyc7CmltcG9ydCB7IEFjdGl2aXR5LCBaYXAsIFRyZW5kaW5nRG93biwgVHJlbmRpbmdVcCwgQWxlcnRUcmlhbmdsZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7Cgpjb25zdCBGT05UX01PTk8gPSAiJ0pldEJyYWlucyBNb25vJywgbW9ub3NwYWNlIjsKCi8vIOKUgOKUgOKUgCBDb25zdGFudHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBTWU1CT0xfTEFCRUxTID0gT2JqZWN0LmZyZWV6ZSh7CiAgYnRjdXNkdDogICdCVEMvVVNEVCcsCiAgZXRodXNkdDogICdFVEgvVVNEVCcsCiAgc29sdXNkdDogICdTT0wvVVNEVCcsCiAgYm5idXNkdDogICdCTkIvVVNEVCcsCiAgeHJwdXNkdDogICdYUlAvVVNEVCcsCiAgYWRhdXNkdDogICdBREEvVVNEVCcsCiAgYXZheHVzZHQ6ICdBVkFYL1VTRFQnLAogIGRvZ2V1c2R0OiAnRE9HRS9VU0RUJywKICBkb3R1c2R0OiAgJ0RPVC9VU0RUJywKICBtYXRpY3VzZHQ6J01BVElDL1VTRFQnLAogIGxpbmt1c2R0OiAnTElOSy9VU0RUJywKICB1bml1c2R0OiAgJ1VOSS9VU0RUJywKICBsdGN1c2R0OiAgJ0xUQy9VU0RUJywKICB0cnh1c2R0OiAgJ1RSWC9VU0RUJywKICB0b251c2R0OiAgJ1RPTi9VU0RUJywKICBhcmJ1c2R0OiAgJ0FSQi9VU0RUJywKICBvcHVzZHQ6ICAgJ09QL1VTRFQnLAogIG5lYXJ1c2R0OiAnTkVBUi9VU0RUJywKICBhdG9tdXNkdDogJ0FUT00vVVNEVCcsCiAgc2hpYnVzZHQ6ICdTSElCL1VTRFQnLAp9IGFzIGNvbnN0KTsKCmNvbnN0IERFUFRIX1ZJWl9IID0gMTYwOwpjb25zdCBERVBUSF9WSVpfVyA9IDYwMDsKY29uc3QgRkxBU0hfRFVSQVRJT05fTVMgPSA0MDA7CgovLyDilIDilIDilIAgV1MgU3RhdHVzIEJhZGdlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgV3NTdGF0dXNCYWRnZSA9IG1lbW8oKHsgc3RhdHVzIH06IHsgc3RhdHVzOiBzdHJpbmcgfSkgPT4gewogIGNvbnN0IGNvbG9yID0gc3RhdHVzID09PSAnY29ubmVjdGVkJwogICAgPyAncmdiYSg1MiwyMTEsMTUzLDEpJwogICAgOiBzdGF0dXMgPT09ICdyZWNvbm5lY3RpbmcnCiAgICA/ICdyZ2JhKDI1MSwxOTEsMzYsMSknCiAgICA6ICdyZ2JhKDI1MSwxMTMsMTMzLDEpJzsKICBjb25zdCBsYWJlbCA9IHN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcgPyAnTElWRScgOiBzdGF0dXMgPT09ICdyZWNvbm5lY3RpbmcnID8gJ0NPTk5FQ1RJTkcnIDogJ09GRkxJTkUnOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17ewogICAgICAgIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwKICAgICAgICBwYWRkaW5nOiAnMnB4IDhweCcsIGJvcmRlclJhZGl1czogNCwKICAgICAgICBiYWNrZ3JvdW5kOiAndmFyKC0tem0tc3VyZmFjZS0yKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1zdXJmYWNlLTIpJywKICAgICAgfX0KICAgID4KICAgICAgPHNwYW4KICAgICAgICBzdHlsZT17ewogICAgICAgICAgd2lkdGg6IDYsIGhlaWdodDogNiwgYm9yZGVyUmFkaXVzOiAnNTAlJywKICAgICAgICAgIGJhY2tncm91bmQ6IGNvbG9yLAogICAgICAgICAgYm94U2hhZG93OiBzdGF0dXMgPT09ICdjb25uZWN0ZWQnID8gJzAgMCA1cHggJyArIGNvbG9yIDogJ25vbmUnLAogICAgICAgICAgYW5pbWF0aW9uOiBzdGF0dXMgPT09ICdjb25uZWN0ZWQnID8gJ3B1bHNlLWdsb3cgMnMgaW5maW5pdGUnIDogJ25vbmUnLAogICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsCiAgICAgICAgfX0KICAgICAgLz4KICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogJ3ZhcigtLWZvbnQtbW9uby11aSknLCBmb250U2l6ZTogMTAsIGNvbG9yIH19PgogICAgICAgIHtsYWJlbH0gwrcgMTAwbXMKICAgICAgPC9zcGFuPgogICAgPC9kaXY+CiAgKTsKfSk7CldzU3RhdHVzQmFkZ2UuZGlzcGxheU5hbWUgPSAnV3NTdGF0dXNCYWRnZSc7CgovLyDilIDilIDilIAgU3ltYm9sIFNlbGVjdG9yIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgU3ltYm9sU2VsZWN0b3IgPSBtZW1vKCh7CiAgc2VsZWN0ZWQsCiAgb25TZWxlY3QsCiAgaXNNb2JpbGUsCn06IHsKICBzZWxlY3RlZDogT3JkZXJCb29rU3ltYm9sOwogIG9uU2VsZWN0OiAoczogT3JkZXJCb29rU3ltYm9sKSA9PiB2b2lkOwogIGlzTW9iaWxlOiBib29sZWFuOwp9KSA9PiB7CiAgY29uc3QgdmlzaWJsZUNvdW50ID0gaXNNb2JpbGUgPyA2IDogMTI7CiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4V3JhcDogJ3dyYXAnLCBnYXA6IDQsIG1hcmdpbkJvdHRvbTogMTYgfX0+CiAgICAgIHtPUkRFUl9CT09LX1NZTUJPTFMuc2xpY2UoMCwgdmlzaWJsZUNvdW50KS5tYXAoc3ltID0+IHsKICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IHN5bSA9PT0gc2VsZWN0ZWQ7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAga2V5PXtzeW19CiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uU2VsZWN0KHN5bSl9CiAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17aXNBY3RpdmV9CiAgICAgICAgICAgIGFyaWEtbGFiZWw9eydTZWxlY3QgJyArIFNZTUJPTF9MQUJFTFNbc3ltXX0KICAgICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgICBwYWRkaW5nOiBpc01vYmlsZSA/ICcxMHB4IDEycHgnIDogJzRweCAxMHB4JywKICAgICAgICAgICAgICBtaW5IZWlnaHQ6IGlzTW9iaWxlID8gNDggOiAnYXV0bycsCiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA0LAogICAgICAgICAgICAgIGZvbnRTaXplOiBpc01vYmlsZSA/IDEyIDogMTEsCiAgICAgICAgICAgICAgZm9udEZhbWlseTogJ3ZhcigtLWZvbnQtbW9uby11aSknLAogICAgICAgICAgICAgIHRyYW5zaXRpb246ICdhbGwgMC4xNXMnLAogICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLAogICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLAogICAgICAgICAgICAgIC4uLihpc0FjdGl2ZQogICAgICAgICAgICAgICAgPyB7IGJhY2tncm91bmQ6ICd2YXIoLS16bS1hY2NlbnQtYmcpJywgY29sb3I6ICd2YXIoLS16bS1hY2NlbnQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLWFjY2VudC1ib3JkZXIpJyB9CiAgICAgICAgICAgICAgICA6IHsgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLCBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgIH19CiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IHsgaWYgKCFpc0FjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tem0tc3VyZmFjZS0yKSc7IH19CiAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KGUpID0+IHsgaWYgKCFpc0FjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOyB9fQogICAgICAgICAgPgogICAgICAgICAgICB7U1lNQk9MX0xBQkVMU1tzeW1dfQogICAgICAgICAgPC9idXR0b24+CiAgICAgICAgKTsKICAgICAgfSl9CiAgICA8L2Rpdj4KICApOwp9KTsKU3ltYm9sU2VsZWN0b3IuZGlzcGxheU5hbWUgPSAnU3ltYm9sU2VsZWN0b3InOwoKLy8g4pSA4pSA4pSAIERlcHRoIFNWRyBDaGFydCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IERlcHRoQ2hhcnQgPSBtZW1vKCh7CiAgYmlkcywKICBhc2tzLAogIG1pZFByaWNlLAp9OiB7CiAgYmlkczogT3JkZXJCb29rTGV2ZWxbXTsKICBhc2tzOiBPcmRlckJvb2tMZXZlbFtdOwogIG1pZFByaWNlOiBudW1iZXI7Cn0pID0+IHsKICBpZiAoYmlkcy5sZW5ndGggPT09IDAgJiYgYXNrcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiAoCiAgICAgIDxkaXYKICAgICAgICBzdHlsZT17ewogICAgICAgICAgYm9yZGVyUmFkaXVzOiAxMiwKICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywKICAgICAgICAgIGhlaWdodDogREVQVEhfVklaX0gsCiAgICAgICAgICBiYWNrZ3JvdW5kOiAndmFyKC0tem0tc3VyZmFjZS0xKScsCiAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScsCiAgICAgICAgfX0KICAgICAgPgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAxMiwgZm9udEZhbWlseTogJ3ZhcigtLWZvbnQtbW9uby11aSknLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgIExvYWRpbmcgZGVwdGggZGF0YeKApgogICAgICAgIDwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICApOwogIH0KCiAgY29uc3QgVyA9IERFUFRIX1ZJWl9XOwogIGNvbnN0IEggPSBERVBUSF9WSVpfSDsKICBjb25zdCBQQURESU5HID0geyB0b3A6IDgsIGJvdHRvbTogMjAsIGxlZnQ6IDgsIHJpZ2h0OiA4IH07CgogIGNvbnN0IGNoYXJ0VyA9IFcgLSBQQURESU5HLmxlZnQgLSBQQURESU5HLnJpZ2h0OwogIGNvbnN0IGNoYXJ0SCA9IEggLSBQQURESU5HLnRvcCAtIFBBRERJTkcuYm90dG9tOwogIGNvbnN0IG1pZFggPSBQQURESU5HLmxlZnQgKyBjaGFydFcgLyAyOwoKICBjb25zdCBiaWRMZXZlbHMgPSBiaWRzLnNsaWNlKDAsIDIwKTsKICBjb25zdCBhc2tMZXZlbHMgPSBhc2tzLnNsaWNlKDAsIDIwKTsKCiAgY29uc3QgbWF4Q3VtID0gTWF0aC5tYXgoCiAgICBiaWRMZXZlbHNbYmlkTGV2ZWxzLmxlbmd0aCAtIDFdPy5jdW1TaXplID8/IDAsCiAgICBhc2tMZXZlbHNbYXNrTGV2ZWxzLmxlbmd0aCAtIDFdPy5jdW1TaXplID8/IDAsCiAgICAwLjAwMDEsCiAgKTsKCiAgY29uc3QgYmlkUG9pbnRzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBiaWRMZXZlbHMubWFwKChsLCBpKSA9PiB7CiAgICBjb25zdCB4ID0gbWlkWCAtICgoKGkgKyAxKSAvIGJpZExldmVscy5sZW5ndGgpICogKGNoYXJ0VyAvIDIpKTsKICAgIGNvbnN0IHkgPSBQQURESU5HLnRvcCArIGNoYXJ0SCAtIChsLmN1bVNpemUgLyBtYXhDdW0pICogY2hhcnRIOwogICAgcmV0dXJuIFt4LCB5XTsKICB9KTsKCiAgY29uc3QgYXNrUG9pbnRzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBhc2tMZXZlbHMubWFwKChsLCBpKSA9PiB7CiAgICBjb25zdCB4ID0gbWlkWCArICgoKGkgKyAxKSAvIGFza0xldmVscy5sZW5ndGgpICogKGNoYXJ0VyAvIDIpKTsKICAgIGNvbnN0IHkgPSBQQURESU5HLnRvcCArIGNoYXJ0SCAtIChsLmN1bVNpemUgLyBtYXhDdW0pICogY2hhcnRIOwogICAgcmV0dXJuIFt4LCB5XTsKICB9KTsKCiAgY29uc3QgYmFzZWxpbmVZID0gUEFERElORy50b3AgKyBjaGFydEg7CgogIGNvbnN0IGJ1aWxkUGF0aCA9IChwdHM6IFtudW1iZXIsIG51bWJlcl1bXSwgc3RhcnRYOiBudW1iZXIpOiBzdHJpbmcgPT4gewogICAgaWYgKHB0cy5sZW5ndGggPT09IDApIHJldHVybiAnJzsKICAgIGxldCBkID0gJ00gJyArIHN0YXJ0WCArICcgJyArIGJhc2VsaW5lWTsKICAgIGZvciAoY29uc3QgW3gsIHldIG9mIHB0cykgZCArPSAnIEwgJyArIHggKyAnICcgKyB5OwogICAgZCArPSAnIEwgJyArIHB0c1twdHMubGVuZ3RoIC0gMV1bMF0gKyAnICcgKyBiYXNlbGluZVkgKyAnIFonOwogICAgcmV0dXJuIGQ7CiAgfTsKCiAgY29uc3QgYmlkUGF0aCA9IGJ1aWxkUGF0aChiaWRQb2ludHMsIG1pZFgpOwogIGNvbnN0IGFza1BhdGggPSBidWlsZFBhdGgoYXNrUG9pbnRzLCBtaWRYKTsKCiAgY29uc3QgYmlkR3JhZElkID0gJ3ptLWJpZC1ncmFkJzsKICBjb25zdCBhc2tHcmFkSWQgPSAnem0tYXNrLWdyYWQnOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17ewogICAgICAgIGJvcmRlclJhZGl1czogJzEycHgnLCBvdmVyZmxvdzogJ2hpZGRlbicsCiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknLAogICAgICAgIGJhY2tncm91bmQ6ICd2YXIoLS16bS1zdXJmYWNlLTEpJywKICAgICAgICB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJywKICAgICAgfX0KICAgID4KICAgICAgPHN2ZwogICAgICAgIHdpZHRoPSIxMDAlIgogICAgICAgIHZpZXdCb3g9eycwIDAgJyArIFcgKyAnICcgKyBIfQogICAgICAgIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiCiAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2Jsb2NrJywgaGVpZ2h0OiBERVBUSF9WSVpfSCB9fQogICAgICA+CiAgICAgICAgPGRlZnM+CiAgICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9e2JpZEdyYWRJZH0geDE9IjAiIHgyPSIwIiB5MT0iMCIgeTI9IjEiPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wQ29sb3I9InJnYmEoNTIsMjExLDE1MywwLjM1KSIgLz4KICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wQ29sb3I9InJnYmEoNTIsMjExLDE1MywwLjA0KSIgLz4KICAgICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9e2Fza0dyYWRJZH0geDE9IjAiIHgyPSIwIiB5MT0iMCIgeTI9IjEiPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wQ29sb3I9InJnYmEoMjUxLDExMywxMzMsMC4zNSkiIC8+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcENvbG9yPSJyZ2JhKDI1MSwxMTMsMTMzLDAuMDQpIiAvPgogICAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgICAgICA8L2RlZnM+CgogICAgICAgIHtbMC4yNSwgMC41LCAwLjc1XS5tYXAocGN0ID0+IHsKICAgICAgICAgIGNvbnN0IHkgPSBQQURESU5HLnRvcCArIGNoYXJ0SCAqICgxIC0gcGN0KTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIDxsaW5lCiAgICAgICAgICAgICAga2V5PXtwY3R9CiAgICAgICAgICAgICAgeDE9e1BBRERJTkcubGVmdH0geTE9e3l9CiAgICAgICAgICAgICAgeDI9e1cgLSBQQURESU5HLnJpZ2h0fSB5Mj17eX0KICAgICAgICAgICAgICBzdHJva2U9InZhcigtLXptLWFjY2VudC1kaW0pIgogICAgICAgICAgICAgIHN0cm9rZVdpZHRoPSIxIgogICAgICAgICAgICAvPgogICAgICAgICAgKTsKICAgICAgICB9KX0KCiAgICAgICAgPGxpbmUKICAgICAgICAgIHgxPXttaWRYfSB5MT17UEFERElORy50b3B9CiAgICAgICAgICB4Mj17bWlkWH0geTI9e1BBRERJTkcudG9wICsgY2hhcnRIfQogICAgICAgICAgc3Ryb2tlPSJyZ2JhKDI1MSwxOTEsMzYsMC4yNSkiCiAgICAgICAgICBzdHJva2VXaWR0aD0iMSIKICAgICAgICAgIHN0cm9rZURhc2hhcnJheT0iMywzIgogICAgICAgIC8+CgogICAgICAgIHtiaWRQYXRoICYmICgKICAgICAgICAgIDxwYXRoIGQ9e2JpZFBhdGh9IGZpbGw9eyd1cmwoIycgKyBiaWRHcmFkSWQgKyAnKSd9IHN0cm9rZT0icmdiYSg1MiwyMTEsMTUzLDAuNikiIHN0cm9rZVdpZHRoPSIxLjUiIC8+CiAgICAgICAgKX0KICAgICAgICB7YXNrUGF0aCAmJiAoCiAgICAgICAgICA8cGF0aCBkPXthc2tQYXRofSBmaWxsPXsndXJsKCMnICsgYXNrR3JhZElkICsgJyknfSBzdHJva2U9InJnYmEoMjUxLDExMywxMzMsMC42KSIgc3Ryb2tlV2lkdGg9IjEuNSIgLz4KICAgICAgICApfQoKICAgICAgICB7bWlkUHJpY2UgPiAwICYmICgKICAgICAgICAgIDx0ZXh0CiAgICAgICAgICAgIHg9e21pZFh9IHk9e0ggLSA0fQogICAgICAgICAgICB0ZXh0QW5jaG9yPSJtaWRkbGUiIGZvbnRTaXplPSI5IgogICAgICAgICAgICBmb250RmFtaWx5PXtGT05UX01PTk99CiAgICAgICAgICAgIGZpbGw9InJnYmEoMjUxLDE5MSwzNiwwLjgpIgogICAgICAgICAgPgogICAgICAgICAgICB7Zm9ybWF0UHJpY2UobWlkUHJpY2UpfQogICAgICAgICAgPC90ZXh0PgogICAgICAgICl9CgogICAgICAgIDx0ZXh0IHg9e1BBRERJTkcubGVmdCArIDZ9IHk9e1BBRERJTkcudG9wICsgMTJ9IGZvbnRTaXplPSI5IiBmb250RmFtaWx5PXtGT05UX01PTk99IGZpbGw9InJnYmEoNTIsMjExLDE1MywwLjYpIj4KICAgICAgICAgIEJJRAogICAgICAgIDwvdGV4dD4KICAgICAgICA8dGV4dCB4PXtXIC0gUEFERElORy5yaWdodCAtIDZ9IHk9e1BBRERJTkcudG9wICsgMTJ9IHRleHRBbmNob3I9ImVuZCIgZm9udFNpemU9IjkiIGZvbnRGYW1pbHk9e0ZPTlRfTU9OT30gZmlsbD0icmdiYSgyNTEsMTEzLDEzMywwLjYpIj4KICAgICAgICAgIEFTSwogICAgICAgIDwvdGV4dD4KICAgICAgPC9zdmc+CiAgICA8L2Rpdj4KICApOwp9KTsKRGVwdGhDaGFydC5kaXNwbGF5TmFtZSA9ICdEZXB0aENoYXJ0JzsKCi8vIOKUgOKUgOKUgCBPcmRlciBCb29rIFJvdyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IEJvb2tSb3cgPSBtZW1vKCh7CiAgbGV2ZWwsCiAgc2lkZSwKICBtYXhEZXB0aFBjdCwKfTogewogIGxldmVsOiBPcmRlckJvb2tMZXZlbDsKICBzaWRlOiAnYmlkJyB8ICdhc2snOwogIG1heERlcHRoUGN0OiBudW1iZXI7Cn0pID0+IHsKICBjb25zdCByb3dSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpOwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKCFyb3dSZWYuY3VycmVudCkgcmV0dXJuOwogICAgaWYgKGxldmVsLmRlbHRhID09PSAnbmV3JyB8fCBsZXZlbC5kZWx0YSA9PT0gJ3VwJyB8fCBsZXZlbC5kZWx0YSA9PT0gJ2Rvd24nKSB7CiAgICAgIGNvbnN0IGNscyA9IGxldmVsLmRlbHRhID09PSAnZG93bicgPyAnYW5pbWF0ZS1mbGFzaC1uZWcnIDogJ2FuaW1hdGUtZmxhc2gtcG9zJzsKICAgICAgcm93UmVmLmN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZS1mbGFzaC1wb3MnLCAnYW5pbWF0ZS1mbGFzaC1uZWcnKTsKICAgICAgdm9pZCByb3dSZWYuY3VycmVudC5vZmZzZXRXaWR0aDsKICAgICAgcm93UmVmLmN1cnJlbnQuY2xhc3NMaXN0LmFkZChjbHMpOwogICAgICBjb25zdCB0ID0gc2V0VGltZW91dCgoKSA9PiByb3dSZWYuY3VycmVudD8uY2xhc3NMaXN0LnJlbW92ZShjbHMpLCBGTEFTSF9EVVJBVElPTl9NUyk7CiAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodCk7CiAgICB9CiAgfSwgW2xldmVsLnNpemUsIGxldmVsLmRlbHRhXSk7CgogIGNvbnN0IGlzTGFyZ2UgPSBsZXZlbC5zaXplICogbGV2ZWwucHJpY2UgPiAxMDBfMDAwOwogIGNvbnN0IGlzR2lhbnQgPSBsZXZlbC5zaXplICogbGV2ZWwucHJpY2UgPiA1MDBfMDAwOwoKICBjb25zdCBkZXB0aEFscGhhID0gKGxldmVsLmRlcHRoUGN0IC8gMTAwKSAqIDAuMTggKyAwLjAyOwogIGNvbnN0IGJpZEJnID0gJ3JnYmEoNTIsMjExLDE1MywnICsgZGVwdGhBbHBoYS50b0ZpeGVkKDMpICsgJyknOwogIGNvbnN0IGFza0JnID0gJ3JnYmEoMjUxLDExMywxMzMsJyArIGRlcHRoQWxwaGEudG9GaXhlZCgzKSArICcpJzsKCiAgY29uc3QgYmFyU3R5bGUgPSBzaWRlID09PSAnYmlkJwogICAgPyB7IHJpZ2h0OiAwLCBsZWZ0OiAnYXV0bycgYXMgY29uc3QgfQogICAgOiB7IGxlZnQ6IDAsIHJpZ2h0OiAnYXV0bycgYXMgY29uc3QgfTsKCiAgcmV0dXJuICgKICAgIDxkaXYKICAgICAgcmVmPXtyb3dSZWZ9CiAgICAgIHJvbGU9InJvdyIKICAgICAgc3R5bGU9e3sKICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywKICAgICAgICBwYWRkaW5nVG9wOiAyLCBwYWRkaW5nQm90dG9tOiAyLCBwYWRkaW5nTGVmdDogOCwgcGFkZGluZ1JpZ2h0OiA4LAogICAgICAgIGN1cnNvcjogJ2RlZmF1bHQnLCB1c2VyU2VsZWN0OiAnbm9uZScsCiAgICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQgMC4xcycsCiAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsCiAgICAgIH19CiAgICA+CiAgICAgIHsvKiBEZXB0aCBiYXIgKi99CiAgICAgIDxkaXYKICAgICAgICBzdHlsZT17ewogICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogMCwgYm90dG9tOiAwLAogICAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsCiAgICAgICAgICAuLi5iYXJTdHlsZSwKICAgICAgICAgIHdpZHRoOiBsZXZlbC5kZXB0aFBjdCArICclJywKICAgICAgICAgIGJhY2tncm91bmQ6IHNpZGUgPT09ICdiaWQnID8gYmlkQmcgOiBhc2tCZywKICAgICAgICAgIG1heFdpZHRoOiAnMTAwJScsCiAgICAgICAgfX0KICAgICAgLz4KCiAgICAgIHtzaWRlID09PSAnYmlkJyA/ICgKICAgICAgICA8PgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCB3aWR0aDogODAsIHRleHRBbGlnbjogJ3JpZ2h0JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgICAgICB7Zm9ybWF0Q29tcGFjdE51bShsZXZlbC5jdW1TaXplKX0KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IHBvc2l0aW9uOiAncmVsYXRpdmUnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMSwgd2lkdGg6IDgwLCB0ZXh0QWxpZ246ICdyaWdodCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAge2xldmVsLnNpemUudG9GaXhlZCg0KX0KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IHBvc2l0aW9uOiAncmVsYXRpdmUnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMiwgZm9udFdlaWdodDogNjAwLCBmbGV4OiAxLCB0ZXh0QWxpZ246ICdyaWdodCcsIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDEpJyB9fT4KICAgICAgICAgICAge2Zvcm1hdFByaWNlKGxldmVsLnByaWNlKX0KICAgICAgICAgICAge2lzR2lhbnQgJiYgPHNwYW4gc3R5bGU9e3sgbWFyZ2luTGVmdDogNCwgZm9udFNpemU6IDksIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDAuOSknIH19PvCfkIs8L3NwYW4+fQogICAgICAgICAgICB7IWlzR2lhbnQgJiYgaXNMYXJnZSAmJiA8c3BhbiBzdHlsZT17eyBtYXJnaW5MZWZ0OiA0LCBmb250U2l6ZTogOSwgY29sb3I6ICdyZ2JhKDI1MSwxOTEsMzYsMC42KScgfX0+4pePPC9zcGFuPn0KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8Lz4KICAgICAgKSA6ICgKICAgICAgICA8PgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDEyLCBmb250V2VpZ2h0OiA2MDAsIGZsZXg6IDEsIHRleHRBbGlnbjogJ2xlZnQnLCBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMSknIH19PgogICAgICAgICAgICB7Zm9ybWF0UHJpY2UobGV2ZWwucHJpY2UpfQogICAgICAgICAgICB7aXNHaWFudCAmJiA8c3BhbiBzdHlsZT17eyBtYXJnaW5MZWZ0OiA0LCBmb250U2l6ZTogOSwgY29sb3I6ICdyZ2JhKDI1MSwxOTEsMzYsMC45KScgfX0+8J+Qizwvc3Bhbj59CiAgICAgICAgICAgIHshaXNHaWFudCAmJiBpc0xhcmdlICYmIDxzcGFuIHN0eWxlPXt7IG1hcmdpbkxlZnQ6IDQsIGZvbnRTaXplOiA5LCBjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjYpJyB9fT7il488L3NwYW4+fQogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCB3aWR0aDogODAsIHRleHRBbGlnbjogJ2xlZnQnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIHtsZXZlbC5zaXplLnRvRml4ZWQoNCl9CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTEsIHdpZHRoOiA4MCwgdGV4dEFsaWduOiAnbGVmdCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAge2Zvcm1hdENvbXBhY3ROdW0obGV2ZWwuY3VtU2l6ZSl9CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC8+CiAgICAgICl9CiAgICA8L2Rpdj4KICApOwp9KTsKQm9va1Jvdy5kaXNwbGF5TmFtZSA9ICdCb29rUm93JzsKCi8vIOKUgOKUgOKUgCBTcHJlYWQgQmFyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgU3ByZWFkQmFyID0gbWVtbygoewogIHNwcmVhZCwKICBzcHJlYWRQY3QsCiAgbWlkUHJpY2UsCiAgYmlkQXNrUmF0aW8sCiAgdG90YWxCaWRTaXplLAogIHRvdGFsQXNrU2l6ZSwKfTogewogIHNwcmVhZDogbnVtYmVyOwogIHNwcmVhZFBjdDogbnVtYmVyOwogIG1pZFByaWNlOiBudW1iZXI7CiAgYmlkQXNrUmF0aW86IG51bWJlcjsKICB0b3RhbEJpZFNpemU6IG51bWJlcjsKICB0b3RhbEFza1NpemU6IG51bWJlcjsKfSkgPT4gewogIGNvbnN0IGJpZFBjdCA9IGJpZEFza1JhdGlvICogMTAwOwogIGNvbnN0IGFza1BjdCA9ICgxIC0gYmlkQXNrUmF0aW8pICogMTAwOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17ewogICAgICAgIHBhZGRpbmc6ICc4cHggOHB4JywKICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tem0tYWNjZW50LWRpbSknLAogICAgICAgIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS16bS1hY2NlbnQtZGltKScsCiAgICAgIH19CiAgICA+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgbWFyZ2luQm90dG9tOiA2IH19PgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJyB9fT4KICAgICAgICAgIHtmb3JtYXRQcmljZShtaWRQcmljZSl9CiAgICAgICAgPC9zcGFuPgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDEwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICBTcHJlYWQ6IHtmb3JtYXRQcmljZShzcHJlYWQpfSAoe3NwcmVhZFBjdC50b0ZpeGVkKDQpfSUpCiAgICAgICAgPC9zcGFuPgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYKICAgICAgICBzdHlsZT17ewogICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsIGhlaWdodDogOCwgYm9yZGVyUmFkaXVzOiAnNTB2dycsCiAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICd2YXIoLS16bS1zdXJmYWNlLTIpJywKICAgICAgICB9fQogICAgICA+CiAgICAgICAgPGRpdgogICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IDAsIHRvcDogMCwgaGVpZ2h0OiAnMTAwJScsCiAgICAgICAgICAgIHRyYW5zaXRpb246ICdhbGwgMC4zcycsCiAgICAgICAgICAgIGJvcmRlclRvcExlZnRSYWRpdXM6ICc1MCUnLCBib3JkZXJCb3R0b21MZWZ0UmFkaXVzOiAnNTAlJywKICAgICAgICAgICAgd2lkdGg6IGJpZFBjdCArICclJywgYmFja2dyb3VuZDogJ3JnYmEoNTIsMjExLDE1MywwLjcpJywgd2lsbENoYW5nZTogJ3dpZHRoJywKICAgICAgICAgIH19CiAgICAgICAgLz4KICAgICAgICA8ZGl2CiAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywgcmlnaHQ6IDAsIHRvcDogMCwgaGVpZ2h0OiAnMTAwJScsCiAgICAgICAgICAgIHRyYW5zaXRpb246ICdhbGwgMC4zcycsCiAgICAgICAgICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiAnNTAlJywgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM6ICc1MCUnLAogICAgICAgICAgICB3aWR0aDogYXNrUGN0ICsgJyUnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTEsMTEzLDEzMywwLjcpJywgd2lsbENoYW5nZTogJ3dpZHRoJywKICAgICAgICAgIH19CiAgICAgICAgLz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Ub3A6IDQgfX0+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogJ3ZhcigtLWZvbnQtbW9uby11aSknLCBmb250U2l6ZTogOSwgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMC43KScgfX0+CiAgICAgICAgICBCSUQge2JpZFBjdC50b0ZpeGVkKDEpfSUgwrcge2Zvcm1hdENvbXBhY3ROdW0odG90YWxCaWRTaXplKX0KICAgICAgICA8L3NwYW4+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogJ3ZhcigtLWZvbnQtbW9uby11aSknLCBmb250U2l6ZTogOSwgY29sb3I6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuNyknIH19PgogICAgICAgICAge2Zvcm1hdENvbXBhY3ROdW0odG90YWxBc2tTaXplKX0gwrcge2Fza1BjdC50b0ZpeGVkKDEpfSUgQVNLCiAgICAgICAgPC9zcGFuPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpTcHJlYWRCYXIuZGlzcGxheU5hbWUgPSAnU3ByZWFkQmFyJzsKCi8vIOKUgOKUgOKUgCBMaXF1aWRhdGlvbiBSb3cg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBMaXFSb3cgPSBtZW1vKCh7IGV2ZW50IH06IHsgZXZlbnQ6IExpcXVpZGF0aW9uRXZlbnQgfSkgPT4gewogIGNvbnN0IGlzTG9uZyA9IGV2ZW50LnNpZGUgPT09ICdTRUxMJzsKICBjb25zdCBjb2xvciA9IGlzTG9uZyA/ICdyZ2JhKDI1MSwxMTMsMTMzLDEpJyA6ICdyZ2JhKDUyLDIxMSwxNTMsMSknOwogIGNvbnN0IGxhYmVsID0gaXNMb25nID8gJ0xPTkcgTElRJyA6ICdTSE9SVCBMSVEnOwogIGNvbnN0IHN5bSA9IGV2ZW50LnN5bWJvbC5yZXBsYWNlKCdVU0RUJywgJycpOwoKICBjb25zdCBhZ28gPSB1c2VNZW1vKCgpID0+IHsKICAgIGNvbnN0IGRpZmYgPSBEYXRlLm5vdygpIC0gZXZlbnQudGltZXN0YW1wOwogICAgaWYgKGRpZmYgPCA2MDAwMCkgcmV0dXJuIE1hdGguZmxvb3IoZGlmZiAvIDEwMDApICsgJ3MnOwogICAgcmV0dXJuIE1hdGguZmxvb3IoZGlmZiAvIDYwMDAwKSArICdtJzsKICB9LCBbZXZlbnQudGltZXN0YW1wXSk7CgogIHJldHVybiAoCiAgICA8ZGl2CiAgICAgIHN0eWxlPXt7CiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA4LAogICAgICAgIHBhZGRpbmc6ICc2cHggMTJweCcsCiAgICAgICAgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLAogICAgICAgIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS16bS1kaXZpZGVyKScsCiAgICAgICAgYmFja2dyb3VuZDogZXZlbnQuaXNXaGFsZSA/ICdyZ2JhKDI1MSwxOTEsMzYsMC4wNCknIDogJ3RyYW5zcGFyZW50JywKICAgICAgfX0KICAgID4KICAgICAge2V2ZW50LmlzV2hhbGUgJiYgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDEwIH19PvCfkIs8L3NwYW4+fQogICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiAndmFyKC0tZm9udC1tb25vLXVpKScsIGZvbnRTaXplOiAxMCwgZm9udFdlaWdodDogNjAwLCB3aWR0aDogODAsIGNvbG9yIH19PgogICAgICAgIHtsYWJlbH0KICAgICAgPC9zcGFuPgogICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMCwgd2lkdGg6IDQ4LCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAge3N5bX0KICAgICAgPC9zcGFuPgogICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgIHtmb3JtYXRQcmljZShldmVudC5sYXN0RmlsbGVkUHJpY2UpfQogICAgICA8L3NwYW4+CiAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDEwLCBmb250V2VpZ2h0OiA2MDAsIG1hcmdpbkxlZnQ6ICdhdXRvJywgY29sb3I6IGV2ZW50LmlzTWFqb3IgPyAncmdiYSgyNTEsMTkxLDM2LDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgICR7Zm9ybWF0Q29tcGFjdE51bShldmVudC51c2RWYWx1ZSl9CiAgICAgIDwvc3Bhbj4KICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTAsIHdpZHRoOiAyNCwgdGV4dEFsaWduOiAncmlnaHQnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICB7YWdvfQogICAgICA8L3NwYW4+CiAgICA8L2Rpdj4KICApOwp9KTsKTGlxUm93LmRpc3BsYXlOYW1lID0gJ0xpcVJvdyc7CgovLyDilIDilIDilIAgTWFpbiBPcmRlckJvb2sgUGFnZSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IE9yZGVyQm9vayA9IG1lbW8oKCkgPT4gewogIGNvbnN0IFtzeW1ib2wsIHNldFN5bWJvbF0gPSB1c2VTdGF0ZTxPcmRlckJvb2tTeW1ib2w+KCdidGN1c2R0Jyk7CiAgY29uc3QgeyBpc01vYmlsZSwgaXNUYWJsZXQgfSA9IHVzZUJyZWFrcG9pbnQoKTsKICBjb25zdCBib29rID0gdXNlT3JkZXJCb29rKHN5bWJvbCk7CiAgY29uc3QgbGlxID0gdXNlTGlxdWlkYXRpb25zKCk7CiAgY29uc3QgbW91bnRlZFJlZiA9IHVzZVJlZih0cnVlKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7CiAgICByZXR1cm4gKCkgPT4geyBtb3VudGVkUmVmLmN1cnJlbnQgPSBmYWxzZTsgfTsKICB9LCBbXSk7CgogIGNvbnN0IGhhbmRsZVNlbGVjdFN5bWJvbCA9IHVzZUNhbGxiYWNrKChzOiBPcmRlckJvb2tTeW1ib2wpID0+IHsKICAgIHNldFN5bWJvbChzKTsKICB9LCBbXSk7CgogIGNvbnN0IG1heERlcHRoUGN0ID0gdXNlTWVtbygoKSA9PiB7CiAgICBjb25zdCBtYXhCaWQgPSBib29rLmJpZHNbYm9vay5iaWRzLmxlbmd0aCAtIDFdPy5kZXB0aFBjdCA/PyAxMDA7CiAgICBjb25zdCBtYXhBc2sgPSBib29rLmFza3NbYm9vay5hc2tzLmxlbmd0aCAtIDFdPy5kZXB0aFBjdCA/PyAxMDA7CiAgICByZXR1cm4gTWF0aC5tYXgobWF4QmlkLCBtYXhBc2ssIDEpOwogIH0sIFtib29rLmJpZHMsIGJvb2suYXNrc10pOwoKICBjb25zdCByZWNlbnRMaXFzID0gdXNlTWVtbygoKSA9PiBsaXEuZXZlbnRzLnNsaWNlKDAsIDQwKSwgW2xpcS5ldmVudHNdKTsKCiAgY29uc3QgbGlxTG9uZ1RvdGFsID0gZm9ybWF0Q29tcGFjdE51bShsaXEuc3RhdHMudG90YWxMb25nTGlxVXNkKTsKICBjb25zdCBsaXFTaG9ydFRvdGFsID0gZm9ybWF0Q29tcGFjdE51bShsaXEuc3RhdHMudG90YWxTaG9ydExpcVVzZCk7CgogIC8vIE1vYmlsZTogc3RhY2sgdmVydGljYWxseSwgZGVza3RvcDogc2lkZSBieSBzaWRlCiAgY29uc3QgbWFpbkdyaWRTdHlsZSA9IHVzZU1lbW8oKCkgPT4gKHsKICAgIGRpc3BsYXk6ICdncmlkJywKICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGlzTW9iaWxlID8gJzFmcicgOiBpc1RhYmxldCA/ICcxZnInIDogJ3JlcGVhdCgzLDFmciknLAogICAgZ2FwOiAxNiwKICB9KSwgW2lzTW9iaWxlLCBpc1RhYmxldF0pOwoKICBjb25zdCBzdGF0c0dyaWRTdHlsZSA9IHVzZU1lbW8oKCkgPT4gKHsKICAgIGRpc3BsYXk6ICdncmlkJywKICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGlzTW9iaWxlID8gJ3JlcGVhdCgyLDFmciknIDogJ3JlcGVhdCg0LDFmciknLAogICAgZ2FwOiAxMiwKICB9KSwgW2lzTW9iaWxlXSk7CgogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGdhcDogMTYgfX0gcm9sZT0ibWFpbiIgYXJpYS1sYWJlbD0iTGl2ZSBPcmRlciBCb29rIj4KCiAgICAgIHsvKiBIZWFkZXIgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4V3JhcDogJ3dyYXAnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAxMiB9fT4KICAgICAgICA8aDEgc3R5bGU9e3sKICAgICAgICAgIGZvbnRTaXplOiAyMCwgZm9udFdlaWdodDogNzAwLCBmb250RmFtaWx5OiAndmFyKC0tZm9udC1tb25vLXVpKScsIG1hcmdpbjogMCwKICAgICAgICAgIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHZhcigtLXptLWFjY2VudCkgMCUsIHZhcigtLXptLXZpb2xldCkgMTAwJSknLAogICAgICAgICAgV2Via2l0QmFja2dyb3VuZENsaXA6ICd0ZXh0JywgV2Via2l0VGV4dEZpbGxDb2xvcjogJ3RyYW5zcGFyZW50JywgYmFja2dyb3VuZENsaXA6ICd0ZXh0JywKICAgICAgICB9fT4KICAgICAgICAgIExpdmUgT3JkZXIgQm9vawogICAgICAgIDwvaDE+CiAgICAgICAgPFdzU3RhdHVzQmFkZ2Ugc3RhdHVzPXtib29rLndzU3RhdHVzfSAvPgogICAgICAgIDxkaXYKICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwKICAgICAgICAgICAgcGFkZGluZzogJzJweCA4cHgnLCBib3JkZXJSYWRpdXM6IDQsCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICd2YXIoLS16bS1nbGFzcy1iZyknLCBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScsCiAgICAgICAgICB9fQogICAgICAgID4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIERFUFRIMjAgwrcgQmluYW5jZSBTcG90CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgey8qIFN5bWJvbCBTZWxlY3RvciAqL30KICAgICAgPFN5bWJvbFNlbGVjdG9yIHNlbGVjdGVkPXtzeW1ib2x9IG9uU2VsZWN0PXtoYW5kbGVTZWxlY3RTeW1ib2x9IGlzTW9iaWxlPXtpc01vYmlsZX0gLz4KCiAgICAgIHsvKiBNYWluIGdyaWQgKi99CiAgICAgIDxkaXYgc3R5bGU9e21haW5HcmlkU3R5bGV9PgoKICAgICAgICB7Lyog4pSA4pSAIE9yZGVyIEJvb2sgUGFuZWwg4pSA4pSAICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJywKICAgICAgICAgIGdyaWRDb2x1bW46IGlzTW9iaWxlID8gJzEnIDogJ3NwYW4gMicsCiAgICAgICAgICBiYWNrZ3JvdW5kOiAndmFyKC0tem0tZ2xhc3MtYmcpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknLAogICAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnLAogICAgICAgIH19PgoKICAgICAgICAgIHsvKiBQYW5lbCBoZWFkZXIgKi99CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7CiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsCiAgICAgICAgICAgIHBhZGRpbmc6ICcxMHB4IDE2cHgnLAogICAgICAgICAgICBib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScsCiAgICAgICAgICB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+CiAgICAgICAgICAgICAgPEFjdGl2aXR5IHNpemU9ezE0fSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoOTYsMTY1LDI1MCwwLjgpJyB9fSAvPgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEyLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgICAgICB7U1lNQk9MX0xBQkVMU1tzeW1ib2xdfQogICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICBUb3AgMjAgTGV2ZWxzCiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIHsvKiBEZXB0aCBDaGFydCAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogMTIgfX0+CiAgICAgICAgICAgIDxEZXB0aENoYXJ0IGJpZHM9e2Jvb2suYmlkc30gYXNrcz17Ym9vay5hc2tzfSBtaWRQcmljZT17Ym9vay5taWRQcmljZX0gLz4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIHsvKiBTcHJlYWQgcm93ICovfQogICAgICAgICAgPFNwcmVhZEJhcgogICAgICAgICAgICBzcHJlYWQ9e2Jvb2suc3ByZWFkfQogICAgICAgICAgICBzcHJlYWRQY3Q9e2Jvb2suc3ByZWFkUGN0fQogICAgICAgICAgICBtaWRQcmljZT17Ym9vay5taWRQcmljZX0KICAgICAgICAgICAgYmlkQXNrUmF0aW89e2Jvb2suYmlkQXNrUmF0aW99CiAgICAgICAgICAgIHRvdGFsQmlkU2l6ZT17Ym9vay50b3RhbEJpZFNpemV9CiAgICAgICAgICAgIHRvdGFsQXNrU2l6ZT17Ym9vay50b3RhbEFza1NpemV9CiAgICAgICAgICAvPgoKICAgICAgICAgIHsvKiBCb29rIHRhYmxlIGhlYWRlciAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgICAgZGlzcGxheTogJ2dyaWQnLAogICAgICAgICAgICBncmlkVGVtcGxhdGVDb2x1bW5zOiAnMWZyIDFmcicsCiAgICAgICAgICAgIHBhZGRpbmc6ICc2cHggOHB4JywKICAgICAgICAgICAgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknLAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAndmFyKC0tem0tc3VyZmFjZS0xKScsCiAgICAgICAgICB9fT4KICAgICAgICAgICAgey8qIEJpZCBoZWFkZXIgKi99CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBwYWRkaW5nUmlnaHQ6IDgsIGJvcmRlclJpZ2h0OiAnMXB4IHNvbGlkIHZhcigtLXptLWFjY2VudC1kaW0pJyB9fT4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiAndmFyKC0tZm9udC1tb25vLXVpKScsIGZvbnRTaXplOiAxMCwgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjFlbScsIHdpZHRoOiA4MCwgdGV4dEFsaWduOiAncmlnaHQnLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywwLjUpJyB9fT5Ub3RhbDwvc3Bhbj4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiAndmFyKC0tZm9udC1tb25vLXVpKScsIGZvbnRTaXplOiAxMCwgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjFlbScsIHdpZHRoOiA4MCwgdGV4dEFsaWduOiAncmlnaHQnLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywwLjUpJyB9fT5TaXplPC9zcGFuPgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEwLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJywgbGV0dGVyU3BhY2luZzogJzAuMWVtJywgZmxleDogMSwgdGV4dEFsaWduOiAncmlnaHQnLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywwLjgpJyB9fT5CSUQ8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICB7LyogQXNrIGhlYWRlciAqL30KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIHBhZGRpbmdMZWZ0OiA4IH19PgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEwLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJywgbGV0dGVyU3BhY2luZzogJzAuMWVtJywgZmxleDogMSwgdGV4dEFsaWduOiAnbGVmdCcsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjgpJyB9fT5BU0s8L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogJ3ZhcigtLWZvbnQtbW9uby11aSknLCBmb250U2l6ZTogMTAsIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLCBsZXR0ZXJTcGFjaW5nOiAnMC4xZW0nLCB3aWR0aDogODAsIHRleHRBbGlnbjogJ2xlZnQnLCBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMC41KScgfX0+U2l6ZTwvc3Bhbj4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiAndmFyKC0tZm9udC1tb25vLXVpKScsIGZvbnRTaXplOiAxMCwgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjFlbScsIHdpZHRoOiA4MCwgdGV4dEFsaWduOiAnbGVmdCcsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjUpJyB9fT5Ub3RhbDwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICB7LyogQm9vayByb3dzIHNpZGUgYnkgc2lkZSAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAnMWZyIDFmcicgfX0+CiAgICAgICAgICAgIHsvKiBCaWRzICovfQogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlclJpZ2h0OiAnMXB4IHNvbGlkIHZhcigtLXptLWFjY2VudC1kaW0pJyB9fSByb2xlPSJsaXN0IiBhcmlhLWxhYmVsPSJCaWQgbGV2ZWxzIj4KICAgICAgICAgICAgICB7Ym9vay5iaWRzLm1hcCgobGV2ZWwpID0+ICgKICAgICAgICAgICAgICAgIDxCb29rUm93IGtleT17J2JpZC0nICsgbGV2ZWwucHJpY2V9IGxldmVsPXtsZXZlbH0gc2lkZT0iYmlkIiBtYXhEZXB0aFBjdD17bWF4RGVwdGhQY3R9IC8+CiAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICB7LyogQXNrcyAqL30KICAgICAgICAgICAgPGRpdiByb2xlPSJsaXN0IiBhcmlhLWxhYmVsPSJBc2sgbGV2ZWxzIj4KICAgICAgICAgICAgICB7Ym9vay5hc2tzLm1hcCgobGV2ZWwpID0+ICgKICAgICAgICAgICAgICAgIDxCb29rUm93IGtleT17J2Fzay0nICsgbGV2ZWwucHJpY2V9IGxldmVsPXtsZXZlbH0gc2lkZT0iYXNrIiBtYXhEZXB0aFBjdD17bWF4RGVwdGhQY3R9IC8+CiAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiDilIDilIAgTGlxdWlkYXRpb24gRmVlZCBQYW5lbCDilIDilIAgKi99CiAgICAgICAgPGRpdiBzdHlsZT17ewogICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLCBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLAogICAgICAgICAgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywKICAgICAgICAgIGJvcmRlclJhZGl1czogJzEycHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJywKICAgICAgICB9fT4KCiAgICAgICAgICB7LyogTGlxIHBhbmVsIGhlYWRlciAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywKICAgICAgICAgICAgcGFkZGluZzogJzEwcHggMTZweCcsIGZsZXhTaHJpbms6IDAsCiAgICAgICAgICAgIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywKICAgICAgICAgIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCB9fT4KICAgICAgICAgICAgICA8WmFwIHNpemU9ezE0fSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjgpJyB9fSAvPgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEyLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgICAgICBMaXF1aWRhdGlvbnMKICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPFdzU3RhdHVzQmFkZ2Ugc3RhdHVzPXtsaXEud3NTdGF0dXN9IC8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgey8qIExpcSBzdGF0cyAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgICAgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAnMWZyIDFmcicsIGZsZXhTaHJpbms6IDAsCiAgICAgICAgICAgIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywKICAgICAgICAgIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJpZ2h0OiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknIH19PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogJ3ZhcigtLWZvbnQtbW9uby11aSknLCBmb250U2l6ZTogOSwgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIG1hcmdpbkJvdHRvbTogMiwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgICAgICAgICAgTG9uZyBMaXEgKGFsbCkKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICAgICAgICAgIDxUcmVuZGluZ0Rvd24gc2l6ZT17MTF9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjgpJyB9fSAvPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICdyZ2JhKDI1MSwxMTMsMTMzLDEpJyB9fT4KICAgICAgICAgICAgICAgICAgJHtsaXFMb25nVG90YWx9CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6ICc4cHggMTJweCcgfX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiAndmFyKC0tZm9udC1tb25vLXVpKScsIGZvbnRTaXplOiA5LCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJywgbWFyZ2luQm90dG9tOiAyLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgICAgICBTaG9ydCBMaXEgKGFsbCkKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICAgICAgICAgIDxUcmVuZGluZ1VwIHNpemU9ezExfSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywwLjgpJyB9fSAvPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH19PgogICAgICAgICAgICAgICAgICAke2xpcVNob3J0VG90YWx9CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgey8qIFBlci1taW51dGUgcmF0ZSAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA4LAogICAgICAgICAgICBwYWRkaW5nOiAnNnB4IDEycHgnLCBmbGV4U2hyaW5rOiAwLAogICAgICAgICAgICBib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tem0tYWNjZW50LWRpbSknLAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAndmFyKC0tem0tc3VyZmFjZS0xKScsCiAgICAgICAgICB9fT4KICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgc2l6ZT17MTF9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDAuNiknIH19IC8+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgICAge2xpcS5zdGF0cy5ldmVudHNQZXJNaW51dGV9IGV2ZW50cy9taW4KICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICB7bGlxLnN0YXRzLmxhcmdlc3RFdmVudCAmJiAoCiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTAsIG1hcmdpbkxlZnQ6ICdhdXRvJywgY29sb3I6ICdyZ2JhKDI1MSwxOTEsMzYsMC44KScgfX0+CiAgICAgICAgICAgICAgICBMYXJnZXN0OiAke2Zvcm1hdENvbXBhY3ROdW0obGlxLnN0YXRzLmxhcmdlc3RFdmVudC51c2RWYWx1ZSl9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICApfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgey8qIExpcSBmZWVkIC0gc2Nyb2xsYWJsZSAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSwgb3ZlcmZsb3dZOiAnYXV0bycsIG1heEhlaWdodDogaXNNb2JpbGUgPyAzMDAgOiA1MjAgfX0+CiAgICAgICAgICAgIHtyZWNlbnRMaXFzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIHBhZGRpbmc6ICc0OHB4IDAnLCBnYXA6IDggfX0+CiAgICAgICAgICAgICAgICA8WmFwIHNpemU9ezI0fSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoMTQ4LDE2MywxODQsMC4yKScgfX0gLz4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEyLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICAgICAgV2FpdGluZyBmb3IgbGlxdWlkYXRpb25z4oCmCiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiAndmFyKC0tZm9udC1tb25vLXVpKScsIGZvbnRTaXplOiAxMCwgY29sb3I6ICdyZ2JhKDE0OCwxNjMsMTg0LDAuMiknIH19PgogICAgICAgICAgICAgICAgICBGdXR1cmVzIG1hcmtldCDCtyBCaW5hbmNlCiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgcmVjZW50TGlxcy5tYXAoZXYgPT4gKAogICAgICAgICAgICAgICAgPExpcVJvdyBrZXk9e2V2LmlkfSBldmVudD17ZXZ9IC8+CiAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBTdGF0cyBiYXIgKi99CiAgICAgIDxkaXYgc3R5bGU9e3N0YXRzR3JpZFN0eWxlfT4KICAgICAgICB7WwogICAgICAgICAgeyBsYWJlbDogJ0Jlc3QgQmlkJywgIHZhbHVlOiBib29rLmJpZHNbMF0gPyBmb3JtYXRQcmljZShib29rLmJpZHNbMF0ucHJpY2UpIDogJ+KAlCcsIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDEpJyB9LAogICAgICAgICAgeyBsYWJlbDogJ0Jlc3QgQXNrJywgIHZhbHVlOiBib29rLmFza3NbMF0gPyBmb3JtYXRQcmljZShib29rLmFza3NbMF0ucHJpY2UpIDogJ+KAlCcsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywxKScgfSwKICAgICAgICAgIHsgbGFiZWw6ICdNaWQgUHJpY2UnLCB2YWx1ZTogZm9ybWF0UHJpY2UoYm9vay5taWRQcmljZSksIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJyB9LAogICAgICAgICAgeyBsYWJlbDogJ1NwcmVhZCcsICAgIHZhbHVlOiBmb3JtYXRQcmljZShib29rLnNwcmVhZCkgKyAnICgnICsgYm9vay5zcHJlYWRQY3QudG9GaXhlZCg0KSArICclKScsIGNvbG9yOiAncmdiYSgxNjcsMTM5LDI1MCwxKScgfSwKICAgICAgICBdLm1hcChzdGF0ID0+ICgKICAgICAgICAgIDxkaXYKICAgICAgICAgICAga2V5PXtzdGF0LmxhYmVsfQogICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgIHBhZGRpbmc6ICcxMnB4IDE2cHgnLAogICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd2YXIoLS16bS1nbGFzcy1iZyknLCBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScsCiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnLAogICAgICAgICAgICB9fQogICAgICAgICAgPgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6ICd2YXIoLS1mb250LW1vbm8tdWkpJywgZm9udFNpemU6IDEwLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJywgbWFyZ2luQm90dG9tOiA0LCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgICAge3N0YXQubGFiZWx9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBzdGF0LmNvbG9yIH19PgogICAgICAgICAgICAgIHtzdGF0LnZhbHVlfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICkpfQogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpPcmRlckJvb2suZGlzcGxheU5hbWUgPSAnT3JkZXJCb29rJzsKCmV4cG9ydCBkZWZhdWx0IE9yZGVyQm9vazsK";
const C1 = "LyoqCiAqIFBvcnRmb2xpby50c3gg4oCUIFpFUsOYIE1FUklESUFOIDIwMjYgcHVzaDg2CiAqIHB1c2g4NjogTUFOVUFMIEVOVFJZIHBvcnRmb2xpbyB0cmFja2VyIOKAlCBubyB3YWxsZXQgY29ubmVjdCByZXF1aXJlZC4KICogUGVyc2lzdGVudCB2aWEgbG9jYWxTdG9yYWdlLiBQbkwsIGFsbG9jYXRpb24sIDI0aCBjaGFuZ2UsIHRvdGFscy4KICogLSBSZWFjdC5tZW1vICsgZGlzcGxheU5hbWUg4pyTCiAqIC0gcmdiYSgpIG9ubHkg4pyTICBaZXJvIGNsYXNzTmFtZSDinJMgIFplcm8gdGVtcGxhdGUgbGl0ZXJhbHMgaW4gSlNYIOKckwogKiAtIHVzZUNhbGxiYWNrICsgdXNlTWVtbyDinJMgIG1vdW50ZWRSZWYg4pyTICBPYmplY3QuZnJlZXplIOKckwogKi8KCmltcG9ydCBSZWFjdCwgeyBtZW1vLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBtb3Rpb24sIEFuaW1hdGVQcmVzZW5jZSB9IGZyb20gJ2ZyYW1lci1tb3Rpb24nOwppbXBvcnQgeyB1c2VDcnlwdG8gfSBmcm9tICdAL2NvbnRleHRzL0NyeXB0b0NvbnRleHQnOwppbXBvcnQgeyB1c2VCcmVha3BvaW50IH0gZnJvbSAnQC9ob29rcy91c2VCcmVha3BvaW50JzsKCmNvbnN0IEMgPSBPYmplY3QuZnJlZXplKHsKICBiZzogICAgICAgICAgJ3JnYmEoNiw4LDE0LDEpJywKICBjYXJkOiAgICAgICAgJ3JnYmEoMTQsMTcsMjgsMSknLAogIGNhcmRIb3ZlcjogICAncmdiYSgxOCwyMiwzNiwxKScsCiAgYm9yZGVyOiAgICAgICdyZ2JhKDMyLDQyLDY4LDEpJywKICBhY2NlbnQ6ICAgICAgJ3JnYmEoMCwyMzgsMjU1LDEpJywKICBhY2NlbnREaW06ICAgJ3JnYmEoMCwyMzgsMjU1LDAuMSknLAogIHBvc2l0aXZlOiAgICAncmdiYSgzNCwyNTUsMTcwLDEpJywKICBwb3NEaW06ICAgICAgJ3JnYmEoMzQsMjU1LDE3MCwwLjA4KScsCiAgbmVnYXRpdmU6ICAgICdyZ2JhKDI1NSw2OCwxMzYsMSknLAogIG5lZ0RpbTogICAgICAncmdiYSgyNTUsNjgsMTM2LDAuMDgpJywKICB0ZXh0UHJpbWFyeTogJ3JnYmEoMjQwLDI0MCwyNDgsMSknLAogIHRleHRTZWM6ICAgICAncmdiYSgxMzgsMTM4LDE1OCwxKScsCiAgdmlvbGV0OiAgICAgICdyZ2JhKDE3NiwxMzAsMjU1LDEpJywKICB2aW9sZXREaW06ICAgJ3JnYmEoMTc2LDEzMCwyNTUsMC4xKScsCiAgaW5wdXQ6ICAgICAgICdyZ2JhKDIyLDI4LDQ4LDEpJywKICBpbnB1dEJvcmRlcjogJ3JnYmEoNDgsNjIsMTAwLDEpJywKfSk7Cgpjb25zdCBGT05UX01PTk8gPSAiJ0pldEJyYWlucyBNb25vJywgbW9ub3NwYWNlIjsKY29uc3QgRk9OVF9VSSAgID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7Cgpjb25zdCBMU19LRVkgPSAnem1fcG9ydGZvbGlvX3YxJzsKCmNvbnN0IFRBQlMgPSBPYmplY3QuZnJlZXplKFsnSG9sZGluZ3MnLCAnQWxsb2NhdGlvbicsICdQZXJmb3JtYW5jZSddIGFzIGNvbnN0KTsKdHlwZSBUYWIgPSB0eXBlb2YgVEFCU1tudW1iZXJdOwoKZXhwb3J0IGludGVyZmFjZSBIb2xkaW5nIHsKICBpZDogc3RyaW5nOwogIHN5bWJvbDogc3RyaW5nOwogIG5hbWU6IHN0cmluZzsKICBxdHk6IG51bWJlcjsKICBhdmdCdXk6IG51bWJlcjsgICAvLyBhdmVyYWdlIGJ1eSBwcmljZSBVU0QKICBhZGRlZEF0OiBudW1iZXI7Cn0KCmZ1bmN0aW9uIGxvYWRIb2xkaW5ncygpOiBIb2xkaW5nW10gewogIHRyeSB7CiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMU19LRVkpOwogICAgaWYgKCFyYXcpIHJldHVybiBbXTsKICAgIHJldHVybiBKU09OLnBhcnNlKHJhdykgYXMgSG9sZGluZ1tdOwogIH0gY2F0Y2ggeyByZXR1cm4gW107IH0KfQoKZnVuY3Rpb24gc2F2ZUhvbGRpbmdzKGg6IEhvbGRpbmdbXSk6IHZvaWQgewogIHRyeSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKExTX0tFWSwgSlNPTi5zdHJpbmdpZnkoaCkpOyB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIGZtdFVzZChuOiBudW1iZXIsIGRlY2ltYWxzID0gMik6IHN0cmluZyB7CiAgaWYgKG4gPj0gMWU5KSByZXR1cm4gJyQnICsgKG4gLyAxZTkpLnRvRml4ZWQoMikgKyAnQic7CiAgaWYgKG4gPj0gMWU2KSByZXR1cm4gJyQnICsgKG4gLyAxZTYpLnRvRml4ZWQoMikgKyAnTSc7CiAgaWYgKG4gPj0gMWUzKSByZXR1cm4gJyQnICsgbi50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogZGVjaW1hbHMsIG1heGltdW1GcmFjdGlvbkRpZ2l0czogZGVjaW1hbHMgfSk7CiAgcmV0dXJuICckJyArIG4udG9GaXhlZChkZWNpbWFscyk7Cn0KCmZ1bmN0aW9uIHBjdChhOiBudW1iZXIsIGI6IG51bWJlcik6IHN0cmluZyB7CiAgaWYgKGIgPT09IDApIHJldHVybiAn4oCUJzsKICByZXR1cm4gKChhIC8gYiAtIDEpICogMTAwKS50b0ZpeGVkKDIpICsgJyUnOwp9CgovLyDilIDilIDilIAgQ29sb3Igd2hlZWwgZm9yIGFsbG9jYXRpb24g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IEFMTE9DX0NPTE9SUyA9IE9iamVjdC5mcmVlemUoWwogICdyZ2JhKDAsMjM4LDI1NSwxKScsCiAgJ3JnYmEoMzQsMjU1LDE3MCwxKScsCiAgJ3JnYmEoMTc2LDEzMCwyNTUsMSknLAogICdyZ2JhKDI1NSwxNzAsMCwxKScsCiAgJ3JnYmEoMjU1LDY4LDEzNiwxKScsCiAgJ3JnYmEoODAsMTYwLDI1NSwxKScsCiAgJ3JnYmEoMjU1LDIyMCw1MCwxKScsCiAgJ3JnYmEoMjU1LDEwMCwyMDAsMSknLApdKTsKCi8vIOKUgOKUgOKUgCBJbmxpbmUgc3BhcmtsaW5lIFNWRyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKY29uc3QgU3BhcmtsaW5lID0gbWVtbygoeyB2YWx1ZXMsIHBvc2l0aXZlIH06IHsgdmFsdWVzOiBudW1iZXJbXTsgcG9zaXRpdmU6IGJvb2xlYW4gfSkgPT4gewogIGlmICh2YWx1ZXMubGVuZ3RoIDwgMikgcmV0dXJuIG51bGw7CiAgY29uc3QgbWluID0gTWF0aC5taW4oLi4udmFsdWVzKTsKICBjb25zdCBtYXggPSBNYXRoLm1heCguLi52YWx1ZXMpOwogIGNvbnN0IHJhbmdlID0gbWF4IC0gbWluIHx8IDE7CiAgY29uc3QgVyA9IDYwLCBIID0gMjQ7CiAgY29uc3QgcHRzID0gdmFsdWVzLm1hcCgodiwgaSkgPT4gewogICAgY29uc3QgeCA9IChpIC8gKHZhbHVlcy5sZW5ndGggLSAxKSkgKiBXOwogICAgY29uc3QgeSA9IEggLSAoKHYgLSBtaW4pIC8gcmFuZ2UpICogSDsKICAgIHJldHVybiB4ICsgJywnICsgeTsKICB9KS5qb2luKCcgJyk7CiAgY29uc3QgY29sID0gcG9zaXRpdmUgPyAncmdiYSgzNCwyNTUsMTcwLDEpJyA6ICdyZ2JhKDI1NSw2OCwxMzYsMSknOwogIHJldHVybiAoCiAgICA8c3ZnIHdpZHRoPXtXfSBoZWlnaHQ9e0h9IHN0eWxlPXt7IGRpc3BsYXk6ICdibG9jaycgfX0+CiAgICAgIDxwb2x5bGluZSBwb2ludHM9e3B0c30gZmlsbD0ibm9uZSIgc3Ryb2tlPXtjb2x9IHN0cm9rZVdpZHRoPSIxLjUiIHN0cm9rZUxpbmVjYXA9InJvdW5kIiBzdHJva2VMaW5lam9pbj0icm91bmQiIG9wYWNpdHk9IjAuOCIgLz4KICAgIDwvc3ZnPgogICk7Cn0pOwpTcGFya2xpbmUuZGlzcGxheU5hbWUgPSAnU3BhcmtsaW5lJzsKCi8vIOKUgOKUgOKUgCBBZGQgSG9sZGluZyBNb2RhbCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKY29uc3QgQWRkTW9kYWwgPSBtZW1vKCh7IG9uQWRkLCBvbkNsb3NlLCBleGlzdGluZ1N5bWJvbHMgfTogewogIG9uQWRkOiAoaDogT21pdDxIb2xkaW5nLCAnaWQnIHwgJ2FkZGVkQXQnPikgPT4gdm9pZDsKICBvbkNsb3NlOiAoKSA9PiB2b2lkOwogIGV4aXN0aW5nU3ltYm9sczogc3RyaW5nW107Cn0pID0+IHsKICBjb25zdCBbc3ltYm9sLCBzZXRTeW1ib2xdID0gdXNlU3RhdGUoJycpOwogIGNvbnN0IFtuYW1lLCBzZXROYW1lXSAgICAgPSB1c2VTdGF0ZSgnJyk7CiAgY29uc3QgW3F0eSwgc2V0UXR5XSAgICAgICA9IHVzZVN0YXRlKCcnKTsKICBjb25zdCBbYXZnQnV5LCBzZXRBdmdCdXldID0gdXNlU3RhdGUoJycpOwogIGNvbnN0IFtlcnIsIHNldEVycl0gICAgICAgPSB1c2VTdGF0ZSgnJyk7CgogIGNvbnN0IGhhbmRsZVN5bWJvbENoYW5nZSA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4gewogICAgc2V0U3ltYm9sKGUudGFyZ2V0LnZhbHVlLnRvVXBwZXJDYXNlKCkpOwogIH0sIFtdKTsKICBjb25zdCBoYW5kbGVOYW1lQ2hhbmdlICAgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHsgc2V0TmFtZShlLnRhcmdldC52YWx1ZSk7IH0sIFtdKTsKICBjb25zdCBoYW5kbGVRdHlDaGFuZ2UgICAgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHsgc2V0UXR5KGUudGFyZ2V0LnZhbHVlKTsgfSwgW10pOwogIGNvbnN0IGhhbmRsZUF2Z0NoYW5nZSAgICA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4geyBzZXRBdmdCdXkoZS50YXJnZXQudmFsdWUpOyB9LCBbXSk7CgogIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgIGNvbnN0IHN5bSA9IHN5bWJvbC50cmltKCkudG9VcHBlckNhc2UoKTsKICAgIGNvbnN0IG5tICA9IG5hbWUudHJpbSgpIHx8IHN5bTsKICAgIGNvbnN0IHEgICA9IHBhcnNlRmxvYXQocXR5KTsKICAgIGNvbnN0IGF2ZyA9IHBhcnNlRmxvYXQoYXZnQnV5KTsKICAgIGlmICghc3ltKSAgICAgICAgICB7IHNldEVycignU3ltYm9sIHJlcXVpcmVkJyk7IHJldHVybjsgfQogICAgaWYgKGlzTmFOKHEpIHx8IHEgPD0gMCkgeyBzZXRFcnIoJ0ludmFsaWQgcXVhbnRpdHknKTsgcmV0dXJuOyB9CiAgICBpZiAoaXNOYU4oYXZnKSB8fCBhdmcgPD0gMCkgeyBzZXRFcnIoJ0ludmFsaWQgYnV5IHByaWNlJyk7IHJldHVybjsgfQogICAgaWYgKGV4aXN0aW5nU3ltYm9scy5pbmNsdWRlcyhzeW0pKSB7IHNldEVycihzeW0gKyAnIGFscmVhZHkgaW4gcG9ydGZvbGlvJyk7IHJldHVybjsgfQogICAgb25BZGQoeyBzeW1ib2w6IHN5bSwgbmFtZTogbm0sIHF0eTogcSwgYXZnQnV5OiBhdmcgfSk7CiAgfSwgW3N5bWJvbCwgbmFtZSwgcXR5LCBhdmdCdXksIG9uQWRkLCBleGlzdGluZ1N5bWJvbHNdKTsKCiAgY29uc3Qgb3ZlcmxheVN0eWxlID0gdXNlTWVtbygoKSA9PiBPYmplY3QuZnJlZXplKHsKICAgIHBvc2l0aW9uOiAnZml4ZWQnIGFzIGNvbnN0LCBpbnNldDogMCwgYmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsMC43KScsIGJhY2tkcm9wRmlsdGVyOiAnYmx1cig0cHgpJywKICAgIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgekluZGV4OiAxMDAwLCBwYWRkaW5nOiAnMjBweCcsCiAgfSksIFtdKTsKCiAgY29uc3QgbW9kYWxTdHlsZSA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBiYWNrZ3JvdW5kOiAncmdiYSgxNiwyMCwzNCwxKScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDAsMjM4LDI1NSwwLjIpJywgYm9yZGVyUmFkaXVzOiAnMThweCcsCiAgICBwYWRkaW5nOiAnMjhweCcsIHdpZHRoOiAnMTAwJScsIG1heFdpZHRoOiAnNDIwcHgnLAogICAgYm94U2hhZG93OiAnMCAwIDYwcHggcmdiYSgwLDIzOCwyNTUsMC4wOCknLAogIH0pLCBbXSk7CgogIGNvbnN0IGlucHV0U3QgPSB1c2VNZW1vKCgpID0+IE9iamVjdC5mcmVlemUoewogICAgd2lkdGg6ICcxMDAlJywgYmFja2dyb3VuZDogQy5pbnB1dCwgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBDLmlucHV0Qm9yZGVyLAogICAgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBhZGRpbmc6ICcxMHB4IDE0cHgnLAogICAgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEzcHgnLCBjb2xvcjogQy50ZXh0UHJpbWFyeSwKICAgIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcgYXMgY29uc3QsCiAgfSksIFtdKTsKCiAgY29uc3QgbGFiZWxTdCA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMsCiAgICBsZXR0ZXJTcGFjaW5nOiAnMC4xZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwKICB9KSwgW10pOwoKICByZXR1cm4gKAogICAgPG1vdGlvbi5kaXYgc3R5bGU9e292ZXJsYXlTdHlsZX0gb25DbGljaz17b25DbG9zZX0gaW5pdGlhbD17eyBvcGFjaXR5OiAwIH19IGFuaW1hdGU9e3sgb3BhY2l0eTogMSB9fSBleGl0PXt7IG9wYWNpdHk6IDAgfX0+CiAgICAgIDxtb3Rpb24uZGl2IHN0eWxlPXttb2RhbFN0eWxlfSBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX0gaW5pdGlhbD17eyBzY2FsZTogMC45LCB5OiAyMCB9fSBhbmltYXRlPXt7IHNjYWxlOiAxLCB5OiAwIH19PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgbWFyZ2luQm90dG9tOiAnMjRweCcgfX0+CiAgICAgICAgICA8aDIgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzE2cHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBDLnRleHRQcmltYXJ5LCBtYXJnaW46IDAgfX0+QUREIEhPTERJTkc8L2gyPgogICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBzdHlsZT17eyBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMSknLCBib3JkZXJSYWRpdXM6ICc4cHgnLCB3aWR0aDogJzMwcHgnLCBoZWlnaHQ6ICczMHB4JywgY3Vyc29yOiAncG9pbnRlcicsIGNvbG9yOiBDLnRleHRTZWMsIGZvbnRTaXplOiAnMTZweCcsIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyB9fT7DlzwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnMTRweCcgfX0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSwgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnNnB4JyB9fT4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e2xhYmVsU3R9PlN5bWJvbCAqPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgc3R5bGU9e2lucHV0U3R9IHZhbHVlPXtzeW1ib2x9IG9uQ2hhbmdlPXtoYW5kbGVTeW1ib2xDaGFuZ2V9IHBsYWNlaG9sZGVyPSJCVEMiIG1heExlbmd0aD17MTB9IC8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDIsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXtsYWJlbFN0fT5OYW1lPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgc3R5bGU9e2lucHV0U3R9IHZhbHVlPXtuYW1lfSBvbkNoYW5nZT17aGFuZGxlTmFtZUNoYW5nZX0gcGxhY2Vob2xkZXI9IkJpdGNvaW4iIC8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSwgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnNnB4JyB9fT4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e2xhYmVsU3R9PlF1YW50aXR5ICo8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dCBzdHlsZT17aW5wdXRTdH0gdHlwZT0ibnVtYmVyIiB2YWx1ZT17cXR5fSBvbkNoYW5nZT17aGFuZGxlUXR5Q2hhbmdlfSBwbGFjZWhvbGRlcj0iMC41IiBtaW49IjAiIHN0ZXA9ImFueSIgLz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSwgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnNnB4JyB9fT4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e2xhYmVsU3R9PkF2ZyBCdXkgJCAqPC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQgc3R5bGU9e2lucHV0U3R9IHR5cGU9Im51bWJlciIgdmFsdWU9e2F2Z0J1eX0gb25DaGFuZ2U9e2hhbmRsZUF2Z0NoYW5nZX0gcGxhY2Vob2xkZXI9IjQ1MDAwIiBtaW49IjAiIHN0ZXA9ImFueSIgLz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIHtlcnIgJiYgPHAgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzExcHgnLCBjb2xvcjogQy5uZWdhdGl2ZSwgbWFyZ2luOiAwIH19PuKaoCB7ZXJyfTwvcD59CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN1Ym1pdH0KICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJywgcGFkZGluZzogJzEycHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgwLDIzOCwyNTUsMC4xMiknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgwLDIzOCwyNTUsMC4zKScsIGJvcmRlclJhZGl1czogJzhweCcsIGNvbG9yOiBDLmFjY2VudCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEzcHgnLCBmb250V2VpZ2h0OiA3MDAsIGN1cnNvcjogJ3BvaW50ZXInLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNmVtJywgbWFyZ2luVG9wOiAnNHB4JyB9fQogICAgICAgICAgPgogICAgICAgICAgICArIEFERCBUTyBQT1JURk9MSU8KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L21vdGlvbi5kaXY+CiAgICA8L21vdGlvbi5kaXY+CiAgKTsKfSk7CkFkZE1vZGFsLmRpc3BsYXlOYW1lID0gJ0FkZE1vZGFsJzsKCi8vIOKUgOKUgOKUgCBIb2xkaW5ncyB0YWIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IEhvbGRpbmdSb3cgPSBtZW1vKCh7IGhvbGRpbmcsIHByaWNlLCBjaGFuZ2UyNGgsIG9uUmVtb3ZlLCBpc01vYmlsZSB9OiB7CiAgaG9sZGluZzogSG9sZGluZzsKICBwcmljZTogbnVtYmVyOwogIGNoYW5nZTI0aDogbnVtYmVyOwogIG9uUmVtb3ZlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDsKICBpc01vYmlsZTogYm9vbGVhbjsKfSkgPT4gewogIGNvbnN0IHZhbHVlICAgID0gaG9sZGluZy5xdHkgKiBwcmljZTsKICBjb25zdCBjb3N0ICAgICA9IGhvbGRpbmcucXR5ICogaG9sZGluZy5hdmdCdXk7CiAgY29uc3QgcG5sICAgICAgPSB2YWx1ZSAtIGNvc3Q7CiAgY29uc3QgcG5sUGN0ICAgPSBjb3N0ID4gMCA/IChwbmwgLyBjb3N0KSAqIDEwMCA6IDA7CiAgY29uc3QgaXNQb3MgICAgPSBwbmwgPj0gMDsKICBjb25zdCBwbmxDb2xvciA9IGlzUG9zID8gQy5wb3NpdGl2ZSA6IEMubmVnYXRpdmU7CiAgY29uc3QgY2hDb2xvciAgPSBjaGFuZ2UyNGggPj0gMCA/IEMucG9zaXRpdmUgOiBDLm5lZ2F0aXZlOwogIGNvbnN0IGRhaWx5ICAgID0gdmFsdWUgKiAoY2hhbmdlMjRoIC8gMTAwKTsKCiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gdXNlQ2FsbGJhY2soKCkgPT4gb25SZW1vdmUoaG9sZGluZy5pZCksIFtob2xkaW5nLmlkLCBvblJlbW92ZV0pOwoKICBjb25zdCBjb2xzID0gaXNNb2JpbGUgPyAnMWZyIDcwcHggNzBweCcgOiAnNDBweCAxZnIgOTBweCA5MHB4IDkwcHggOTBweCA5MHB4IDM2cHgnOwoKICByZXR1cm4gKAogICAgPG1vdGlvbi5kaXYKICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiBjb2xzLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTBweCcsIHBhZGRpbmc6ICcxM3B4IDE2cHgnLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA0KScgfX0KICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwIH19IGFuaW1hdGU9e3sgb3BhY2l0eTogMSB9fQogICAgICBsYXlvdXQKICAgID4KICAgICAgeyFpc01vYmlsZSAmJiAoCiAgICAgICAgPGltZwogICAgICAgICAgc3JjPXsnaHR0cHM6Ly9hc3NldHMuY29pbmdlY2tvLmNvbS9jb2lucy9pbWFnZXMvMS90aHVtYi8nICsgaG9sZGluZy5zeW1ib2wudG9Mb3dlckNhc2UoKSArICcucG5nJ30KICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiB7IChlLnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9fQogICAgICAgICAgd2lkdGg9ezI4fSBoZWlnaHQ9ezI4fQogICAgICAgICAgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAnNTAlJywgb2JqZWN0Rml0OiAnY292ZXInIH19CiAgICAgICAgICBhbHQ9e2hvbGRpbmcuc3ltYm9sfQogICAgICAgIC8+CiAgICAgICl9CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnMnB4JyB9fT4KICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IEMudGV4dFByaW1hcnkgfX0+e2hvbGRpbmcuc3ltYm9sfTwvc3Bhbj4KICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX1VJLCBmb250U2l6ZTogJzExcHgnLCBjb2xvcjogQy50ZXh0U2VjIH19Pntob2xkaW5nLnF0eS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7IG1heGltdW1TaWduaWZpY2FudERpZ2l0czogNiB9KX0gdW5pdHM8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxM3B4JywgY29sb3I6IEMudGV4dFByaW1hcnkgfX0+e3ByaWNlID4gMCA/IGZtdFVzZCh2YWx1ZSkgOiAn4oCUJ308L2Rpdj4KICAgICAgICB7IWlzTW9iaWxlICYmIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy50ZXh0U2VjIH19PiR7cHJpY2UgPiAwID8gcHJpY2UudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSkgOiAn4oCUJ308L2Rpdj59CiAgICAgIDwvZGl2PgogICAgICB7IWlzTW9iaWxlICYmICgKICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogcG5sQ29sb3IsIGZvbnRXZWlnaHQ6IDcwMCB9fT57aXNQb3MgPyAnKycgOiAnJ317Zm10VXNkKHBubCl9PC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6IHBubENvbG9yIH19Pntpc1BvcyA/ICcrJyA6ICcnfXtwbmxQY3QudG9GaXhlZCgyKX0lPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CiAgICAgIHshaXNNb2JpbGUgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAncmlnaHQnIGFzIGNvbnN0IH19PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGNvbG9yOiBjaENvbG9yIH19PntjaGFuZ2UyNGggPj0gMCA/ICcrJyA6ICcnfXtjaGFuZ2UyNGgudG9GaXhlZCgyKX0lPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6IGNoQ29sb3IgfX0+e2RhaWx5ID49IDAgPyAnKycgOiAnJ317Zm10VXNkKGRhaWx5KX08L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgKX0KICAgICAgeyFpc01vYmlsZSAmJiAoCiAgICAgICAgPGRpdiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgYXMgY29uc3QgfX0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IEMudGV4dFNlYyB9fT57Zm10VXNkKGNvc3QpfTwvZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMgfX0+JHtob2xkaW5nLmF2Z0J1eS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMiB9KX08L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgKX0KICAgICAgPGRpdiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgYXMgY29uc3QgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGNvbG9yOiBwbmxDb2xvciwgZm9udFdlaWdodDogNzAwIH19Pntpc1BvcyA/ICcrJyA6ICcnfXtwbmxQY3QudG9GaXhlZCgyKX0lPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICB7IWlzTW9iaWxlICYmICgKICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVJlbW92ZX0gc3R5bGU9e3sgd2lkdGg6ICcyOHB4JywgaGVpZ2h0OiAnMjhweCcsIGJvcmRlclJhZGl1czogJzZweCcsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1NSw2OCwxMzYsMC4yKScsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSw2OCwxMzYsMC4wNiknLCBjb2xvcjogJ3JnYmEoMjU1LDY4LDEzNiwwLjYpJywgY3Vyc29yOiAncG9pbnRlcicsIGZvbnRTaXplOiAnMTRweCcsIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgZmxleFNocmluazogMCB9fT7DlzwvYnV0dG9uPgogICAgICApfQogICAgPC9tb3Rpb24uZGl2PgogICk7Cn0pOwpIb2xkaW5nUm93LmRpc3BsYXlOYW1lID0gJ0hvbGRpbmdSb3cnOwoKLy8g4pSA4pSA4pSAIEFsbG9jYXRpb24gcGllIChwdXJlIFNWRykg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IEFsbG9jYXRpb25QaWUgPSBtZW1vKCh7IHNsaWNlcyB9OiB7IHNsaWNlczogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogbnVtYmVyOyBjb2xvcjogc3RyaW5nOyBwY3Q6IG51bWJlciB9W10gfSkgPT4gewogIGNvbnN0IFNJWkUgPSAyMDAsIFIgPSA4MCwgY3ggPSAxMDAsIGN5ID0gMTAwOwogIGxldCBjdW1BbmdsZSA9IC1NYXRoLlBJIC8gMjsKCiAgY29uc3QgcGF0aHMgPSBzbGljZXMubWFwKChzLCBpKSA9PiB7CiAgICBjb25zdCBhbmdsZSA9IChzLnBjdCAvIDEwMCkgKiAyICogTWF0aC5QSTsKICAgIGNvbnN0IHN0YXJ0QW5nbGUgPSBjdW1BbmdsZTsKICAgIGN1bUFuZ2xlICs9IGFuZ2xlOwogICAgY29uc3QgZW5kQW5nbGUgPSBjdW1BbmdsZTsKICAgIGNvbnN0IHgxID0gY3ggKyBSICogTWF0aC5jb3Moc3RhcnRBbmdsZSk7CiAgICBjb25zdCB5MSA9IGN5ICsgUiAqIE1hdGguc2luKHN0YXJ0QW5nbGUpOwogICAgY29uc3QgeDIgPSBjeCArIFIgKiBNYXRoLmNvcyhlbmRBbmdsZSk7CiAgICBjb25zdCB5MiA9IGN5ICsgUiAqIE1hdGguc2luKGVuZEFuZ2xlKTsKICAgIGNvbnN0IGxhcmdlID0gYW5nbGUgPiBNYXRoLlBJID8gMSA6IDA7CiAgICByZXR1cm4geyBkOiAnTSAnICsgY3ggKyAnICcgKyBjeSArICcgTCAnICsgeDEgKyAnICcgKyB5MSArICcgQSAnICsgUiArICcgJyArIFIgKyAnIDAgJyArIGxhcmdlICsgJyAxICcgKyB4MiArICcgJyArIHkyICsgJyBaJywgY29sb3I6IHMuY29sb3IsIGxhYmVsOiBzLmxhYmVsLCBwY3Q6IHMucGN0IH07CiAgfSk7CgogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleFdyYXA6ICd3cmFwJyBhcyBjb25zdCwgZ2FwOiAnMjRweCcsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19PgogICAgICA8c3ZnIHdpZHRoPXtTSVpFfSBoZWlnaHQ9e1NJWkV9IHN0eWxlPXt7IGZsZXhTaHJpbms6IDAgfX0+CiAgICAgICAge3BhdGhzLm1hcCgocCwgaSkgPT4gKAogICAgICAgICAgPG1vdGlvbi5wYXRoIGtleT17cC5sYWJlbH0gZD17cC5kfSBmaWxsPXtwLmNvbG9yfSBzdHJva2U9InJnYmEoNiw4LDE0LDEpIiBzdHJva2VXaWR0aD0iMiIKICAgICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwIH19IGFuaW1hdGU9e3sgb3BhY2l0eTogMSB9fSB0cmFuc2l0aW9uPXt7IGRlbGF5OiBpICogMC4wOCB9fSAvPgogICAgICAgICkpfQogICAgICAgIDxjaXJjbGUgY3g9e2N4fSBjeT17Y3l9IHI9IjQ0IiBmaWxsPSJyZ2JhKDYsOCwxNCwxKSIgLz4KICAgICAgICA8dGV4dCB4PXtjeH0geT17Y3kgLSA2fSB0ZXh0QW5jaG9yPSJtaWRkbGUiIGZpbGw9InJnYmEoMjQwLDI0MCwyNDgsMSkiIGZvbnRTaXplPSIxNCIgZm9udEZhbWlseT17Rk9OVF9NT05PfSBmb250V2VpZ2h0PSI3MDAiPgogICAgICAgICAgUG9ydGZvbGlvCiAgICAgICAgPC90ZXh0PgogICAgICAgIDx0ZXh0IHg9e2N4fSB5PXtjeSArIDE0fSB0ZXh0QW5jaG9yPSJtaWRkbGUiIGZpbGw9InJnYmEoMTM4LDEzOCwxNTgsMSkiIGZvbnRTaXplPSIxMCIgZm9udEZhbWlseT17Rk9OVF9NT05PfT4KICAgICAgICAgIEFsbG9jYXRpb24KICAgICAgICA8L3RleHQ+CiAgICAgIDwvc3ZnPgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzhweCcsIGZsZXg6IDEsIG1pbldpZHRoOiAnMTYwcHgnIH19PgogICAgICAgIHtzbGljZXMubWFwKChzLCBpKSA9PiAoCiAgICAgICAgICA8ZGl2IGtleT17cy5sYWJlbH0gc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTBweCcgfX0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6ICcxMHB4JywgaGVpZ2h0OiAnMTBweCcsIGJvcmRlclJhZGl1czogJzJweCcsIGJhY2tncm91bmQ6IHMuY29sb3IsIGZsZXhTaHJpbms6IDAgfX0gLz4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogQy50ZXh0UHJpbWFyeSwgZmxleDogMSB9fT57cy5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IHMuY29sb3IsIGZvbnRXZWlnaHQ6IDcwMCB9fT57cy5wY3QudG9GaXhlZCgxKX0lPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgKSl9CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7CkFsbG9jYXRpb25QaWUuZGlzcGxheU5hbWUgPSAnQWxsb2NhdGlvblBpZSc7CgovLyDilIDilIDilIAgRW1wdHkgc3RhdGUg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IEVtcHR5U3RhdGUgPSBtZW1vKCh7IG9uQWRkIH06IHsgb25BZGQ6ICgpID0+IHZvaWQgfSkgPT4gKAogIDxtb3Rpb24uZGl2IGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeTogMjAgfX0gYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxNnB4JywgcGFkZGluZzogJzYwcHggMjBweCcsIHRleHRBbGlnbjogJ2NlbnRlcicgYXMgY29uc3QgfX0+CiAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAnNDhweCcsIGxpbmVIZWlnaHQ6ICcxJyB9fT7wn5K8PC9kaXY+CiAgICA8ZGl2PgogICAgICA8cCBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX1VJLCBmb250U2l6ZTogJzE4cHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBDLnRleHRQcmltYXJ5LCBtYXJnaW46ICcwIDAgOHB4JyB9fT5ObyBob2xkaW5ncyB5ZXQ8L3A+CiAgICAgIDxwIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTRweCcsIGNvbG9yOiBDLnRleHRTZWMsIG1hcmdpbjogMCB9fT5BZGQgeW91ciBmaXJzdCBhc3NldCB0byBzdGFydCB0cmFja2luZyB5b3VyIHBvcnRmb2xpbyBwZXJmb3JtYW5jZS48L3A+CiAgICA8L2Rpdj4KICAgIDxidXR0b24gb25DbGljaz17b25BZGR9IHN0eWxlPXt7IHBhZGRpbmc6ICcxMnB4IDI4cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgwLDIzOCwyNTUsMC4xMiknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgwLDIzOCwyNTUsMC4zKScsIGJvcmRlclJhZGl1czogJzEycHgnLCBjb2xvcjogQy5hY2NlbnQsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxM3B4JywgZm9udFdlaWdodDogNzAwLCBjdXJzb3I6ICdwb2ludGVyJywgbGV0dGVyU3BhY2luZzogJzAuMDZlbScgfX0+CiAgICAgICsgQUREIEZJUlNUIEhPTERJTkcKICAgIDwvYnV0dG9uPgogIDwvbW90aW9uLmRpdj4KKSk7CkVtcHR5U3RhdGUuZGlzcGxheU5hbWUgPSAnRW1wdHlTdGF0ZSc7CgovLyDilIDilIDilIAgTWFpbiBwYWdlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApjb25zdCBQb3J0Zm9saW86IFJlYWN0LkZDID0gKCkgPT4gewogIGNvbnN0IHsgYXNzZXRzIH0gPSB1c2VDcnlwdG8oKTsKICBjb25zdCB7IGlzTW9iaWxlIH0gPSB1c2VCcmVha3BvaW50KCk7CiAgY29uc3QgW2hvbGRpbmdzLCBzZXRIb2xkaW5nc10gPSB1c2VTdGF0ZTxIb2xkaW5nW10+KCgpID0+IGxvYWRIb2xkaW5ncygpKTsKICBjb25zdCBbc2hvd0FkZCwgc2V0U2hvd0FkZF0gICA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbYWN0aXZlVGFiLCBzZXRBY3RpdmVUYWJdID0gdXNlU3RhdGU8VGFiPignSG9sZGluZ3MnKTsKICBjb25zdCBtb3VudGVkUmVmID0gdXNlUmVmKHRydWUpOwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgbW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTsKICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlOyB9OwogIH0sIFtdKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHNhdmVIb2xkaW5ncyhob2xkaW5ncyk7CiAgfSwgW2hvbGRpbmdzXSk7CgogIC8vIEJ1aWxkIHByaWNlIG1hcCBmcm9tIGNvbnRleHQKICBjb25zdCBwcmljZU1hcCA9IHVzZU1lbW8oKCkgPT4gewogICAgY29uc3QgbTogUmVjb3JkPHN0cmluZywgeyBwcmljZTogbnVtYmVyOyBjaGFuZ2UyNGg6IG51bWJlciB9PiA9IHt9OwogICAgZm9yIChjb25zdCBhIG9mIGFzc2V0cykgewogICAgICBtW2Euc3ltYm9sLnRvVXBwZXJDYXNlKCldID0geyBwcmljZTogYS5jdXJyZW50X3ByaWNlLCBjaGFuZ2UyNGg6IGEucHJpY2VfY2hhbmdlX3BlcmNlbnRhZ2VfMjRoID8/IDAgfTsKICAgIH0KICAgIHJldHVybiBtOwogIH0sIFthc3NldHNdKTsKCiAgY29uc3QgZW5yaWNoZWQgPSB1c2VNZW1vKCgpID0+IGhvbGRpbmdzLm1hcChoID0+IHsKICAgIGNvbnN0IGluZm8gPSBwcmljZU1hcFtoLnN5bWJvbF0gPz8geyBwcmljZTogMCwgY2hhbmdlMjRoOiAwIH07CiAgICBjb25zdCB2YWx1ZSA9IGgucXR5ICogaW5mby5wcmljZTsKICAgIGNvbnN0IGNvc3QgID0gaC5xdHkgKiBoLmF2Z0J1eTsKICAgIGNvbnN0IHBubCAgID0gdmFsdWUgLSBjb3N0OwogICAgcmV0dXJuIHsgLi4uaCwgcHJpY2U6IGluZm8ucHJpY2UsIGNoYW5nZTI0aDogaW5mby5jaGFuZ2UyNGgsIHZhbHVlLCBjb3N0LCBwbmwsIHBubFBjdDogY29zdCA+IDAgPyAocG5sIC8gY29zdCkgKiAxMDAgOiAwIH07CiAgfSkuc29ydCgoYSwgYikgPT4gYi52YWx1ZSAtIGEudmFsdWUpLCBbaG9sZGluZ3MsIHByaWNlTWFwXSk7CgogIGNvbnN0IHRvdGFscyA9IHVzZU1lbW8oKCkgPT4gewogICAgY29uc3QgdG90YWxWYWx1ZSA9IGVucmljaGVkLnJlZHVjZSgocywgaCkgPT4gcyArIGgudmFsdWUsIDApOwogICAgY29uc3QgdG90YWxDb3N0ICA9IGVucmljaGVkLnJlZHVjZSgocywgaCkgPT4gcyArIGguY29zdCwgMCk7CiAgICBjb25zdCB0b3RhbFBubCAgID0gdG90YWxWYWx1ZSAtIHRvdGFsQ29zdDsKICAgIGNvbnN0IHBubFBjdCAgICAgPSB0b3RhbENvc3QgPiAwID8gKHRvdGFsUG5sIC8gdG90YWxDb3N0KSAqIDEwMCA6IDA7CiAgICBjb25zdCBkYWlseSAgICAgID0gZW5yaWNoZWQucmVkdWNlKChzLCBoKSA9PiBzICsgaC52YWx1ZSAqIChoLmNoYW5nZTI0aCAvIDEwMCksIDApOwogICAgcmV0dXJuIHsgdG90YWxWYWx1ZSwgdG90YWxDb3N0LCB0b3RhbFBubCwgcG5sUGN0LCBkYWlseSB9OwogIH0sIFtlbnJpY2hlZF0pOwoKICBjb25zdCBhbGxvY1NsaWNlcyA9IHVzZU1lbW8oKCkgPT4gewogICAgaWYgKHRvdGFscy50b3RhbFZhbHVlID09PSAwKSByZXR1cm4gW107CiAgICByZXR1cm4gZW5yaWNoZWQuc2xpY2UoMCwgOCkubWFwKChoLCBpKSA9PiAoewogICAgICBsYWJlbDogaC5zeW1ib2wsCiAgICAgIHZhbHVlOiBoLnZhbHVlLAogICAgICBwY3Q6IHRvdGFscy50b3RhbFZhbHVlID4gMCA/IChoLnZhbHVlIC8gdG90YWxzLnRvdGFsVmFsdWUpICogMTAwIDogMCwKICAgICAgY29sb3I6IEFMTE9DX0NPTE9SU1tpICUgQUxMT0NfQ09MT1JTLmxlbmd0aF0sCiAgICB9KSk7CiAgfSwgW2VucmljaGVkLCB0b3RhbHMudG90YWxWYWx1ZV0pOwoKICBjb25zdCBoYW5kbGVBZGQgPSB1c2VDYWxsYmFjaygoaDogT21pdDxIb2xkaW5nLCAnaWQnIHwgJ2FkZGVkQXQnPikgPT4gewogICAgaWYgKCFtb3VudGVkUmVmLmN1cnJlbnQpIHJldHVybjsKICAgIGNvbnN0IG5ld0g6IEhvbGRpbmcgPSB7IC4uLmgsIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLCBhZGRlZEF0OiBEYXRlLm5vdygpIH07CiAgICBzZXRIb2xkaW5ncyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdIXSk7CiAgICBzZXRTaG93QWRkKGZhbHNlKTsKICB9LCBbXSk7CgogIGNvbnN0IGhhbmRsZVJlbW92ZSA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7CiAgICBpZiAoIW1vdW50ZWRSZWYuY3VycmVudCkgcmV0dXJuOwogICAgc2V0SG9sZGluZ3MocHJldiA9PiBwcmV2LmZpbHRlcihoID0+IGguaWQgIT09IGlkKSk7CiAgfSwgW10pOwoKICBjb25zdCBvcGVuQWRkICA9IHVzZUNhbGxiYWNrKCgpID0+IHNldFNob3dBZGQodHJ1ZSksICBbXSk7CiAgY29uc3QgY2xvc2VBZGQgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRTaG93QWRkKGZhbHNlKSwgW10pOwoKICBjb25zdCBleGlzdGluZ1N5bWJvbHMgPSB1c2VNZW1vKCgpID0+IGhvbGRpbmdzLm1hcChoID0+IGguc3ltYm9sKSwgW2hvbGRpbmdzXSk7CgogIGNvbnN0IHBhZ2VTdHlsZSA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcyMHB4JywKICAgIHBhZGRpbmc6IGlzTW9iaWxlID8gJzE2cHgnIDogJzI0cHgnLCBtaW5IZWlnaHQ6ICcxMDB2aCcsIGJhY2tncm91bmQ6IEMuYmcsCiAgfSksIFtpc01vYmlsZV0pOwoKICBjb25zdCBpc1Bvc1RvdGFsID0gdG90YWxzLnRvdGFsUG5sID49IDA7CiAgY29uc3QgaXNQb3NEYWlseSA9IHRvdGFscy5kYWlseSA+PSAwOwoKICBjb25zdCBzdW1tYXJ5Q2FyZHMgPSB1c2VNZW1vKCgpID0+IE9iamVjdC5mcmVlemUoWwogICAgeyBsYWJlbDogJ1RvdGFsIFZhbHVlJywgICAgdmFsdWU6IGZtdFVzZCh0b3RhbHMudG90YWxWYWx1ZSksICAgIHN1YjogJycsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogQy50ZXh0UHJpbWFyeSB9LAogICAgeyBsYWJlbDogJ1RvdGFsIFBuTCcsICAgICAgdmFsdWU6IChpc1Bvc1RvdGFsID8gJysnIDogJycpICsgZm10VXNkKHRvdGFscy50b3RhbFBubCksIHN1YjogKGlzUG9zVG90YWwgPyAnKycgOiAnJykgKyB0b3RhbHMucG5sUGN0LnRvRml4ZWQoMikgKyAnJScsIGNvbG9yOiBpc1Bvc1RvdGFsID8gQy5wb3NpdGl2ZSA6IEMubmVnYXRpdmUgfSwKICAgIHsgbGFiZWw6ICcyNGggQ2hhbmdlJywgICAgIHZhbHVlOiAoaXNQb3NEYWlseSA/ICcrJyA6ICcnKSArIGZtdFVzZCh0b3RhbHMuZGFpbHkpLCAgICBzdWI6ICcnLCAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGlzUG9zRGFpbHkgPyBDLnBvc2l0aXZlIDogQy5uZWdhdGl2ZSB9LAogICAgeyBsYWJlbDogJ1RvdGFsIENvc3QnLCAgICAgdmFsdWU6IGZtdFVzZCh0b3RhbHMudG90YWxDb3N0KSwgICAgIHN1YjogaG9sZGluZ3MubGVuZ3RoICsgJyBob2xkaW5ncycsICAgICAgICAgICAgICAgICAgIGNvbG9yOiBDLnRleHRTZWMgfSwKICBdKSwgW3RvdGFscywgaXNQb3NUb3RhbCwgaXNQb3NEYWlseSwgaG9sZGluZ3MubGVuZ3RoXSk7CgogIGNvbnN0IGhkckNvbHMgPSBpc01vYmlsZSA/ICcxZnIgNzBweCA3MHB4JyA6ICc0MHB4IDFmciA5MHB4IDkwcHggOTBweCA5MHB4IDkwcHggMzZweCc7CiAgY29uc3QgaGRyU3QgPSB1c2VNZW1vKCgpID0+IE9iamVjdC5mcmVlemUoeyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMsIGxldHRlclNwYWNpbmc6ICcwLjA4ZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgdGV4dEFsaWduOiAncmlnaHQnIGFzIGNvbnN0IH0pLCBbXSk7CgogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXtwYWdlU3R5bGV9PgogICAgICB7LyogSGVhZGVyICovfQogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QsIGdhcDogJzEycHgnIH19PgogICAgICAgIDxkaXY+CiAgICAgICAgICA8aDEgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogaXNNb2JpbGUgPyAnMThweCcgOiAnMjJweCcsIGZvbnRXZWlnaHQ6IDgwMCwgY29sb3I6IEMudGV4dFByaW1hcnksIGxldHRlclNwYWNpbmc6ICctMC4wMmVtJywgbWFyZ2luOiAnMCAwIDRweCcgfX0+UE9SVEZPTElPPC9oMT4KICAgICAgICAgIDxwIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTNweCcsIGNvbG9yOiBDLnRleHRTZWMsIG1hcmdpbjogMCB9fT5NYW51YWwgZW50cnkgwrcgUHJpY2VzIGZyb20gbGl2ZSBtYXJrZXQgZmVlZDwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnOHB4JyB9fT4KICAgICAgICAgIHtob2xkaW5ncy5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvcGVuQWRkfSBzdHlsZT17eyBwYWRkaW5nOiAnOXB4IDE4cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgwLDIzOCwyNTUsMC4xMiknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgwLDIzOCwyNTUsMC4zKScsIGJvcmRlclJhZGl1czogJzhweCcsIGNvbG9yOiBDLmFjY2VudCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA3MDAsIGN1cnNvcjogJ3BvaW50ZXInLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNWVtJyB9fT4KICAgICAgICAgICAgICArIEFERAogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgey8qIFN1bW1hcnkgY2FyZHMgKi99CiAgICAgIHtob2xkaW5ncy5sZW5ndGggPiAwICYmICgKICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ3JlcGVhdChhdXRvLWZpdCwgbWlubWF4KDE2MHB4LCAxZnIpKScsIGdhcDogJzEycHgnIH19PgogICAgICAgICAge3N1bW1hcnlDYXJkcy5tYXAoY2FyZCA9PiAoCiAgICAgICAgICAgIDxtb3Rpb24uZGl2IGtleT17Y2FyZC5sYWJlbH0gc3R5bGU9e3sgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICcxcHggc29saWQgJyArIEMuYm9yZGVyLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzE2cHgnIH19IGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeTogMTAgfX0gYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy50ZXh0U2VjLCBsZXR0ZXJTcGFjaW5nOiAnMC4xZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgbWFyZ2luQm90dG9tOiAnOHB4JyB9fT57Y2FyZC5sYWJlbH08L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxOHB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogY2FyZC5jb2xvciB9fT57Y2FyZC52YWx1ZX08L2Rpdj4KICAgICAgICAgICAgICB7Y2FyZC5zdWIgJiYgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiBjYXJkLmNvbG9yLCBvcGFjaXR5OiAwLjcsIG1hcmdpblRvcDogJzJweCcgfX0+e2NhcmQuc3VifTwvZGl2Pn0KICAgICAgICAgICAgPC9tb3Rpb24uZGl2PgogICAgICAgICAgKSl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogVGFiIGJhciAqL30KICAgICAge2hvbGRpbmdzLmxlbmd0aCA+IDAgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICc0cHgnLCBwYWRkaW5nOiAnNHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNCknLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgYWxpZ25TZWxmOiAnZmxleC1zdGFydCcgYXMgY29uc3QgfX0+CiAgICAgICAgICB7VEFCUy5tYXAodGFiID0+ICgKICAgICAgICAgICAgPGJ1dHRvbiBrZXk9e3RhYn0gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKHRhYil9IHN0eWxlPXt7IHBhZGRpbmc6ICc4cHggMTRweCcsIGJvcmRlclJhZGl1czogJzZweCcsIGJvcmRlcjogJ25vbmUnLCBjdXJzb3I6ICdwb2ludGVyJywgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGJhY2tncm91bmQ6IGFjdGl2ZVRhYiA9PT0gdGFiID8gJ3JnYmEoMCwyMzgsMjU1LDAuMTUpJyA6ICd0cmFuc3BhcmVudCcsIGNvbG9yOiBhY3RpdmVUYWIgPT09IHRhYiA/IEMuYWNjZW50IDogQy50ZXh0U2VjLCBvdXRsaW5lOiBhY3RpdmVUYWIgPT09IHRhYiA/ICcxcHggc29saWQgcmdiYSgwLDIzOCwyNTUsMC4zKScgOiAnbm9uZScsIHRyYW5zaXRpb246ICdhbGwgMC4xOHMnIH19PgogICAgICAgICAgICAgIHt0YWJ9CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgKSl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogQ29udGVudCAqL30KICAgICAge2hvbGRpbmdzLmxlbmd0aCA9PT0gMAogICAgICAgID8gPEVtcHR5U3RhdGUgb25BZGQ9e29wZW5BZGR9IC8+CiAgICAgICAgOiAoCiAgICAgICAgICA8QW5pbWF0ZVByZXNlbmNlIG1vZGU9IndhaXQiPgogICAgICAgICAgICA8bW90aW9uLmRpdiBrZXk9e2FjdGl2ZVRhYn0gaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB5OiA4IH19IGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeTogMCB9fSBleGl0PXt7IG9wYWNpdHk6IDAgfX0gdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC4xOCB9fT4KICAgICAgICAgICAgICB7YWN0aXZlVGFiID09PSAnSG9sZGluZ3MnICYmICgKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICcxcHggc29saWQgJyArIEMuYm9yZGVyLCBib3JkZXJSYWRpdXM6ICcxMnB4Jywgb3ZlcmZsb3c6ICdoaWRkZW4nIGFzIGNvbnN0IH19PgogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogaGRyQ29scywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzEwcHgnLCBwYWRkaW5nOiAnMTBweCAxNnB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA2KScgfX0+CiAgICAgICAgICAgICAgICAgICAgeyFpc01vYmlsZSAmJiA8ZGl2IC8+fQogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IC4uLmhkclN0LCB0ZXh0QWxpZ246ICdsZWZ0JyBhcyBjb25zdCB9fT5Bc3NldDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17aGRyU3R9PlZhbHVlPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIHshaXNNb2JpbGUgJiYgPHNwYW4gc3R5bGU9e2hkclN0fT5Qbkw8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIHshaXNNb2JpbGUgJiYgPHNwYW4gc3R5bGU9e2hkclN0fT4yNGg8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIHshaXNNb2JpbGUgJiYgPHNwYW4gc3R5bGU9e2hkclN0fT5Db3N0PC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17aGRyU3R9PlBuTCU8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgeyFpc01vYmlsZSAmJiA8ZGl2IC8+fQogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPEFuaW1hdGVQcmVzZW5jZT4KICAgICAgICAgICAgICAgICAgICB7ZW5yaWNoZWQubWFwKGggPT4gKAogICAgICAgICAgICAgICAgICAgICAgPEhvbGRpbmdSb3cga2V5PXtoLmlkfSBob2xkaW5nPXtofSBwcmljZT17aC5wcmljZX0gY2hhbmdlMjRoPXtoLmNoYW5nZTI0aH0gb25SZW1vdmU9e2hhbmRsZVJlbW92ZX0gaXNNb2JpbGU9e2lzTW9iaWxlfSAvPgogICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICA8L0FuaW1hdGVQcmVzZW5jZT4KICAgICAgICAgICAgICAgICAgey8qIEZvb3RlciB0b3RhbCAqL30KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGhkckNvbHMsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxMHB4JywgcGFkZGluZzogJzEzcHggMTZweCcsIGJvcmRlclRvcDogJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMiknIH19PgogICAgICAgICAgICAgICAgICAgIHshaXNNb2JpbGUgJiYgPGRpdiAvPn0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IEMudGV4dFNlYyB9fT5UT1RBTDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IEMudGV4dFByaW1hcnksIHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT57Zm10VXNkKHRvdGFscy50b3RhbFZhbHVlKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgeyFpc01vYmlsZSAmJiA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IGlzUG9zVG90YWwgPyBDLnBvc2l0aXZlIDogQy5uZWdhdGl2ZSwgdGV4dEFsaWduOiAncmlnaHQnIGFzIGNvbnN0IH19Pntpc1Bvc1RvdGFsID8gJysnIDogJyd9e2ZtdFVzZCh0b3RhbHMudG90YWxQbmwpfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgeyFpc01vYmlsZSAmJiA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGNvbG9yOiBpc1Bvc0RhaWx5ID8gQy5wb3NpdGl2ZSA6IEMubmVnYXRpdmUsIHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT57aXNQb3NEYWlseSA/ICcrJyA6ICcnfXtmbXRVc2QodG90YWxzLmRhaWx5KX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIHshaXNNb2JpbGUgJiYgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogQy50ZXh0U2VjLCB0ZXh0QWxpZ246ICdyaWdodCcgYXMgY29uc3QgfX0+e2ZtdFVzZCh0b3RhbHMudG90YWxDb3N0KX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogaXNQb3NUb3RhbCA/IEMucG9zaXRpdmUgOiBDLm5lZ2F0aXZlLCB0ZXh0QWxpZ246ICdyaWdodCcgYXMgY29uc3QgfX0+e2lzUG9zVG90YWwgPyAnKycgOiAnJ317dG90YWxzLnBubFBjdC50b0ZpeGVkKDIpfSU8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgeyFpc01vYmlsZSAmJiA8ZGl2IC8+fQogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdBbGxvY2F0aW9uJyAmJiAoCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJhY2tncm91bmQ6IEMuY2FyZCwgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBDLmJvcmRlciwgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBhZGRpbmc6ICcyNHB4JyB9fT4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMsIGxldHRlclNwYWNpbmc6ICcwLjEyZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgbWFyZ2luQm90dG9tOiAnMjBweCcgfX0+QWxsb2NhdGlvbiBieSBWYWx1ZTwvZGl2PgogICAgICAgICAgICAgICAgICB7YWxsb2NTbGljZXMubGVuZ3RoID4gMAogICAgICAgICAgICAgICAgICAgID8gPEFsbG9jYXRpb25QaWUgc2xpY2VzPXthbGxvY1NsaWNlc30gLz4KICAgICAgICAgICAgICAgICAgICA6IDxkaXYgc3R5bGU9e3sgY29sb3I6IEMudGV4dFNlYywgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxM3B4JyB9fT5ObyBwcmljZSBkYXRhIGF2YWlsYWJsZSB5ZXQuPC9kaXY+CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdQZXJmb3JtYW5jZScgJiYgKAogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxMnB4JyB9fT4KICAgICAgICAgICAgICAgICAge2VucmljaGVkLm1hcCgoaCwgaSkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhclcgPSB0b3RhbHMudG90YWxWYWx1ZSA+IDAgPyAoaC52YWx1ZSAvIHRvdGFscy50b3RhbFZhbHVlKSAqIDEwMCA6IDA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sID0gQUxMT0NfQ09MT1JTW2kgJSBBTExPQ19DT0xPUlMubGVuZ3RoXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1Bvc0ggPSBoLnBubCA+PSAwOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aC5pZH0gc3R5bGU9e3sgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICcxcHggc29saWQgJyArIEMuYm9yZGVyLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzE2cHgnLCBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxMHB4JyB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTBweCcgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnMTBweCcsIGhlaWdodDogJzEwcHgnLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBiYWNrZ3JvdW5kOiBjb2wsIGZsZXhTaHJpbms6IDAgfX0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxNHB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogQy50ZXh0UHJpbWFyeSB9fT57aC5zeW1ib2x9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IEMudGV4dFNlYyB9fT57aC5uYW1lfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnMjBweCcgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGNvbG9yOiBDLnRleHRQcmltYXJ5IH19PntmbXRVc2QoaC52YWx1ZSl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy50ZXh0U2VjIH19PntiYXJXLnRvRml4ZWQoMSl9JSBvZiBwb3J0Zm9saW88L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgYXMgY29uc3QgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBpc1Bvc0ggPyBDLnBvc2l0aXZlIDogQy5uZWdhdGl2ZSB9fT57aXNQb3NIID8gJysnIDogJyd9e2gucG5sUGN0LnRvRml4ZWQoMil9JTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6IGlzUG9zSCA/IEMucG9zaXRpdmUgOiBDLm5lZ2F0aXZlIH19Pntpc1Bvc0ggPyAnKycgOiAnJ317Zm10VXNkKGgucG5sKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBoZWlnaHQ6ICc0cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIGJvcmRlclJhZGl1czogJzJweCcsIG92ZXJmbG93OiAnaGlkZGVuJyB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdiBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJywgYmFja2dyb3VuZDogY29sLCBib3JkZXJSYWRpdXM6ICcycHgnIH19IGluaXRpYWw9e3sgd2lkdGg6IDAgfX0gYW5pbWF0ZT17eyB3aWR0aDogYmFyVyArICclJyB9fSB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjcsIGRlbGF5OiBpICogMC4wNCB9fSAvPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgPC9tb3Rpb24uZGl2PgogICAgICAgICAgPC9BbmltYXRlUHJlc2VuY2U+CiAgICAgICAgKQogICAgICB9CgogICAgICB7LyogRGlzY2xhaW1lciAqL30KICAgICAge2hvbGRpbmdzLmxlbmd0aCA+IDAgJiYgKAogICAgICAgIDxwIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiAncmdiYSgxMzgsMTM4LDE1OCwwLjUpJywgdGV4dEFsaWduOiAnY2VudGVyJyBhcyBjb25zdCwgbWFyZ2luOiAwLCBsaW5lSGVpZ2h0OiAnMS42JyB9fT4KICAgICAgICAgIFBvcnRmb2xpbyBkYXRhIGlzIHN0b3JlZCBsb2NhbGx5IGluIHlvdXIgYnJvd3Nlci4gUHJpY2VzIGFyZSBzb3VyY2VkIGZyb20gdGhlIGxpdmUgbWFya2V0IGZlZWQuCiAgICAgICAgPC9wPgogICAgICApfQoKICAgICAgey8qIEFkZCBNb2RhbCAqL30KICAgICAgPEFuaW1hdGVQcmVzZW5jZT4KICAgICAgICB7c2hvd0FkZCAmJiA8QWRkTW9kYWwgb25BZGQ9e2hhbmRsZUFkZH0gb25DbG9zZT17Y2xvc2VBZGR9IGV4aXN0aW5nU3ltYm9scz17ZXhpc3RpbmdTeW1ib2xzfSAvPn0KICAgICAgPC9BbmltYXRlUHJlc2VuY2U+CiAgICA8L2Rpdj4KICApOwp9OwoKUG9ydGZvbGlvLmRpc3BsYXlOYW1lID0gJ1BvcnRmb2xpbyc7CmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oUG9ydGZvbGlvKTsK";
const C2 = "LyoqCiAqIERlcml2YXRpdmVzLnRzeCDigJQgWkVSw5ggTUVSSURJQU4gMjAyNiBwdXNoMjYKICogcHVzaDI2OiBGdWxsIHZhcigtLXptLSopIG1pZ3JhdGlvbiAoMCUg4oaSIH44MCUpCiAqIFJlYWwtdGltZSBkZXJpdmF0aXZlcyBkYXNoYm9hcmQ6CiAqIC0gRnVuZGluZyByYXRlcyAoQ29pbmdsYXNzIHB1YmxpYywgMzBzIHJlZnJlc2gpCiAqIC0gT3BlbiBpbnRlcmVzdCAoQ29pbmdsYXNzIHB1YmxpYywgMzBzIHJlZnJlc2gpCiAqIC0gTG9uZy9TaG9ydCByYXRpbyAoQ29pbmdsYXNzIHB1YmxpYywgMzBzIHJlZnJlc2gpCiAqIC0gTGl2ZSBsaXF1aWRhdGlvbiBmZWVkICh1c2VMaXF1aWRhdGlvbnMgV1MgaG9vaykKICogLSBQdXJlIFNWRyBjaGFydHMsIHplcm8gcmVjaGFydHMKICogLSBGdWxsIFJlYWN0Lm1lbW8gKyBkaXNwbGF5TmFtZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8KICogLSBtb3VudGVkUmVmICsgQWJvcnRDb250cm9sbGVyIG9uIGFsbCBmZXRjaGVzCiAqIC0gcmdiYSgpIG9ubHksIHplcm8gaHNsKCkg4pyTCiAqIC0gdmFyKC0tem0tKikgdGhlbWUtYXdhcmUg4pyTIOKGkCBwdXNoMjYKICovCgppbXBvcnQgewogIG1lbW8sIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZVJlZHVjZXIsCn0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyB1c2VMaXF1aWRhdGlvbnMgfSBmcm9tICdAL2hvb2tzL3VzZUxpcXVpZGF0aW9ucyc7CmltcG9ydCB7IGZvcm1hdENvbXBhY3ROdW0sIGZvcm1hdFByaWNlIH0gZnJvbSAnQC9saWIvZm9ybWF0dGVycyc7CmltcG9ydCB7CiAgVHJlbmRpbmdVcCwgVHJlbmRpbmdEb3duLCBaYXAsIEFjdGl2aXR5LCBCYXJDaGFydDMsCiAgQWxlcnRUcmlhbmdsZSwgUmVmcmVzaEN3LCBMb2FkZXIyLAp9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CgovLyDilIDilIDilIAgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgRnVuZGluZ1JhdGUgewogIHN5bWJvbDogc3RyaW5nOwogIHJhdGU6IG51bWJlcjsgICAgICAgLy8gZS5nLiAwLjAwMDEgPSAwLjAxJQogIG5leHRGdW5kaW5nOiBudW1iZXI7IC8vIG1zIGVwb2NoCiAgZXhjaGFuZ2U6IHN0cmluZzsKfQoKaW50ZXJmYWNlIE9wZW5JbnRlcmVzdCB7CiAgc3ltYm9sOiBzdHJpbmc7CiAgb3BlbkludGVyZXN0OiBudW1iZXI7IC8vIFVTRAogIGNoYW5nZTI0aDogbnVtYmVyOyAgICAvLyBwY3QKfQoKaW50ZXJmYWNlIExvbmdTaG9ydFJhdGlvIHsKICBzeW1ib2w6IHN0cmluZzsKICBsb25nUmF0aW86IG51bWJlcjsgIC8vIDAtMQogIHNob3J0UmF0aW86IG51bWJlcjsgLy8gMC0xCn0KCmludGVyZmFjZSBEZXJpdlN0YXRlIHsKICBmdW5kaW5nOiBGdW5kaW5nUmF0ZVtdOwogIG9wZW5JbnRlcmVzdDogT3BlbkludGVyZXN0W107CiAgbG9uZ1Nob3J0OiBMb25nU2hvcnRSYXRpb1tdOwogIGxvYWRpbmc6IGJvb2xlYW47CiAgbGFzdEZldGNoOiBudW1iZXI7CiAgZXJyb3I6IHN0cmluZyB8IG51bGw7Cn0KCi8vIOKUgOKUgOKUgCBTdGF0aWMgZGF0YSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IFRSQUNLRURfU1lNQk9MUyA9IE9iamVjdC5mcmVlemUoWwogICdCVEMnLCAnRVRIJywgJ1NPTCcsICdCTkInLCAnWFJQJywKICAnQURBJywgJ0FWQVgnLCAnRE9HRScsICdMSU5LJywgJ0FSQicsCl0gYXMgY29uc3QpOwoKLy8gQ29pbmdsYXNzIHB1YmxpYyBlbmRwb2ludHMgKG5vIEFQSSBrZXkgbmVlZGVkLCByYXRlIGxpbWl0IH4zMHJlcS9taW4pCmNvbnN0IENHX0JBU0UgPSAnaHR0cHM6Ly9vcGVuLWFwaS5jb2luZ2xhc3MuY29tL3B1YmxpYy92Mic7CmNvbnN0IFJFRlJFU0hfTVMgPSAzMF8wMDA7CgovLyBGYWxsYmFjazogaWYgQ29pbmdsYXNzIHVuYXZhaWxhYmxlLCB1c2UgQmluYW5jZSBmdW5kaW5nUmF0ZSBSRVNUCmNvbnN0IEJJTkFOQ0VfRlVORElORyA9ICdodHRwczovL2ZhcGkuYmluYW5jZS5jb20vZmFwaS92MS9wcmVtaXVtSW5kZXgnOwoKLy8g4pSA4pSA4pSAIFJlZHVjZXIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgp0eXBlIEFjdGlvbiA9CiAgfCB7IHR5cGU6ICdTRVRfRlVORElORyc7IHBheWxvYWQ6IEZ1bmRpbmdSYXRlW10gfQogIHwgeyB0eXBlOiAnU0VUX09JJzsgcGF5bG9hZDogT3BlbkludGVyZXN0W10gfQogIHwgeyB0eXBlOiAnU0VUX0xTJzsgcGF5bG9hZDogTG9uZ1Nob3J0UmF0aW9bXSB9CiAgfCB7IHR5cGU6ICdTRVRfTE9BRElORyc7IHBheWxvYWQ6IGJvb2xlYW4gfQogIHwgeyB0eXBlOiAnU0VUX0VSUk9SJzsgcGF5bG9hZDogc3RyaW5nIHwgbnVsbCB9CiAgfCB7IHR5cGU6ICdTRVRfTEFTVF9GRVRDSCc7IHBheWxvYWQ6IG51bWJlciB9OwoKY29uc3QgSU5JVElBTDogRGVyaXZTdGF0ZSA9IE9iamVjdC5mcmVlemUoewogIGZ1bmRpbmc6IFtdLAogIG9wZW5JbnRlcmVzdDogW10sCiAgbG9uZ1Nob3J0OiBbXSwKICBsb2FkaW5nOiB0cnVlLAogIGxhc3RGZXRjaDogMCwKICBlcnJvcjogbnVsbCwKfSBhcyBEZXJpdlN0YXRlKTsKCmZ1bmN0aW9uIHJlZHVjZXIoc3RhdGU6IERlcml2U3RhdGUsIGFjdGlvbjogQWN0aW9uKTogRGVyaXZTdGF0ZSB7CiAgc3dpdGNoIChhY3Rpb24udHlwZSkgewogICAgY2FzZSAnU0VUX0ZVTkRJTkcnOiAgICByZXR1cm4geyAuLi5zdGF0ZSwgZnVuZGluZzogYWN0aW9uLnBheWxvYWQgfTsKICAgIGNhc2UgJ1NFVF9PSSc6ICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIG9wZW5JbnRlcmVzdDogYWN0aW9uLnBheWxvYWQgfTsKICAgIGNhc2UgJ1NFVF9MUyc6ICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGxvbmdTaG9ydDogYWN0aW9uLnBheWxvYWQgfTsKICAgIGNhc2UgJ1NFVF9MT0FESU5HJzogICAgcmV0dXJuIHsgLi4uc3RhdGUsIGxvYWRpbmc6IGFjdGlvbi5wYXlsb2FkIH07CiAgICBjYXNlICdTRVRfRVJST1InOiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBlcnJvcjogYWN0aW9uLnBheWxvYWQgfTsKICAgIGNhc2UgJ1NFVF9MQVNUX0ZFVENIJzogcmV0dXJuIHsgLi4uc3RhdGUsIGxhc3RGZXRjaDogYWN0aW9uLnBheWxvYWQsIGxvYWRpbmc6IGZhbHNlIH07CiAgICBkZWZhdWx0OiAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTsKICB9Cn0KCi8vIOKUgOKUgOKUgCBEYXRhIGZldGNoZXIgaG9vayDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmZ1bmN0aW9uIHVzZURlcml2RGF0YSgpIHsKICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IHVzZVJlZHVjZXIocmVkdWNlciwgSU5JVElBTCk7CiAgY29uc3QgbW91bnRlZFJlZiA9IHVzZVJlZih0cnVlKTsKICBjb25zdCBhYm9ydFJlZiA9IHVzZVJlZihuZXcgQWJvcnRDb250cm9sbGVyKCkpOwoKICBjb25zdCBmZXRjaEJpbmFuY2VGdW5kaW5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goQklOQU5DRV9GVU5ESU5HLCB7IHNpZ25hbDogYWJvcnRSZWYuY3VycmVudC5zaWduYWwgfSk7CiAgICAgIGlmICghcmVzLm9rKSByZXR1cm47CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpIGFzIEFycmF5PHsKICAgICAgICBzeW1ib2w6IHN0cmluZzsKICAgICAgICBsYXN0RnVuZGluZ1JhdGU6IHN0cmluZzsKICAgICAgICBuZXh0RnVuZGluZ1RpbWU6IG51bWJlcjsKICAgICAgfT47CiAgICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47CgogICAgICBjb25zdCBmaWx0ZXJlZDogRnVuZGluZ1JhdGVbXSA9IGRhdGEKICAgICAgICAuZmlsdGVyKGQgPT4gVFJBQ0tFRF9TWU1CT0xTLnNvbWUocyA9PiBkLnN5bWJvbCA9PT0gcyArICdVU0RUJykpCiAgICAgICAgLm1hcChkID0+ICh7CiAgICAgICAgICBzeW1ib2w6IGQuc3ltYm9sLnJlcGxhY2UoJ1VTRFQnLCAnJyksCiAgICAgICAgICByYXRlOiBwYXJzZUZsb2F0KGQubGFzdEZ1bmRpbmdSYXRlKSwKICAgICAgICAgIG5leHRGdW5kaW5nOiBkLm5leHRGdW5kaW5nVGltZSwKICAgICAgICAgIGV4Y2hhbmdlOiAnQmluYW5jZScsCiAgICAgICAgfSkpCiAgICAgICAgLnNvcnQoKGEsIGIpID0+IE1hdGguYWJzKGIucmF0ZSkgLSBNYXRoLmFicyhhLnJhdGUpKTsKCiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9GVU5ESU5HJywgcGF5bG9hZDogZmlsdGVyZWQgfSk7CiAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7CiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjsKICAgIH0KICB9LCBbXSk7CgogIC8vIE9wZW4gaW50ZXJlc3QgZnJvbSBCaW5hbmNlIGZhcGkgKHB1YmxpYywgbm8ga2V5IG5lZWRlZCkKICBjb25zdCBmZXRjaE9JID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzdWx0czogT3BlbkludGVyZXN0W10gPSBbXTsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKAogICAgICAgIFRSQUNLRURfU1lNQk9MUy5zbGljZSgwLCA4KS5tYXAoYXN5bmMgc3ltID0+IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKAogICAgICAgICAgICAgICdodHRwczovL2ZhcGkuYmluYW5jZS5jb20vZmFwaS92MS9vcGVuSW50ZXJlc3Q/c3ltYm9sPScgKyBzeW0gKyAnVVNEVCcsCiAgICAgICAgICAgICAgeyBzaWduYWw6IGFib3J0UmVmLmN1cnJlbnQuc2lnbmFsIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybjsKICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHJlcy5qc29uKCkgYXMgeyBvcGVuSW50ZXJlc3Q6IHN0cmluZzsgc3ltYm9sOiBzdHJpbmcgfTsKICAgICAgICAgICAgLy8gR2V0IDI0aCBzdGF0cyBmb3IgY2hhbmdlCiAgICAgICAgICAgIGNvbnN0IHN0YXRzUmVzID0gYXdhaXQgZmV0Y2goCiAgICAgICAgICAgICAgJ2h0dHBzOi8vZmFwaS5iaW5hbmNlLmNvbS9mYXBpL3YxL3RpY2tlci8yNGhyP3N5bWJvbD0nICsgc3ltICsgJ1VTRFQnLAogICAgICAgICAgICAgIHsgc2lnbmFsOiBhYm9ydFJlZi5jdXJyZW50LnNpZ25hbCB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmICghc3RhdHNSZXMub2spIHJldHVybjsKICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBzdGF0c1Jlcy5qc29uKCkgYXMgeyBsYXN0UHJpY2U6IHN0cmluZyB9OwogICAgICAgICAgICBjb25zdCBvaVVzZCA9IHBhcnNlRmxvYXQoZC5vcGVuSW50ZXJlc3QpICogcGFyc2VGbG9hdChzdGF0cy5sYXN0UHJpY2UpOwogICAgICAgICAgICByZXN1bHRzLnB1c2goeyBzeW1ib2w6IHN5bSwgb3BlbkludGVyZXN0OiBvaVVzZCwgY2hhbmdlMjRoOiAwIH0pOwogICAgICAgICAgfSBjYXRjaCB7IC8qIHNraXAgdGhpcyBzeW1ib2wgKi8gfQogICAgICAgIH0pCiAgICAgICk7CiAgICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47CiAgICAgIGNvbnN0IHNvcnRlZCA9IHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYi5vcGVuSW50ZXJlc3QgLSBhLm9wZW5JbnRlcmVzdCk7CiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9PSScsIHBheWxvYWQ6IHNvcnRlZCB9KTsKICAgIH0gY2F0Y2ggeyAvKiBzaWxlbnQgKi8gfQogIH0sIFtdKTsKCiAgLy8gTG9uZy9TaG9ydCByYXRpbyBmcm9tIEJpbmFuY2UgZmFwaSAocHVibGljKQogIGNvbnN0IGZldGNoTFMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCByZXN1bHRzOiBMb25nU2hvcnRSYXRpb1tdID0gW107CiAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZCgKICAgICAgICBUUkFDS0VEX1NZTUJPTFMuc2xpY2UoMCwgOCkubWFwKGFzeW5jIHN5bSA9PiB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgKICAgICAgICAgICAgICAnaHR0cHM6Ly9mYXBpLmJpbmFuY2UuY29tL2Z1dHVyZXMvZGF0YS9nbG9iYWxMb25nU2hvcnRBY2NvdW50UmF0aW8/c3ltYm9sPScgKyBzeW0gKyAnVVNEVCZwZXJpb2Q9NW0mbGltaXQ9MScsCiAgICAgICAgICAgICAgeyBzaWduYWw6IGFib3J0UmVmLmN1cnJlbnQuc2lnbmFsIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybjsKICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHJlcy5qc29uKCkgYXMgQXJyYXk8eyBsb25nQWNjb3VudDogc3RyaW5nOyBzaG9ydEFjY291bnQ6IHN0cmluZyB9PjsKICAgICAgICAgICAgaWYgKCFkWzBdKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGxvbmcgPSBwYXJzZUZsb2F0KGRbMF0ubG9uZ0FjY291bnQpOwogICAgICAgICAgICBjb25zdCBzaG9ydCA9IHBhcnNlRmxvYXQoZFswXS5zaG9ydEFjY291bnQpOwogICAgICAgICAgICByZXN1bHRzLnB1c2goeyBzeW1ib2w6IHN5bSwgbG9uZ1JhdGlvOiBsb25nLCBzaG9ydFJhdGlvOiBzaG9ydCB9KTsKICAgICAgICAgIH0gY2F0Y2ggeyAvKiBza2lwICovIH0KICAgICAgICB9KQogICAgICApOwogICAgICBpZiAoIW1vdW50ZWRSZWYuY3VycmVudCkgcmV0dXJuOwogICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTFMnLCBwYXlsb2FkOiByZXN1bHRzIH0pOwogICAgfSBjYXRjaCB7IC8qIHNpbGVudCAqLyB9CiAgfSwgW10pOwoKICBjb25zdCBmZXRjaEFsbCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHsKICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9FUlJPUicsIHBheWxvYWQ6IG51bGwgfSk7CiAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW2ZldGNoQmluYW5jZUZ1bmRpbmcoKSwgZmV0Y2hPSSgpLCBmZXRjaExTKCldKTsKICAgIGlmIChtb3VudGVkUmVmLmN1cnJlbnQpIHsKICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xBU1RfRkVUQ0gnLCBwYXlsb2FkOiBEYXRlLm5vdygpIH0pOwogICAgfQogIH0sIFtmZXRjaEJpbmFuY2VGdW5kaW5nLCBmZXRjaE9JLCBmZXRjaExTXSk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBtb3VudGVkUmVmLmN1cnJlbnQgPSB0cnVlOwogICAgYWJvcnRSZWYuY3VycmVudCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICAgIGZldGNoQWxsKCk7CiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKGZldGNoQWxsLCBSRUZSRVNIX01TKTsKICAgIHJldHVybiAoKSA9PiB7CiAgICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlOwogICAgICBhYm9ydFJlZi5jdXJyZW50LmFib3J0KCk7CiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgfTsKICB9LCBbZmV0Y2hBbGxdKTsKCiAgcmV0dXJuIHsgc3RhdGUsIHJlZmV0Y2g6IGZldGNoQWxsIH07Cn0KCi8vIOKUgOKUgOKUgCBTdWItY29tcG9uZW50cyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCi8vIEZ1bmRpbmcgUmF0ZSBSb3cKY29uc3QgRnVuZGluZ1JvdyA9IG1lbW8oKHsgaXRlbSB9OiB7IGl0ZW06IEZ1bmRpbmdSYXRlIH0pID0+IHsKICBjb25zdCBwY3QgPSBpdGVtLnJhdGUgKiAxMDA7CiAgY29uc3QgaXNQb3NpdGl2ZSA9IHBjdCA+PSAwOwogIGNvbnN0IGlzSG90ID0gTWF0aC5hYnMocGN0KSA+IDAuMDU7CiAgY29uc3QgY29sb3IgPSBpc1Bvc2l0aXZlID8gJ3JnYmEoNTIsMjExLDE1MywxKScgOiAncmdiYSgyNTEsMTEzLDEzMywxKSc7CiAgY29uc3QgYmdDb2xvciA9IGlzUG9zaXRpdmUgPyAncmdiYSg1MiwyMTEsMTUzLDAuMDgpJyA6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuMDgpJzsKCiAgY29uc3QgbmV4dE1zID0gaXRlbS5uZXh0RnVuZGluZyAtIERhdGUubm93KCk7CiAgY29uc3QgbmV4dEhyID0gTWF0aC5mbG9vcihuZXh0TXMgLyAzNjAwMDAwKTsKICBjb25zdCBuZXh0TWluID0gTWF0aC5mbG9vcigobmV4dE1zICUgMzYwMDAwMCkgLyA2MDAwMCk7CiAgY29uc3QgbmV4dExhYmVsID0gbmV4dE1zID4gMCA/IG5leHRIciArICdoICcgKyBuZXh0TWluICsgJ20nIDogJ+KAlCc7CgogIHJldHVybiAoCiAgICA8ZGl2CiAgICAgIHN0eWxlPXt7CiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTJweCcsCiAgICAgICAgcGFkZGluZzogJzEwcHggMTZweCcsCiAgICAgICAgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLXptLWRpdmlkZXIpJywKICAgICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZCAwLjEycycsCiAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsCiAgICAgIH19CiAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tem0tc3VyZmFjZS1ob3ZlciknOyB9fQogICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7IGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JzsgfX0KICAgID4KICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA3MDAsIHdpZHRoOiAnNTZweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScsIGZsZXhTaHJpbms6IDAgfX0+CiAgICAgICAge2l0ZW0uc3ltYm9sfQogICAgICA8L3NwYW4+CgogICAgICB7LyogUmF0ZSBiYXIgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSwgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JyB9fT4KICAgICAgICA8ZGl2CiAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kOiBiZ0NvbG9yLCBjb2xvciwgcGFkZGluZzogJzJweCA4cHgnLCBib3JkZXJSYWRpdXM6ICc0cHgnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGZvbnRXZWlnaHQ6IDcwMCwgbWluV2lkdGg6ICc3MnB4JywgdGV4dEFsaWduOiAncmlnaHQnIH19CiAgICAgICAgPgogICAgICAgICAgeyhwY3QgPj0gMCA/ICcrJyA6ICcnKSArIHBjdC50b0ZpeGVkKDQpICsgJyUnfQogICAgICAgIDwvZGl2PgogICAgICAgIHtpc0hvdCAmJiAoCiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjkpJyB9fT7wn5SlPC9zcGFuPgogICAgICAgICl9CiAgICAgIDwvZGl2PgoKICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCB3aWR0aDogJzY0cHgnLCB0ZXh0QWxpZ246ICdyaWdodCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJywgZmxleFNocmluazogMCB9fT4KICAgICAgICB7bmV4dExhYmVsfQogICAgICA8L3NwYW4+CiAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4Jywgd2lkdGg6ICc1NnB4JywgdGV4dEFsaWduOiAncmlnaHQnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgZmxleFNocmluazogMCB9fT4KICAgICAgICB7aXRlbS5leGNoYW5nZX0KICAgICAgPC9zcGFuPgogICAgPC9kaXY+CiAgKTsKfSk7CkZ1bmRpbmdSb3cuZGlzcGxheU5hbWUgPSAnRnVuZGluZ1Jvdyc7CgovLyBPcGVuIEludGVyZXN0IFJvdwpjb25zdCBPSVJvdyA9IG1lbW8oKHsgaXRlbSwgbWF4T0kgfTogeyBpdGVtOiBPcGVuSW50ZXJlc3Q7IG1heE9JOiBudW1iZXIgfSkgPT4gewogIGNvbnN0IGJhclBjdCA9IG1heE9JID4gMCA/IChpdGVtLm9wZW5JbnRlcmVzdCAvIG1heE9JKSAqIDEwMCA6IDA7CgogIHJldHVybiAoCiAgICA8ZGl2CiAgICAgIHN0eWxlPXt7CiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzEycHgnLAogICAgICAgIHBhZGRpbmc6ICcxMHB4IDE2cHgnLAogICAgICAgIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS16bS1kaXZpZGVyKScsCiAgICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQgMC4xMnMnLAogICAgICB9fQogICAgICBvbk1vdXNlRW50ZXI9eyhlKSA9PiB7IGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLXptLXN1cmZhY2UtaG92ZXIpJzsgfX0KICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7IH19CiAgICA+CiAgICAgIHsvKiBCYXIgYmcgKi99CiAgICAgIDxkaXYKICAgICAgICBzdHlsZT17ewogICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IDAsIHRvcDogMCwgYm90dG9tOiAwLAogICAgICAgICAgd2lkdGg6IGJhclBjdCArICclJywKICAgICAgICAgIGJhY2tncm91bmQ6ICd2YXIoLS16bS1hY2NlbnQtZGltKScsCiAgICAgICAgICB3aWxsQ2hhbmdlOiAnd2lkdGgnLAogICAgICAgICAgdHJhbnNpdGlvbjogJ3dpZHRoIDAuNXMgZWFzZScsCiAgICAgICAgfX0KICAgICAgLz4KICAgICAgPHNwYW4gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgZm9udFdlaWdodDogNzAwLCB3aWR0aDogJzU2cHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknLCBmbGV4U2hyaW5rOiAwIH19PgogICAgICAgIHtpdGVtLnN5bWJvbH0KICAgICAgPC9zcGFuPgogICAgICA8c3BhbiBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGZsZXg6IDEsIHRleHRBbGlnbjogJ3JpZ2h0JywgY29sb3I6ICd2YXIoLS16bS1hY2NlbnQpJyB9fT4KICAgICAgICB7JyQnICsgZm9ybWF0Q29tcGFjdE51bShpdGVtLm9wZW5JbnRlcmVzdCl9CiAgICAgIDwvc3Bhbj4KICAgIDwvZGl2PgogICk7Cn0pOwpPSVJvdy5kaXNwbGF5TmFtZSA9ICdPSVJvdyc7CgovLyBMb25nL1Nob3J0IEJhcgpjb25zdCBMU0JhciA9IG1lbW8oKHsgaXRlbSB9OiB7IGl0ZW06IExvbmdTaG9ydFJhdGlvIH0pID0+IHsKICBjb25zdCBsb25nUGN0ID0gaXRlbS5sb25nUmF0aW8gKiAxMDA7CiAgY29uc3Qgc2hvcnRQY3QgPSBpdGVtLnNob3J0UmF0aW8gKiAxMDA7CiAgY29uc3QgaXNMb25nRG9tID0gbG9uZ1BjdCA+IDUwOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAnMTBweCAxNnB4JywgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLXptLWRpdmlkZXIpJyB9fT4KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Cb3R0b206ICc2cHgnIH19PgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAge2l0ZW0uc3ltYm9sfQogICAgICAgIDwvc3Bhbj4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzhweCcgfX0+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMC45KScgfX0+CiAgICAgICAgICAgIHsnTCAnICsgbG9uZ1BjdC50b0ZpeGVkKDEpICsgJyUnfQogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjkpJyB9fT4KICAgICAgICAgICAgeydTICcgKyBzaG9ydFBjdC50b0ZpeGVkKDEpICsgJyUnfQogICAgICAgICAgPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgaGVpZ2h0OiAnNnB4JywgYm9yZGVyUmFkaXVzOiAnOTk5cHgnLCBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICd2YXIoLS16bS1zdXJmYWNlLTIpJyB9fT4KICAgICAgICA8ZGl2CiAgICAgICAgICBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgbGVmdDogMCwgdG9wOiAwLCBoZWlnaHQ6ICcxMDAlJywgYm9yZGVyUmFkaXVzOiAnOTk5cHggMCAwIDk5OXB4Jywgd2lkdGg6IGxvbmdQY3QgKyAnJScsIGJhY2tncm91bmQ6ICdyZ2JhKDUyLDIxMSwxNTMsMC43NSknLCB3aWxsQ2hhbmdlOiAnd2lkdGgnLCB0cmFuc2l0aW9uOiAnd2lkdGggMC41cyBlYXNlJyB9fQogICAgICAgIC8+CiAgICAgICAgPGRpdgogICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIHJpZ2h0OiAwLCB0b3A6IDAsIGhlaWdodDogJzEwMCUnLCBib3JkZXJSYWRpdXM6ICcwIDk5OXB4IDk5OXB4IDAnLCB3aWR0aDogc2hvcnRQY3QgKyAnJScsIGJhY2tncm91bmQ6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuNzUpJywgd2lsbENoYW5nZTogJ3dpZHRoJywgdHJhbnNpdGlvbjogJ3dpZHRoIDAuNXMgZWFzZScgfX0KICAgICAgICAvPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpMU0Jhci5kaXNwbGF5TmFtZSA9ICdMU0Jhcic7CgovLyBGdW5kaW5nIHJhdGUgU1ZHIG1pbmkgY2hhcnQgKHNob3dzIGRpc3RyaWJ1dGlvbikKY29uc3QgRnVuZGluZ0Rpc3RDaGFydCA9IG1lbW8oKHsgZGF0YSB9OiB7IGRhdGE6IEZ1bmRpbmdSYXRlW10gfSkgPT4gewogIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CgogIGNvbnN0IFcgPSAzMDA7CiAgY29uc3QgSCA9IDYwOwogIGNvbnN0IFBBRCA9IHsgdDogNCwgYjogMTYsIGw6IDQsIHI6IDQgfTsKICBjb25zdCBjVyA9IFcgLSBQQUQubCAtIFBBRC5yOwogIGNvbnN0IGNIID0gSCAtIFBBRC50IC0gUEFELmI7CgogIGNvbnN0IHJhdGVzID0gZGF0YS5tYXAoZCA9PiBkLnJhdGUgKiAxMDApOwogIGNvbnN0IG1heEFicyA9IE1hdGgubWF4KC4uLnJhdGVzLm1hcChNYXRoLmFicyksIDAuMDEpOwogIGNvbnN0IG1pZFkgPSBQQUQudCArIGNIIC8gMjsKICBjb25zdCBiYXJXID0gTWF0aC5mbG9vcihjVyAvIHJhdGVzLmxlbmd0aCkgLSAyOwoKICByZXR1cm4gKAogICAgPHN2ZyB3aWR0aD0iMTAwJSIgdmlld0JveD17JzAgMCAnICsgVyArICcgJyArIEh9IHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPXt7IGRpc3BsYXk6ICdibG9jaycsIGhlaWdodDogSCB9fT4KICAgICAgey8qIFplcm8gbGluZSAqL30KICAgICAgPGxpbmUgeDE9e1BBRC5sfSB5MT17bWlkWX0geDI9e1cgLSBQQUQucn0geTI9e21pZFl9IHN0cm9rZT0idmFyKC0tem0tYWNjZW50LWJnKSIgc3Ryb2tlV2lkdGg9IjEiIC8+CgogICAgICB7cmF0ZXMubWFwKChyLCBpKSA9PiB7CiAgICAgICAgY29uc3QgeCA9IFBBRC5sICsgaSAqIChjVyAvIHJhdGVzLmxlbmd0aCkgKyAxOwogICAgICAgIGNvbnN0IGJhckggPSBNYXRoLmFicyhyKSAvIG1heEFicyAqIChjSCAvIDIgLSAyKTsKICAgICAgICBjb25zdCBpc1BvcyA9IHIgPj0gMDsKICAgICAgICBjb25zdCB5ID0gaXNQb3MgPyBtaWRZIC0gYmFySCA6IG1pZFk7CiAgICAgICAgY29uc3QgZmlsbCA9IGlzUG9zID8gJ3JnYmEoNTIsMjExLDE1MywwLjc1KScgOiAncmdiYSgyNTEsMTEzLDEzMywwLjc1KSc7CiAgICAgICAgY29uc3Qgc3ltID0gZGF0YVtpXT8uc3ltYm9sID8/ICcnOwoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgPGcga2V5PXtzeW19PgogICAgICAgICAgICA8cmVjdCB4PXt4fSB5PXt5fSB3aWR0aD17YmFyV30gaGVpZ2h0PXtNYXRoLm1heChiYXJILCAxKX0gZmlsbD17ZmlsbH0gcng9IjEiIC8+CiAgICAgICAgICAgIDx0ZXh0CiAgICAgICAgICAgICAgeD17eCArIGJhclcgLyAyfQogICAgICAgICAgICAgIHk9e0ggLSAzfQogICAgICAgICAgICAgIHRleHRBbmNob3I9Im1pZGRsZSIKICAgICAgICAgICAgICBmb250U2l6ZT0iNyIKICAgICAgICAgICAgICBmb250RmFtaWx5PXtGT05UX01PTk99CiAgICAgICAgICAgICAgZmlsbD0idmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpIgogICAgICAgICAgICA+CiAgICAgICAgICAgICAge3N5bX0KICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgPC9nPgogICAgICAgICk7CiAgICAgIH0pfQogICAgPC9zdmc+CiAgKTsKfSk7CkZ1bmRpbmdEaXN0Q2hhcnQuZGlzcGxheU5hbWUgPSAnRnVuZGluZ0Rpc3RDaGFydCc7CgovLyBMaXF1aWRhdGlvbiBzdW1tYXJ5IGJhcgpjb25zdCBMaXFTdW1tYXJ5ID0gbWVtbygoeyBsb25nVXNkLCBzaG9ydFVzZCB9OiB7IGxvbmdVc2Q6IG51bWJlcjsgc2hvcnRVc2Q6IG51bWJlciB9KSA9PiB7CiAgY29uc3QgdG90YWwgPSBsb25nVXNkICsgc2hvcnRVc2Q7CiAgY29uc3QgbG9uZ1BjdCA9IHRvdGFsID4gMCA/IChsb25nVXNkIC8gdG90YWwpICogMTAwIDogNTA7CiAgY29uc3Qgc2hvcnRQY3QgPSB0b3RhbCA+IDAgPyAoc2hvcnRVc2QgLyB0b3RhbCkgKiAxMDAgOiA1MDsKCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogJzEycHggMTZweCcgfX0+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgbWFyZ2luQm90dG9tOiAnOHB4JyB9fT4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICA8VHJlbmRpbmdEb3duIHNpemU9ezEyfSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMC44KScgfX0gLz4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PkxPTkcgTElRPC9zcGFuPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywxKScgfX0+CiAgICAgICAgICAgIHsnJCcgKyBmb3JtYXRDb21wYWN0TnVtKGxvbmdVc2QpfQogICAgICAgICAgPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JyB9fT4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywxKScgfX0+CiAgICAgICAgICAgIHsnJCcgKyBmb3JtYXRDb21wYWN0TnVtKHNob3J0VXNkKX0KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PlNIT1JUIExJUTwvc3Bhbj4KICAgICAgICAgIDxUcmVuZGluZ1VwIHNpemU9ezEyfSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywwLjgpJyB9fSAvPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgaGVpZ2h0OiAnOHB4JywgYm9yZGVyUmFkaXVzOiAnOTk5cHgnLCBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICd2YXIoLS16bS1zdXJmYWNlLTIpJyB9fT4KICAgICAgICA8ZGl2CiAgICAgICAgICBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgbGVmdDogMCwgdG9wOiAwLCBoZWlnaHQ6ICcxMDAlJywgYm9yZGVyUmFkaXVzOiAnOTk5cHggMCAwIDk5OXB4Jywgd2lkdGg6IGxvbmdQY3QgKyAnJScsIGJhY2tncm91bmQ6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuNyknLCB3aWxsQ2hhbmdlOiAnd2lkdGgnLCB0cmFuc2l0aW9uOiAnd2lkdGggMC41cyBlYXNlJyB9fQogICAgICAgIC8+CiAgICAgICAgPGRpdgogICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIHJpZ2h0OiAwLCB0b3A6IDAsIGhlaWdodDogJzEwMCUnLCBib3JkZXJSYWRpdXM6ICcwIDk5OXB4IDk5OXB4IDAnLCB3aWR0aDogc2hvcnRQY3QgKyAnJScsIGJhY2tncm91bmQ6ICdyZ2JhKDUyLDIxMSwxNTMsMC43KScsIHdpbGxDaGFuZ2U6ICd3aWR0aCcsIHRyYW5zaXRpb246ICd3aWR0aCAwLjVzIGVhc2UnIH19CiAgICAgICAgLz4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKTGlxU3VtbWFyeS5kaXNwbGF5TmFtZSA9ICdMaXFTdW1tYXJ5JzsKCi8vIOKUgOKUgOKUgCBNYWluIFBhZ2Ug4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBEZXJpdmF0aXZlcyA9IG1lbW8oKCkgPT4gewogIGNvbnN0IHsgaXNNb2JpbGUsIGlzVGFibGV0IH0gPSB1c2VCcmVha3BvaW50KCk7CiAgY29uc3QgeyBzdGF0ZSwgcmVmZXRjaCB9ID0gdXNlRGVyaXZEYXRhKCk7CiAgY29uc3QgbGlxID0gdXNlTGlxdWlkYXRpb25zKCk7CgogIGNvbnN0IG1heE9JID0gdXNlTWVtbygoKSA9PgogICAgTWF0aC5tYXgoLi4uc3RhdGUub3BlbkludGVyZXN0Lm1hcChvID0+IG8ub3BlbkludGVyZXN0KSwgMSksCiAgICBbc3RhdGUub3BlbkludGVyZXN0XQogICk7CgogIGNvbnN0IGF2Z0Z1bmRpbmcgPSB1c2VNZW1vKCgpID0+IHsKICAgIGlmIChzdGF0ZS5mdW5kaW5nLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7CiAgICByZXR1cm4gc3RhdGUuZnVuZGluZy5yZWR1Y2UoKHMsIGYpID0+IHMgKyBmLnJhdGUsIDApIC8gc3RhdGUuZnVuZGluZy5sZW5ndGggKiAxMDA7CiAgfSwgW3N0YXRlLmZ1bmRpbmddKTsKCiAgY29uc3QgdG90YWxPSSA9IHVzZU1lbW8oKCkgPT4KICAgIHN0YXRlLm9wZW5JbnRlcmVzdC5yZWR1Y2UoKHMsIG8pID0+IHMgKyBvLm9wZW5JbnRlcmVzdCwgMCksCiAgICBbc3RhdGUub3BlbkludGVyZXN0XQogICk7CgogIGNvbnN0IGRvbWluYW50TFMgPSB1c2VNZW1vKCgpID0+IHsKICAgIGNvbnN0IGJ0YyA9IHN0YXRlLmxvbmdTaG9ydC5maW5kKGwgPT4gbC5zeW1ib2wgPT09ICdCVEMnKTsKICAgIHJldHVybiBidGMgPz8gbnVsbDsKICB9LCBbc3RhdGUubG9uZ1Nob3J0XSk7CgogIGNvbnN0IHJlY2VudExpcXMgPSB1c2VNZW1vKCgpID0+IGxpcS5ldmVudHMuc2xpY2UoMCwgMzApLCBbbGlxLmV2ZW50c10pOwoKICBjb25zdCB3c0NvbG9yID0gbGlxLndzU3RhdHVzID09PSAnY29ubmVjdGVkJwogICAgPyAncmdiYSg1MiwyMTEsMTUzLDEpJwogICAgOiBsaXEud3NTdGF0dXMgPT09ICdyZWNvbm5lY3RpbmcnCiAgICA/ICdyZ2JhKDI1MSwxOTEsMzYsMSknCiAgICA6ICdyZ2JhKDI1MSwxMTMsMTMzLDEpJzsKCiAgY29uc3QgbGFzdEZldGNoTGFiZWwgPSB1c2VNZW1vKCgpID0+IHsKICAgIGlmICghc3RhdGUubGFzdEZldGNoKSByZXR1cm4gJ+KAlCc7CiAgICBjb25zdCBkaWZmID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIHN0YXRlLmxhc3RGZXRjaCkgLyAxMDAwKTsKICAgIHJldHVybiBkaWZmICsgJ3MgYWdvJzsKICB9LCBbc3RhdGUubGFzdEZldGNoXSk7CgogIGNvbnN0IENBUkRfU1RZTEUgPSBPYmplY3QuZnJlZXplKHsKICAgIGJhY2tncm91bmQ6ICd2YXIoLS16bS1nbGFzcy1iZyknLAogICAgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknLAogICAgYm9yZGVyUmFkaXVzOiAnMTJweCcsCiAgICBvdmVyZmxvdzogJ2hpZGRlbicgYXMgY29uc3QsCiAgfSk7CgogIGNvbnN0IFBBTkVMX0hEUiA9IE9iamVjdC5mcmVlemUoewogICAgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywKICAgIHBhZGRpbmc6ICcxMHB4IDE2cHgnLAogICAgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknLAogICAgYmFja2dyb3VuZDogJ3ZhcigtLXptLXN1cmZhY2UtMSknLAogIH0pOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KCiAgICAgIHsvKiBIZWFkZXIgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4V3JhcDogJ3dyYXAnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgPGgxIHN0eWxlPXt7IG1hcmdpbjogMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzE4cHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScsIGxldHRlclNwYWNpbmc6ICcwLjA0ZW0nIH19PgogICAgICAgICAgREVSSVZBVElWRVMgJmFtcDsgUEVSUFMKICAgICAgICA8L2gxPgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JywgcGFkZGluZzogJzNweCA4cHgnLCBib3JkZXJSYWRpdXM6ICc2cHgnLCBiYWNrZ3JvdW5kOiAndmFyKC0tem0tcG9zaXRpdmUtYmcpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLXBvc2l0aXZlLWJvcmRlciknIH19PgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgd2lkdGg6ICc2cHgnLCBoZWlnaHQ6ICc2cHgnLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBiYWNrZ3JvdW5kOiB3c0NvbG9yLCBib3hTaGFkb3c6IGxpcS53c1N0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcgPyAnMCAwIDVweCAnICsgd3NDb2xvciA6ICdub25lJywgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsIGZsZXhTaHJpbms6IDAgfX0gLz4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMC45KScgfX0+CiAgICAgICAgICAgIExJUSBMSVZFIMK3IEJpbmFuY2UgRnV0dXJlcwogICAgICAgICAgPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JywgcGFkZGluZzogJzNweCA4cHgnLCBib3JkZXJSYWRpdXM6ICc2cHgnLCBiYWNrZ3JvdW5kOiAndmFyKC0tem0tZ2xhc3MtYmcpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknIH19PgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIHsnUkVTVCDCtyAnICsgbGFzdEZldGNoTGFiZWx9CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGJ1dHRvbgogICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgb25DbGljaz17cmVmZXRjaH0KICAgICAgICAgIGFyaWEtbGFiZWw9IlJlZnJlc2ggZGVyaXZhdGl2ZXMgZGF0YSIKICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzZweCcsIHBhZGRpbmc6ICczcHggMTBweCcsIGJvcmRlclJhZGl1czogJzZweCcsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1hY2NlbnQtYm9yZGVyKScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJywgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgY3Vyc29yOiAncG9pbnRlcicsIG1hcmdpbkxlZnQ6ICdhdXRvJywgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJyB9fQogICAgICAgICAgb25Nb3VzZUVudGVyPXsoZSkgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS16bS1hY2NlbnQtZGltKSc7IGUuY3VycmVudFRhcmdldC5zdHlsZS5jb2xvciA9ICdyZ2JhKDk2LDE2NSwyNTAsMSknOyB9fQogICAgICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7IGUuY3VycmVudFRhcmdldC5zdHlsZS5jb2xvciA9ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknOyB9fQogICAgICAgID4KICAgICAgICAgIDxSZWZyZXNoQ3cgc2l6ZT17MTF9IC8+CiAgICAgICAgICA8c3Bhbj5SRUZSRVNIPC9zcGFuPgogICAgICAgIDwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBUb3Agc3RhdHMgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAncmVwZWF0KDQsIDFmciknLCBnYXA6ICcxMnB4JyB9fT4KICAgICAgICB7WwogICAgICAgICAgewogICAgICAgICAgICBsYWJlbDogJ0F2ZyBGdW5kaW5nIFJhdGUnLAogICAgICAgICAgICB2YWx1ZTogKGF2Z0Z1bmRpbmcgPj0gMCA/ICcrJyA6ICcnKSArIGF2Z0Z1bmRpbmcudG9GaXhlZCg0KSArICclJywKICAgICAgICAgICAgY29sb3I6IGF2Z0Z1bmRpbmcgPj0gMCA/ICdyZ2JhKDUyLDIxMSwxNTMsMSknIDogJ3JnYmEoMjUxLDExMywxMzMsMSknLAogICAgICAgICAgICBpY29uOiBBY3Rpdml0eSwKICAgICAgICAgICAgc3ViOiAnOGggcmF0ZSDCtyAnICsgc3RhdGUuZnVuZGluZy5sZW5ndGggKyAnIHBhaXJzJywKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGxhYmVsOiAnVG90YWwgT3BlbiBJbnRlcmVzdCcsCiAgICAgICAgICAgIHZhbHVlOiAnJCcgKyBmb3JtYXRDb21wYWN0TnVtKHRvdGFsT0kpLAogICAgICAgICAgICBjb2xvcjogJ3ZhcigtLXptLWFjY2VudCknLAogICAgICAgICAgICBpY29uOiBCYXJDaGFydDMsCiAgICAgICAgICAgIHN1Yjogc3RhdGUub3BlbkludGVyZXN0Lmxlbmd0aCArICcgcGFpcnMgdHJhY2tlZCcsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBsYWJlbDogJ0JUQyBMb25nL1Nob3J0JywKICAgICAgICAgICAgdmFsdWU6IGRvbWluYW50TFMKICAgICAgICAgICAgICA/IChkb21pbmFudExTLmxvbmdSYXRpbyAqIDEwMCkudG9GaXhlZCgxKSArICclIC8gJyArIChkb21pbmFudExTLnNob3J0UmF0aW8gKiAxMDApLnRvRml4ZWQoMSkgKyAnJScKICAgICAgICAgICAgICA6ICfigJQnLAogICAgICAgICAgICBjb2xvcjogZG9taW5hbnRMUyAmJiBkb21pbmFudExTLmxvbmdSYXRpbyA+IDAuNSA/ICdyZ2JhKDUyLDIxMSwxNTMsMSknIDogJ3JnYmEoMjUxLDExMywxMzMsMSknLAogICAgICAgICAgICBpY29uOiBUcmVuZGluZ1VwLAogICAgICAgICAgICBzdWI6ICc1bSBwZXJpb2QgwrcgQmluYW5jZScsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBsYWJlbDogJzI0aCBMaXF1aWRhdGlvbnMnLAogICAgICAgICAgICB2YWx1ZTogJyQnICsgZm9ybWF0Q29tcGFjdE51bShsaXEuc3RhdHMudG90YWxMb25nTGlxVXNkICsgbGlxLnN0YXRzLnRvdGFsU2hvcnRMaXFVc2QpLAogICAgICAgICAgICBjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwxKScsCiAgICAgICAgICAgIGljb246IFphcCwKICAgICAgICAgICAgc3ViOiBsaXEuc3RhdHMuZXZlbnRzUGVyTWludXRlICsgJyBldmVudHMvbWluJywKICAgICAgICAgIH0sCiAgICAgICAgXS5tYXAoc3RhdCA9PiB7CiAgICAgICAgICBjb25zdCBJY29uID0gc3RhdC5pY29uOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgPGRpdiBrZXk9e3N0YXQubGFiZWx9IHN0eWxlPXt7IC4uLkNBUkRfU1RZTEUsIHBhZGRpbmc6ICcxNHB4IDE2cHgnIH19PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JywgbWFyZ2luQm90dG9tOiAnNnB4JyB9fT4KICAgICAgICAgICAgICAgIDxJY29uIHNpemU9ezExfSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0gLz4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICc5cHgnLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNmVtJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyB9fT4KICAgICAgICAgICAgICAgICAge3N0YXQubGFiZWx9CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTZweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IHN0YXQuY29sb3IsIG1pbkhlaWdodDogJzI0cHgnIH19PgogICAgICAgICAgICAgICAge3N0YXRlLmxvYWRpbmcgJiYgc3RhdC52YWx1ZSA9PT0gJ+KAlCcgPyAoCiAgICAgICAgICAgICAgICAgIDxMb2FkZXIyIHNpemU9ezE0fSBzdHlsZT17eyBjb2xvcjogc3RhdC5jb2xvciwgYW5pbWF0aW9uOiAnc3BpbiAxcyBsaW5lYXIgaW5maW5pdGUnIH19IC8+CiAgICAgICAgICAgICAgICApIDogc3RhdC52YWx1ZX0KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICc5cHgnLCBtYXJnaW5Ub3A6ICc0cHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICAgIHtzdGF0LnN1Yn0KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICApOwogICAgICAgIH0pfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBNYWluIDMtY29sdW1uIGdyaWQgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAnMWZyIDFmciAxZnInLCBnYXA6ICcxNnB4JyB9fT4KCiAgICAgICAgey8qIOKUgOKUgCBGdW5kaW5nIFJhdGVzIOKUgOKUgCAqL30KICAgICAgICA8ZGl2IHN0eWxlPXtDQVJEX1NUWUxFfT4KICAgICAgICAgIDxkaXYgc3R5bGU9e1BBTkVMX0hEUn0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JyB9fT4KICAgICAgICAgICAgICA8QWN0aXZpdHkgc2l6ZT17MTN9IHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tYWNjZW50KScgfX0gLz4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgICAgICAgIEZVTkRJTkcgUkFURVMKICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgICAgOGggwrcgQmluYW5jZSBQZXJwcwogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICB7LyogTWluaSBjaGFydCAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogJzEycHggMTJweCA0cHgnIH19PgogICAgICAgICAgICA8RnVuZGluZ0Rpc3RDaGFydCBkYXRhPXtzdGF0ZS5mdW5kaW5nfSAvPgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgey8qIENvbHVtbiBoZWFkZXJzICovfQogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICc1NnB4IDFmciA2NHB4IDU2cHgnLCBwYWRkaW5nOiAnNnB4IDE2cHgnLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tem0tZGl2aWRlci1zdHJvbmcpJywgYmFja2dyb3VuZDogJ3ZhcigtLXptLXN1cmZhY2UtMSknIH19PgogICAgICAgICAgICB7WydQQUlSJywgJ1JBVEUnLCAnTkVYVCcsICdFWCddLm1hcChoID0+ICgKICAgICAgICAgICAgICA8c3BhbiBrZXk9e2h9IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICc5cHgnLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNmVtJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgICAgICB7aH0KICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgPGRpdiBzdHlsZT17eyBvdmVyZmxvd1k6ICdhdXRvJywgbWF4SGVpZ2h0OiAnMzIwcHgnIH19PgogICAgICAgICAgICB7c3RhdGUubG9hZGluZyAmJiBzdGF0ZS5mdW5kaW5nLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgcGFkZGluZzogJzQwcHggMCcgfX0+CiAgICAgICAgICAgICAgICA8TG9hZGVyMiBzaXplPXsyMH0gc3R5bGU9e3sgY29sb3I6ICd2YXIoLS16bS1hY2NlbnQpJywgYW5pbWF0aW9uOiAnc3BpbiAxcyBsaW5lYXIgaW5maW5pdGUnIH19IC8+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkgOiBzdGF0ZS5mdW5kaW5nLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgcGFkZGluZzogJzQwcHggMCcgfX0+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19Pk5vIGRhdGE8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgc3RhdGUuZnVuZGluZy5tYXAoaXRlbSA9PiA8RnVuZGluZ1JvdyBrZXk9e2l0ZW0uc3ltYm9sfSBpdGVtPXtpdGVtfSAvPikKICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7Lyog4pSA4pSAIE9wZW4gSW50ZXJlc3QgKyBMb25nL1Nob3J0IOKUgOKUgCAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGdhcDogJzE2cHgnIH19PgoKICAgICAgICAgIHsvKiBPSSAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgLi4uQ0FSRF9TVFlMRSwgZmxleDogMSB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17UEFORUxfSERSfT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzhweCcgfX0+CiAgICAgICAgICAgICAgICA8QmFyQ2hhcnQzIHNpemU9ezEzfSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoMTY3LDEzOSwyNTAsMC44KScgfX0gLz4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMXB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICAgICAgICBPUEVOIElOVEVSRVNUCiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzlweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgICAgQmluYW5jZSBGdXR1cmVzCiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBvdmVyZmxvd1k6ICdhdXRvJywgbWF4SGVpZ2h0OiAnMjIwcHgnIH19PgogICAgICAgICAgICAgIHtzdGF0ZS5sb2FkaW5nICYmIHN0YXRlLm9wZW5JbnRlcmVzdC5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgcGFkZGluZzogJzMycHggMCcgfX0+CiAgICAgICAgICAgICAgICAgIDxMb2FkZXIyIHNpemU9ezE4fSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLWFjY2VudCknLCBhbmltYXRpb246ICdzcGluIDFzIGxpbmVhciBpbmZpbml0ZScgfX0gLz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuSW50ZXJlc3QubWFwKGl0ZW0gPT4gPE9JUm93IGtleT17aXRlbS5zeW1ib2x9IGl0ZW09e2l0ZW19IG1heE9JPXttYXhPSX0gLz4pCiAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICB7LyogTG9uZy9TaG9ydCAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgLi4uQ0FSRF9TVFlMRSwgZmxleDogMSB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17UEFORUxfSERSfT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzhweCcgfX0+CiAgICAgICAgICAgICAgICA8VHJlbmRpbmdVcCBzaXplPXsxM30gc3R5bGU9e3sgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMC44KScgfX0gLz4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMXB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICAgICAgICBMT05HIC8gU0hPUlQgUkFUSU8KICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgICAgICA1bSDCtyBHbG9iYWwgQWNjb3VudHMKICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG92ZXJmbG93WTogJ2F1dG8nLCBtYXhIZWlnaHQ6ICcyMjBweCcgfX0+CiAgICAgICAgICAgICAge3N0YXRlLmxvYWRpbmcgJiYgc3RhdGUubG9uZ1Nob3J0Lmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBwYWRkaW5nOiAnMzJweCAwJyB9fT4KICAgICAgICAgICAgICAgICAgPExvYWRlcjIgc2l6ZT17MTh9IHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tYWNjZW50KScsIGFuaW1hdGlvbjogJ3NwaW4gMXMgbGluZWFyIGluZmluaXRlJyB9fSAvPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgIHN0YXRlLmxvbmdTaG9ydC5tYXAoaXRlbSA9PiA8TFNCYXIga2V5PXtpdGVtLnN5bWJvbH0gaXRlbT17aXRlbX0gLz4pCiAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIOKUgOKUgCBMaXZlIExpcXVpZGF0aW9uIEZlZWQg4pSA4pSAICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgLi4uQ0FSRF9TVFlMRSwgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgLi4uUEFORUxfSERSLCBmbGV4U2hyaW5rOiAwIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzhweCcgfX0+CiAgICAgICAgICAgICAgPFphcCBzaXplPXsxM30gc3R5bGU9e3sgY29sb3I6ICdyZ2JhKDI1MSwxOTEsMzYsMC44KScgfX0gLz4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgICAgICAgIExJVkUgTElRVUlEQVRJT05TCiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc2cHgnLCBwYWRkaW5nOiAnMnB4IDZweCcsIGJvcmRlclJhZGl1czogJzRweCcsIGJhY2tncm91bmQ6ICd2YXIoLS16bS1nbGFzcy1iZyknLCBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScgfX0+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgd2lkdGg6ICc2cHgnLCBoZWlnaHQ6ICc2cHgnLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBiYWNrZ3JvdW5kOiB3c0NvbG9yLCB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJywgZmxleFNocmluazogMCB9fSAvPgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICc5cHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgICAgICB7bGlxLndzU3RhdHVzLnRvVXBwZXJDYXNlKCl9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIHsvKiBMaXEgc3VtbWFyeSAqL30KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLXptLWRpdmlkZXItc3Ryb25nKScsIGZsZXhTaHJpbms6IDAgfX0+CiAgICAgICAgICAgIDxMaXFTdW1tYXJ5CiAgICAgICAgICAgICAgbG9uZ1VzZD17bGlxLnN0YXRzLnRvdGFsTG9uZ0xpcVVzZH0KICAgICAgICAgICAgICBzaG9ydFVzZD17bGlxLnN0YXRzLnRvdGFsU2hvcnRMaXFVc2R9CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICB7LyogU3RhdHMgcm93ICovfQogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxNnB4JywgcGFkZGluZzogJzZweCAxNnB4JywgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLXptLWRpdmlkZXIpJywgYmFja2dyb3VuZDogJ3ZhcigtLXptLXN1cmZhY2UtMSknLCBmbGV4U2hyaW5rOiAwIH19PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICc5cHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+RXZlbnRzL21pbiA8L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDAuOSknIH19PgogICAgICAgICAgICAgICAge2xpcS5zdGF0cy5ldmVudHNQZXJNaW51dGV9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAge2xpcS5zdGF0cy5sYXJnZXN0RXZlbnQgJiYgKAogICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19Pkxhcmdlc3QgPC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDAuOSknIH19PgogICAgICAgICAgICAgICAgICB7JyQnICsgZm9ybWF0Q29tcGFjdE51bShsaXEuc3RhdHMubGFyZ2VzdEV2ZW50LnVzZFZhbHVlKX0KICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKX0KICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgc2l6ZT17MTB9IHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknLCBtYXJnaW5MZWZ0OiAnYXV0bycgfX0gLz4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIHsvKiBGZWVkICovfQogICAgICAgICAgPGRpdiBzdHlsZT17eyBmbGV4OiAxLCBvdmVyZmxvd1k6ICdhdXRvJywgbWF4SGVpZ2h0OiAnNDAwcHgnIH19PgogICAgICAgICAgICB7cmVjZW50TGlxcy5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBwYWRkaW5nOiAnNDhweCAwJywgZ2FwOiAnOHB4JyB9fT4KICAgICAgICAgICAgICAgIDxaYXAgc2l6ZT17MjJ9IHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19IC8+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgICAgICBXYWl0aW5nIGZvciBsaXF1aWRhdGlvbnPigKYKICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICByZWNlbnRMaXFzLm1hcChldiA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpc0xvbmcgPSBldi5zaWRlID09PSAnU0VMTCc7CiAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IGlzTG9uZyA/ICdyZ2JhKDI1MSwxMTMsMTMzLDEpJyA6ICdyZ2JhKDUyLDIxMSwxNTMsMSknOwogICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBpc0xvbmcgPyAnTE9ORycgOiAnU0hPUlQnOwogICAgICAgICAgICAgICAgY29uc3Qgc3ltID0gZXYuc3ltYm9sLnJlcGxhY2UoJ1VTRFQnLCAnJyk7CiAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gRGF0ZS5ub3coKSAtIGV2LnRpbWVzdGFtcDsKICAgICAgICAgICAgICAgIGNvbnN0IGFnbyA9IGRpZmYgPCA2MDAwMAogICAgICAgICAgICAgICAgICA/IE1hdGguZmxvb3IoZGlmZiAvIDEwMDApICsgJ3MnCiAgICAgICAgICAgICAgICAgIDogTWF0aC5mbG9vcihkaWZmIC8gNjAwMDApICsgJ20nOwoKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICBrZXk9e2V2LmlkfQogICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc4cHgnLAogICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzZweCAxNnB4JywKICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS16bS1kaXZpZGVyKScsCiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBldi5pc1doYWxlID8gJ3JnYmEoMjUxLDE5MSwzNiwwLjAzKScgOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQgMC4xMnMnLAogICAgICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICB7ZXYuaXNXaGFsZSAmJiA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogJzEwcHgnIH19PvCfkIs8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgZm9udFdlaWdodDogNzAwLCB3aWR0aDogJzQwcHgnLCBjb2xvciwgZmxleFNocmluazogMCB9fT4KICAgICAgICAgICAgICAgICAgICAgIHtsYWJlbH0KICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBmb250V2VpZ2h0OiA3MDAsIHdpZHRoOiAnNDBweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScsIGZsZXhTaHJpbms6IDAgfX0+CiAgICAgICAgICAgICAgICAgICAgICB7c3ltfQogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRQcmljZShldi5sYXN0RmlsbGVkUHJpY2UpfQogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbgogICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBmb250V2VpZ2h0OiA2MDAsIG1hcmdpbkxlZnQ6ICdhdXRvJywgY29sb3I6IGV2LmlzTWFqb3IgPyAncmdiYSgyNTEsMTkxLDM2LDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19CiAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgeyckJyArIGZvcm1hdENvbXBhY3ROdW0oZXYudXNkVmFsdWUpfQogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4Jywgd2lkdGg6ICcyMHB4JywgdGV4dEFsaWduOiAncmlnaHQnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgZmxleFNocmluazogMCB9fT4KICAgICAgICAgICAgICAgICAgICAgIHthZ299CiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpEZXJpdmF0aXZlcy5kaXNwbGF5TmFtZSA9ICdEZXJpdmF0aXZlcyc7CgpleHBvcnQgZGVmYXVsdCBEZXJpdmF0aXZlczsK";
const C3 = "LyoqCiAqIEludGVsbGlnZW5jZS50c3gg4oCUIFpFUsOYIE1FUklESUFOIDIwMjYgcHVzaDg1CiAqIHB1c2g4NTogUkVBTCBEQVRBIOKAlCBOZXdzL1NlbnRpbWVudC9OYXJyYXRpdmVzL0Z1bmRpbmcgbGl2ZSBmZWVkcy4KICogLSBSZWFjdC5tZW1vICsgZGlzcGxheU5hbWUg4pyTCiAqIC0gcmdiYSgpIG9ubHkg4pyTICBaZXJvIGNsYXNzTmFtZSDinJMgIFplcm8gdGVtcGxhdGUgbGl0ZXJhbHMgaW4gSlNYIOKckwogKiAtIHVzZUNhbGxiYWNrICsgdXNlTWVtbyDinJMgIG1vdW50ZWRSZWYgaW4gaG9va3Mg4pyTCiAqIC0gT2JqZWN0LmZyZWV6ZSgpIGFsbCBzdGF0aWMgZGF0YSDinJMKICovCgppbXBvcnQgUmVhY3QsIHsgbWVtbywgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBtb3Rpb24sIEFuaW1hdGVQcmVzZW5jZSB9IGZyb20gJ2ZyYW1lci1tb3Rpb24nOwppbXBvcnQgeyB1c2VDcnlwdG9OZXdzLCB0eXBlIE5ld3NJdGVtLCB0eXBlIE5ld3NGaWx0ZXIgfSBmcm9tICdAL2hvb2tzL3VzZUNyeXB0b05ld3MnOwppbXBvcnQgeyB1c2VTb2NpYWxTZW50aW1lbnQsIHR5cGUgRnVuZGluZ0RhdGEgfSBmcm9tICdAL2hvb2tzL3VzZVNvY2lhbFNlbnRpbWVudCc7CmltcG9ydCB7IHVzZUNyeXB0byB9IGZyb20gJ0AvY29udGV4dHMvQ3J5cHRvQ29udGV4dCc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwoKY29uc3QgQyA9IE9iamVjdC5mcmVlemUoewogIGJnOiAgICAgICAgICAncmdiYSg2LDgsMTQsMSknLAogIGNhcmQ6ICAgICAgICAncmdiYSgxNCwxNywyOCwxKScsCiAgYm9yZGVyOiAgICAgICdyZ2JhKDMyLDQyLDY4LDEpJywKICBhY2NlbnQ6ICAgICAgJ3JnYmEoMCwyMzgsMjU1LDEpJywKICBwb3NpdGl2ZTogICAgJ3JnYmEoMzQsMjU1LDE3MCwxKScsCiAgcG9zRGltOiAgICAgICdyZ2JhKDM0LDI1NSwxNzAsMC4xMiknLAogIG5lZ2F0aXZlOiAgICAncmdiYSgyNTUsNjgsMTM2LDEpJywKICBuZWdEaW06ICAgICAgJ3JnYmEoMjU1LDY4LDEzNiwwLjEyKScsCiAgdGV4dFByaW1hcnk6ICdyZ2JhKDI0MCwyNDAsMjQ4LDEpJywKICB0ZXh0U2VjOiAgICAgJ3JnYmEoMTM4LDEzOCwxNTgsMSknLAogIHZpb2xldDogICAgICAncmdiYSgxNzYsMTMwLDI1NSwxKScsCn0pOwoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CmNvbnN0IEZPTlRfVUkgICA9ICInSmV0QnJhaW5zIE1vbm8nLCBtb25vc3BhY2UiOwoKY29uc3QgVEFCUyA9IE9iamVjdC5mcmVlemUoWydOZXdzIEZlZWQnLCAnTWFya2V0IFNlbnRpbWVudCcsICdOYXJyYXRpdmVzJywgJ0Z1bmRpbmcgJiBPSSddIGFzIGNvbnN0KTsKdHlwZSBUYWIgPSB0eXBlb2YgVEFCU1tudW1iZXJdOwoKY29uc3QgTkVXU19GSUxURVJTID0gT2JqZWN0LmZyZWV6ZShbJ0FMTCcsICdJTVBPUlRBTlQnLCAnQlRDJywgJ0VUSCcsICdBTFRDT0lOJ10gYXMgY29uc3QpOwoKY29uc3QgTkFSUkFUSVZFUyA9IE9iamVjdC5mcmVlemUoWwogIHsgaWQ6ICdkZWZpJywgICBsYWJlbDogJ0RlRmknLCAgICAgICBpY29uOiAn4pqX77iPJywgY29sb3I6ICdyZ2JhKDM0LDI1NSwxNzAsMSknLCAgIGNvbG9yRGltOiAncmdiYSgzNCwyNTUsMTcwLDAuMSknLCAgIGNvaW5zOiBbJ1VOSScsJ0FBVkUnLCdDUlYnLCdNS1InLCdDT01QJywnU05YJywnWUZJJywnTERPJ10sICAgICAgICAgIGtleXdvcmRzOiBbJ2RlZmknLCdsaXF1aWRpdHknLCd5aWVsZCcsJ2FtbScsJ2RleCcsJ2xlbmRpbmcnLCdwcm90b2NvbCcsJ3ZhdWx0Jywnc3Rha2luZyddIH0sCiAgeyBpZDogJ2wyJywgICAgIGxhYmVsOiAnTGF5ZXIgMicsICAgIGljb246ICfimqEnLCBjb2xvcjogJ3JnYmEoMCwyMzgsMjU1LDEpJywgICAgY29sb3JEaW06ICdyZ2JhKDAsMjM4LDI1NSwwLjEpJywgICAgY29pbnM6IFsnTUFUSUMnLCdBUkInLCdPUCcsJ0lNWCcsJ0xSQycsJ01FVElTJywnWksnXSwgICAgICAgICAgICAgICAgIGtleXdvcmRzOiBbJ2xheWVyMicsJ2wyJywncm9sbHVwJywnYXJiaXRydW0nLCdvcHRpbWlzbScsJ3BvbHlnb24nLCd6a3N5bmMnLCdzY2FsaW5nJywnYmFzZSddIH0sCiAgeyBpZDogJ2FpJywgICAgIGxhYmVsOiAnQUkgw5cgQ3J5cHRvJyxpY29uOiAn8J+klicsIGNvbG9yOiAncmdiYSgxNzYsMTMwLDI1NSwxKScsIGNvbG9yRGltOiAncmdiYSgxNzYsMTMwLDI1NSwwLjEpJywgY29pbnM6IFsnRkVUJywnQUdJWCcsJ09DRUFOJywnUk5EUicsJ1dMRCcsJ1RBTycsJ0FLVCddLCAgICAgICAgICAgICAgIGtleXdvcmRzOiBbJ2FpJywnYXJ0aWZpY2lhbCBpbnRlbGxpZ2VuY2UnLCdtYWNoaW5lIGxlYXJuaW5nJywnbmV1cmFsJywnYml0dGVuc29yJywncmVuZGVyJywnd29ybGRjb2luJ10gfSwKICB7IGlkOiAncndhJywgICAgbGFiZWw6ICdSV0EnLCAgICAgICAgaWNvbjogJ/Cfj6YnLCBjb2xvcjogJ3JnYmEoMjU1LDE3MCwwLDEpJywgICBjb2xvckRpbTogJ3JnYmEoMjU1LDE3MCwwLDAuMSknLCAgIGNvaW5zOiBbJ09ORE8nLCdDRkcnLCdQRU5ETEUnLCdSSU8nLCdNUEwnLCdUUlUnXSwgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkczogWydyd2EnLCdyZWFsIHdvcmxkIGFzc2V0JywndG9rZW5pemVkJywndHJlYXN1cnknLCdib25kJywncmVhbCBlc3RhdGUnLCdvbmRvJ10gfSwKICB7IGlkOiAnbWVtZScsICAgbGFiZWw6ICdNZW1lJywgICAgICAgaWNvbjogJ/CfkLgnLCBjb2xvcjogJ3JnYmEoMjU1LDIyMCw1MCwxKScsICBjb2xvckRpbTogJ3JnYmEoMjU1LDIyMCw1MCwwLjEpJywgIGNvaW5zOiBbJ0RPR0UnLCdTSElCJywnUEVQRScsJ1dJRicsJ0JPTksnLCdGTE9LSScsJ01FVyddLCAgICAgICAgICAgICBrZXl3b3JkczogWydtZW1lJywnZG9nZScsJ3NoaWInLCdwZXBlJywnd2lmJywnYm9uaycsJ21lbWVjb2luJywnZG9nJywnY2F0J10gfSwKICB7IGlkOiAnZ2FtZWZpJywgbGFiZWw6ICdHYW1lRmknLCAgICAgaWNvbjogJ/Cfjq4nLCBjb2xvcjogJ3JnYmEoMjU1LDEwMCwyMDAsMSknLCBjb2xvckRpbTogJ3JnYmEoMjU1LDEwMCwyMDAsMC4xKScsIGNvaW5zOiBbJ0FYUycsJ1NBTkQnLCdNQU5BJywnSUxWJywnR0FMQScsJ1JPTicsJ0lNWCddLCAgICAgICAgICAgICAgICBrZXl3b3JkczogWydnYW1lZmknLCdnYW1pbmcnLCdwbGF5LXRvLWVhcm4nLCdtZXRhdmVyc2UnLCduZnQgZ2FtZScsJ2F4aWUnLCdzYW5kYm94JywnaW1tdXRhYmxlJ10gfSwKXSk7CgpmdW5jdGlvbiB0aW1lQWdvKG1zOiBudW1iZXIpOiBzdHJpbmcgewogIGNvbnN0IGQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gbXMpIC8gMTAwMCk7CiAgaWYgKGQgPCA2MCkgICAgcmV0dXJuIGQgKyAncyBhZ28nOwogIGlmIChkIDwgMzYwMCkgIHJldHVybiBNYXRoLmZsb29yKGQgLyA2MCkgKyAnbSBhZ28nOwogIGlmIChkIDwgODY0MDApIHJldHVybiBNYXRoLmZsb29yKGQgLyAzNjAwKSArICdoIGFnbyc7CiAgcmV0dXJuIE1hdGguZmxvb3IoZCAvIDg2NDAwKSArICdkIGFnbyc7Cn0KCmZ1bmN0aW9uIGZtdE9JKG46IG51bWJlcik6IHN0cmluZyB7CiAgaWYgKG4gPj0gMWU5KSByZXR1cm4gJyQnICsgKG4gLyAxZTkpLnRvRml4ZWQoMikgKyAnQic7CiAgaWYgKG4gPj0gMWU2KSByZXR1cm4gJyQnICsgKG4gLyAxZTYpLnRvRml4ZWQoMSkgKyAnTSc7CiAgaWYgKG4gPj0gMWUzKSByZXR1cm4gJyQnICsgKG4gLyAxZTMpLnRvRml4ZWQoMCkgKyAnSyc7CiAgaWYgKG4gPT09IDApICByZXR1cm4gJ+KAlCc7CiAgcmV0dXJuICckJyArIG4udG9GaXhlZCgwKTsKfQoKZnVuY3Rpb24gZmdDb2xvcih2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHsKICBpZiAodmFsdWUgPj0gNzUpIHJldHVybiAncmdiYSgzNCwyNTUsMTcwLDEpJzsKICBpZiAodmFsdWUgPj0gNTUpIHJldHVybiAncmdiYSgxNDAsMjIwLDEwMCwxKSc7CiAgaWYgKHZhbHVlID49IDQ1KSByZXR1cm4gJ3JnYmEoMjU1LDIyMCw1MCwxKSc7CiAgaWYgKHZhbHVlID49IDI1KSByZXR1cm4gJ3JnYmEoMjU1LDE0MCw2MCwxKSc7CiAgcmV0dXJuICdyZ2JhKDI1NSw2OCwxMzYsMSknOwp9CgpmdW5jdGlvbiBmZ0xhYmVsKHZhbHVlOiBudW1iZXIpOiBzdHJpbmcgewogIGlmICh2YWx1ZSA+PSA3NSkgcmV0dXJuICdFeHRyZW1lIEdyZWVkJzsKICBpZiAodmFsdWUgPj0gNTUpIHJldHVybiAnR3JlZWQnOwogIGlmICh2YWx1ZSA+PSA0NSkgcmV0dXJuICdOZXV0cmFsJzsKICBpZiAodmFsdWUgPj0gMjUpIHJldHVybiAnRmVhcic7CiAgcmV0dXJuICdFeHRyZW1lIEZlYXInOwp9CgovLyDilIDilIDilIAgVGFiQmFyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApjb25zdCBUYWJCdG4gPSBtZW1vKCh7IGxhYmVsLCBhY3RpdmUsIG9uQ2xpY2sgfTogeyBsYWJlbDogVGFiOyBhY3RpdmU6IGJvb2xlYW47IG9uQ2xpY2s6ICh0OiBUYWIpID0+IHZvaWQgfSkgPT4gewogIGNvbnN0IHN0eWxlID0gdXNlTWVtbygoKSA9PiBPYmplY3QuZnJlZXplKHsKICAgIHBhZGRpbmc6ICc4cHggMTRweCcsIGJvcmRlclJhZGl1czogJzZweCcsIGJvcmRlcjogJ25vbmUnLCBjdXJzb3I6ICdwb2ludGVyJywKICAgIGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCBhcyBjb25zdCwKICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnIGFzIGNvbnN0LCB0cmFuc2l0aW9uOiAnYWxsIDAuMThzJywKICAgIGJhY2tncm91bmQ6IGFjdGl2ZSA/ICdyZ2JhKDAsMjM4LDI1NSwwLjE1KScgOiAndHJhbnNwYXJlbnQnLAogICAgY29sb3I6IGFjdGl2ZSA/IEMuYWNjZW50IDogQy50ZXh0U2VjLAogICAgb3V0bGluZTogYWN0aXZlID8gJzFweCBzb2xpZCByZ2JhKDAsMjM4LDI1NSwwLjMpJyA6ICdub25lJywKICB9KSwgW2FjdGl2ZV0pOwogIGNvbnN0IGhhbmRsZSA9IHVzZUNhbGxiYWNrKCgpID0+IG9uQ2xpY2sobGFiZWwpLCBbbGFiZWwsIG9uQ2xpY2tdKTsKICByZXR1cm4gPGJ1dHRvbiBzdHlsZT17c3R5bGV9IG9uQ2xpY2s9e2hhbmRsZX0+e2xhYmVsfTwvYnV0dG9uPjsKfSk7ClRhYkJ0bi5kaXNwbGF5TmFtZSA9ICdUYWJCdG4nOwoKY29uc3QgVGFiQmFyID0gbWVtbygoeyBhY3RpdmUsIG9uQ2hhbmdlIH06IHsgYWN0aXZlOiBUYWI7IG9uQ2hhbmdlOiAodDogVGFiKSA9PiB2b2lkIH0pID0+ICgKICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnNHB4JywgcGFkZGluZzogJzRweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIG92ZXJmbG93WDogJ2F1dG8nIGFzIGNvbnN0LCBmbGV4U2hyaW5rOiAwIH19PgogICAge1RBQlMubWFwKHRhYiA9PiA8VGFiQnRuIGtleT17dGFifSBsYWJlbD17dGFifSBhY3RpdmU9e2FjdGl2ZSA9PT0gdGFifSBvbkNsaWNrPXtvbkNoYW5nZX0gLz4pfQogIDwvZGl2PgopKTsKVGFiQmFyLmRpc3BsYXlOYW1lID0gJ1RhYkJhcic7CgovLyDilIDilIDilIAgTmV3cyBGZWVkIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApjb25zdCBOZXdzRkJ0biA9IG1lbW8oKHsgbGFiZWwsIGFjdGl2ZSwgb25DbGljayB9OiB7IGxhYmVsOiBOZXdzRmlsdGVyOyBhY3RpdmU6IGJvb2xlYW47IG9uQ2xpY2s6IChmOiBOZXdzRmlsdGVyKSA9PiB2b2lkIH0pID0+IHsKICBjb25zdCBzdHlsZSA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBwYWRkaW5nOiAnNXB4IDEycHgnLCBib3JkZXJSYWRpdXM6ICcyMHB4JywKICAgIGJvcmRlcjogYWN0aXZlID8gJzFweCBzb2xpZCByZ2JhKDAsMjM4LDI1NSwwLjQpJyA6ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpJywKICAgIGJhY2tncm91bmQ6IGFjdGl2ZSA/ICdyZ2JhKDAsMjM4LDI1NSwwLjEpJyA6ICd0cmFuc3BhcmVudCcsCiAgICBjb2xvcjogYWN0aXZlID8gQy5hY2NlbnQgOiBDLnRleHRTZWMsCiAgICBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGN1cnNvcjogJ3BvaW50ZXInLAogICAgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGZvbnRXZWlnaHQ6IGFjdGl2ZSA/IDcwMCBhcyBjb25zdCA6IDQwMCBhcyBjb25zdCwKICB9KSwgW2FjdGl2ZV0pOwogIGNvbnN0IGhhbmRsZSA9IHVzZUNhbGxiYWNrKCgpID0+IG9uQ2xpY2sobGFiZWwpLCBbbGFiZWwsIG9uQ2xpY2tdKTsKICByZXR1cm4gPGJ1dHRvbiBzdHlsZT17c3R5bGV9IG9uQ2xpY2s9e2hhbmRsZX0+e2xhYmVsfTwvYnV0dG9uPjsKfSk7Ck5ld3NGQnRuLmRpc3BsYXlOYW1lID0gJ05ld3NGQnRuJzsKCmNvbnN0IEN1cnJlbmN5VGFnID0gbWVtbygoeyB0YWcgfTogeyB0YWc6IHN0cmluZyB9KSA9PiAoCiAgPHNwYW4gc3R5bGU9e3sgcGFkZGluZzogJzJweCA2cHgnLCBib3JkZXJSYWRpdXM6ICc0cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMSknLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4JywgY29sb3I6IEMudGV4dFNlYywgZm9udFdlaWdodDogNzAwIH19Pnt0YWd9PC9zcGFuPgopKTsKQ3VycmVuY3lUYWcuZGlzcGxheU5hbWUgPSAnQ3VycmVuY3lUYWcnOwoKY29uc3QgTmV3c0NhcmQgPSBtZW1vKCh7IGl0ZW0gfTogeyBpdGVtOiBOZXdzSXRlbSB9KSA9PiB7CiAgY29uc3QgYm9yZGVyQ29sb3IgPSBpdGVtLnNlbnRpbWVudCA9PT0gJ2J1bGxpc2gnID8gJ3JnYmEoMzQsMjU1LDE3MCwwLjMpJyA6IGl0ZW0uc2VudGltZW50ID09PSAnYmVhcmlzaCcgPyAncmdiYSgyNTUsNjgsMTM2LDAuMjUpJyA6IEMuYm9yZGVyOwogIGNvbnN0IGdsb3dDb2xvciAgID0gaXRlbS5zZW50aW1lbnQgPT09ICdidWxsaXNoJyA/ICdyZ2JhKDM0LDI1NSwxNzAsMC4xNSknIDogaXRlbS5zZW50aW1lbnQgPT09ICdiZWFyaXNoJyA/ICdyZ2JhKDI1NSw2OCwxMzYsMC4xNSknIDogJ25vbmUnOwogIGNvbnN0IGRvdENvbG9yICAgID0gaXRlbS5zZW50aW1lbnQgPT09ICdidWxsaXNoJyA/ICdyZ2JhKDM0LDI1NSwxNzAsMSknIDogaXRlbS5zZW50aW1lbnQgPT09ICdiZWFyaXNoJyA/ICdyZ2JhKDI1NSw2OCwxMzYsMSknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4yKSc7CgogIGNvbnN0IGNhcmRTdHlsZSA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBiYWNrZ3JvdW5kOiBDLmNhcmQsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgYm9yZGVyQ29sb3IsIGJvcmRlclJhZGl1czogJzEycHgnLAogICAgcGFkZGluZzogJzE0cHggMTZweCcsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsCiAgICBnYXA6ICcxMHB4JywgY3Vyc29yOiAncG9pbnRlcicsIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4xNXMnLAogICAgYm94U2hhZG93OiBpdGVtLnNlbnRpbWVudCAhPT0gJ25ldXRyYWwnID8gJzAgMCAxOHB4ICcgKyBnbG93Q29sb3IgOiAnbm9uZScsCiAgfSksIFtib3JkZXJDb2xvciwgZ2xvd0NvbG9yLCBpdGVtLnNlbnRpbWVudF0pOwoKICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrKCgpID0+IHsgd2luZG93Lm9wZW4oaXRlbS51cmwsICdfYmxhbmsnLCAnbm9vcGVuZXIsbm9yZWZlcnJlcicpOyB9LCBbaXRlbS51cmxdKTsKCiAgcmV0dXJuICgKICAgIDxtb3Rpb24uZGl2IHN0eWxlPXtjYXJkU3R5bGV9IG9uQ2xpY2s9e2hhbmRsZUNsaWNrfSB3aGlsZUhvdmVyPXt7IHNjYWxlOiAxLjAxIH19IGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeTogMTAgfX0gYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19PgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzhweCcsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyB3aWR0aDogJzZweCcsIGhlaWdodDogJzZweCcsIGJvcmRlclJhZGl1czogJzUwJScsIGJhY2tncm91bmQ6IGRvdENvbG9yLCBmbGV4U2hyaW5rOiAwIH19IC8+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy5hY2NlbnQsIGxldHRlclNwYWNpbmc6ICcwLjA2ZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgZm9udFdlaWdodDogNzAwIH19PntpdGVtLnNvdXJjZX08L3NwYW4+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy50ZXh0U2VjLCBtYXJnaW5MZWZ0OiAnYXV0bycgfX0+e3RpbWVBZ28oaXRlbS5wdWJsaXNoZWRBdCl9PC9zcGFuPgogICAgICA8L2Rpdj4KICAgICAgPHAgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxNHB4JywgY29sb3I6IEMudGV4dFByaW1hcnksIGxpbmVIZWlnaHQ6ICcxLjUnLCBmb250V2VpZ2h0OiA1MDAsIG1hcmdpbjogMCB9fT57aXRlbS50aXRsZX08L3A+CiAgICAgIHtpdGVtLmN1cnJlbmNpZXMubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzRweCcsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QgfX0+CiAgICAgICAgICB7aXRlbS5jdXJyZW5jaWVzLnNsaWNlKDAsIDUpLm1hcChjID0+IDxDdXJyZW5jeVRhZyBrZXk9e2N9IHRhZz17Y30gLz4pfQogICAgICAgIDwvZGl2PgogICAgICApfQogICAgPC9tb3Rpb24uZGl2PgogICk7Cn0pOwpOZXdzQ2FyZC5kaXNwbGF5TmFtZSA9ICdOZXdzQ2FyZCc7Cgpjb25zdCBOZXdzRmVlZCA9IG1lbW8oKCkgPT4gewogIGNvbnN0IHsgZmlsdGVyZWROZXdzLCBsb2FkaW5nLCBlcnJvciwgZmlsdGVyLCBzZXRGaWx0ZXIgfSA9IHVzZUNyeXB0b05ld3MoKTsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QgfX0+CiAgICAgICAge05FV1NfRklMVEVSUy5tYXAoZiA9PiA8TmV3c0ZCdG4ga2V5PXtmfSBsYWJlbD17Zn0gYWN0aXZlPXtmaWx0ZXIgPT09IGZ9IG9uQ2xpY2s9e3NldEZpbHRlcn0gLz4pfQogICAgICA8L2Rpdj4KICAgICAge2Vycm9yICYmIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogQy5uZWdhdGl2ZSB9fT7imqAge2Vycm9yfTwvZGl2Pn0KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICdyZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzAwcHgsIDFmcikpJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAge2xvYWRpbmcKICAgICAgICAgID8gQXJyYXkuZnJvbSh7IGxlbmd0aDogOSB9LCAoXywgaSkgPT4gKAogICAgICAgICAgICAgIDxtb3Rpb24uZGl2IGtleT17aX0gc3R5bGU9e3sgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICcxcHggc29saWQgJyArIEMuYm9yZGVyLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzE0cHggMTZweCcsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzEwcHgnIH19IGFuaW1hdGU9e3sgb3BhY2l0eTogWzAuNCwgMC43LCAwLjRdIH19IHRyYW5zaXRpb249e3sgZHVyYXRpb246IDEuNCwgcmVwZWF0OiBJbmZpbml0eSwgZGVsYXk6IGkgKiAwLjA2IH19PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBoZWlnaHQ6ICcxMHB4Jywgd2lkdGg6ICc4MHB4JywgYm9yZGVyUmFkaXVzOiAnNHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNyknIH19IC8+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGhlaWdodDogJzEzcHgnLCB3aWR0aDogJzEwMCUnLCBib3JkZXJSYWRpdXM6ICc0cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScgfX0gLz4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgaGVpZ2h0OiAnMTNweCcsIHdpZHRoOiAnNzAlJywgYm9yZGVyUmFkaXVzOiAnNHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNSknIH19IC8+CiAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PgogICAgICAgICAgICApKQogICAgICAgICAgOiBmaWx0ZXJlZE5ld3MubWFwKGl0ZW0gPT4gPE5ld3NDYXJkIGtleT17aXRlbS5pZH0gaXRlbT17aXRlbX0gLz4pCiAgICAgICAgfQogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpOZXdzRmVlZC5kaXNwbGF5TmFtZSA9ICdOZXdzRmVlZCc7CgovLyDilIDilIDilIAgTWFya2V0IFNlbnRpbWVudCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKY29uc3QgRmVhckdyZWVkR2F1Z2UgPSBtZW1vKCh7IHZhbHVlIH06IHsgdmFsdWU6IG51bWJlciB9KSA9PiB7CiAgY29uc3QgY29sb3IgPSBmZ0NvbG9yKHZhbHVlKTsKICBjb25zdCBhbmdsZSA9ICh2YWx1ZSAvIDEwMCkgKiAxODAgLSAxODA7CiAgY29uc3QgcmFkID0gKGFuZ2xlICogTWF0aC5QSSkgLyAxODA7CiAgY29uc3QgY3ggPSAxMTAsIGN5ID0gOTAsIHIgPSA3MDsKICBjb25zdCBueCA9IGN4ICsgciAqIE1hdGguY29zKHJhZCk7CiAgY29uc3QgbnkgPSBjeSArIHIgKiBNYXRoLnNpbihyYWQpOwogIGNvbnN0IFNFR1MgPSBPYmplY3QuZnJlZXplKFsKICAgIHsgZnJvbTogMCwgIHRvOiAyNSwgIGNvbG9yOiAncmdiYSgyNTUsNjgsMTM2LDAuNSknIH0sCiAgICB7IGZyb206IDI1LCB0bzogNDUsICBjb2xvcjogJ3JnYmEoMjU1LDE0MCw2MCwwLjUpJyB9LAogICAgeyBmcm9tOiA0NSwgdG86IDU1LCAgY29sb3I6ICdyZ2JhKDI1NSwyMjAsNTAsMC41KScgfSwKICAgIHsgZnJvbTogNTUsIHRvOiA3NSwgIGNvbG9yOiAncmdiYSgxNDAsMjIwLDEwMCwwLjUpJyB9LAogICAgeyBmcm9tOiA3NSwgdG86IDEwMCwgY29sb3I6ICdyZ2JhKDM0LDI1NSwxNzAsMC41KScgfSwKICBdKTsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JyB9fT4KICAgICAgPHN2ZyB3aWR0aD0iMjIwIiBoZWlnaHQ9IjEwMCIgc3R5bGU9e3sgb3ZlcmZsb3c6ICd2aXNpYmxlJyB9fT4KICAgICAgICA8cGF0aCBkPSJNIDQwIDkwIEEgNzAgNzAgMCAwIDEgMTgwIDkwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMC4wNykiIHN0cm9rZVdpZHRoPSIxNiIgc3Ryb2tlTGluZWNhcD0icm91bmQiIC8+CiAgICAgICAge1NFR1MubWFwKHNlZyA9PiB7CiAgICAgICAgICBjb25zdCBhMSA9ICgoc2VnLmZyb20gLyAxMDApICogMTgwIC0gMTgwKSAqIE1hdGguUEkgLyAxODA7CiAgICAgICAgICBjb25zdCBhMiA9ICgoc2VnLnRvICAgLyAxMDApICogMTgwIC0gMTgwKSAqIE1hdGguUEkgLyAxODA7CiAgICAgICAgICBjb25zdCB4MSA9IGN4ICsgciAqIE1hdGguY29zKGExKSwgeTEgPSBjeSArIHIgKiBNYXRoLnNpbihhMSk7CiAgICAgICAgICBjb25zdCB4MiA9IGN4ICsgciAqIE1hdGguY29zKGEyKSwgeTIgPSBjeSArIHIgKiBNYXRoLnNpbihhMik7CiAgICAgICAgICBjb25zdCBsYSA9IChzZWcudG8gLSBzZWcuZnJvbSkgPiA1MCA/IDEgOiAwOwogICAgICAgICAgcmV0dXJuIDxwYXRoIGtleT17c2VnLmZyb219IGQ9eydNICcgKyB4MSArICcgJyArIHkxICsgJyBBICcgKyByICsgJyAnICsgciArICcgMCAnICsgbGEgKyAnIDEgJyArIHgyICsgJyAnICsgeTJ9IGZpbGw9Im5vbmUiIHN0cm9rZT17c2VnLmNvbG9yfSBzdHJva2VXaWR0aD0iMTYiIHN0cm9rZUxpbmVjYXA9InJvdW5kIiAvPjsKICAgICAgICB9KX0KICAgICAgICA8bGluZSB4MT17Y3h9IHkxPXtjeX0geDI9e254fSB5Mj17bnl9IHN0cm9rZT17Y29sb3J9IHN0cm9rZVdpZHRoPSIzIiBzdHJva2VMaW5lY2FwPSJyb3VuZCIgLz4KICAgICAgICA8Y2lyY2xlIGN4PXtjeH0gY3k9e2N5fSByPSI2IiBmaWxsPXtjb2xvcn0gLz4KICAgICAgICA8dGV4dCB4PSIzMiIgeT0iMTA4IiBmaWxsPSJyZ2JhKDI1NSw2OCwxMzYsMC42KSIgZm9udFNpemU9IjkiIGZvbnRGYW1pbHk9e0ZPTlRfTU9OT30+RkVBUjwvdGV4dD4KICAgICAgICA8dGV4dCB4PSIxNzAiIHk9IjEwOCIgZmlsbD0icmdiYSgzNCwyNTUsMTcwLDAuNikiIGZvbnRTaXplPSI5IiBmb250RmFtaWx5PXtGT05UX01PTk99PkdSRUVEPC90ZXh0PgogICAgICA8L3N2Zz4KICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnNDJweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3IsIGxpbmVIZWlnaHQ6ICcxJyB9fT57dmFsdWV9PC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxNHB4JywgY29sb3IsIGZvbnRXZWlnaHQ6IDYwMCB9fT57ZmdMYWJlbCh2YWx1ZSl9PC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKRmVhckdyZWVkR2F1Z2UuZGlzcGxheU5hbWUgPSAnRmVhckdyZWVkR2F1Z2UnOwoKY29uc3QgRkdIaXN0b3J5QmFyID0gbWVtbygoeyBoaXN0b3J5IH06IHsgaGlzdG9yeTogeyB2YWx1ZTogbnVtYmVyOyB0aW1lc3RhbXA6IG51bWJlciB9W10gfSkgPT4gewogIGNvbnN0IGRheXMgPSBbLi4uaGlzdG9yeV0ucmV2ZXJzZSgpOwogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnNnB4JywgYWxpZ25JdGVtczogJ2ZsZXgtZW5kJywgaGVpZ2h0OiAnNjBweCcsIHBhZGRpbmc6ICcwIDRweCcgfX0+CiAgICAgIHtkYXlzLm1hcCgoZCwgaSkgPT4gewogICAgICAgIGNvbnN0IGggPSBNYXRoLm1heCg2LCAoZC52YWx1ZSAvIDEwMCkgKiA1NCk7CiAgICAgICAgY29uc3QgY29sID0gZmdDb2xvcihkLnZhbHVlKTsKICAgICAgICBjb25zdCBpc0xhdGVzdCA9IGkgPT09IGRheXMubGVuZ3RoIC0gMTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgPGRpdiBrZXk9e2QudGltZXN0YW1wfSBzdHlsZT17eyBmbGV4OiAxLCBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNHB4JyB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4JywgY29sb3I6IGlzTGF0ZXN0ID8gY29sIDogQy50ZXh0U2VjIH19PntkLnZhbHVlfTwvZGl2PgogICAgICAgICAgICA8bW90aW9uLmRpdiBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBib3JkZXJSYWRpdXM6ICc0cHggNHB4IDAgMCcsIGJhY2tncm91bmQ6IGlzTGF0ZXN0ID8gY29sIDogY29sLnJlcGxhY2UoJzEpJywgJzAuNCknKSB9fSBpbml0aWFsPXt7IGhlaWdodDogMCB9fSBhbmltYXRlPXt7IGhlaWdodDogaCB9fSB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjYsIGRlbGF5OiBpICogMC4wNSB9fSAvPgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICc4cHgnLCBjb2xvcjogQy50ZXh0U2VjIH19PntuZXcgRGF0ZShkLnRpbWVzdGFtcCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ3Nob3J0JyB9KX08L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICk7CiAgICAgIH0pfQogICAgPC9kaXY+CiAgKTsKfSk7CkZHSGlzdG9yeUJhci5kaXNwbGF5TmFtZSA9ICdGR0hpc3RvcnlCYXInOwoKY29uc3QgTWFya2V0U2VudGltZW50ID0gbWVtbygoKSA9PiB7CiAgY29uc3QgeyBmZWFyR3JlZWQsIGN1cnJlbnQsIGxvYWRpbmdGRywgZXJyb3JGRyB9ID0gdXNlU29jaWFsU2VudGltZW50KCk7CiAgY29uc3QgeyBnbG9iYWw6IGdsb2JhbERhdGEgfSA9IHVzZUNyeXB0bygpOwogIGNvbnN0IGJ0Y0RvbSA9IGdsb2JhbERhdGEuYnRjRG9taW5hbmNlID8/IDA7CiAgY29uc3QgZXRoRG9tID0gZ2xvYmFsRGF0YS5ldGhEb21pbmFuY2UgPz8gMDsKICBjb25zdCBhbHREb20gPSBNYXRoLm1heCgwLCAxMDAgLSBidGNEb20gLSBldGhEb20pOwogIGNvbnN0IGNhcmRTdCA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7IGJhY2tncm91bmQ6IEMuY2FyZCwgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBDLmJvcmRlciwgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBhZGRpbmc6ICcyMHB4JywgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnMTZweCcgfSksIFtdKTsKICBjb25zdCBzZWNMYmwgPSB1c2VNZW1vKCgpID0+IE9iamVjdC5mcmVlemUoeyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMsIGxldHRlclNwYWNpbmc6ICcwLjEyZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgZm9udFdlaWdodDogNzAwLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIHBhZGRpbmdCb3R0b206ICcxMHB4JyB9KSwgW10pOwogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzE2cHgnIH19PgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ3JlcGVhdChhdXRvLWZpdCwgbWlubWF4KDI4MHB4LCAxZnIpKScsIGdhcDogJzE2cHgnIH19PgogICAgICAgIDxkaXYgc3R5bGU9e2NhcmRTdH0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXtzZWNMYmx9PkZlYXIgeycmJ30gR3JlZWQgSW5kZXg8L2Rpdj4KICAgICAgICAgIHtsb2FkaW5nRkcKICAgICAgICAgICAgPyA8ZGl2IHN0eWxlPXt7IGhlaWdodDogJzE2MHB4JywgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBjb2xvcjogQy50ZXh0U2VjLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcgfX0+TG9hZGluZy4uLjwvZGl2PgogICAgICAgICAgICA6IGVycm9yRkcKICAgICAgICAgICAgPyA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IEMubmVnYXRpdmUgfX0+e2Vycm9yRkd9PC9kaXY+CiAgICAgICAgICAgIDogY3VycmVudCA/IDxGZWFyR3JlZWRHYXVnZSB2YWx1ZT17Y3VycmVudC52YWx1ZX0gLz4gOiBudWxsCiAgICAgICAgICB9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17Y2FyZFN0fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3NlY0xibH0+Ny1EYXkgSGlzdG9yeTwvZGl2PgogICAgICAgICAge2ZlYXJHcmVlZC5sZW5ndGggPiAwID8gPEZHSGlzdG9yeUJhciBoaXN0b3J5PXtmZWFyR3JlZWR9IC8+IDogPGRpdiBzdHlsZT17eyBoZWlnaHQ6ICc2MHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXJSYWRpdXM6ICc4cHgnIH19IC8+fQogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICc2cHgnLCBtYXJnaW5Ub3A6ICc4cHgnIH19PgogICAgICAgICAgICB7T2JqZWN0LmZyZWV6ZShbCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0V4dHJlbWUgRmVhcicsIHJhbmdlOiAnMOKAkzI0JywgICBjb2xvcjogJ3JnYmEoMjU1LDY4LDEzNiwxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnRmVhcicsICAgICAgICAgcmFuZ2U6ICcyNeKAkzQ0JywgIGNvbG9yOiAncmdiYSgyNTUsMTQwLDYwLDEpJyB9LAogICAgICAgICAgICAgIHsgbGFiZWw6ICdOZXV0cmFsJywgICAgICByYW5nZTogJzQ14oCTNTQnLCAgY29sb3I6ICdyZ2JhKDI1NSwyMjAsNTAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0dyZWVkJywgICAgICAgIHJhbmdlOiAnNTXigJM3NCcsICBjb2xvcjogJ3JnYmEoMTQwLDIyMCwxMDAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0V4dHJlbWUgR3JlZWQnLHJhbmdlOiAnNzXigJMxMDAnLCBjb2xvcjogJ3JnYmEoMzQsMjU1LDE3MCwxKScgfSwKICAgICAgICAgICAgXSkubWFwKGxlZyA9PiAoCiAgICAgICAgICAgICAgPGRpdiBrZXk9e2xlZy5sYWJlbH0gc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JyB9fT4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6ICcxMHB4JywgaGVpZ2h0OiAnMTBweCcsIGJvcmRlclJhZGl1czogJzJweCcsIGJhY2tncm91bmQ6IGxlZy5jb2xvciwgZmxleFNocmluazogMCB9fSAvPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IEMudGV4dFByaW1hcnksIGZsZXg6IDEgfX0+e2xlZy5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiBDLnRleHRTZWMgfX0+e2xlZy5yYW5nZX08L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17Y2FyZFN0fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3NlY0xibH0+TWFya2V0IERvbWluYW5jZTwvZGl2PgogICAgICAgICAge09iamVjdC5mcmVlemUoWwogICAgICAgICAgICB7IGxhYmVsOiAnQlRDIERvbWluYW5jZScsIHZhbHVlOiBidGNEb20sIGNvbG9yOiAncmdiYSgyNDcsMTQ3LDI2LDEpJyB9LAogICAgICAgICAgICB7IGxhYmVsOiAnRVRIIERvbWluYW5jZScsIHZhbHVlOiBldGhEb20sIGNvbG9yOiAncmdiYSg5OCwxMjYsMjM0LDEpJyB9LAogICAgICAgICAgICB7IGxhYmVsOiAnQWx0Y29pbiBNYXJrZXQnLCB2YWx1ZTogYWx0RG9tLCBjb2xvcjogQy52aW9sZXQgfSwKICAgICAgICAgIF0pLm1hcChpdGVtID0+ICgKICAgICAgICAgICAgPGRpdiBrZXk9e2l0ZW0ubGFiZWx9IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicgfX0+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX1VJLCBmb250U2l6ZTogJzEzcHgnLCBjb2xvcjogQy50ZXh0UHJpbWFyeSB9fT57aXRlbS5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGNvbG9yOiBpdGVtLmNvbG9yLCBmb250V2VpZ2h0OiA3MDAgfX0+e2l0ZW0udmFsdWUudG9GaXhlZCgxKX0lPC9zcGFuPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgaGVpZ2h0OiAnNnB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNiknLCBib3JkZXJSYWRpdXM6ICczcHgnLCBvdmVyZmxvdzogJ2hpZGRlbicgfX0+CiAgICAgICAgICAgICAgICA8bW90aW9uLmRpdiBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJywgYm9yZGVyUmFkaXVzOiAnM3B4JywgYmFja2dyb3VuZDogaXRlbS5jb2xvciB9fSBpbml0aWFsPXt7IHdpZHRoOiAwIH19IGFuaW1hdGU9e3sgd2lkdGg6IGl0ZW0udmFsdWUgKyAnJScgfX0gdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC44IH19IC8+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKSl9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7Ck1hcmtldFNlbnRpbWVudC5kaXNwbGF5TmFtZSA9ICdNYXJrZXRTZW50aW1lbnQnOwoKLy8g4pSA4pSA4pSAIE5hcnJhdGl2ZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IE5hcnJhdGl2ZUNhcmQgPSBtZW1vKCh7IG5hcnJhdGl2ZSwgYXJ0aWNsZUNvdW50LCBzZW50aW1lbnRTY29yZSB9OiB7IG5hcnJhdGl2ZTogdHlwZW9mIE5BUlJBVElWRVNbbnVtYmVyXTsgYXJ0aWNsZUNvdW50OiBudW1iZXI7IHNlbnRpbWVudFNjb3JlOiBudW1iZXIgfSkgPT4gewogIGNvbnN0IHNlbnRDb2xvciA9IHNlbnRpbWVudFNjb3JlID4gMCA/IEMucG9zaXRpdmUgOiBzZW50aW1lbnRTY29yZSA8IDAgPyBDLm5lZ2F0aXZlIDogQy50ZXh0U2VjOwogIGNvbnN0IHNlbnRMYWJlbCA9IHNlbnRpbWVudFNjb3JlID4gMCA/ICfilrIgQnVsbGlzaCcgOiBzZW50aW1lbnRTY29yZSA8IDAgPyAn4pa8IEJlYXJpc2gnIDogJ+KAlCBOZXV0cmFsJzsKICByZXR1cm4gKAogICAgPG1vdGlvbi5kaXYgc3R5bGU9e3sgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICcxcHggc29saWQgJyArIEMuYm9yZGVyLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzE4cHgnLCBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxNHB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScgYXMgY29uc3QsIG92ZXJmbG93OiAnaGlkZGVuJyBhcyBjb25zdCB9fSB3aGlsZUhvdmVyPXt7IHNjYWxlOiAxLjAyIH19IHRyYW5zaXRpb249e3sgZHVyYXRpb246IDAuMTUgfX0+CiAgICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScgYXMgY29uc3QsIHRvcDogJy0yMHB4JywgcmlnaHQ6ICctMjBweCcsIHdpZHRoOiAnODBweCcsIGhlaWdodDogJzgwcHgnLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBiYWNrZ3JvdW5kOiBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4wNiknKSwgZmlsdGVyOiAnYmx1cigyMHB4KScsIHBvaW50ZXJFdmVudHM6ICdub25lJyBhcyBjb25zdCB9fSAvPgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzEwcHgnIH19PgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAnMjJweCcsIGxpbmVIZWlnaHQ6ICcxJyB9fT57bmFycmF0aXZlLmljb259PC9zcGFuPgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTVweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IEMudGV4dFByaW1hcnkgfX0+e25hcnJhdGl2ZS5sYWJlbH08L3NwYW4+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgbWFyZ2luTGVmdDogJ2F1dG8nLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiBhcnRpY2xlQ291bnQgPiAwID8gbmFycmF0aXZlLmNvbG9yIDogQy50ZXh0U2VjLCBiYWNrZ3JvdW5kOiBhcnRpY2xlQ291bnQgPiAwID8gbmFycmF0aXZlLmNvbG9yLnJlcGxhY2UoJzEpJywgJzAuMSknKSA6ICd0cmFuc3BhcmVudCcsIHBhZGRpbmc6ICczcHggOHB4JywgYm9yZGVyUmFkaXVzOiAnMjBweCcsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgKGFydGljbGVDb3VudCA+IDAgPyBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4zKScpIDogJ3RyYW5zcGFyZW50JykgfX0+CiAgICAgICAgICB7YXJ0aWNsZUNvdW50fSBhcnRpY2xlcwogICAgICAgIDwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4V3JhcDogJ3dyYXAnIGFzIGNvbnN0LCBnYXA6ICc0cHgnIH19PgogICAgICAgIHtuYXJyYXRpdmUuY29pbnMubWFwKGNvaW4gPT4gKAogICAgICAgICAgPHNwYW4ga2V5PXtjb2lufSBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGZvbnRXZWlnaHQ6IDcwMCwgcGFkZGluZzogJzJweCA3cHgnLCBib3JkZXJSYWRpdXM6ICc0cHgnLCBiYWNrZ3JvdW5kOiBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4wOCknKSwgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4yKScpLCBjb2xvcjogbmFycmF0aXZlLmNvbG9yIH19Pntjb2lufTwvc3Bhbj4KICAgICAgICApKX0KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgYm9yZGVyVG9wOiAnMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNSknLCBwYWRkaW5nVG9wOiAnMTBweCcgfX0+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IHNlbnRDb2xvciwgZm9udFdlaWdodDogNjAwIH19PntzZW50TGFiZWx9PC9zcGFuPgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JyB9fT4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6IEMudGV4dFNlYyB9fT5zZW50aW1lbnQ8L3NwYW4+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnNjBweCcsIGhlaWdodDogJzRweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJywgYm9yZGVyUmFkaXVzOiAnMnB4Jywgb3ZlcmZsb3c6ICdoaWRkZW4nIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGhlaWdodDogJzEwMCUnLCB3aWR0aDogTWF0aC5hYnMoc2VudGltZW50U2NvcmUpICsgJyUnLCBiYWNrZ3JvdW5kOiBzZW50Q29sb3IsIGJvcmRlclJhZGl1czogJzJweCcgfX0gLz4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvbW90aW9uLmRpdj4KICApOwp9KTsKTmFycmF0aXZlQ2FyZC5kaXNwbGF5TmFtZSA9ICdOYXJyYXRpdmVDYXJkJzsKCmNvbnN0IE5hcnJhdGl2ZXMgPSBtZW1vKCgpID0+IHsKICBjb25zdCB7IG5ld3MgfSA9IHVzZUNyeXB0b05ld3MoKTsKICBjb25zdCBuYXJyYXRpdmVTdGF0cyA9IHVzZU1lbW8oKCkgPT4gTkFSUkFUSVZFUy5tYXAobmFyciA9PiB7CiAgICBsZXQgY291bnQgPSAwLCBidWxsaXNoID0gMCwgYmVhcmlzaCA9IDA7CiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbmV3cykgewogICAgICBjb25zdCB0ID0gaXRlbS50aXRsZS50b0xvd2VyQ2FzZSgpOwogICAgICBjb25zdCBtYXRjaCA9IG5hcnIuY29pbnMuc29tZShjID0+IGl0ZW0uY3VycmVuY2llcy5pbmNsdWRlcyhjKSB8fCB0LmluY2x1ZGVzKGMudG9Mb3dlckNhc2UoKSkpIHx8IG5hcnIua2V5d29yZHMuc29tZShrdyA9PiB0LmluY2x1ZGVzKGt3KSk7CiAgICAgIGlmIChtYXRjaCkgeyBjb3VudCsrOyBpZiAoaXRlbS5zZW50aW1lbnQgPT09ICdidWxsaXNoJykgYnVsbGlzaCsrOyBpZiAoaXRlbS5zZW50aW1lbnQgPT09ICdiZWFyaXNoJykgYmVhcmlzaCsrOyB9CiAgICB9CiAgICBjb25zdCB0b3RhbCA9IGJ1bGxpc2ggKyBiZWFyaXNoOwogICAgcmV0dXJuIHsgaWQ6IG5hcnIuaWQsIGFydGljbGVDb3VudDogY291bnQsIHNlbnRpbWVudFNjb3JlOiB0b3RhbCA+IDAgPyBNYXRoLnJvdW5kKCgoYnVsbGlzaCAtIGJlYXJpc2gpIC8gdG90YWwpICogMTAwKSA6IDAgfTsKICB9KSwgW25ld3NdKTsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPHAgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxM3B4JywgY29sb3I6IEMudGV4dFNlYywgbGluZUhlaWdodDogJzEuNicsIHBhZGRpbmc6ICcxMnB4IDE2cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjAyKScsIGJvcmRlclJhZGl1czogJzEycHgnLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIG1hcmdpbjogMCB9fT4KICAgICAgICBOYXJyYXRpdmUgdHJhY2tpbmcgYW5hbHl6ZXMgcmVjZW50IG5ld3MgaGVhZGxpbmVzIHRvIGlkZW50aWZ5IHRyZW5kaW5nIHRoZW1lcy4gQXJ0aWNsZSBjb3VudCBhbmQgc2VudGltZW50IGFyZSBjb21wdXRlZCBmcm9tIGxpdmUgbmV3cyBmZWVkLgogICAgICA8L3A+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAncmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDI4MHB4LCAxZnIpKScsIGdhcDogJzE0cHgnIH19PgogICAgICAgIHtOQVJSQVRJVkVTLm1hcCgobmFyciwgaSkgPT4gPE5hcnJhdGl2ZUNhcmQga2V5PXtuYXJyLmlkfSBuYXJyYXRpdmU9e25hcnJ9IGFydGljbGVDb3VudD17bmFycmF0aXZlU3RhdHNbaV0uYXJ0aWNsZUNvdW50fSBzZW50aW1lbnRTY29yZT17bmFycmF0aXZlU3RhdHNbaV0uc2VudGltZW50U2NvcmV9IC8+KX0KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKTmFycmF0aXZlcy5kaXNwbGF5TmFtZSA9ICdOYXJyYXRpdmVzJzsKCi8vIOKUgOKUgOKUgCBGdW5kaW5nICYgT0kg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IEZ1bmRpbmdSb3cgPSBtZW1vKCh7IGl0ZW0sIGlzTW9iaWxlIH06IHsgaXRlbTogRnVuZGluZ0RhdGE7IGlzTW9iaWxlOiBib29sZWFuIH0pID0+IHsKICBjb25zdCByYXRlQ29sb3IgID0gaXRlbS5yYXRlID4gMC4wMDAxID8gQy5wb3NpdGl2ZSA6IGl0ZW0ucmF0ZSA8IC0wLjAwMDEgPyBDLm5lZ2F0aXZlIDogQy50ZXh0U2VjOwogIGNvbnN0IHNpZ25hbENvbG9yID0gaXRlbS5zaWduYWwgPT09ICdMT05HJyA/IEMucG9zaXRpdmUgOiBpdGVtLnNpZ25hbCA9PT0gJ1NIT1JUJyA/IEMubmVnYXRpdmUgOiBDLnRleHRTZWM7CiAgY29uc3Qgc2lnbmFsQmcgICA9IGl0ZW0uc2lnbmFsID09PSAnTE9ORycgPyBDLnBvc0RpbSA6IGl0ZW0uc2lnbmFsID09PSAnU0hPUlQnID8gQy5uZWdEaW0gOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA0KSc7CiAgY29uc3QgY29scyA9IGlzTW9iaWxlID8gJzYwcHggMWZyIDFmcicgOiAnODBweCAxMDBweCAxMjBweCAxZnIgODBweCc7CiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiBjb2xzLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTJweCcsIHBhZGRpbmc6ICcxM3B4IDE2cHgnLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA0KScgfX0+CiAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxM3B4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogQy50ZXh0UHJpbWFyeSB9fT57aXRlbS5zeW1ib2x9PC9zcGFuPgogICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IHJhdGVDb2xvciwgdGV4dEFsaWduOiAncmlnaHQnIGFzIGNvbnN0IH19PntpdGVtLnJhdGVQY3QgPj0gMCA/ICcrJyA6ICcnfXtpdGVtLnJhdGVQY3QudG9GaXhlZCg0KX0lPC9zcGFuPgogICAgICB7IWlzTW9iaWxlICYmIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMXB4JywgY29sb3I6IHJhdGVDb2xvciwgdGV4dEFsaWduOiAncmlnaHQnIGFzIGNvbnN0IH19PntpdGVtLmFubnVhbGl6ZWQgPj0gMCA/ICcrJyA6ICcnfXtpdGVtLmFubnVhbGl6ZWQudG9GaXhlZCgxKX0lIHBhPC9zcGFuPn0KICAgICAgeyFpc01vYmlsZSAmJiA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGNvbG9yOiBDLnRleHRTZWMsIHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT57Zm10T0koaXRlbS5vaVVzZCl9PC9zcGFuPn0KICAgICAgPHNwYW4gc3R5bGU9e3sgZGlzcGxheTogJ2lubGluZS1mbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgcGFkZGluZzogJzNweCAxMHB4JywgYm9yZGVyUmFkaXVzOiAnMjBweCcsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgZm9udFdlaWdodDogNzAwLCBjb2xvcjogc2lnbmFsQ29sb3IsIGJhY2tncm91bmQ6IHNpZ25hbEJnLCBib3JkZXI6ICcxcHggc29saWQgJyArIHNpZ25hbENvbG9yLnJlcGxhY2UoJzEpJywgJzAuMyknKSB9fT57aXRlbS5zaWduYWx9PC9zcGFuPgogICAgPC9kaXY+CiAgKTsKfSk7CkZ1bmRpbmdSb3cuZGlzcGxheU5hbWUgPSAnRnVuZGluZ1Jvdyc7Cgpjb25zdCBGdW5kaW5nT0kgPSBtZW1vKCh7IGlzTW9iaWxlIH06IHsgaXNNb2JpbGU6IGJvb2xlYW4gfSkgPT4gewogIGNvbnN0IHsgZnVuZGluZywgbG9hZGluZ0Z1bmRpbmcsIGVycm9yRnVuZGluZywgcmVmcmVzaEZ1bmRpbmcsIGxhc3RVcGRhdGVkRnVuZGluZyB9ID0gdXNlU29jaWFsU2VudGltZW50KCk7CiAgY29uc3QgY29scyA9IGlzTW9iaWxlID8gJzYwcHggMWZyIDFmcicgOiAnODBweCAxMDBweCAxMjBweCAxZnIgODBweCc7CiAgY29uc3QgaGRyU3QgPSB1c2VNZW1vKCgpID0+IE9iamVjdC5mcmVlemUoeyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMsIGxldHRlclNwYWNpbmc6ICcwLjA4ZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgZm9udFdlaWdodDogNzAwLCB0ZXh0QWxpZ246ICdyaWdodCcgYXMgY29uc3QgfSksIFtdKTsKICBjb25zdCBsYXN0U3RyID0gbGFzdFVwZGF0ZWRGdW5kaW5nID8gbmV3IERhdGUobGFzdFVwZGF0ZWRGdW5kaW5nKS50b0xvY2FsZVRpbWVTdHJpbmcoKSA6ICfigJQnOwogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzE2cHgnIH19PgogICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6ICcxMnB4IDE2cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgwLDIzOCwyNTUsMC4wNCknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgwLDIzOCwyNTUsMC4xKScsIGJvcmRlclJhZGl1czogJzEycHgnLCBmb250RmFtaWx5OiBGT05UX1VJLCBmb250U2l6ZTogJzEzcHgnLCBjb2xvcjogQy50ZXh0U2VjLCBsaW5lSGVpZ2h0OiAnMS42JyB9fT4KICAgICAgICA8c3Ryb25nIHN0eWxlPXt7IGNvbG9yOiBDLmFjY2VudCB9fT5GdW5kaW5nIFJhdGU8L3N0cm9uZz4g4oCUIFBvc2l0aXZlID0gbG9uZ3MgcGF5IHNob3J0cyAoY3Jvd2RlZCBsb25nIOKGkiBiZWFyaXNoIHNpZ25hbCkuIE5lZ2F0aXZlID0gc2hvcnRzIHBheSBsb25ncyAoY3Jvd2RlZCBzaG9ydCDihpIgYnVsbGlzaCBzaWduYWwpLiBEYXRhOiBCaW5hbmNlIEZ1dHVyZXMuCiAgICAgIDwvZGl2PgogICAgICA8ZGl2IHN0eWxlPXt7IGJhY2tncm91bmQ6IEMuY2FyZCwgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBDLmJvcmRlciwgYm9yZGVyUmFkaXVzOiAnMTJweCcsIG92ZXJmbG93OiAnaGlkZGVuJyBhcyBjb25zdCB9fT4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogY29scywgZ2FwOiAnMTJweCcsIHBhZGRpbmc6ICcxMHB4IDE2cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjAzKScsIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyB9fT4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IC4uLmhkclN0LCB0ZXh0QWxpZ246ICdsZWZ0JyBhcyBjb25zdCB9fT5TeW1ib2w8L3NwYW4+CiAgICAgICAgICA8c3BhbiBzdHlsZT17aGRyU3R9PlJhdGUgJTwvc3Bhbj4KICAgICAgICAgIHshaXNNb2JpbGUgJiYgPHNwYW4gc3R5bGU9e2hkclN0fT5Bbm51YWxpemVkPC9zcGFuPn0KICAgICAgICAgIHshaXNNb2JpbGUgJiYgPHNwYW4gc3R5bGU9e2hkclN0fT5PSSBVU0Q8L3NwYW4+fQogICAgICAgICAgPHNwYW4gc3R5bGU9e2hkclN0fT5TaWduYWw8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAge2xvYWRpbmdGdW5kaW5nCiAgICAgICAgICA/IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwIH0sIChfLCBpKSA9PiAoCiAgICAgICAgICAgICAgPG1vdGlvbi5kaXYga2V5PXtpfSBzdHlsZT17eyBwYWRkaW5nOiAnMTNweCAxNnB4JywgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNCknLCBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzEycHgnIH19IGFuaW1hdGU9e3sgb3BhY2l0eTogWzAuMywgMC42LCAwLjNdIH19IHRyYW5zaXRpb249e3sgZHVyYXRpb246IDEuNCwgcmVwZWF0OiBJbmZpbml0eSwgZGVsYXk6IGkgKiAwLjA2IH19PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyB3aWR0aDogJzYwcHgnLCBoZWlnaHQ6ICcxM3B4JywgYm9yZGVyUmFkaXVzOiAnM3B4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNyknIH19IC8+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDEsIGhlaWdodDogJzEzcHgnLCBib3JkZXJSYWRpdXM6ICczcHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA1KScgfX0gLz4KICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+CiAgICAgICAgICAgICkpCiAgICAgICAgICA6IGVycm9yRnVuZGluZwogICAgICAgICAgPyA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6ICcyMHB4IDE2cHgnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGNvbG9yOiBDLm5lZ2F0aXZlIH19PuKaoCB7ZXJyb3JGdW5kaW5nfTwvZGl2PgogICAgICAgICAgOiBmdW5kaW5nLm1hcChpdGVtID0+IDxGdW5kaW5nUm93IGtleT17aXRlbS5zeW1ib2x9IGl0ZW09e2l0ZW19IGlzTW9iaWxlPXtpc01vYmlsZX0gLz4pCiAgICAgICAgfQogICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogJzEwcHggMTZweCcsIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIGJvcmRlclRvcDogJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJyB9fT4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6IEMudGV4dFNlYyB9fT5BdXRvLXJlZnJlc2ggNjBzIMK3IExhc3Q6IHtsYXN0U3RyfTwvc3Bhbj4KICAgICAgICAgIDxidXR0b24gb25DbGljaz17cmVmcmVzaEZ1bmRpbmd9IHN0eWxlPXt7IHBhZGRpbmc6ICc1cHggMTJweCcsIGJvcmRlclJhZGl1czogJzhweCcsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDAsMjM4LDI1NSwwLjIpJywgYmFja2dyb3VuZDogJ3JnYmEoMCwyMzgsMjU1LDAuMDYpJywgY29sb3I6IEMuYWNjZW50LCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGN1cnNvcjogJ3BvaW50ZXInLCBmb250V2VpZ2h0OiA3MDAgfX0+4oa7IFJFRlJFU0g8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKRnVuZGluZ09JLmRpc3BsYXlOYW1lID0gJ0Z1bmRpbmdPSSc7CgovLyDilIDilIDilIAgTWFpbiBQYWdlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApjb25zdCBJbnRlbGxpZ2VuY2U6IFJlYWN0LkZDID0gKCkgPT4gewogIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZTxUYWI+KCdOZXdzIEZlZWQnKTsKICBjb25zdCB7IGlzTW9iaWxlIH0gPSB1c2VCcmVha3BvaW50KCk7CgogIGNvbnN0IHBhZ2VTdHlsZSA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcyMHB4JywKICAgIHBhZGRpbmc6IGlzTW9iaWxlID8gJzE2cHgnIDogJzI0cHgnLCBtaW5IZWlnaHQ6ICcxMDB2aCcsIGJhY2tncm91bmQ6IEMuYmcsIGZvbnRGYW1pbHk6IEZPTlRfVUksCiAgfSksIFtpc01vYmlsZV0pOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17cGFnZVN0eWxlfT4KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0JywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgZmxleFdyYXA6ICd3cmFwJyBhcyBjb25zdCwgZ2FwOiAnMTBweCcgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICc2cHgnIH19PgogICAgICAgICAgPGgxIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IGlzTW9iaWxlID8gJzE4cHgnIDogJzIycHgnLCBmb250V2VpZ2h0OiA4MDAsIGNvbG9yOiBDLnRleHRQcmltYXJ5LCBsZXR0ZXJTcGFjaW5nOiAnLTAuMDJlbScsIG1hcmdpbjogMCB9fT5NQVJLRVQgSU5URUxMSUdFTkNFPC9oMT4KICAgICAgICAgIDxwIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTNweCcsIGNvbG9yOiBDLnRleHRTZWMsIG1hcmdpbjogMCB9fT5OZXdzIGZlZWQgwrcgU2VudGltZW50IGFuYWx5c2lzIMK3IE5hcnJhdGl2ZSB0cmFja2luZyDCtyBGdW5kaW5nIHJhdGVzPC9wPgogICAgICAgIDwvZGl2PgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGRpc3BsYXk6ICdpbmxpbmUtZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc2cHgnLCBwYWRkaW5nOiAnM3B4IDEwcHgnLCBib3JkZXJSYWRpdXM6ICcyMHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMzQsMjU1LDE3MCwwLjA4KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDM0LDI1NSwxNzAsMC4yNSknLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnBvc2l0aXZlLCBmb250V2VpZ2h0OiA3MDAgfX0+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyB3aWR0aDogJzZweCcsIGhlaWdodDogJzZweCcsIGJvcmRlclJhZGl1czogJzUwJScsIGJhY2tncm91bmQ6IEMucG9zaXRpdmUsIGJveFNoYWRvdzogJzAgMCA2cHggcmdiYSgzNCwyNTUsMTcwLDAuOCknLCBmbGV4U2hyaW5rOiAwIH19IC8+CiAgICAgICAgICBMSVZFCiAgICAgICAgPC9zcGFuPgogICAgICA8L2Rpdj4KICAgICAgPFRhYkJhciBhY3RpdmU9e2FjdGl2ZVRhYn0gb25DaGFuZ2U9e3NldEFjdGl2ZVRhYn0gLz4KICAgICAgPEFuaW1hdGVQcmVzZW5jZSBtb2RlPSJ3YWl0Ij4KICAgICAgICA8bW90aW9uLmRpdiBrZXk9e2FjdGl2ZVRhYn0gaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB5OiAxMCB9fSBhbmltYXRlPXt7IG9wYWNpdHk6IDEsIHk6IDAgfX0gZXhpdD17eyBvcGFjaXR5OiAwLCB5OiAtNiB9fSB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjIgfX0+CiAgICAgICAgICB7YWN0aXZlVGFiID09PSAnTmV3cyBGZWVkJyAgICAgICAgJiYgPE5ld3NGZWVkIC8+fQogICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ01hcmtldCBTZW50aW1lbnQnICYmIDxNYXJrZXRTZW50aW1lbnQgLz59CiAgICAgICAgICB7YWN0aXZlVGFiID09PSAnTmFycmF0aXZlcycgICAgICAgJiYgPE5hcnJhdGl2ZXMgLz59CiAgICAgICAgICB7YWN0aXZlVGFiID09PSAnRnVuZGluZyAmIE9JJyAgICAgJiYgPEZ1bmRpbmdPSSBpc01vYmlsZT17aXNNb2JpbGV9IC8+fQogICAgICAgIDwvbW90aW9uLmRpdj4KICAgICAgPC9BbmltYXRlUHJlc2VuY2U+CiAgICA8L2Rpdj4KICApOwp9OwoKSW50ZWxsaWdlbmNlLmRpc3BsYXlOYW1lID0gJ0ludGVsbGlnZW5jZSc7CmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oSW50ZWxsaWdlbmNlKTsK";
const C4 = "LyoqCiAqIEFsZXJ0cy50c3gg4oCUIFpFUsOYIE1FUklESUFOCiAqIFByaWNlIGFsZXJ0IGNlbnRlcjogYWJvdmUvYmVsb3cgdGFyZ2V0LCAlIGNoYW5nZSBwdW1wL2R1bXAsCiAqIHNvdW5kIG5vdGlmaWNhdGlvbiAoV2ViIEF1ZGlvIEFQSSksIGJyb3dzZXIgcHVzaCBub3RpZmljYXRpb24uCiAqIC0gbG9jYWxTdG9yYWdlIHBlcnNpc3RlbmNlIChrZXk6ICd6bV9hbGVydHNfdjInKQogKiAtIFJlYWwtdGltZSBwcmljZSBjaGVjayB2aWEgQ3J5cHRvQ29udGV4dCAoV1MtZmVkLCBubyBleHRyYSBmZXRjaCkKICogLSBSaW5nIGJ1ZmZlcjogbWF4IDEwMCB0cmlnZ2VyZWQgaGlzdG9yeQogKiAtIE9iamVjdC5mcmVlemUoKSBzZW11YSBzdGF0aWMgZGF0YQogKiAtIFJlYWN0Lm1lbW8gKyBkaXNwbGF5TmFtZSBzZW11YSBjb21wb25lbnRzCiAqIC0gdXNlUmVkdWNlciBmb3Igc3RhdGUsIHVzZUNhbGxiYWNrICsgdXNlTWVtbyBhbGwgaGFuZGxlcnMKICogLSByZ2JhKCkgb25seSwgemVybyBoc2woKSDinJMKICogLSBaZXJvIGNsYXNzTmFtZSDinJMg4oaQIHB1c2gyNiAoem0tZ2xhc3Mvem0tY29ybmVycy96bS1ncmFkaWVudCDihpIgaW5saW5lKQogKiAtIEhvb2sgLnRzIHBhdHRlcm46IHplcm8gSlNYIChsb2dpYyBvbmx5IGluIGhlbHBlcnMpCiAqIC0gWmVybyBNYXRoLnJhbmRvbSgpIOKGkiBkZXRlcm1pbmlzdGljSml0dGVyCiAqIC0gWmVybyB0ZW1wbGF0ZSBsaXRlcmFscyBpbiBKU1ggYXR0cnMKICogLSBQdXJlIFNWRyBpY29ucyB3aGVyZSBuZWVkZWQsIHplcm8gcmVjaGFydHMKICogLSB3aWxsLWNoYW5nZTogdHJhbnNmb3JtIG9uIGFuaW1hdGVkIGVsZW1lbnRzCiAqLwoKaW1wb3J0IHsKICBtZW1vLCB1c2VSZWR1Y2VyLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLAp9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlQ3J5cHRvIH0gZnJvbSAnQC9jb250ZXh0cy9DcnlwdG9Db250ZXh0JzsKaW1wb3J0IHsgZm9ybWF0UHJpY2UsIGZvcm1hdENoYW5nZSwgZm9ybWF0Q29tcGFjdCwgZGV0ZXJtaW5pc3RpY0ppdHRlciB9IGZyb20gJ0AvbGliL2Zvcm1hdHRlcnMnOwppbXBvcnQgdHlwZSB7IENyeXB0b0Fzc2V0IH0gZnJvbSAnQC9saWIvZm9ybWF0dGVycyc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwppbXBvcnQgewoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CiAgQmVsbCwgQmVsbE9mZiwgUGx1cywgVHJhc2gyLCBWb2x1bWUyLCBWb2x1bWVYLCBDaGVja0NpcmNsZTIsCiAgVHJlbmRpbmdVcCwgVHJlbmRpbmdEb3duLCBBY3Rpdml0eSwgQWxlcnRUcmlhbmdsZSwgWmFwLCBYLAogIFNldHRpbmdzLCBIaXN0b3J5LCBDaGV2cm9uRG93biwgQ2hldnJvblVwLAp9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CgovLyDilIDilIDilIAgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgp0eXBlIEFsZXJ0VHlwZSA9ICdhYm92ZScgfCAnYmVsb3cnIHwgJ2NoYW5nZV91cCcgfCAnY2hhbmdlX2Rvd24nOwp0eXBlIEFsZXJ0U3RhdHVzID0gJ2FjdGl2ZScgfCAndHJpZ2dlcmVkJyB8ICdwYXVzZWQnOwoKaW50ZXJmYWNlIFByaWNlQWxlcnQgewogIGlkOiBzdHJpbmc7CiAgc3ltYm9sOiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuICdidGMnCiAgbmFtZTogc3RyaW5nOyAgICAgICAgICAgICAvLyBlLmcuICdCaXRjb2luJwogIGltYWdlPzogc3RyaW5nOwogIHR5cGU6IEFsZXJ0VHlwZTsKICB0YXJnZXQ6IG51bWJlcjsgICAgICAgICAgIC8vIHByaWNlIG9yICUgZGVwZW5kaW5nIG9uIHR5cGUKICBjcmVhdGVkQXQ6IG51bWJlcjsgICAgICAgIC8vIG1zIGVwb2NoCiAgc3RhdHVzOiBBbGVydFN0YXR1czsKICB0cmlnZ2VyZWRBdD86IG51bWJlcjsKICB0cmlnZ2VyZWRQcmljZT86IG51bWJlcjsKICBub3RlPzogc3RyaW5nOwogIHNvdW5kOiBib29sZWFuOwogIHB1c2g6IGJvb2xlYW47Cn0KCmludGVyZmFjZSBUcmlnZ2VyZWRMb2cgewogIGlkOiBzdHJpbmc7CiAgYWxlcnRJZDogc3RyaW5nOwogIHN5bWJvbDogc3RyaW5nOwogIG5hbWU6IHN0cmluZzsKICBpbWFnZT86IHN0cmluZzsKICB0eXBlOiBBbGVydFR5cGU7CiAgdGFyZ2V0OiBudW1iZXI7CiAgdHJpZ2dlcmVkUHJpY2U6IG51bWJlcjsKICB0cmlnZ2VyZWRBdDogbnVtYmVyOwp9CgppbnRlcmZhY2UgQWxlcnRzU3RhdGUgewogIGFsZXJ0czogUHJpY2VBbGVydFtdOwogIGxvZzogVHJpZ2dlcmVkTG9nW107CiAgc291bmRFbmFibGVkOiBib29sZWFuOwogIHB1c2hFbmFibGVkOiBib29sZWFuOwp9Cgp0eXBlIEFsZXJ0c0FjdGlvbiA9CiAgfCB7IHR5cGU6ICdBREQnOyBhbGVydDogUHJpY2VBbGVydCB9CiAgfCB7IHR5cGU6ICdSRU1PVkUnOyBpZDogc3RyaW5nIH0KICB8IHsgdHlwZTogJ1RPR0dMRV9QQVVTRSc7IGlkOiBzdHJpbmcgfQogIHwgeyB0eXBlOiAnVFJJR0dFUic7IGlkOiBzdHJpbmc7IHByaWNlOiBudW1iZXI7IGxvZ0VudHJ5OiBUcmlnZ2VyZWRMb2cgfQogIHwgeyB0eXBlOiAnQ0xFQVJfTE9HJyB9CiAgfCB7IHR5cGU6ICdUT0dHTEVfU09VTkQnIH0KICB8IHsgdHlwZTogJ1RPR0dMRV9QVVNIJyB9CiAgfCB7IHR5cGU6ICdMT0FEJzsgc3RhdGU6IEFsZXJ0c1N0YXRlIH07CgovLyDilIDilIDilIAgQ29uc3RhbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgTFNfS0VZID0gJ3ptX2FsZXJ0c192Mic7CmNvbnN0IE1BWF9MT0cgPSAxMDA7CmNvbnN0IE1BWF9BTEVSVFMgPSA1MDsKCmNvbnN0IEFMRVJUX1RZUEVfQ09ORklHID0gT2JqZWN0LmZyZWV6ZSh7CiAgYWJvdmU6ICAgICAgeyBsYWJlbDogJ1ByaWNlIEFib3ZlJywgICBpY29uOiBUcmVuZGluZ1VwLCAgIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDEpJywgICBiZzogJ3JnYmEoNTIsMjExLDE1MywwLjEwKScsICAgYm9yZGVyOiAncmdiYSg1MiwyMTEsMTUzLDAuMjIpJyB9LAogIGJlbG93OiAgICAgIHsgbGFiZWw6ICdQcmljZSBCZWxvdycsICAgaWNvbjogVHJlbmRpbmdEb3duLCBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMSknLCAgYmc6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuMTApJywgIGJvcmRlcjogJ3JnYmEoMjUxLDExMywxMzMsMC4yMiknIH0sCiAgY2hhbmdlX3VwOiAgeyBsYWJlbDogJyUgUHVtcCBBbGVydCcsICBpY29uOiBaYXAsICAgICAgICAgIGNvbG9yOiAncmdiYSgzNCwyMTEsMjM4LDEpJywgICBiZzogJ3JnYmEoMzQsMjExLDIzOCwwLjEwKScsICAgYm9yZGVyOiAncmdiYSgzNCwyMTEsMjM4LDAuMjIpJyB9LAogIGNoYW5nZV9kb3duOnsgbGFiZWw6ICclIER1bXAgQWxlcnQnLCAgaWNvbjogQWxlcnRUcmlhbmdsZSxjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwxKScsICAgYmc6ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMCknLCAgIGJvcmRlcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjIyKScgfSwKfSBhcyBjb25zdCk7Cgpjb25zdCBTVEFUVVNfQ09ORklHID0gT2JqZWN0LmZyZWV6ZSh7CiAgYWN0aXZlOiAgICB7IGxhYmVsOiAnQWN0aXZlJywgICAgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknLCAgYmc6ICdyZ2JhKDUyLDIxMSwxNTMsMC4xMCknICB9LAogIHRyaWdnZXJlZDogeyBsYWJlbDogJ1RyaWdnZXJlZCcsIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJywgYmc6ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMCknICB9LAogIHBhdXNlZDogICAgeyBsYWJlbDogJ1BhdXNlZCcsICAgIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjYpJywgYmc6ICdyZ2JhKDE0OCwxNjMsMTg0LDAuMDgpJyB9LAp9IGFzIGNvbnN0KTsKCi8vIOKUgOKUgOKUgCBIZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZnVuY3Rpb24gbG9hZEZyb21MUygpOiBBbGVydHNTdGF0ZSB8IG51bGwgewogIHRyeSB7CiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMU19LRVkpOwogICAgaWYgKCFyYXcpIHJldHVybiBudWxsOwogICAgcmV0dXJuIEpTT04ucGFyc2UocmF3KSBhcyBBbGVydHNTdGF0ZTsKICB9IGNhdGNoIHsKICAgIHJldHVybiBudWxsOwogIH0KfQoKZnVuY3Rpb24gc2F2ZVRvTFMoc3RhdGU6IEFsZXJ0c1N0YXRlKTogdm9pZCB7CiAgdHJ5IHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExTX0tFWSwgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIGdlbklkKGF0dGVtcHQ6IG51bWJlcik6IHN0cmluZyB7CiAgY29uc3Qgc2VlZCA9IGRldGVybWluaXN0aWNKaXR0ZXIoYXR0ZW1wdCk7CiAgcmV0dXJuICdhJyArIERhdGUubm93KCkudG9TdHJpbmcoMzYpICsgc2VlZC50b1N0cmluZygxNik7Cn0KCi8vIFdlYiBBdWRpbyBBUEkg4oCUIHN5bnRoZXNpemUgYWxlcnQgYmVlcCAobm8gZXh0ZXJuYWwgc291bmQgZmlsZSBuZWVkZWQpCmZ1bmN0aW9uIHBsYXlBbGVydFNvdW5kKHR5cGU6IEFsZXJ0VHlwZSk6IHZvaWQgewogIHRyeSB7CiAgICBjb25zdCBjdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7CiAgICBjb25zdCBvc2MgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgY29uc3QgZ2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7CiAgICBvc2MuY29ubmVjdChnYWluKTsKICAgIGdhaW4uY29ubmVjdChjdHguZGVzdGluYXRpb24pOwoKICAgIGlmICh0eXBlID09PSAnYWJvdmUnIHx8IHR5cGUgPT09ICdjaGFuZ2VfdXAnKSB7CiAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODgwLCBjdHguY3VycmVudFRpbWUpOwogICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMTMyMCwgY3R4LmN1cnJlbnRUaW1lICsgMC4xKTsKICAgIH0gZWxzZSB7CiAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNjYwLCBjdHguY3VycmVudFRpbWUpOwogICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoNDQwLCBjdHguY3VycmVudFRpbWUgKyAwLjEpOwogICAgfQogICAgb3NjLnR5cGUgPSAnc2luZSc7CiAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xOCwgY3R4LmN1cnJlbnRUaW1lKTsKICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCBjdHguY3VycmVudFRpbWUgKyAwLjM1KTsKICAgIG9zYy5zdGFydChjdHguY3VycmVudFRpbWUpOwogICAgb3NjLnN0b3AoY3R4LmN1cnJlbnRUaW1lICsgMC4zNSk7CgogICAgLy8gU2Vjb25kIHRvbmUKICAgIGNvbnN0IG9zYzIgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgY29uc3QgZ2FpbjIgPSBjdHguY3JlYXRlR2FpbigpOwogICAgb3NjMi5jb25uZWN0KGdhaW4yKTsKICAgIGdhaW4yLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTsKICAgIG9zYzIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHR5cGUgPT09ICdhYm92ZScgfHwgdHlwZSA9PT0gJ2NoYW5nZV91cCcgPyAxMzIwIDogNDQwLCBjdHguY3VycmVudFRpbWUgKyAwLjEyKTsKICAgIG9zYzIudHlwZSA9ICdzaW5lJzsKICAgIGdhaW4yLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xMiwgY3R4LmN1cnJlbnRUaW1lICsgMC4xMik7CiAgICBnYWluMi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIGN0eC5jdXJyZW50VGltZSArIDAuNDUpOwogICAgb3NjMi5zdGFydChjdHguY3VycmVudFRpbWUgKyAwLjEyKTsKICAgIG9zYzIuc3RvcChjdHguY3VycmVudFRpbWUgKyAwLjQ1KTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIHNlbmRQdXNoTm90aWZpY2F0aW9uKGFsZXJ0OiBQcmljZUFsZXJ0LCBwcmljZTogbnVtYmVyKTogdm9pZCB7CiAgaWYgKCEoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSB8fCBOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gJ2dyYW50ZWQnKSByZXR1cm47CiAgdHJ5IHsKICAgIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW2FsZXJ0LnR5cGVdOwogICAgY29uc3QgYm9keSA9IGFsZXJ0LnR5cGUgPT09ICdhYm92ZScgfHwgYWxlcnQudHlwZSA9PT0gJ2JlbG93JwogICAgICA/IGFsZXJ0LnN5bWJvbC50b1VwcGVyQ2FzZSgpICsgJyBoaXQgJyArIGZvcm1hdFByaWNlKHByaWNlKSArICcgKHRhcmdldDogJyArIGZvcm1hdFByaWNlKGFsZXJ0LnRhcmdldCkgKyAnKScKICAgICAgOiBhbGVydC5zeW1ib2wudG9VcHBlckNhc2UoKSArICcgY2hhbmdlZCAnICsgZm9ybWF0Q2hhbmdlKGFsZXJ0LnRhcmdldCkgKyAnIChub3c6ICcgKyBmb3JtYXRDaGFuZ2UocHJpY2UpICsgJyknOwogICAgbmV3IE5vdGlmaWNhdGlvbignWkVSw5ggTUVSSURJQU4g4oCUICcgKyBjZmcubGFiZWwsIHsKICAgICAgYm9keSwKICAgICAgaWNvbjogYWxlcnQuaW1hZ2UsCiAgICAgIHRhZzogYWxlcnQuaWQsCiAgICAgIHNpbGVudDogZmFsc2UsCiAgICB9KTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIGNoZWNrQWxlcnQoYWxlcnQ6IFByaWNlQWxlcnQsIGFzc2V0OiBDcnlwdG9Bc3NldCk6IGJvb2xlYW4gewogIGlmIChhbGVydC5zdGF0dXMgIT09ICdhY3RpdmUnKSByZXR1cm4gZmFsc2U7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdhYm92ZScpICAgICAgIHJldHVybiBhc3NldC5wcmljZSA+PSBhbGVydC50YXJnZXQ7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdiZWxvdycpICAgICAgIHJldHVybiBhc3NldC5wcmljZSA8PSBhbGVydC50YXJnZXQ7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdjaGFuZ2VfdXAnKSAgIHJldHVybiBhc3NldC5jaGFuZ2UyNGggPj0gYWxlcnQudGFyZ2V0OwogIGlmIChhbGVydC50eXBlID09PSAnY2hhbmdlX2Rvd24nKSByZXR1cm4gYXNzZXQuY2hhbmdlMjRoIDw9IC1NYXRoLmFicyhhbGVydC50YXJnZXQpOwogIHJldHVybiBmYWxzZTsKfQoKLy8g4pSA4pSA4pSAIFJlZHVjZXIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBJTklUSUFMX1NUQVRFOiBBbGVydHNTdGF0ZSA9IE9iamVjdC5mcmVlemUoewogIGFsZXJ0czogW10sCiAgbG9nOiBbXSwKICBzb3VuZEVuYWJsZWQ6IHRydWUsCiAgcHVzaEVuYWJsZWQ6IGZhbHNlLAp9IGFzIEFsZXJ0c1N0YXRlKTsKCmZ1bmN0aW9uIHJlZHVjZXIoc3RhdGU6IEFsZXJ0c1N0YXRlLCBhY3Rpb246IEFsZXJ0c0FjdGlvbik6IEFsZXJ0c1N0YXRlIHsKICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7CiAgICBjYXNlICdMT0FEJzoKICAgICAgcmV0dXJuIGFjdGlvbi5zdGF0ZTsKICAgIGNhc2UgJ0FERCc6IHsKICAgICAgaWYgKHN0YXRlLmFsZXJ0cy5sZW5ndGggPj0gTUFYX0FMRVJUUykgcmV0dXJuIHN0YXRlOwogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgYWxlcnRzOiBbYWN0aW9uLmFsZXJ0LCAuLi5zdGF0ZS5hbGVydHNdIH07CiAgICB9CiAgICBjYXNlICdSRU1PVkUnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgYWxlcnRzOiBzdGF0ZS5hbGVydHMuZmlsdGVyKGEgPT4gYS5pZCAhPT0gYWN0aW9uLmlkKSB9OwogICAgY2FzZSAnVE9HR0xFX1BBVVNFJzoKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5zdGF0ZSwKICAgICAgICBhbGVydHM6IHN0YXRlLmFsZXJ0cy5tYXAoYSA9PgogICAgICAgICAgYS5pZCA9PT0gYWN0aW9uLmlkCiAgICAgICAgICAgID8geyAuLi5hLCBzdGF0dXM6IGEuc3RhdHVzID09PSAncGF1c2VkJyA/ICdhY3RpdmUnIDogJ3BhdXNlZCcgfQogICAgICAgICAgICA6IGEKICAgICAgICApLAogICAgICB9OwogICAgY2FzZSAnVFJJR0dFUic6IHsKICAgICAgY29uc3QgbmV3TG9nID0gW2FjdGlvbi5sb2dFbnRyeSwgLi4uc3RhdGUubG9nXS5zbGljZSgwLCBNQVhfTE9HKTsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5zdGF0ZSwKICAgICAgICBhbGVydHM6IHN0YXRlLmFsZXJ0cy5tYXAoYSA9PgogICAgICAgICAgYS5pZCA9PT0gYWN0aW9uLmlkCiAgICAgICAgICAgID8geyAuLi5hLCBzdGF0dXM6ICd0cmlnZ2VyZWQnLCB0cmlnZ2VyZWRBdDogRGF0ZS5ub3coKSwgdHJpZ2dlcmVkUHJpY2U6IGFjdGlvbi5wcmljZSB9CiAgICAgICAgICAgIDogYQogICAgICAgICksCiAgICAgICAgbG9nOiBuZXdMb2csCiAgICAgIH07CiAgICB9CiAgICBjYXNlICdDTEVBUl9MT0cnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9nOiBbXSB9OwogICAgY2FzZSAnVE9HR0xFX1NPVU5EJzoKICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHNvdW5kRW5hYmxlZDogIXN0YXRlLnNvdW5kRW5hYmxlZCB9OwogICAgY2FzZSAnVE9HR0xFX1BVU0gnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgcHVzaEVuYWJsZWQ6ICFzdGF0ZS5wdXNoRW5hYmxlZCB9OwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIHN0YXRlOwogIH0KfQoKLy8g4pSA4pSA4pSAIFN1Yi1jb21wb25lbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgV3NTdGF0dXNEb3QgPSBtZW1vKCh7IHN0YXR1cyB9OiB7IHN0YXR1czogc3RyaW5nIH0pID0+IHsKICBjb25zdCBjb2xvciA9IHN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcKICAgID8gJ3JnYmEoNTIsMjExLDE1MywxKScKICAgIDogc3RhdHVzID09PSAncmVjb25uZWN0aW5nJwogICAgPyAncmdiYSgyNTEsMTkxLDM2LDEpJwogICAgOiAncmdiYSgyNTEsMTEzLDEzMywxKSc7CiAgcmV0dXJuICgKICAgIDxzcGFuCiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiA2LCBoZWlnaHQ6IDYsIGJvcmRlclJhZGl1czogJzUwJScsIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCBiYWNrZ3JvdW5kOiBjb2xvciwgYm94U2hhZG93OiAnMCAwIDVweCAnICsgY29sb3IsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19CiAgICAvPgogICk7Cn0pOwpXc1N0YXR1c0RvdC5kaXNwbGF5TmFtZSA9ICdXc1N0YXR1c0RvdCc7CgovLyDilIDilIDilIAgQWRkIEFsZXJ0IEZvcm0g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQWRkQWxlcnRGb3JtUHJvcHMgewogIGFzc2V0czogQ3J5cHRvQXNzZXRbXTsKICBvbkFkZDogKGFsZXJ0OiBQcmljZUFsZXJ0KSA9PiB2b2lkOwogIG9uQ2xvc2U6ICgpID0+IHZvaWQ7CiAgaWRDb3VudGVyOiBudW1iZXI7Cn0KCmNvbnN0IEFkZEFsZXJ0Rm9ybSA9IG1lbW8oKHsgYXNzZXRzLCBvbkFkZCwgb25DbG9zZSwgaWRDb3VudGVyIH06IEFkZEFsZXJ0Rm9ybVByb3BzKSA9PiB7CiAgY29uc3QgW3N5bWJvbCwgc2V0U3ltYm9sXSA9IHVzZVN0YXRlKCdidGMnKTsKICBjb25zdCBbYWxlcnRUeXBlLCBzZXRBbGVydFR5cGVdID0gdXNlU3RhdGU8QWxlcnRUeXBlPignYWJvdmUnKTsKICBjb25zdCBbdGFyZ2V0LCBzZXRUYXJnZXRdID0gdXNlU3RhdGUoJycpOwogIGNvbnN0IFtub3RlLCBzZXROb3RlXSA9IHVzZVN0YXRlKCcnKTsKICBjb25zdCBbc291bmQsIHNldFNvdW5kXSA9IHVzZVN0YXRlKHRydWUpOwogIGNvbnN0IFtwdXNoLCBzZXRQdXNoXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKCcnKTsKCiAgY29uc3Qgc2VsZWN0ZWRBc3NldCA9IHVzZU1lbW8oCiAgICAoKSA9PiBhc3NldHMuZmluZChhID0+IGEuc3ltYm9sLnRvTG93ZXJDYXNlKCkgPT09IHN5bWJvbCkgPz8gYXNzZXRzWzBdLAogICAgW2Fzc2V0cywgc3ltYm9sXQogICk7CgogIGNvbnN0IGlzUGVyY2VudCA9IGFsZXJ0VHlwZSA9PT0gJ2NoYW5nZV91cCcgfHwgYWxlcnRUeXBlID09PSAnY2hhbmdlX2Rvd24nOwogIGNvbnN0IHBsYWNlaG9sZGVyID0gaXNQZXJjZW50ID8gJ2UuZy4gNSAoZm9yIDUlKScgOiBzZWxlY3RlZEFzc2V0ID8gJ2UuZy4gJyArIE1hdGgucm91bmQoc2VsZWN0ZWRBc3NldC5wcmljZSAqIDEuMDUpIDogJ1RhcmdldCBwcmljZSc7CgogIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQodGFyZ2V0KTsKICAgIGlmICghaXNGaW5pdGUodmFsKSB8fCB2YWwgPD0gMCkgeyBzZXRFcnJvcignVGFyZ2V0IHRpZGFrIHZhbGlkIGJybycpOyByZXR1cm47IH0KICAgIGlmICghc2VsZWN0ZWRBc3NldCkgeyBzZXRFcnJvcignUGlsaWggYXNldCBkdWx1Jyk7IHJldHVybjsgfQogICAgc2V0RXJyb3IoJycpOwogICAgY29uc3QgYWxlcnQ6IFByaWNlQWxlcnQgPSB7CiAgICAgIGlkOiBnZW5JZChpZENvdW50ZXIpLAogICAgICBzeW1ib2w6IHNlbGVjdGVkQXNzZXQuc3ltYm9sLnRvTG93ZXJDYXNlKCksCiAgICAgIG5hbWU6IHNlbGVjdGVkQXNzZXQubmFtZSwKICAgICAgaW1hZ2U6IHNlbGVjdGVkQXNzZXQuaW1hZ2UsCiAgICAgIHR5cGU6IGFsZXJ0VHlwZSwKICAgICAgdGFyZ2V0OiB2YWwsCiAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSwKICAgICAgc3RhdHVzOiAnYWN0aXZlJywKICAgICAgbm90ZTogbm90ZS50cmltKCkgfHwgdW5kZWZpbmVkLAogICAgICBzb3VuZCwKICAgICAgcHVzaCwKICAgIH07CiAgICBvbkFkZChhbGVydCk7CiAgICBvbkNsb3NlKCk7CiAgfSwgW3RhcmdldCwgc2VsZWN0ZWRBc3NldCwgYWxlcnRUeXBlLCBub3RlLCBzb3VuZCwgcHVzaCwgaWRDb3VudGVyLCBvbkFkZCwgb25DbG9zZV0pOwoKICBjb25zdCB0b3BBc3NldHMgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5zbGljZSgwLCAzMCksIFthc3NldHNdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYKICAgICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdmaXhlZCcsIGluc2V0OiAwLCB6SW5kZXg6IDIwMCwgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBiYWNrZ3JvdW5kOiAncmdiYSg1LDUsMTQsMC44MiknLCBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoMTBweCknIH19CiAgICAgIG9uQ2xpY2s9e2UgPT4geyBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkgb25DbG9zZSgpOyB9fQogICAgPgogICAgICA8ZGl2CiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBtYXhXaWR0aDogNDQ4LCBtYXJnaW46ICcwIDE2cHgnLCBwYWRkaW5nOiAyNCwgYmFja2dyb3VuZDogJ3JnYmEoOCw4LDI0LDAuOTgpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE4KScsIGJvcmRlclJhZGl1czogJzEycHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fQogICAgICA+CiAgICAgICAgey8qIEhlYWRlciAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIG1hcmdpbkJvdHRvbTogMjAgfX0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCB9fT4KICAgICAgICAgICAgPEJlbGwgc2l6ZT17MTZ9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDEpJyB9fSAvPgogICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNzAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICAgIE5ldyBBbGVydAogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX0KICAgICAgICAgICAgYXJpYS1sYWJlbD0iQ2xvc2UgbmV3IGFsZXJ0IGRpYWxvZyIKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogNCwgYm9yZGVyUmFkaXVzOiA4LCB0cmFuc2l0aW9uOiAnY29sb3IgMC4xNXMsYmFja2dyb3VuZCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLCBib3JkZXI6ICdub25lJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPFggc2l6ZT17MTZ9IC8+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIEFzc2V0IFNlbGVjdCAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMTYgfX0+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNWVtJywgbWFyZ2luQm90dG9tOiA2LCBkaXNwbGF5OiAnYmxvY2snLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgQXNzZXQKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgIHZhbHVlPXtzeW1ib2x9CiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFN5bWJvbChlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAge3RvcEFzc2V0cy5tYXAoYSA9PiAoCiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2EuaWR9IHZhbHVlPXthLnN5bWJvbC50b0xvd2VyQ2FzZSgpfSBzdHlsZT17eyBiYWNrZ3JvdW5kOiAncmdiYSg4LDgsMjQsMSknIH19PgogICAgICAgICAgICAgICAge2Euc3ltYm9sLnRvVXBwZXJDYXNlKCl9IOKAlCB7YS5uYW1lfQogICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICApKX0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAge3NlbGVjdGVkQXNzZXQgJiYgKAogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogNCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgIEN1cnJlbnQ6IHtmb3JtYXRQcmljZShzZWxlY3RlZEFzc2V0LnByaWNlKX0gwrcge2Zvcm1hdENoYW5nZShzZWxlY3RlZEFzc2V0LmNoYW5nZTI0aCl9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKX0KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIEFsZXJ0IFR5cGUgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDE2IH19PgogICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJywgbGV0dGVyU3BhY2luZzogJzAuMDVlbScsIG1hcmdpbkJvdHRvbTogNiwgZGlzcGxheTogJ2Jsb2NrJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgIEFsZXJ0IFR5cGUKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzFmciAxZnInLCBnYXA6IDggfX0+CiAgICAgICAgICAgIHsoT2JqZWN0LmtleXMoQUxFUlRfVFlQRV9DT05GSUcpIGFzIEFsZXJ0VHlwZVtdKS5tYXAodCA9PiB7CiAgICAgICAgICAgICAgY29uc3QgY2ZnID0gQUxFUlRfVFlQRV9DT05GSUdbdF07CiAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gYWxlcnRUeXBlID09PSB0OwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICAgIGtleT17dH0KICAgICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBbGVydFR5cGUodCl9CiAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17YWN0aXZlfQogICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnU2VsZWN0IGFsZXJ0IHR5cGU6ICcgKyBjZmcubGFiZWx9CiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCwgcGFkZGluZzogJzhweCAxMnB4JywgYm9yZGVyUmFkaXVzOiA4LCB0ZXh0QWxpZ246ICdsZWZ0JywgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiBhY3RpdmUgPyBjZmcuYmcgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjAzKScsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgKGFjdGl2ZSA/IGNmZy5ib3JkZXIgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScpLCBjb2xvcjogYWN0aXZlID8gY2ZnLmNvbG9yIDogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19CiAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgIDxjZmcuaWNvbiBzaXplPXsxMn0gLz4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+e2NmZy5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogVGFyZ2V0ICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgIDxsYWJlbCBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjA1ZW0nLCBtYXJnaW5Cb3R0b206IDYsIGRpc3BsYXk6ICdibG9jaycsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICB7aXNQZXJjZW50ID8gJ0NoYW5nZSAlIFRhcmdldCcgOiAnUHJpY2UgVGFyZ2V0IChVU0QpJ30KICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgdHlwZT0ibnVtYmVyIgogICAgICAgICAgICB2YWx1ZT17dGFyZ2V0fQogICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRUYXJnZXQoZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgIC8+CiAgICAgICAgICB7ZXJyb3IgJiYgKAogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogNCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1uZWdhdGl2ZSknIH19PntlcnJvcn08L2Rpdj4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBOb3RlICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgIDxsYWJlbCBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjA1ZW0nLCBtYXJnaW5Cb3R0b206IDYsIGRpc3BsYXk6ICdibG9jaycsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICBOb3RlIChvcHRpb25hbCkKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgdHlwZT0idGV4dCIKICAgICAgICAgICAgdmFsdWU9e25vdGV9CiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldE5vdGUoZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICBwbGFjZWhvbGRlcj0iZS5nLiBSZXNpc3RhbmNlIGxldmVsLCBEQ0EgcG9pbnQuLi4iCiAgICAgICAgICAgIG1heExlbmd0aD17ODB9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgIC8+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBOb3RpZmljYXRpb24gT3B0aW9ucyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAxMiwgbWFyZ2luQm90dG9tOiAyMCB9fT4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U291bmQocyA9PiAhcyl9CiAgICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtzb3VuZH0KICAgICAgICAgICAgYXJpYS1sYWJlbD17c291bmQgPyAnRGlzYWJsZSBzb3VuZCBub3RpZmljYXRpb24nIDogJ0VuYWJsZSBzb3VuZCBub3RpZmljYXRpb24nfQogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDgsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZmxleDogMSwgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiBzb3VuZCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXI6ICcxcHggc29saWQgJyArIChzb3VuZCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4yNSknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNiknKSwgY29sb3I6IHNvdW5kID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIHtzb3VuZCA/IDxWb2x1bWUyIHNpemU9ezEzfSAvPiA6IDxWb2x1bWVYIHNpemU9ezEzfSAvPn0KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+U291bmQ8L3NwYW4+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0UHVzaChwID0+ICFwKX0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3B1c2h9CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e3B1c2ggPyAnRGlzYWJsZSBwdXNoIG5vdGlmaWNhdGlvbicgOiAnRW5hYmxlIHB1c2ggbm90aWZpY2F0aW9uJ30KICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA4LCBwYWRkaW5nOiAnOHB4IDEycHgnLCBib3JkZXJSYWRpdXM6IDgsIGZsZXg6IDEsIHRyYW5zaXRpb246ICdhbGwgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogcHVzaCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMTApJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAocHVzaCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMjUpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyksIGNvbG9yOiBwdXNoID8gJ3JnYmEoMTY3LDEzOSwyNTAsMSknIDogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICB7cHVzaCA/IDxCZWxsIHNpemU9ezEzfSAvPiA6IDxCZWxsT2ZmIHNpemU9ezEzfSAvPn0KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+UHVzaDwvc3Bhbj4KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogU3VibWl0ICovfQogICAgICAgIDxidXR0b24KICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN1Ym1pdH0KICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgIGFyaWEtbGFiZWw9IkNyZWF0ZSBuZXcgcHJpY2UgYWxlcnQiCiAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBwYWRkaW5nOiAnMTBweCAwJywgYm9yZGVyUmFkaXVzOiA4LCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNjAwLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC4xOCknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMzApJywgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknIH19CiAgICAgICAgPgogICAgICAgICAgU2V0IEFsZXJ0CiAgICAgICAgPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7CkFkZEFsZXJ0Rm9ybS5kaXNwbGF5TmFtZSA9ICdBZGRBbGVydEZvcm0nOwoKLy8g4pSA4pSA4pSAIEFsZXJ0IENhcmQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQWxlcnRDYXJkUHJvcHMgewogIGFsZXJ0OiBQcmljZUFsZXJ0OwogIGN1cnJlbnRQcmljZT86IG51bWJlcjsKICBjdXJyZW50Q2hhbmdlPzogbnVtYmVyOwogIG9uUmVtb3ZlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDsKICBvblRvZ2dsZVBhdXNlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDsKfQoKY29uc3QgQWxlcnRDYXJkID0gbWVtbygoeyBhbGVydCwgY3VycmVudFByaWNlLCBjdXJyZW50Q2hhbmdlLCBvblJlbW92ZSwgb25Ub2dnbGVQYXVzZSB9OiBBbGVydENhcmRQcm9wcykgPT4gewogIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW2FsZXJ0LnR5cGVdOwogIGNvbnN0IHNDZmcgPSBTVEFUVVNfQ09ORklHW2FsZXJ0LnN0YXR1c107CiAgY29uc3QgaXNQZXJjZW50ID0gYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV91cCcgfHwgYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV9kb3duJzsKCiAgLy8gUHJvZ3Jlc3MgdG93YXJkIHRhcmdldAogIGNvbnN0IHByb2dyZXNzID0gdXNlTWVtbygoKSA9PiB7CiAgICBpZiAoIWN1cnJlbnRQcmljZSAmJiAhY3VycmVudENoYW5nZSkgcmV0dXJuIG51bGw7CiAgICBpZiAoaXNQZXJjZW50ICYmIGN1cnJlbnRDaGFuZ2UgIT09IHVuZGVmaW5lZCkgewogICAgICBjb25zdCBwY3QgPSBNYXRoLm1pbihNYXRoLmFicyhjdXJyZW50Q2hhbmdlKSAvIGFsZXJ0LnRhcmdldCwgMSk7CiAgICAgIHJldHVybiB7IHBjdCwgY3VycmVudDogY3VycmVudENoYW5nZSB9OwogICAgfQogICAgaWYgKCFpc1BlcmNlbnQgJiYgY3VycmVudFByaWNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgY29uc3QgYmFzZSA9IGFsZXJ0LnR5cGUgPT09ICdhYm92ZScKICAgICAgICA/IE1hdGgubWluKGN1cnJlbnRQcmljZSAvIGFsZXJ0LnRhcmdldCwgMSkKICAgICAgICA6IE1hdGgubWluKGFsZXJ0LnRhcmdldCAvIGN1cnJlbnRQcmljZSwgMSk7CiAgICAgIHJldHVybiB7IHBjdDogTWF0aC5tYXgoMCwgTWF0aC5taW4oYmFzZSwgMSkpLCBjdXJyZW50OiBjdXJyZW50UHJpY2UgfTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0sIFthbGVydC50eXBlLCBhbGVydC50YXJnZXQsIGN1cnJlbnRQcmljZSwgY3VycmVudENoYW5nZSwgaXNQZXJjZW50XSk7CgogIGNvbnN0IGhhbmRsZVJlbW92ZSA9IHVzZUNhbGxiYWNrKCgpID0+IG9uUmVtb3ZlKGFsZXJ0LmlkKSwgW2FsZXJ0LmlkLCBvblJlbW92ZV0pOwogIGNvbnN0IGhhbmRsZVBhdXNlID0gdXNlQ2FsbGJhY2soKCkgPT4gb25Ub2dnbGVQYXVzZShhbGVydC5pZCksIFthbGVydC5pZCwgb25Ub2dnbGVQYXVzZV0pOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17eyBwYWRkaW5nOiAxNiwgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGJhY2tncm91bmQ6IGFsZXJ0LnN0YXR1cyA9PT0gJ3RyaWdnZXJlZCcgPyBjZmcuYmcgOiAndmFyKC0tem0tZ2xhc3MtYmcpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoYWxlcnQuc3RhdHVzID09PSAndHJpZ2dlcmVkJyA/IGNmZy5ib3JkZXIgOiAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKScpLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScsIG9wYWNpdHk6IGFsZXJ0LnN0YXR1cyA9PT0gJ3BhdXNlZCcgPyAwLjYgOiAxLCB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJyB9fQogICAgPgogICAgICB7LyogVG9wIHJvdyAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Cb3R0b206IDggfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+CiAgICAgICAgICB7YWxlcnQuaW1hZ2UgJiYgPGltZyBzcmM9e2FsZXJ0LmltYWdlfSBhbHQ9IiIgc3R5bGU9e3sgd2lkdGg6IDIwLCBoZWlnaHQ6IDIwLCBib3JkZXJSYWRpdXM6ICc1MCUnIH19IC8+fQogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgICAge2FsZXJ0LnN5bWJvbC50b1VwcGVyQ2FzZSgpfQogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDQsIGJvcmRlclJhZGl1czogNCwgcGFkZGluZzogJzJweCA2cHgnLCBiYWNrZ3JvdW5kOiBjZmcuYmcsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgY2ZnLmJvcmRlciB9fQogICAgICAgICAgPgogICAgICAgICAgICA8Y2ZnLmljb24gc2l6ZT17MTB9IHN0eWxlPXt7IGNvbG9yOiBjZmcuY29sb3IgfX0gLz4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY29sb3I6IGNmZy5jb2xvciB9fT4KICAgICAgICAgICAgICB7Y2ZnLmxhYmVsfQogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiA0LCBwYWRkaW5nOiAnMnB4IDZweCcsIGJhY2tncm91bmQ6IHNDZmcuYmcgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY29sb3I6IHNDZmcuY29sb3IgfX0+CiAgICAgICAgICAgICAge3NDZmcubGFiZWx9CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogQWN0aW9ucyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICAgIHthbGVydC5zb3VuZCAmJiA8Vm9sdW1lMiBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0gLz59CiAgICAgICAgICB7YWxlcnQucHVzaCAmJiA8QmVsbCBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0gLz59CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVBhdXNlfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IDQsIGJvcmRlclJhZGl1czogNCwgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnbm9uZScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2FsZXJ0LnN0YXR1cyA9PT0gJ3BhdXNlZCcgPyAnUmVzdW1lIGFsZXJ0JyA6ICdQYXVzZSBhbGVydCd9CiAgICAgICAgICA+CiAgICAgICAgICAgIHthbGVydC5zdGF0dXMgPT09ICdwYXVzZWQnCiAgICAgICAgICAgICAgPyA8QmVsbCBzaXplPXsxM30gLz4KICAgICAgICAgICAgICA6IDxCZWxsT2ZmIHNpemU9ezEzfSAvPgogICAgICAgICAgICB9CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IDQsIGJvcmRlclJhZGl1czogNCwgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnbm9uZScsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjUpJyB9fQogICAgICAgICAgICBhcmlhLWxhYmVsPSJSZW1vdmUgYWxlcnQiCiAgICAgICAgICA+CiAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MTN9IC8+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICB7LyogVGFyZ2V0ICovfQogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2Jhc2VsaW5lJywgZ2FwOiA4LCBtYXJnaW5Cb3R0b206IDggfX0+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTgsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IGNmZy5jb2xvciB9fT4KICAgICAgICAgIHtpc1BlcmNlbnQgPyBmb3JtYXRDaGFuZ2UoYWxlcnQudGFyZ2V0KSA6IGZvcm1hdFByaWNlKGFsZXJ0LnRhcmdldCl9CiAgICAgICAgPC9zcGFuPgogICAgICAgIHtjdXJyZW50UHJpY2UgIT09IHVuZGVmaW5lZCAmJiAhaXNQZXJjZW50ICYmICgKICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIG5vdyB7Zm9ybWF0UHJpY2UoY3VycmVudFByaWNlKX0KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICApfQogICAgICAgIHtjdXJyZW50Q2hhbmdlICE9PSB1bmRlZmluZWQgJiYgaXNQZXJjZW50ICYmICgKICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIG5vdyB7Zm9ybWF0Q2hhbmdlKGN1cnJlbnRDaGFuZ2UpfQogICAgICAgICAgPC9zcGFuPgogICAgICAgICl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIFByb2dyZXNzIGJhciAqL30KICAgICAge3Byb2dyZXNzICE9PSBudWxsICYmIGFsZXJ0LnN0YXR1cyA9PT0gJ2FjdGl2ZScgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiA4IH19PgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6IDQsIGJvcmRlclJhZGl1czogJzUwdncnLCBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICA8ZGl2CiAgICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScsIGJvcmRlclJhZGl1czogJzUwdncnLCB0cmFuc2l0aW9uOiAnYWxsIDAuNXMnLCB3aWR0aDogKHByb2dyZXNzLnBjdCAqIDEwMCkudG9GaXhlZCgxKSArICclJywgYmFja2dyb3VuZDogY2ZnLmNvbG9yLCB3aWxsQ2hhbmdlOiAnd2lkdGgnIH19CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgbWFyZ2luVG9wOiAyLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgeyhwcm9ncmVzcy5wY3QgKiAxMDApLnRvRml4ZWQoMSkgKyAnJSB0b3dhcmQgdGFyZ2V0J30KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICApfQoKICAgICAgey8qIFRyaWdnZXJlZCBpbmZvICovfQogICAgICB7YWxlcnQuc3RhdHVzID09PSAndHJpZ2dlcmVkJyAmJiBhbGVydC50cmlnZ2VyZWRQcmljZSAhPT0gdW5kZWZpbmVkICYmICgKICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgbWFyZ2luVG9wOiA0IH19PgogICAgICAgICAgPENoZWNrQ2lyY2xlMiBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6IGNmZy5jb2xvciB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAgeydUcmlnZ2VyZWQgYXQgJyArIGZvcm1hdFByaWNlKGFsZXJ0LnRyaWdnZXJlZFByaWNlKSArICcgwrcgJyArIG5ldyBEYXRlKGFsZXJ0LnRyaWdnZXJlZEF0ISkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogTm90ZSAqL30KICAgICAge2FsZXJ0Lm5vdGUgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIG1hcmdpblRvcDogNCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICB7YWxlcnQubm90ZX0KICAgICAgICA8L2Rpdj4KICAgICAgKX0KICAgIDwvZGl2PgogICk7Cn0pOwpBbGVydENhcmQuZGlzcGxheU5hbWUgPSAnQWxlcnRDYXJkJzsKCi8vIOKUgOKUgOKUgCBMb2cgRW50cnkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBMb2dFbnRyeSA9IG1lbW8oKHsgZW50cnkgfTogeyBlbnRyeTogVHJpZ2dlcmVkTG9nIH0pID0+IHsKICBjb25zdCBjZmcgPSBBTEVSVF9UWVBFX0NPTkZJR1tlbnRyeS50eXBlXTsKICByZXR1cm4gKAogICAgPGRpdgogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBwYWRkaW5nVG9wOiA4LCBwYWRkaW5nQm90dG9tOiA4LCBib3JkZXJDb2xvcjogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknIH19CiAgICA+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA4IH19PgogICAgICAgIHtlbnRyeS5pbWFnZSAmJiA8aW1nIHNyYz17ZW50cnkuaW1hZ2V9IGFsdD0iIiBzdHlsZT17eyB3aWR0aDogMTYsIGhlaWdodDogMTYsIGJvcmRlclJhZGl1czogJzUwJScgfX0gLz59CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTEsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgIHtlbnRyeS5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCwgYm9yZGVyUmFkaXVzOiA0LCBwYWRkaW5nOiAnMnB4IDZweCcsIGJhY2tncm91bmQ6IGNmZy5iZyB9fQogICAgICAgID4KICAgICAgICAgIDxjZmcuaWNvbiBzaXplPXs5fSBzdHlsZT17eyBjb2xvcjogY2ZnLmNvbG9yIH19IC8+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogOSwgZm9udEZhbWlseTogRk9OVF9NT05PLCBjb2xvcjogY2ZnLmNvbG9yIH19PntjZmcubGFiZWx9PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMSwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgIHtmb3JtYXRQcmljZShlbnRyeS50cmlnZ2VyZWRQcmljZSl9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiA5LCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgIHtuZXcgRGF0ZShlbnRyeS50cmlnZ2VyZWRBdCkudG9Mb2NhbGVTdHJpbmcoKX0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKTG9nRW50cnkuZGlzcGxheU5hbWUgPSAnTG9nRW50cnknOwoKLy8g4pSA4pSA4pSAIFRvYXN0IE5vdGlmaWNhdGlvbiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmludGVyZmFjZSBUb2FzdEl0ZW0gewogIGlkOiBzdHJpbmc7CiAgc3ltYm9sOiBzdHJpbmc7CiAgdHlwZTogQWxlcnRUeXBlOwogIHByaWNlOiBudW1iZXI7CiAgdGFyZ2V0OiBudW1iZXI7CiAgdHM6IG51bWJlcjsKfQoKY29uc3QgQWxlcnRUb2FzdCA9IG1lbW8oKHsgdG9hc3QsIG9uRGlzbWlzcyB9OiB7IHRvYXN0OiBUb2FzdEl0ZW07IG9uRGlzbWlzczogKGlkOiBzdHJpbmcpID0+IHZvaWQgfSkgPT4gewogIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW3RvYXN0LnR5cGVdOwogIGNvbnN0IGlzUGVyY2VudCA9IHRvYXN0LnR5cGUgPT09ICdjaGFuZ2VfdXAnIHx8IHRvYXN0LnR5cGUgPT09ICdjaGFuZ2VfZG93bic7CgogIGNvbnN0IGRpc21pc3MgPSB1c2VDYWxsYmFjaygoKSA9PiBvbkRpc21pc3ModG9hc3QuaWQpLCBbdG9hc3QuaWQsIG9uRGlzbWlzc10pOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDEyLCBwYWRkaW5nOiAnMTJweCAxNnB4JywgYm9yZGVyUmFkaXVzOiAxMiwgYmFja2dyb3VuZDogJ3JnYmEoOCw4LDI0LDAuOTcpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBjZmcuYm9yZGVyLCBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoMjBweCknLCB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJywgbWluV2lkdGg6IDI4MCB9fQogICAgPgogICAgICA8ZGl2CiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogMzIsIGhlaWdodDogMzIsIGJvcmRlclJhZGl1czogOCwgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBmbGV4U2hyaW5rOiAwLCBiYWNrZ3JvdW5kOiBjZmcuYmcsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgY2ZnLmJvcmRlciB9fQogICAgICA+CiAgICAgICAgPGNmZy5pY29uIHNpemU9ezE0fSBzdHlsZT17eyBjb2xvcjogY2ZnLmNvbG9yIH19IC8+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDEgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMiwgZm9udFdlaWdodDogNzAwLCBjb2xvcjogY2ZnLmNvbG9yIH19PgogICAgICAgICAge2NmZy5sYWJlbH0g4oCUIHt0b2FzdC5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICB7aXNQZXJjZW50CiAgICAgICAgICAgID8gZm9ybWF0Q2hhbmdlKHRvYXN0LnByaWNlKSArICcgKHRhcmdldCAnICsgZm9ybWF0Q2hhbmdlKHRvYXN0LnRhcmdldCkgKyAnKScKICAgICAgICAgICAgOiBmb3JtYXRQcmljZSh0b2FzdC5wcmljZSkgKyAnICh0YXJnZXQgJyArIGZvcm1hdFByaWNlKHRvYXN0LnRhcmdldCkgKyAnKSd9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8YnV0dG9uIG9uQ2xpY2s9e2Rpc21pc3N9IHR5cGU9ImJ1dHRvbiIgYXJpYS1sYWJlbD0iRGlzbWlzcyBub3RpZmljYXRpb24iIHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgIDxYIHNpemU9ezEzfSAvPgogICAgICA8L2J1dHRvbj4KICAgIDwvZGl2PgogICk7Cn0pOwpBbGVydFRvYXN0LmRpc3BsYXlOYW1lID0gJ0FsZXJ0VG9hc3QnOwoKLy8g4pSA4pSA4pSAIE1haW4gUGFnZSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IEFsZXJ0cyA9IG1lbW8oKCkgPT4gewogIGNvbnN0IHsgYXNzZXRzLCB3c1N0YXR1cyB9ID0gdXNlQ3J5cHRvKCk7CiAgY29uc3QgeyBpc01vYmlsZSwgaXNUYWJsZXQgfSA9IHVzZUJyZWFrcG9pbnQoKTsKICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IHVzZVJlZHVjZXIocmVkdWNlciwgSU5JVElBTF9TVEFURSk7CiAgY29uc3QgW3Nob3dGb3JtLCBzZXRTaG93Rm9ybV0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3RhYiwgc2V0VGFiXSA9IHVzZVN0YXRlPCdhbGVydHMnIHwgJ2hpc3RvcnknPignYWxlcnRzJyk7CiAgY29uc3QgW2ZpbHRlclN0YXR1cywgc2V0RmlsdGVyU3RhdHVzXSA9IHVzZVN0YXRlPCdhbGwnIHwgQWxlcnRTdGF0dXM+KCdhbGwnKTsKICBjb25zdCBbc2hvd0xvZ0FsbCwgc2V0U2hvd0xvZ0FsbF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3RvYXN0cywgc2V0VG9hc3RzXSA9IHVzZVN0YXRlPFRvYXN0SXRlbVtdPihbXSk7CiAgY29uc3QgW3B1c2hQZXJtaXNzaW9uLCBzZXRQdXNoUGVybWlzc2lvbl0gPSB1c2VTdGF0ZTxOb3RpZmljYXRpb25QZXJtaXNzaW9uPignZGVmYXVsdCcpOwogIGNvbnN0IGlkQ291bnRlclJlZiA9IHVzZVJlZigwKTsKICBjb25zdCBtb3VudGVkUmVmID0gdXNlUmVmKHRydWUpOwoKICAvLyBMb2FkIGZyb20gbG9jYWxTdG9yYWdlIG9uIG1vdW50CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7CiAgICBjb25zdCBzYXZlZCA9IGxvYWRGcm9tTFMoKTsKICAgIGlmIChzYXZlZCkgZGlzcGF0Y2goeyB0eXBlOiAnTE9BRCcsIHN0YXRlOiBzYXZlZCB9KTsKICAgIGlmICgnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cpIHNldFB1c2hQZXJtaXNzaW9uKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uKTsKICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlOyB9OwogIH0sIFtdKTsKCiAgLy8gU2F2ZSB0byBsb2NhbFN0b3JhZ2Ugb24gc3RhdGUgY2hhbmdlCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHNhdmVUb0xTKHN0YXRlKTsKICB9LCBbc3RhdGVdKTsKCiAgLy8gQnVpbGQgYXNzZXQgbG9va3VwIG1hcAogIGNvbnN0IGFzc2V0TWFwID0gdXNlTWVtbygoKSA9PiB7CiAgICBjb25zdCBtID0gbmV3IE1hcDxzdHJpbmcsIENyeXB0b0Fzc2V0PigpOwogICAgZm9yIChjb25zdCBhIG9mIGFzc2V0cykgewogICAgICBtLnNldChhLnN5bWJvbC50b0xvd2VyQ2FzZSgpLCBhKTsKICAgIH0KICAgIHJldHVybiBtOwogIH0sIFthc3NldHNdKTsKCiAgLy8gRGlzbWlzcyB0b2FzdAogIGNvbnN0IGRpc21pc3NUb2FzdCA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7CiAgICBzZXRUb2FzdHMocHJldiA9PiBwcmV2LmZpbHRlcih0ID0+IHQuaWQgIT09IGlkKSk7CiAgfSwgW10pOwoKICAvLyBDaGVjayBhbGVydHMgYWdhaW5zdCBsaXZlIHByaWNlcwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoYXNzZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgZm9yIChjb25zdCBhbGVydCBvZiBzdGF0ZS5hbGVydHMpIHsKICAgICAgaWYgKGFsZXJ0LnN0YXR1cyAhPT0gJ2FjdGl2ZScpIGNvbnRpbnVlOwogICAgICBjb25zdCBhc3NldCA9IGFzc2V0TWFwLmdldChhbGVydC5zeW1ib2wudG9Mb3dlckNhc2UoKSk7CiAgICAgIGlmICghYXNzZXQpIGNvbnRpbnVlOwogICAgICBpZiAoIWNoZWNrQWxlcnQoYWxlcnQsIGFzc2V0KSkgY29udGludWU7CgogICAgICAvLyBGaXJlIQogICAgICBjb25zdCBwcmljZSA9IGFsZXJ0LnR5cGUgPT09ICdjaGFuZ2VfdXAnIHx8IGFsZXJ0LnR5cGUgPT09ICdjaGFuZ2VfZG93bicKICAgICAgICA/IGFzc2V0LmNoYW5nZTI0aAogICAgICAgIDogYXNzZXQucHJpY2U7CgogICAgICBjb25zdCBsb2dFbnRyeTogVHJpZ2dlcmVkTG9nID0gewogICAgICAgIGlkOiBnZW5JZCgrK2lkQ291bnRlclJlZi5jdXJyZW50KSwKICAgICAgICBhbGVydElkOiBhbGVydC5pZCwKICAgICAgICBzeW1ib2w6IGFsZXJ0LnN5bWJvbCwKICAgICAgICBuYW1lOiBhbGVydC5uYW1lLAogICAgICAgIGltYWdlOiBhbGVydC5pbWFnZSwKICAgICAgICB0eXBlOiBhbGVydC50eXBlLAogICAgICAgIHRhcmdldDogYWxlcnQudGFyZ2V0LAogICAgICAgIHRyaWdnZXJlZFByaWNlOiBwcmljZSwKICAgICAgICB0cmlnZ2VyZWRBdDogRGF0ZS5ub3coKSwKICAgICAgfTsKCiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1RSSUdHRVInLCBpZDogYWxlcnQuaWQsIHByaWNlLCBsb2dFbnRyeSB9KTsKCiAgICAgIGlmIChhbGVydC5zb3VuZCAmJiBzdGF0ZS5zb3VuZEVuYWJsZWQpIHBsYXlBbGVydFNvdW5kKGFsZXJ0LnR5cGUpOwogICAgICBpZiAoYWxlcnQucHVzaCAmJiBzdGF0ZS5wdXNoRW5hYmxlZCkgc2VuZFB1c2hOb3RpZmljYXRpb24oYWxlcnQsIHByaWNlKTsKCiAgICAgIC8vIFNob3cgdG9hc3QKICAgICAgY29uc3QgdG9hc3Q6IFRvYXN0SXRlbSA9IHsKICAgICAgICBpZDogbG9nRW50cnkuaWQsCiAgICAgICAgc3ltYm9sOiBhbGVydC5zeW1ib2wsCiAgICAgICAgdHlwZTogYWxlcnQudHlwZSwKICAgICAgICBwcmljZSwKICAgICAgICB0YXJnZXQ6IGFsZXJ0LnRhcmdldCwKICAgICAgICB0czogRGF0ZS5ub3coKSwKICAgICAgfTsKICAgICAgc2V0VG9hc3RzKHByZXYgPT4gW3RvYXN0LCAuLi5wcmV2XS5zbGljZSgwLCA1KSk7CiAgICB9CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCiAgfSwgW2Fzc2V0c10pOwoKICAvLyBBdXRvLWRpc21pc3MgdG9hc3RzIGFmdGVyIDZzCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICh0b2FzdHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICBjb25zdCBuZXdlc3QgPSB0b2FzdHNbMF07CiAgICBjb25zdCByZW1haW5pbmcgPSA2MDAwIC0gKERhdGUubm93KCkgLSBuZXdlc3QudHMpOwogICAgY29uc3QgdCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICBpZiAobW91bnRlZFJlZi5jdXJyZW50KSBzZXRUb2FzdHMocHJldiA9PiBwcmV2LnNsaWNlKDAsIC0xKSk7CiAgICB9LCBNYXRoLm1heChyZW1haW5pbmcsIDEwMDApKTsKICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodCk7CiAgfSwgW3RvYXN0c10pOwoKICBjb25zdCBoYW5kbGVBZGQgPSB1c2VDYWxsYmFjaygoYWxlcnQ6IFByaWNlQWxlcnQpID0+IHsKICAgIGRpc3BhdGNoKHsgdHlwZTogJ0FERCcsIGFsZXJ0IH0pOwogIH0sIFtdKTsKCiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHsKICAgIGRpc3BhdGNoKHsgdHlwZTogJ1JFTU9WRScsIGlkIH0pOwogIH0sIFtdKTsKCiAgY29uc3QgaGFuZGxlVG9nZ2xlUGF1c2UgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4gewogICAgZGlzcGF0Y2goeyB0eXBlOiAnVE9HR0xFX1BBVVNFJywgaWQgfSk7CiAgfSwgW10pOwoKICBjb25zdCBoYW5kbGVUb2dnbGVTb3VuZCA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgIGRpc3BhdGNoKHsgdHlwZTogJ1RPR0dMRV9TT1VORCcgfSk7CiAgfSwgW10pOwoKICBjb25zdCBoYW5kbGVUb2dnbGVQdXNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgaWYgKCEoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSkgcmV0dXJuOwogICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVmYXVsdCcpIHsKICAgICAgY29uc3QgcGVybSA9IGF3YWl0IE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpOwogICAgICBzZXRQdXNoUGVybWlzc2lvbihwZXJtKTsKICAgICAgaWYgKHBlcm0gPT09ICdncmFudGVkJykgZGlzcGF0Y2goeyB0eXBlOiAnVE9HR0xFX1BVU0gnIH0pOwogICAgfSBlbHNlIHsKICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVE9HR0xFX1BVU0gnIH0pOwogICAgfQogIH0sIFtdKTsKCiAgLy8gRmlsdGVyZWQgYWxlcnRzCiAgY29uc3QgZmlsdGVyZWRBbGVydHMgPSB1c2VNZW1vKCgpID0+IHsKICAgIHJldHVybiBzdGF0ZS5hbGVydHMuZmlsdGVyKGEgPT4KICAgICAgZmlsdGVyU3RhdHVzID09PSAnYWxsJyA/IHRydWUgOiBhLnN0YXR1cyA9PT0gZmlsdGVyU3RhdHVzCiAgICApOwogIH0sIFtzdGF0ZS5hbGVydHMsIGZpbHRlclN0YXR1c10pOwoKICBjb25zdCBhY3RpdmVDb3VudCA9IHVzZU1lbW8oKCkgPT4gc3RhdGUuYWxlcnRzLmZpbHRlcihhID0+IGEuc3RhdHVzID09PSAnYWN0aXZlJykubGVuZ3RoLCBbc3RhdGUuYWxlcnRzXSk7CiAgY29uc3QgdHJpZ2dlcmVkQ291bnQgPSB1c2VNZW1vKCgpID0+IHN0YXRlLmFsZXJ0cy5maWx0ZXIoYSA9PiBhLnN0YXR1cyA9PT0gJ3RyaWdnZXJlZCcpLmxlbmd0aCwgW3N0YXRlLmFsZXJ0c10pOwoKICBjb25zdCBsb2dUb1Nob3cgPSBzaG93TG9nQWxsID8gc3RhdGUubG9nIDogc3RhdGUubG9nLnNsaWNlKDAsIDIwKTsKCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgZ2FwOiAyMCB9fT4KICAgICAgey8qIFRvYXN0IENvbnRhaW5lciAqL30KICAgICAgPGRpdgogICAgICAgICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdmaXhlZCcsIHRvcDogMTYsIHJpZ2h0OiAxNiwgekluZGV4OiAzMDAsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGdhcDogOCwgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScgfX0KICAgICAgPgogICAgICAgIHt0b2FzdHMubWFwKHQgPT4gKAogICAgICAgICAgPEFsZXJ0VG9hc3Qga2V5PXt0LmlkfSB0b2FzdD17dH0gb25EaXNtaXNzPXtkaXNtaXNzVG9hc3R9IC8+CiAgICAgICAgKSl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIEhlYWRlciAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nIH19PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAxMiB9fT4KICAgICAgICAgIDxoMSBzdHlsZT17eyBmb250U2l6ZTogMjAsIGZvbnRXZWlnaHQ6IDcwMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBtYXJnaW46IDAsIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHZhcigtLXptLWFjY2VudCkgMCUsIHZhcigtLXptLXZpb2xldCkgMTAwJSknLCBXZWJraXRCYWNrZ3JvdW5kQ2xpcDogJ3RleHQnLCBXZWJraXRUZXh0RmlsbENvbG9yOiAndHJhbnNwYXJlbnQnLCBiYWNrZ3JvdW5kQ2xpcDogJ3RleHQnIH19PkFsZXJ0cyBDZW50ZXI8L2gxPgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDYsIHBhZGRpbmc6ICcycHggOHB4JywgYm9yZGVyUmFkaXVzOiA0LCBiYWNrZ3JvdW5kOiAncmdiYSg1MiwyMTEsMTUzLDAuMDgpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoNTIsMjExLDE1MywwLjIpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICA8V3NTdGF0dXNEb3Qgc3RhdHVzPXt3c1N0YXR1c30gLz4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDAuOSknIH19PgogICAgICAgICAgICAgIHt3c1N0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcgPyAnTElWRSDCtyBQcmljZXMgcmVhbHRpbWUnIDogd3NTdGF0dXMudG9VcHBlckNhc2UoKX0KICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBHbG9iYWwgQ29udHJvbHMgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZVNvdW5kfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17c3RhdGUuc291bmRFbmFibGVkfQogICAgICAgICAgICBhcmlhLWxhYmVsPXtzdGF0ZS5zb3VuZEVuYWJsZWQgPyAnTXV0ZSBhbGVydCBzb3VuZHMnIDogJ1VubXV0ZSBhbGVydCBzb3VuZHMnfQogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDYsIHBhZGRpbmc6ICc2cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRyYW5zaXRpb246ICdhbGwgMC4xNXMnLCBiYWNrZ3JvdW5kOiBzdGF0ZS5zb3VuZEVuYWJsZWQgPyAncmdiYSg5NiwxNjUsMjUwLDAuMTApJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoc3RhdGUuc291bmRFbmFibGVkID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjIyKScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA4KScpLCBjb2xvcjogc3RhdGUuc291bmRFbmFibGVkID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIHtzdGF0ZS5zb3VuZEVuYWJsZWQgPyA8Vm9sdW1lMiBzaXplPXsxMn0gLz4gOiA8Vm9sdW1lWCBzaXplPXsxMn0gLz59CiAgICAgICAgICAgIFNvdW5kCiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlUHVzaH0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3N0YXRlLnB1c2hFbmFibGVkfQogICAgICAgICAgICBhcmlhLWxhYmVsPXtzdGF0ZS5wdXNoRW5hYmxlZCA/ICdEaXNhYmxlIHB1c2ggbm90aWZpY2F0aW9ucycgOiAnRW5hYmxlIHB1c2ggbm90aWZpY2F0aW9ucyd9CiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgcGFkZGluZzogJzZweCAxMnB4JywgYm9yZGVyUmFkaXVzOiA4LCBmb250U2l6ZTogMTEsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGJhY2tncm91bmQ6IHN0YXRlLnB1c2hFbmFibGVkID8gJ3JnYmEoMTY3LDEzOSwyNTAsMC4xMCknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNCknLCBib3JkZXI6ICcxcHggc29saWQgJyArIChzdGF0ZS5wdXNoRW5hYmxlZCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMjIpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDgpJyksIGNvbG9yOiBzdGF0ZS5wdXNoRW5hYmxlZCA/ICdyZ2JhKDE2NywxMzksMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgICAgdGl0bGU9e3B1c2hQZXJtaXNzaW9uID09PSAnZGVuaWVkJyA/ICdQdXNoIG5vdGlmaWNhdGlvbnMgYmxvY2tlZCBieSBicm93c2VyJyA6ICcnfQogICAgICAgICAgPgogICAgICAgICAgICB7c3RhdGUucHVzaEVuYWJsZWQgPyA8QmVsbCBzaXplPXsxMn0gLz4gOiA8QmVsbE9mZiBzaXplPXsxMn0gLz59CiAgICAgICAgICAgIFB1c2gge3B1c2hQZXJtaXNzaW9uID09PSAnZGVuaWVkJyAmJiAnKGJsb2NrZWQpJ30KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Rm9ybSh0cnVlKX0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBkaXNhYmxlZD17c3RhdGUuYWxlcnRzLmxlbmd0aCA+PSBNQVhfQUxFUlRTfQogICAgICAgICAgICBhcmlhLWxhYmVsPSJDcmVhdGUgbmV3IHByaWNlIGFsZXJ0IgogICAgICAgICAgICBhcmlhLWRpc2FibGVkPXtzdGF0ZS5hbGVydHMubGVuZ3RoID49IE1BWF9BTEVSVFN9CiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgcGFkZGluZzogJzZweCAxNnB4JywgYm9yZGVyUmFkaXVzOiA4LCBmb250U2l6ZTogMTEsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFdlaWdodDogNjAwLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC4xNiknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMzApJywgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknLCBvcGFjaXR5OiBzdGF0ZS5hbGVydHMubGVuZ3RoID49IE1BWF9BTEVSVFMgPyAwLjUgOiAxIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIDxQbHVzIHNpemU9ezEzfSAvPgogICAgICAgICAgICBOZXcgQWxlcnQKICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBTdGF0cyBSb3cgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiBpc01vYmlsZSA/ICdyZXBlYXQoMiwxZnIpJyA6ICdyZXBlYXQoNCwxZnIpJywgZ2FwOiAxMiB9fT4KICAgICAgICB7WwogICAgICAgICAgeyBsYWJlbDogJ1RvdGFsIEFsZXJ0cycsIHZhbHVlOiBTdHJpbmcoc3RhdGUuYWxlcnRzLmxlbmd0aCksIGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDEpJywgaWNvbjogQmVsbCB9LAogICAgICAgICAgeyBsYWJlbDogJ0FjdGl2ZScsIHZhbHVlOiBTdHJpbmcoYWN0aXZlQ291bnQpLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywxKScsIGljb246IEFjdGl2aXR5IH0sCiAgICAgICAgICB7IGxhYmVsOiAnVHJpZ2dlcmVkJywgdmFsdWU6IFN0cmluZyh0cmlnZ2VyZWRDb3VudCksIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJywgaWNvbjogWmFwIH0sCiAgICAgICAgICB7IGxhYmVsOiAnSGlzdG9yeScsIHZhbHVlOiBTdHJpbmcoc3RhdGUubG9nLmxlbmd0aCksIGNvbG9yOiAncmdiYSgxNjcsMTM5LDI1MCwxKScsIGljb246IEhpc3RvcnkgfSwKICAgICAgICBdLm1hcChzID0+ICgKICAgICAgICAgIDxkaXYga2V5PXtzLmxhYmVsfSBzdHlsZT17eyBwYWRkaW5nOiAxNiwgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIG1hcmdpbkJvdHRvbTogNCB9fT4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjFlbScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgICAge3MubGFiZWx9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgIDxzLmljb24gc2l6ZT17MTN9IHN0eWxlPXt7IGNvbG9yOiBzLmNvbG9yIH19IC8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDI0LCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBzLmNvbG9yIH19PgogICAgICAgICAgICAgIHtzLnZhbHVlfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICkpfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBUYWJzICovfQogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICB7KFsnYWxlcnRzJywgJ2hpc3RvcnknXSBhcyBjb25zdCkubWFwKHQgPT4gKAogICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICBrZXk9e3R9CiAgICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgICAgcm9sZT0idGFiIgogICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXt0YWIgPT09IHR9CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e3QgPT09ICdhbGVydHMnID8gJ015IEFsZXJ0cyB0YWInIDogJ1RyaWdnZXIgSGlzdG9yeSB0YWInfQogICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRUYWIodCl9CiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6ICc2cHggMTZweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRXZWlnaHQ6IDYwMCwgdGV4dFRyYW5zZm9ybTogJ2NhcGl0YWxpemUnLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6IHRhYiA9PT0gdCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMiknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXI6ICcxcHggc29saWQgJyArICh0YWIgPT09IHQgPyAncmdiYSg5NiwxNjUsMjUwLDAuMjUpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyksIGNvbG9yOiB0YWIgPT09IHQgPyAncmdiYSg5NiwxNjUsMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAge3QgPT09ICdhbGVydHMnID8gJ015IEFsZXJ0cycgOiAnVHJpZ2dlciBIaXN0b3J5J30KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICkpfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBBbGVydHMgVGFiICovfQogICAgICB7dGFiID09PSAnYWxlcnRzJyAmJiAoCiAgICAgICAgPGRpdj4KICAgICAgICAgIHsvKiBGaWx0ZXIgKi99CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCwgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgICAgeyhbJ2FsbCcsICdhY3RpdmUnLCAndHJpZ2dlcmVkJywgJ3BhdXNlZCddIGFzIGNvbnN0KS5tYXAoZiA9PiAoCiAgICAgICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICAgICAga2V5PXtmfQogICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0RmlsdGVyU3RhdHVzKGYpfQogICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtmaWx0ZXJTdGF0dXMgPT09IGZ9CiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnRmlsdGVyIGJ5ICcgKyBmICsgJyBhbGVydHMnfQogICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogJzRweCAxMHB4JywgYm9yZGVyUmFkaXVzOiA0LCBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ2NhcGl0YWxpemUnLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6IGZpbHRlclN0YXR1cyA9PT0gZiA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknIDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoZmlsdGVyU3RhdHVzID09PSBmID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjIyKScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScpLCBjb2xvcjogZmlsdGVyU3RhdHVzID09PSBmID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAge2Z9CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAge2ZpbHRlcmVkQWxlcnRzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiA0OCwgdGV4dEFsaWduOiAnY2VudGVyJywgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgICAgIDxCZWxsIHNpemU9ezMyfSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luOicwIGF1dG8nLCBtYXJnaW5Cb3R0b206MTIsIGRpc3BsYXk6J2Jsb2NrJyB9fSAvPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTQsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAgICAgIHtzdGF0ZS5hbGVydHMubGVuZ3RoID09PSAwCiAgICAgICAgICAgICAgICAgID8gJ0JlbHVtIGFkYSBhbGVydC4gS2xpayAiTmV3IEFsZXJ0IiBidWF0IG11bGFpIScKICAgICAgICAgICAgICAgICAgOiAnVGlkYWsgYWRhIGFsZXJ0IGRlbmdhbiBmaWx0ZXIgaW5pLid9CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKSA6ICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGlzTW9iaWxlID8gJzFmcicgOiBpc1RhYmxldCA/ICdyZXBlYXQoMiwxZnIpJyA6ICdyZXBlYXQoMywxZnIpJywgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICB7ZmlsdGVyZWRBbGVydHMubWFwKGFsZXJ0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gYXNzZXRNYXAuZ2V0KGFsZXJ0LnN5bWJvbC50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxBbGVydENhcmQKICAgICAgICAgICAgICAgICAgICBrZXk9e2FsZXJ0LmlkfQogICAgICAgICAgICAgICAgICAgIGFsZXJ0PXthbGVydH0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2U9e2Fzc2V0Py5wcmljZX0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2hhbmdlPXthc3NldD8uY2hhbmdlMjRofQogICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlPXtoYW5kbGVSZW1vdmV9CiAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGVQYXVzZT17aGFuZGxlVG9nZ2xlUGF1c2V9CiAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogSGlzdG9yeSBUYWIgKi99CiAgICAgIHt0YWIgPT09ICdoaXN0b3J5JyAmJiAoCiAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAxNiwgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Cb3R0b206IDEyIH19PgogICAgICAgICAgICA8aDIgc3R5bGU9e3sgZm9udFNpemU6IDEyLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLCBsZXR0ZXJTcGFjaW5nOiAnMC4xZW0nLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICBUcmlnZ2VyIEhpc3RvcnkgKHtzdGF0ZS5sb2cubGVuZ3RofSkKICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAge3N0YXRlLmxvZy5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9MT0cnIH0pfQogICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0iQ2xlYXIgdHJpZ2dlciBoaXN0b3J5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDQsIHRyYW5zaXRpb246ICdjb2xvciAwLjE1cycsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjYpJyB9fQogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MTF9IC8+IENsZWFyIEFsbAogICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICApfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAge3N0YXRlLmxvZy5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAnY2VudGVyJywgcGFkZGluZ1RvcDogNDAsIHBhZGRpbmdCb3R0b206IDQwIH19PgogICAgICAgICAgICAgIDxIaXN0b3J5IHNpemU9ezI4fSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luOicwIGF1dG8nLCBtYXJnaW5Cb3R0b206OCwgZGlzcGxheTonYmxvY2snIH19IC8+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMiwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgICAgICAgICAgQmVsdW0gYWRhIGFsZXJ0IHlhbmcgdHJpZ2dlcmVkLgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICkgOiAoCiAgICAgICAgICAgIDw+CiAgICAgICAgICAgICAge2xvZ1RvU2hvdy5tYXAoZW50cnkgPT4gKAogICAgICAgICAgICAgICAgPExvZ0VudHJ5IGtleT17ZW50cnkuaWR9IGVudHJ5PXtlbnRyeX0gLz4KICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICB7c3RhdGUubG9nLmxlbmd0aCA+IDIwICYmICgKICAgICAgICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93TG9nQWxsKHMgPT4gIXMpfQogICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtzaG93TG9nQWxsID8gJ1Nob3cgZmV3ZXIgbG9nIGVudHJpZXMnIDogJ1Nob3cgYWxsIGxvZyBlbnRyaWVzJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA0LCBtYXJnaW5Ub3A6IDEyLCBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICB7c2hvd0xvZ0FsbCA/IDxDaGV2cm9uVXAgc2l6ZT17MTF9IC8+IDogPENoZXZyb25Eb3duIHNpemU9ezExfSAvPn0KICAgICAgICAgICAgICAgICAge3Nob3dMb2dBbGwgPyAnU2VtYnVueWlrYW4nIDogJ0xpaGF0IHNlbXVhICcgKyBzdGF0ZS5sb2cubGVuZ3RoICsgJyBlbnRyaSd9CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICApfQogICAgICAgICAgICA8Lz4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogQWRkIEFsZXJ0IE1vZGFsICovfQogICAgICB7c2hvd0Zvcm0gJiYgKAogICAgICAgIDxBZGRBbGVydEZvcm0KICAgICAgICAgIGFzc2V0cz17YXNzZXRzfQogICAgICAgICAgb25BZGQ9e2hhbmRsZUFkZH0KICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dGb3JtKGZhbHNlKX0KICAgICAgICAgIGlkQ291bnRlcj17KytpZENvdW50ZXJSZWYuY3VycmVudH0KICAgICAgICAvPgogICAgICApfQogICAgPC9kaXY+CiAgKTsKfSk7CkFsZXJ0cy5kaXNwbGF5TmFtZSA9ICdBbGVydHMnOwoKZXhwb3J0IGRlZmF1bHQgQWxlcnRzOwo=";
const C5 = "LyoqCiAqIENvbnZlcnRlci50c3gg4oCUIFpFUsOYIE1FUklESUFOIHB1c2gyNAogKiBwdXNoMjQ6IDExMiBjbGFzc05hbWUg4oaSIDAsIDEwMCUgaW5saW5lIHN0eWxlCiAqIC0gTXVsdGktY3VycmVuY3kgY29udmVydGVyICsgRENBIGNhbGN1bGF0b3IgKyBQb3NpdGlvbiBTaXplcgogKiAtIExpdmUgcHJpY2VzIHZpYSBDcnlwdG9Db250ZXh0IChXUy1mZWQsIHplcm8gZXh0cmEgZmV0Y2gpCiAqIC0gUHVyZSBTVkcgY2hhcnRzLCB6ZXJvIHJlY2hhcnRzCiAqIC0gUmVhY3QubWVtbyArIGRpc3BsYXlOYW1lIOKckwogKiAtIHVzZVJlZHVjZXIgc3RhdGUsIHVzZUNhbGxiYWNrICsgdXNlTWVtbyDinJMKICogLSBPYmplY3QuZnJlZXplKCkgYWxsIHN0YXRpYyBkYXRhIOKckwogKiAtIHJnYmEoKSBvbmx5LCB6ZXJvIGhzbCgpIOKckwogKiAtIFplcm8gdGVtcGxhdGUgbGl0ZXJhbHMgaW4gSlNYIOKckwogKiAtIFplcm8gY2xhc3NOYW1lIGluIHBhZ2VzIOKckwogKiAtIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm0gb24gYW5pbWF0ZWQgZWxlbWVudHMg4pyTCiAqLwoKaW1wb3J0IHsKICBtZW1vLCB1c2VSZWR1Y2VyLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0LAp9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlQ3J5cHRvIH0gZnJvbSAnQC9jb250ZXh0cy9DcnlwdG9Db250ZXh0JzsKaW1wb3J0IHsgZm9ybWF0UHJpY2UsIGZvcm1hdENvbXBhY3QsIGZvcm1hdENoYW5nZSB9IGZyb20gJ0AvbGliL2Zvcm1hdHRlcnMnOwppbXBvcnQgdHlwZSB7IENyeXB0b0Fzc2V0IH0gZnJvbSAnQC9saWIvZm9ybWF0dGVycyc7CmltcG9ydCB7CiAgQXJyb3dMZWZ0UmlnaHQsIENhbGN1bGF0b3IsIFRyZW5kaW5nVXAsIERvbGxhclNpZ24sCiAgQ2hldnJvbkRvd24sIFJlZnJlc2hDdywgVGFyZ2V0LCBMb2FkZXIyLAp9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CgovLyDilIDilIDilIAgQ29uc3RhbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgRklBVF9DVVJSRU5DSUVTID0gT2JqZWN0LmZyZWV6ZShbCiAgeyBjb2RlOiAnVVNEJywgc3ltYm9sOiAnJCcsICByYXRlOiAxIH0sCiAgeyBjb2RlOiAnSURSJywgc3ltYm9sOiAnUnAnLCByYXRlOiAxNjI1MCB9LAogIHsgY29kZTogJ0VVUicsIHN5bWJvbDogJ+KCrCcsICByYXRlOiAwLjkyIH0sCiAgeyBjb2RlOiAnR0JQJywgc3ltYm9sOiAnwqMnLCAgcmF0ZTogMC43OSB9LAogIHsgY29kZTogJ0pQWScsIHN5bWJvbDogJ8KlJywgIHJhdGU6IDE0OS41IH0sCiAgeyBjb2RlOiAnU0dEJywgc3ltYm9sOiAnUyQnLCByYXRlOiAxLjM0IH0sCiAgeyBjb2RlOiAnTVlSJywgc3ltYm9sOiAnUk0nLCByYXRlOiA0LjcxIH0sCiAgeyBjb2RlOiAnQVVEJywgc3ltYm9sOiAnQSQnLCByYXRlOiAxLjUzIH0sCl0gYXMgY29uc3QpOwoKY29uc3QgRENBX0lOVEVSVkFMUyA9IE9iamVjdC5mcmVlemUoWwogIHsgbGFiZWw6ICdEYWlseScsICAgZGF5czogMSAgfSwKICB7IGxhYmVsOiAnV2Vla2x5JywgIGRheXM6IDcgIH0sCiAgeyBsYWJlbDogJ01vbnRobHknLCBkYXlzOiAzMCB9LApdIGFzIGNvbnN0KTsKCmNvbnN0IERDQV9EVVJBVElPTlMgPSBPYmplY3QuZnJlZXplKFsKICB7IGxhYmVsOiAnMyBCdWxhbicsIG1vbnRoczogMyAgfSwKICB7IGxhYmVsOiAnNiBCdWxhbicsIG1vbnRoczogNiAgfSwKICB7IGxhYmVsOiAnMSBUYWh1bicsIG1vbnRoczogMTIgfSwKICB7IGxhYmVsOiAnMiBUYWh1bicsIG1vbnRoczogMjQgfSwKXSBhcyBjb25zdCk7Cgpjb25zdCBUQUJTID0gT2JqZWN0LmZyZWV6ZShbJ0NvbnZlcnRlcicsICdEQ0EgS2Fsa3VsYXRvcicsICdQb3NpdGlvbiBTaXplciddIGFzIGNvbnN0KTsKdHlwZSBUYWIgPSB0eXBlb2YgVEFCU1tudW1iZXJdOwoKLy8g4pSA4pSA4pSAIFNoYXJlZCBzdHlsZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBJTlBVVF9CQVNFID0gT2JqZWN0LmZyZWV6ZSh7CiAgd2lkdGg6ICAgICAgICAnMTAwJScsCiAgcGFkZGluZzogICAgICAnOHB4IDEycHgnLAogIGJvcmRlclJhZGl1czogJzhweCcsCiAgZm9udFNpemU6ICAgICAnMTNweCcsCiAgZm9udEZhbWlseTogRk9OVF9NT05PLAogIG91dGxpbmU6ICAgICAgJ25vbmUnLAogIGJhY2tncm91bmQ6ICAgJ3ZhcigtLXptLWdsYXNzLWJnKScsCiAgYm9yZGVyOiAgICAgICAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknLAogIGNvbG9yOiAgICAgICAgJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknLAogIGJveFNpemluZzogICAgJ2JvcmRlci1ib3gnIGFzIGNvbnN0LAp9KTsKCmNvbnN0IExBQkVMX1NUWUxFID0gT2JqZWN0LmZyZWV6ZSh7CiAgZm9udEZhbWlseTogRk9OVF9NT05PLAogIGZvbnRTaXplOiAgICAgJzEwcHgnLAogIG1hcmdpbkJvdHRvbTogJzVweCcsCiAgY29sb3I6ICAgICAgICAndmFyKC0tem0tdGV4dC1mYWludCknLAogIGxldHRlclNwYWNpbmc6JzAuMDRlbScsCiAgZGlzcGxheTogICAgICAnYmxvY2snLAp9KTsKCmNvbnN0IENBUkRfU1RZTEUgPSBPYmplY3QuZnJlZXplKHsKICBiYWNrZ3JvdW5kOiAgICd2YXIoLS16bS1nbGFzcy1iZyknLAogIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywKICBib3JkZXJSYWRpdXM6ICcxMnB4JywKICBwYWRkaW5nOiAgICAgICcyMHB4JywKfSk7CgovLyDilIDilIDilIAgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQ29udmVydGVyU3RhdGUgewogIGZyb21Db2luOiAgICAgICAgICAgc3RyaW5nOwogIHRvQ29pbjogICAgICAgICAgICAgc3RyaW5nOwogIGZyb21BbW91bnQ6ICAgICAgICAgc3RyaW5nOwogIGZpYXRDb2RlOiAgICAgICAgICAgc3RyaW5nOwogIGRjYUNvaW46ICAgICAgICAgICAgc3RyaW5nOwogIGRjYUFtb3VudDogICAgICAgICAgc3RyaW5nOwogIGRjYUludGVydmFsRGF5czogICAgbnVtYmVyOwogIGRjYUR1cmF0aW9uTW9udGhzOiAgbnVtYmVyOwogIGRjYUN1cnJlbnRQcmljZTogICAgYm9vbGVhbjsKICBkY2FFbnRyeVByaWNlOiAgICAgIHN0cmluZzsKICBwb3NDb2luOiAgICAgICAgICAgIHN0cmluZzsKICBwb3NBY2NvdW50U2l6ZTogICAgIHN0cmluZzsKICBwb3NSaXNrUGN0OiAgICAgICAgIHN0cmluZzsKICBwb3NFbnRyeVByaWNlOiAgICAgIHN0cmluZzsKICBwb3NTdG9wTG9zczogICAgICAgIHN0cmluZzsKfQoKdHlwZSBDb252ZXJ0ZXJBY3Rpb24gPQogIHwgeyB0eXBlOiAnU0VUJzsga2V5OiBrZXlvZiBDb252ZXJ0ZXJTdGF0ZTsgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfTsKCi8vIOKUgOKUgOKUgCBSZWR1Y2VyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgSU5JVElBTDogQ29udmVydGVyU3RhdGUgPSBPYmplY3QuZnJlZXplKHsKICBmcm9tQ29pbjogICAgICAgICAgICdiaXRjb2luJywKICB0b0NvaW46ICAgICAgICAgICAgICdldGhlcmV1bScsCiAgZnJvbUFtb3VudDogICAgICAgICAnMScsCiAgZmlhdENvZGU6ICAgICAgICAgICAnVVNEJywKICBkY2FDb2luOiAgICAgICAgICAgICdiaXRjb2luJywKICBkY2FBbW91bnQ6ICAgICAgICAgICcxMDAnLAogIGRjYUludGVydmFsRGF5czogICAgNywKICBkY2FEdXJhdGlvbk1vbnRoczogIDEyLAogIGRjYUN1cnJlbnRQcmljZTogICAgdHJ1ZSwKICBkY2FFbnRyeVByaWNlOiAgICAgICcnLAogIHBvc0NvaW46ICAgICAgICAgICAgJ2JpdGNvaW4nLAogIHBvc0FjY291bnRTaXplOiAgICAgJzEwMDAwJywKICBwb3NSaXNrUGN0OiAgICAgICAgICcyJywKICBwb3NFbnRyeVByaWNlOiAgICAgICcnLAogIHBvc1N0b3BMb3NzOiAgICAgICAgJycsCn0gYXMgQ29udmVydGVyU3RhdGUpOwoKZnVuY3Rpb24gcmVkdWNlcihzdGF0ZTogQ29udmVydGVyU3RhdGUsIGFjdGlvbjogQ29udmVydGVyQWN0aW9uKTogQ29udmVydGVyU3RhdGUgewogIHJldHVybiB7IC4uLnN0YXRlLCBbYWN0aW9uLmtleV06IGFjdGlvbi52YWx1ZSB9Owp9CgovLyDilIDilIDilIAgSGVscGVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmZ1bmN0aW9uIGZtdEZpYXQodmFsOiBudW1iZXIsIGNvZGU6IHN0cmluZywgc3ltYm9sOiBzdHJpbmcpOiBzdHJpbmcgewogIGlmICghaXNGaW5pdGUodmFsKSkgcmV0dXJuICfigJQnOwogIGlmIChjb2RlID09PSAnSURSJykgcmV0dXJuIHN5bWJvbCArIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnaWQtSUQnKS5mb3JtYXQoTWF0aC5yb3VuZCh2YWwpKTsKICBpZiAoY29kZSA9PT0gJ0pQWScpIHJldHVybiBzeW1ib2wgKyBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2phLUpQJykuZm9ybWF0KE1hdGgucm91bmQodmFsKSk7CiAgcmV0dXJuIHN5bWJvbCArIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tVVMnLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiwgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pLmZvcm1hdCh2YWwpOwp9CgpmdW5jdGlvbiBnZXRGaWF0UmF0ZShjb2RlOiBzdHJpbmcpOiBudW1iZXIgewogIHJldHVybiBGSUFUX0NVUlJFTkNJRVMuZmluZChmID0+IGYuY29kZSA9PT0gY29kZSk/LnJhdGUgPz8gMTsKfQoKLy8g4pSA4pSA4pSAIENvaW4gU2VsZWN0b3Ig4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQ29pblNlbGVjdG9yUHJvcHMgewogIGFzc2V0czogICBDcnlwdG9Bc3NldFtdOwogIHZhbHVlOiAgICBzdHJpbmc7CiAgb25DaGFuZ2U6IChpZDogc3RyaW5nKSA9PiB2b2lkOwogIGxhYmVsOiAgICBzdHJpbmc7Cn0KCmNvbnN0IENvaW5TZWxlY3RvciA9IG1lbW8oKHsgYXNzZXRzLCB2YWx1ZSwgb25DaGFuZ2UsIGxhYmVsIH06IENvaW5TZWxlY3RvclByb3BzKSA9PiB7CiAgY29uc3QgW29wZW4sIHNldE9wZW5dICA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbcSwgc2V0UV0gICAgICAgID0gdXNlU3RhdGUoJycpOwogIGNvbnN0IHJlZiAgICAgICAgICAgICAgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpOwogIGNvbnN0IHNlbGVjdGVkICAgICAgICAgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5maW5kKGEgPT4gYS5pZCA9PT0gdmFsdWUpLCBbYXNzZXRzLCB2YWx1ZV0pOwoKICBjb25zdCBmaWx0ZXJlZCA9IHVzZU1lbW8oKCkgPT4gewogICAgaWYgKCFxKSByZXR1cm4gYXNzZXRzLnNsaWNlKDAsIDMwKTsKICAgIGNvbnN0IGxvd2VyID0gcS50b0xvd2VyQ2FzZSgpOwogICAgcmV0dXJuIGFzc2V0cy5maWx0ZXIoYSA9PiBhLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcikgfHwgYS5zeW1ib2wudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcikpLnNsaWNlKDAsIDMwKTsKICB9LCBbYXNzZXRzLCBxXSk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoIW9wZW4pIHJldHVybjsKICAgIGNvbnN0IGhhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4gewogICAgICBpZiAocmVmLmN1cnJlbnQgJiYgIXJlZi5jdXJyZW50LmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSBzZXRPcGVuKGZhbHNlKTsKICAgIH07CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVyKTsKICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVyKTsKICB9LCBbb3Blbl0pOwoKICByZXR1cm4gKAogICAgPGRpdiByZWY9e3JlZn0gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0+CiAgICAgIDxsYWJlbCBzdHlsZT17TEFCRUxfU1RZTEV9PntsYWJlbH08L2xhYmVsPgogICAgICA8YnV0dG9uCiAgICAgICAgb25DbGljaz17KCkgPT4gc2V0T3BlbihvID0+ICFvKX0KICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbCArICcg4oCUICcgKyAoc2VsZWN0ZWQ/Lm5hbWUgPz8gJ3NlbGVjdCBjb2luJyl9CiAgICAgICAgYXJpYS1leHBhbmRlZD17b3Blbn0KICAgICAgICBzdHlsZT17ewogICAgICAgICAgd2lkdGg6ICAgICAgICAgICcxMDAlJywKICAgICAgICAgIGRpc3BsYXk6ICAgICAgICAnZmxleCcsCiAgICAgICAgICBhbGlnbkl0ZW1zOiAgICAgJ2NlbnRlcicsCiAgICAgICAgICBnYXA6ICAgICAgICAgICAgJzhweCcsCiAgICAgICAgICBwYWRkaW5nOiAgICAgICAgJzhweCAxMnB4JywKICAgICAgICAgIGJvcmRlclJhZGl1czogICAnMTBweCcsCiAgICAgICAgICB0ZXh0QWxpZ246ICAgICAgJ2xlZnQnLAogICAgICAgICAgY3Vyc29yOiAgICAgICAgICdwb2ludGVyJywKICAgICAgICAgIGJhY2tncm91bmQ6ICAgICAndmFyKC0tem0tZ2xhc3MtYmcpJywKICAgICAgICAgIGJvcmRlcjogICAgICAgICAnMXB4IHNvbGlkICcgKyAob3BlbiA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4zNSknIDogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknKSwKICAgICAgICAgIGNvbG9yOiAgICAgICAgICAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScsCiAgICAgICAgICB0cmFuc2l0aW9uOiAgICAgJ2JvcmRlci1jb2xvciAwLjE1cycsCiAgICAgICAgICB3aWxsQ2hhbmdlOiAgICAgJ3RyYW5zZm9ybScsCiAgICAgICAgfX0KICAgICAgPgogICAgICAgIHtzZWxlY3RlZD8uaW1hZ2UgJiYgKAogICAgICAgICAgPGltZyBzcmM9e3NlbGVjdGVkLmltYWdlfSBhbHQ9IiIgc3R5bGU9e3sgd2lkdGg6IDIwLCBoZWlnaHQ6IDIwLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBmbGV4U2hyaW5rOiAwIH19IC8+CiAgICAgICAgKX0KICAgICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDEsIG1pbldpZHRoOiAwIH19PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsIHdoaXRlU3BhY2U6ICdub3dyYXAnIH19PgogICAgICAgICAgICB7c2VsZWN0ZWQ/Lm5hbWUgPz8gJ+KAlCd9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAge3NlbGVjdGVkID8gZm9ybWF0UHJpY2Uoc2VsZWN0ZWQucHJpY2UpIDogJyd9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8Q2hldnJvbkRvd24gc2l6ZT17MTN9IHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknLCBmbGV4U2hyaW5rOiAwLCB0cmFuc2Zvcm06IG9wZW4gPyAncm90YXRlKDE4MGRlZyknIDogJ25vbmUnLCB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMTVzJyB9fSAvPgogICAgICA8L2J1dHRvbj4KCiAgICAgIHtvcGVuICYmICgKICAgICAgICA8ZGl2IHN0eWxlPXt7CiAgICAgICAgICBwb3NpdGlvbjogICAgICdhYnNvbHV0ZScsCiAgICAgICAgICBsZWZ0OiAgICAgICAgIDAsCiAgICAgICAgICByaWdodDogICAgICAgIDAsCiAgICAgICAgICB0b3A6ICAgICAgICAgICcxMDAlJywKICAgICAgICAgIG1hcmdpblRvcDogICAgJzRweCcsCiAgICAgICAgICB6SW5kZXg6ICAgICAgIDUwLAogICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgIG92ZXJmbG93OiAgICAgJ2hpZGRlbicsCiAgICAgICAgICBiYWNrZ3JvdW5kOiAgICd2YXIoLS16bS1iZy1iYXNlKScsCiAgICAgICAgICBib3JkZXI6ICAgICAgICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMTUpJywKICAgICAgICAgIGJveFNoYWRvdzogICAgJzAgOHB4IDMycHggcmdiYSgwLDAsMCwwLjUpJywKICAgICAgICAgIG1heEhlaWdodDogICAgJzI4MHB4JywKICAgICAgICB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogJzhweCcsIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCByZ2JhKDk2LDE2NSwyNTAsMC4wNyknIH19PgogICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICBhdXRvRm9jdXMKICAgICAgICAgICAgICB2YWx1ZT17cX0KICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRRKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iQ2FyaSBjb2luLi4uIgogICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICB3aWR0aDogICAgICAgICcxMDAlJywKICAgICAgICAgICAgICAgIHBhZGRpbmc6ICAgICAgJzZweCA4cHgnLAogICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgICAgICAgIGZvbnRTaXplOiAgICAgJzEycHgnLAogICAgICAgICAgICAgICAgZm9udEZhbWlseTogRk9OVF9NT05PLAogICAgICAgICAgICAgICAgb3V0bGluZTogICAgICAnbm9uZScsCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAgICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJywKICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCByZ2JhKDk2LDE2NSwyNTAsMC4xNSknLAogICAgICAgICAgICAgICAgY29sb3I6ICAgICAgICAncmdiYSgyMjYsMjMyLDI0MCwwLjkpJywKICAgICAgICAgICAgICAgIGJveFNpemluZzogICAgJ2JvcmRlci1ib3gnLAogICAgICAgICAgICAgIH19CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgb3ZlcmZsb3dZOiAnYXV0bycsIG1heEhlaWdodDogJzIyMHB4JyB9fT4KICAgICAgICAgICAge2ZpbHRlcmVkLm1hcChhID0+ICgKICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICBrZXk9e2EuaWR9CiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IG9uQ2hhbmdlKGEuaWQpOyBzZXRPcGVuKGZhbHNlKTsgc2V0USgnJyk7IH19CiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnU2VsZWN0ICcgKyBhLm5hbWV9CiAgICAgICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXthLmlkID09PSB2YWx1ZX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgIHdpZHRoOiAgICAgICAnMTAwJScsCiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICAgICAnZmxleCcsCiAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgZ2FwOiAgICAgICAgICc4cHgnLAogICAgICAgICAgICAgICAgICBwYWRkaW5nOiAgICAgJzhweCAxMnB4JywKICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAgICdsZWZ0JywKICAgICAgICAgICAgICAgICAgY3Vyc29yOiAgICAgICdwb2ludGVyJywKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIGEuaWQgPT09IHZhbHVlID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjA4KScgOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgICBib3JkZXI6ICAgICAgJ25vbmUnLAogICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAgJ2JhY2tncm91bmQgMC4xcycsCiAgICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICAndHJhbnNmb3JtJywKICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e2UgPT4geyBpZiAoYS5pZCAhPT0gdmFsdWUpIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoOTYsMTY1LDI1MCwwLjA1KSc7IH19CiAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoYS5pZCAhPT0gdmFsdWUpIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JzsgfX0KICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICB7YS5pbWFnZSAmJiA8aW1nIHNyYz17YS5pbWFnZX0gYWx0PSIiIHN0eWxlPXt7IHdpZHRoOiAyMCwgaGVpZ2h0OiAyMCwgYm9yZGVyUmFkaXVzOiAnNTAlJywgZmxleFNocmluazogMCB9fSAvPn0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSwgbWluV2lkdGg6IDAgfX0+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAncmdiYSgyMjYsMjMyLDI0MCwwLjkpJyB9fT4KICAgICAgICAgICAgICAgICAgICB7YS5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsIHdoaXRlU3BhY2U6ICdub3dyYXAnIH19PgogICAgICAgICAgICAgICAgICAgIHthLm5hbWV9CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogJ3JpZ2h0JywgZmxleFNocmluazogMCB9fT4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjYpJyB9fT4KICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0UHJpY2UoYS5wcmljZSl9CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CiAgICA8L2Rpdj4KICApOwp9KTsKQ29pblNlbGVjdG9yLmRpc3BsYXlOYW1lID0gJ0NvaW5TZWxlY3Rvcic7CgovLyDilIDilIDilIAgRENBIENoYXJ0IChTVkcpIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKaW50ZXJmYWNlIERDQUNoYXJ0UHJvcHMgeyBpbnZlc3RlZDogbnVtYmVyW107IHZhbHVlOiBudW1iZXJbXTsgfQoKY29uc3QgRENBQ2hhcnQgPSBtZW1vKCh7IGludmVzdGVkLCB2YWx1ZSB9OiBEQ0FDaGFydFByb3BzKSA9PiB7CiAgY29uc3QgVyA9IDUwMDsgY29uc3QgSCA9IDEyMDsKICBjb25zdCBQQUQgPSB7IHQ6IDgsIGI6IDgsIGw6IDQsIHI6IDQgfTsKICBjb25zdCBjVyA9IFcgLSBQQUQubCAtIFBBRC5yOwogIGNvbnN0IGNIID0gSCAtIFBBRC50IC0gUEFELmI7CgogIGNvbnN0IHsgaW52UGF0aCwgdmFsUGF0aCB9ID0gdXNlTWVtbygoKSA9PiB7CiAgICBpZiAoaW52ZXN0ZWQubGVuZ3RoIDwgMikgcmV0dXJuIHsgaW52UGF0aDogJycsIHZhbFBhdGg6ICcnIH07CiAgICBjb25zdCBhbGxWYWxzID0gWy4uLmludmVzdGVkLCAuLi52YWx1ZV07CiAgICBjb25zdCBtaW5WID0gTWF0aC5taW4oLi4uYWxsVmFscyk7CiAgICBjb25zdCBtYXhWID0gTWF0aC5tYXgoLi4uYWxsVmFscywgbWluViArIDEpOwogICAgY29uc3QgcmFuZ2UgPSBtYXhWIC0gbWluVjsKICAgIGNvbnN0IHNjYWxlWCA9IChpOiBudW1iZXIpID0+IFBBRC5sICsgKGkgLyAoaW52ZXN0ZWQubGVuZ3RoIC0gMSkpICogY1c7CiAgICBjb25zdCBzY2FsZVkgPSAodjogbnVtYmVyKSA9PiBQQUQudCArIGNIIC0gKCh2IC0gbWluVikgLyByYW5nZSkgKiBjSDsKICAgIGNvbnN0IGlwID0gJ00nICsgaW52ZXN0ZWQubWFwKCh2LCBpKSA9PiBzY2FsZVgoaSkudG9GaXhlZCgxKSArICcsJyArIHNjYWxlWSh2KS50b0ZpeGVkKDEpKS5qb2luKCdMJyk7CiAgICBjb25zdCB2cCA9ICdNJyArIHZhbHVlLm1hcCgodiwgaSkgPT4gc2NhbGVYKGkpLnRvRml4ZWQoMSkgKyAnLCcgKyBzY2FsZVkodikudG9GaXhlZCgxKSkuam9pbignTCcpOwogICAgcmV0dXJuIHsgaW52UGF0aDogaXAsIHZhbFBhdGg6IHZwIH07CiAgfSwgW2ludmVzdGVkLCB2YWx1ZSwgY1csIGNIXSk7CgogIGlmICghaW52UGF0aCkgcmV0dXJuIG51bGw7CgogIHJldHVybiAoCiAgICA8c3ZnIHdpZHRoPSIxMDAlIiB2aWV3Qm94PXsnMCAwICcgKyBXICsgJyAnICsgSH0gcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9e3sgZGlzcGxheTogJ2Jsb2NrJywgaGVpZ2h0OiBIIH19PgogICAgICA8cGF0aCBkPXtpbnZQYXRofSBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoOTYsMTY1LDI1MCwwLjUpIiBzdHJva2VXaWR0aD0iMS41IiBzdHJva2VEYXNoYXJyYXk9IjQgMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiIC8+CiAgICAgIDxwYXRoIGQ9e3ZhbFBhdGh9IGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg1MiwyMTEsMTUzLDEpIiBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiIHN0cm9rZUxpbmVqb2luPSJyb3VuZCIgLz4KICAgIDwvc3ZnPgogICk7Cn0pOwpEQ0FDaGFydC5kaXNwbGF5TmFtZSA9ICdEQ0FDaGFydCc7CgovLyDilIDilIDilIAgQ29udmVydGVyIFRhYiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IENvbnZlcnRlclRhYiA9IG1lbW8oKHsgYXNzZXRzLCBzdGF0ZSwgZGlzcGF0Y2ggfTogewogIGFzc2V0czogQ3J5cHRvQXNzZXRbXTsKICBzdGF0ZTogIENvbnZlcnRlclN0YXRlOwogIGRpc3BhdGNoOiBSZWFjdC5EaXNwYXRjaDxDb252ZXJ0ZXJBY3Rpb24+Owp9KSA9PiB7CiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2soKGtleToga2V5b2YgQ29udmVydGVyU3RhdGUsIHZhbHVlOiBzdHJpbmcpID0+IGRpc3BhdGNoKHsgdHlwZTogJ1NFVCcsIGtleSwgdmFsdWUgfSksIFtkaXNwYXRjaF0pOwoKICBjb25zdCBmcm9tQXNzZXQgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5maW5kKGEgPT4gYS5pZCA9PT0gc3RhdGUuZnJvbUNvaW4pLCBbYXNzZXRzLCBzdGF0ZS5mcm9tQ29pbl0pOwogIGNvbnN0IHRvQXNzZXQgICA9IHVzZU1lbW8oKCkgPT4gYXNzZXRzLmZpbmQoYSA9PiBhLmlkID09PSBzdGF0ZS50b0NvaW4pLCAgIFthc3NldHMsIHN0YXRlLnRvQ29pbl0pOwogIGNvbnN0IGZpYXRJbmZvICA9IHVzZU1lbW8oKCkgPT4gRklBVF9DVVJSRU5DSUVTLmZpbmQoZiA9PiBmLmNvZGUgPT09IHN0YXRlLmZpYXRDb2RlKSA/PyBGSUFUX0NVUlJFTkNJRVNbMF0sIFtzdGF0ZS5maWF0Q29kZV0pOwoKICBjb25zdCBmcm9tQW10ICAgID0gcGFyc2VGbG9hdChzdGF0ZS5mcm9tQW1vdW50KSB8fCAwOwogIGNvbnN0IHJlc3VsdENvaW4gPSB1c2VNZW1vKCgpID0+ICghZnJvbUFzc2V0IHx8ICF0b0Fzc2V0IHx8ICFmcm9tQW10KSA/IDAgOiAoZnJvbUFtdCAqIGZyb21Bc3NldC5wcmljZSkgLyB0b0Fzc2V0LnByaWNlLCBbZnJvbUFzc2V0LCB0b0Fzc2V0LCBmcm9tQW10XSk7CiAgY29uc3QgcmVzdWx0RmlhdCA9IHVzZU1lbW8oKCkgPT4gKCFmcm9tQXNzZXQgfHwgIWZyb21BbXQpID8gMCA6IGZyb21BbXQgKiBmcm9tQXNzZXQucHJpY2UgKiBmaWF0SW5mby5yYXRlLCBbZnJvbUFzc2V0LCBmcm9tQW10LCBmaWF0SW5mb10pOwoKICBjb25zdCBoYW5kbGVTd2FwID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUJywga2V5OiAnZnJvbUNvaW4nLCB2YWx1ZTogc3RhdGUudG9Db2luIH0pOwogICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUJywga2V5OiAndG9Db2luJywgdmFsdWU6IHN0YXRlLmZyb21Db2luIH0pOwogIH0sIFtkaXNwYXRjaCwgc3RhdGUuZnJvbUNvaW4sIHN0YXRlLnRvQ29pbl0pOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KICAgICAgey8qIENvaW4g4oaUIENvaW4gKi99CiAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICA8QXJyb3dMZWZ0UmlnaHQgc2l6ZT17MTR9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDAuOCknIH19IC8+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgICAgQ29pbiDihpQgQ29pbiBDb252ZXJ0ZXIKICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzFmciBhdXRvIDFmcicsIGdhcDogJzEycHgnLCBhbGlnbkl0ZW1zOiAnZW5kJyB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgICAgIDxDb2luU2VsZWN0b3IgYXNzZXRzPXthc3NldHN9IHZhbHVlPXtzdGF0ZS5mcm9tQ29pbn0gb25DaGFuZ2U9e3YgPT4gc2V0KCdmcm9tQ29pbicsIHYpfSBsYWJlbD0iRGFyaSIgLz4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT5KdW1sYWg8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dAogICAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIgogICAgICAgICAgICAgICAgdmFsdWU9e3N0YXRlLmZyb21BbW91bnR9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXQoJ2Zyb21BbW91bnQnLCBlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgICAgICBtaW49IjAiCiAgICAgICAgICAgICAgICBzdHlsZT17SU5QVVRfQkFTRX0KICAgICAgICAgICAgICAgIG9uRm9jdXM9e2UgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAncmdiYSg5NiwxNjUsMjUwLDAuMzUpJzsgfX0KICAgICAgICAgICAgICAgIG9uQmx1cj17ZSA9PiB7IGUuY3VycmVudFRhcmdldC5zdHlsZS5ib3JkZXJDb2xvciA9ICd2YXIoLS16bS1nbGFzcy1ib3JkZXIpJzsgfX0KICAgICAgICAgICAgICAvPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU3dhcH0KICAgICAgICAgICAgYXJpYS1sYWJlbD0iU3dhcCBmcm9tIGFuZCB0byBjdXJyZW5jaWVzIgogICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgIGRpc3BsYXk6ICAgICAgJ2ZsZXgnLAogICAgICAgICAgICAgIGFsaWduSXRlbXM6ICAgJ2NlbnRlcicsCiAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6J2NlbnRlcicsCiAgICAgICAgICAgICAgd2lkdGg6ICAgICAgICAnMzZweCcsCiAgICAgICAgICAgICAgaGVpZ2h0OiAgICAgICAnMzZweCcsCiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgICAgICBjdXJzb3I6ICAgICAgICdwb2ludGVyJywKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAgICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknLAogICAgICAgICAgICAgIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCByZ2JhKDk2LDE2NSwyNTAsMC4yMiknLAogICAgICAgICAgICAgIGNvbG9yOiAgICAgICAgJ3JnYmEoOTYsMTY1LDI1MCwxKScsCiAgICAgICAgICAgICAgd2lsbENoYW5nZTogICAndHJhbnNmb3JtJywKICAgICAgICAgICAgfX0KICAgICAgICAgICAgb25Nb3VzZUVudGVyPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAncmdiYSg5NiwxNjUsMjUwLDAuMTgpJzsgfX0KICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAncmdiYSg5NiwxNjUsMjUwLDAuMTApJzsgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPFJlZnJlc2hDdyBzaXplPXsxNH0gLz4KICAgICAgICAgIDwvYnV0dG9uPgoKICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgICAgIDxDb2luU2VsZWN0b3IgYXNzZXRzPXthc3NldHN9IHZhbHVlPXtzdGF0ZS50b0NvaW59IG9uQ2hhbmdlPXt2ID0+IHNldCgndG9Db2luJywgdil9IGxhYmVsPSJLZSIgLz4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAnOHB4IDEycHgnLCBib3JkZXJSYWRpdXM6ICc4cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSg1MiwyMTEsMTUzLDAuMDUpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoNTIsMjExLDE1MywwLjE1KScgfX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTRweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH19PgogICAgICAgICAgICAgICAge3Jlc3VsdENvaW4gPiAwID8gcmVzdWx0Q29pbi50b0ZpeGVkKDgpLnJlcGxhY2UoLy4/MCskLywgJycpIDogJ+KAlCd9CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjQpJywgbWFyZ2luVG9wOiAnMnB4JyB9fT4KICAgICAgICAgICAgICAgIHt0b0Fzc2V0ID8gdG9Bc3NldC5zeW1ib2wudG9VcHBlckNhc2UoKSA6ICfigJQnfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7ZnJvbUFzc2V0ICYmIHRvQXNzZXQgJiYgKAogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhXcmFwOiAnd3JhcCcsIGdhcDogJzE2cHgnLCBwYWRkaW5nVG9wOiAnMTJweCcsIG1hcmdpblRvcDogJzEycHgnLCBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScgfX0+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICAgIHsnMSAnICsgZnJvbUFzc2V0LnN5bWJvbC50b1VwcGVyQ2FzZSgpICsgJyA9ICd9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMXB4JywgZm9udFdlaWdodDogNjAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICAgICAgeyhmcm9tQXNzZXQucHJpY2UgLyB0b0Fzc2V0LnByaWNlKS50b0ZpeGVkKDYpICsgJyAnICsgdG9Bc3NldC5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgICAgICB7JzEgJyArIHRvQXNzZXQuc3ltYm9sLnRvVXBwZXJDYXNlKCkgKyAnID0gJ30KICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzExcHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgICAgICB7KHRvQXNzZXQucHJpY2UgLyBmcm9tQXNzZXQucHJpY2UpLnRvRml4ZWQoNikgKyAnICcgKyBmcm9tQXNzZXQuc3ltYm9sLnRvVXBwZXJDYXNlKCl9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIENvaW4g4oaSIEZpYXQgKi99CiAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICA8RG9sbGFyU2lnbiBzaXplPXsxNH0gc3R5bGU9e3sgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMC44KScgfX0gLz4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgZm9udFdlaWdodDogNjAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICBDb2luIOKGkiBGaWF0CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXY+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT5NYXRhIFVhbmc8L2xhYmVsPgogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcsIGZsZXhXcmFwOiAnd3JhcCcsIG1hcmdpbkJvdHRvbTogJzE2cHgnIH19PgogICAgICAgICAgICB7RklBVF9DVVJSRU5DSUVTLm1hcChmID0+IHsKICAgICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBmLmNvZGUgPT09IHN0YXRlLmZpYXRDb2RlOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICAgIGtleT17Zi5jb2RlfQogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXQoJ2ZpYXRDb2RlJywgZi5jb2RlKX0KICAgICAgICAgICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAgICAgICc1cHggMTBweCcsCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogICAgICcxMXB4JywKICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBGT05UX01PTk8sCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAgICAgICAncG9pbnRlcicsCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogICBhY3RpdmUgPyAncmdiYSg1MiwyMTEsMTUzLDAuMTIpJyA6ICd0cmFuc3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICAgICAgICBhY3RpdmUgPyAncmdiYSg1MiwyMTEsMTUzLDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCAnICsgKGFjdGl2ZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMC4yOCknIDogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknKSwKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAgICdhbGwgMC4xNXMnLAogICAgICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICAgJ3RyYW5zZm9ybScsCiAgICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17ZSA9PiB7IGlmICghYWN0aXZlKSBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS16bS1nbGFzcy1ob3ZlciknOyB9fQogICAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOyB9fQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICB7Zi5jb2RlfQogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSl9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzEycHggMTZweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDUyLDIxMSwxNTMsMC4wNSknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg1MiwyMTEsMTUzLDAuMTIpJyB9fT4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3JnYmEoMTQ4LDE2MywxODQsMC41KScsIG1hcmdpbkJvdHRvbTogJzRweCcgfX0+CiAgICAgICAgICAgICAge2Zyb21BbXQgKyAnICcgKyAoZnJvbUFzc2V0Py5zeW1ib2wudG9VcHBlckNhc2UoKSA/PyAn4oCUJykgKyAnID0nfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMjJweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH19PgogICAgICAgICAgICAgIHtmbXRGaWF0KHJlc3VsdEZpYXQsIHN0YXRlLmZpYXRDb2RlLCBmaWF0SW5mby5zeW1ib2wpfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgfX0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3JnYmEoMTQ4LDE2MywxODQsMC40KScsIG1hcmdpbkJvdHRvbTogJzJweCcgfX0+UmF0ZTwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMXB4JywgY29sb3I6ICdyZ2JhKDE0OCwxNjMsMTg0LDAuNyknIH19PgogICAgICAgICAgICAgIHtmbXRGaWF0KGdldEZpYXRSYXRlKHN0YXRlLmZpYXRDb2RlKSwgc3RhdGUuZmlhdENvZGUsIGZpYXRJbmZvLnN5bWJvbCkgKyAnIC8gVVNEJ30KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIHtmcm9tQXNzZXQgJiYgKAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzExcHgnLCBtYXJnaW5Ub3A6ICcycHgnLCBjb2xvcjogZnJvbUFzc2V0LmNoYW5nZTI0aCA+PSAwID8gJ3JnYmEoNTIsMjExLDE1MywwLjgpJyA6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuOCknIH19PgogICAgICAgICAgICAgICAge2Zvcm1hdENoYW5nZShmcm9tQXNzZXQuY2hhbmdlMjRoKSArICcgMjRoJ30KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpDb252ZXJ0ZXJUYWIuZGlzcGxheU5hbWUgPSAnQ29udmVydGVyVGFiJzsKCi8vIOKUgOKUgOKUgCBEQ0EgVGFiIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgRENBVGFiID0gbWVtbygoeyBhc3NldHMsIHN0YXRlLCBkaXNwYXRjaCB9OiB7CiAgYXNzZXRzOiBDcnlwdG9Bc3NldFtdOwogIHN0YXRlOiAgQ29udmVydGVyU3RhdGU7CiAgZGlzcGF0Y2g6IFJlYWN0LkRpc3BhdGNoPENvbnZlcnRlckFjdGlvbj47Cn0pID0+IHsKICBjb25zdCBzZXQgPSB1c2VDYWxsYmFjaygoa2V5OiBrZXlvZiBDb252ZXJ0ZXJTdGF0ZSwgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pID0+CiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVQnLCBrZXksIHZhbHVlIH0pLCBbZGlzcGF0Y2hdKTsKCiAgY29uc3QgYXNzZXQgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5maW5kKGEgPT4gYS5pZCA9PT0gc3RhdGUuZGNhQ29pbiksIFthc3NldHMsIHN0YXRlLmRjYUNvaW5dKTsKCiAgY29uc3QgZGNhUmVzdWx0ID0gdXNlTWVtbygoKSA9PiB7CiAgICBjb25zdCBhbXRQZXJJbnRlcnZhbCA9IHBhcnNlRmxvYXQoc3RhdGUuZGNhQW1vdW50KSB8fCAwOwogICAgY29uc3QgZW50cnlQcmljZSA9IHN0YXRlLmRjYUN1cnJlbnRQcmljZSA/IChhc3NldD8ucHJpY2UgPz8gMCkgOiAocGFyc2VGbG9hdChzdGF0ZS5kY2FFbnRyeVByaWNlKSB8fCAwKTsKICAgIGlmICghYW10UGVySW50ZXJ2YWwgfHwgIWVudHJ5UHJpY2UpIHJldHVybiBudWxsOwogICAgY29uc3QgdG90YWxEYXlzICAgICAgICA9IHN0YXRlLmRjYUR1cmF0aW9uTW9udGhzICogMzA7CiAgICBjb25zdCBpbnRlcnZhbHMgICAgICAgID0gTWF0aC5mbG9vcih0b3RhbERheXMgLyBzdGF0ZS5kY2FJbnRlcnZhbERheXMpOwogICAgY29uc3QgdG90YWxJbnZlc3RlZCAgICA9IGFtdFBlckludGVydmFsICogaW50ZXJ2YWxzOwogICAgY29uc3QgY29pbnNBY2N1bXVsYXRlZCA9IHRvdGFsSW52ZXN0ZWQgLyBlbnRyeVByaWNlOwogICAgY29uc3QgY3VycmVudFZhbHVlICAgICA9IGNvaW5zQWNjdW11bGF0ZWQgKiAoYXNzZXQ/LnByaWNlID8/IGVudHJ5UHJpY2UpOwogICAgY29uc3QgcG5sICAgICAgICAgICAgICA9IGN1cnJlbnRWYWx1ZSAtIHRvdGFsSW52ZXN0ZWQ7CiAgICBjb25zdCBwbmxQY3QgICAgICAgICAgID0gKHBubCAvIHRvdGFsSW52ZXN0ZWQpICogMTAwOwogICAgY29uc3QgaW52ZXN0ZWRBcnI6IG51bWJlcltdID0gW107CiAgICBjb25zdCB2YWx1ZUFycjogICAgbnVtYmVyW10gPSBbXTsKICAgIGNvbnN0IHN0ZXBzID0gTWF0aC5taW4oaW50ZXJ2YWxzLCA1MCk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzdGVwczsgaSsrKSB7CiAgICAgIGNvbnN0IGZyYWMgID0gaSAvIHN0ZXBzOwogICAgICBjb25zdCBpbnYgICA9IGFtdFBlckludGVydmFsICogKGZyYWMgKiBpbnRlcnZhbHMpOwogICAgICBjb25zdCBjb2lucyA9IGludiAvIGVudHJ5UHJpY2U7CiAgICAgIGludmVzdGVkQXJyLnB1c2goaW52KTsKICAgICAgdmFsdWVBcnIucHVzaChjb2lucyAqIChhc3NldD8ucHJpY2UgPz8gZW50cnlQcmljZSkpOwogICAgfQogICAgcmV0dXJuIHsgdG90YWxJbnZlc3RlZCwgY29pbnNBY2N1bXVsYXRlZCwgY3VycmVudFZhbHVlLCBwbmwsIHBubFBjdCwgaW50ZXJ2YWxzLCBpbnZlc3RlZEFyciwgdmFsdWVBcnIgfTsKICB9LCBbc3RhdGUsIGFzc2V0XSk7CgogIGNvbnN0IGlzUHJvZml0YWJsZSA9IChkY2FSZXN1bHQ/LnBubCA/PyAwKSA+PSAwOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPGRpdiBzdHlsZT17Q0FSRF9TVFlMRX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc4cHgnLCBtYXJnaW5Cb3R0b206ICcxNnB4JyB9fT4KICAgICAgICAgIDxDYWxjdWxhdG9yIHNpemU9ezE0fSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjgpJyB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgIERDQSBLYWxrdWxhdG9yCiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICcxZnIgMWZyJywgZ2FwOiAnMTZweCcgfX0+CiAgICAgICAgICA8Q29pblNlbGVjdG9yIGFzc2V0cz17YXNzZXRzfSB2YWx1ZT17c3RhdGUuZGNhQ29pbn0gb25DaGFuZ2U9e3YgPT4gc2V0KCdkY2FDb2luJywgdil9IGxhYmVsPSJDb2luIiAvPgogICAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXtMQUJFTF9TVFlMRX0+SnVtbGFoIHBlciBJbnRlcnZhbCAoVVNEKTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dAogICAgICAgICAgICAgIHR5cGU9Im51bWJlciIgdmFsdWU9e3N0YXRlLmRjYUFtb3VudH0gb25DaGFuZ2U9e2UgPT4gc2V0KCdkY2FBbW91bnQnLCBlLnRhcmdldC52YWx1ZSl9IG1pbj0iMSIKICAgICAgICAgICAgICBzdHlsZT17SU5QVVRfQkFTRX0KICAgICAgICAgICAgICBvbkZvY3VzPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3JnYmEoOTYsMTY1LDI1MCwwLjM1KSc7IH19CiAgICAgICAgICAgICAgb25CbHVyPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknOyB9fQogICAgICAgICAgICAvPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2PgogICAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT5JbnRlcnZhbCBCZWxpPC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAge0RDQV9JTlRFUlZBTFMubWFwKGludGVydmFsID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZSA9IHN0YXRlLmRjYUludGVydmFsRGF5cyA9PT0gaW50ZXJ2YWwuZGF5czsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxidXR0b24ga2V5PXtpbnRlcnZhbC5sYWJlbH0gb25DbGljaz17KCkgPT4gc2V0KCdkY2FJbnRlcnZhbERheXMnLCBpbnRlcnZhbC5kYXlzKX0gc3R5bGU9e3sKICAgICAgICAgICAgICAgICAgICBmbGV4OiAxLCBwYWRkaW5nOiAnOHB4IDAnLCBib3JkZXJSYWRpdXM6ICc4cHgnLCBmb250U2l6ZTogJzExcHgnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGN1cnNvcjogJ3BvaW50ZXInLAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGFjdGl2ZSA/ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMiknIDogJ3RyYW5zcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBjb2xvcjogICAgICBhY3RpdmUgPyAncmdiYSgyNTEsMTkxLDM2LDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICcxcHggc29saWQgJyArIChhY3RpdmUgPyAncmdiYSgyNTEsMTkxLDM2LDAuMjgpJyA6ICd2YXIoLS16bS1nbGFzcy1ib3JkZXIpJyksCiAgICAgICAgICAgICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsCiAgICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17ZSA9PiB7IGlmICghYWN0aXZlKSBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS16bS1nbGFzcy1ob3ZlciknOyB9fQogICAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOyB9fQogICAgICAgICAgICAgICAgICA+e2ludGVydmFsLmxhYmVsfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT17TEFCRUxfU1RZTEV9PkR1cmFzaTwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICc2cHgnLCBmbGV4V3JhcDogJ3dyYXAnIH19PgogICAgICAgICAgICAgIHtEQ0FfRFVSQVRJT05TLm1hcChkdXIgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gc3RhdGUuZGNhRHVyYXRpb25Nb250aHMgPT09IGR1ci5tb250aHM7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICA8YnV0dG9uIGtleT17ZHVyLmxhYmVsfSBvbkNsaWNrPXsoKSA9PiBzZXQoJ2RjYUR1cmF0aW9uTW9udGhzJywgZHVyLm1vbnRocyl9IHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgICAgZmxleDogMSwgcGFkZGluZzogJzhweCAwJywgYm9yZGVyUmFkaXVzOiAnOHB4JywgZm9udFNpemU6ICcxMXB4JywgZm9udEZhbWlseTogRk9OVF9NT05PLCBjdXJzb3I6ICdwb2ludGVyJywKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBhY3RpdmUgPyAncmdiYSgxNjcsMTM5LDI1MCwwLjEyKScgOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAgICAgIGFjdGl2ZSA/ICdyZ2JhKDE2NywxMzksMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICcxcHggc29saWQgJyArIChhY3RpdmUgPyAncmdiYSgxNjcsMTM5LDI1MCwwLjI4KScgOiAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKScpLAogICAgICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLAogICAgICAgICAgICAgICAgICB9fQogICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tem0tZ2xhc3MtaG92ZXIpJzsgfX0KICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtlID0+IHsgaWYgKCFhY3RpdmUpIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JzsgfX0KICAgICAgICAgICAgICAgICAgPntkdXIubGFiZWx9PC9idXR0b24+CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXtMQUJFTF9TVFlMRX0+SGFyZ2EgRW50cnk8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnOHB4JywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX0+CiAgICAgICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0KCdkY2FDdXJyZW50UHJpY2UnLCAhc3RhdGUuZGNhQ3VycmVudFByaWNlKX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogJzhweCcsIGZvbnRTaXplOiAnMTFweCcsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY3Vyc29yOiAncG9pbnRlcicsIGZsZXhTaHJpbms6IDAsCiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHN0YXRlLmRjYUN1cnJlbnRQcmljZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMC4xMCknIDogJ3RyYW5zcGFyZW50JywKICAgICAgICAgICAgICAgICAgYm9yZGVyOiAgICAgJzFweCBzb2xpZCAnICsgKHN0YXRlLmRjYUN1cnJlbnRQcmljZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMC4yNSknIDogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknKSwKICAgICAgICAgICAgICAgICAgY29sb3I6ICAgICAgc3RhdGUuZGNhQ3VycmVudFByaWNlID8gJ3JnYmEoNTIsMjExLDE1MywxKScgOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJywKICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgPkxpdmUgUHJpY2U8L2J1dHRvbj4KICAgICAgICAgICAgICB7IXN0YXRlLmRjYUN1cnJlbnRQcmljZSAmJiAoCiAgICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIiB2YWx1ZT17c3RhdGUuZGNhRW50cnlQcmljZX0gb25DaGFuZ2U9e2UgPT4gc2V0KCdkY2FFbnRyeVByaWNlJywgZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iQ3VzdG9tLi4uIgogICAgICAgICAgICAgICAgICBzdHlsZT17eyAuLi5JTlBVVF9CQVNFLCBmbGV4OiAxIH19CiAgICAgICAgICAgICAgICAgIG9uRm9jdXM9e2UgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAncmdiYSg5NiwxNjUsMjUwLDAuMzUpJzsgfX0KICAgICAgICAgICAgICAgICAgb25CbHVyPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknOyB9fQogICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICApfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIHtkY2FSZXN1bHQgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICAgIEhhc2lsIFNpbXVsYXNpCiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAncmVwZWF0KDIsIDFmciknLCBnYXA6ICcxMHB4JywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICAgIHtbCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1RvdGFsIERpaW52ZXN0YXNpJywgdmFsdWU6ICckJyArIGRjYVJlc3VsdC50b3RhbEludmVzdGVkLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pLCBjb2xvcjogJ3JnYmEoOTYsMTY1LDI1MCwxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnQ29pbiBEaWt1bXB1bGthbicsIHZhbHVlOiBkY2FSZXN1bHQuY29pbnNBY2N1bXVsYXRlZC50b0ZpeGVkKDYpICsgJyAnICsgKGFzc2V0Py5zeW1ib2wudG9VcHBlckNhc2UoKSA/PyAnJyksIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJyB9LAogICAgICAgICAgICAgIHsgbGFiZWw6ICdOaWxhaSBTZWthcmFuZycsIHZhbHVlOiAnJCcgKyBkY2FSZXN1bHQuY3VycmVudFZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pLCBjb2xvcjogaXNQcm9maXRhYmxlID8gJ3JnYmEoNTIsMjExLDE1MywxKScgOiAncmdiYSgyNTEsMTEzLDEzMywxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnUCZMJywgdmFsdWU6IChkY2FSZXN1bHQucG5sID49IDAgPyAnKycgOiAnJykgKyAnJCcgKyBNYXRoLmFicyhkY2FSZXN1bHQucG5sKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCB9KSArICcgKCcgKyAoZGNhUmVzdWx0LnBubFBjdCA+PSAwID8gJysnIDogJycpICsgZGNhUmVzdWx0LnBubFBjdC50b0ZpeGVkKDEpICsgJyUpJywgY29sb3I6IGlzUHJvZml0YWJsZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMSknIDogJ3JnYmEoMjUxLDExMywxMzMsMSknIH0sCiAgICAgICAgICAgIF0ubWFwKHN0YXQgPT4gKAogICAgICAgICAgICAgIDxkaXYga2V5PXtzdGF0LmxhYmVsfSBzdHlsZT17eyBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzEycHgnLCBiYWNrZ3JvdW5kOiAndmFyKC0tem0tc3VyZmFjZS0xKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJyB9fT4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luQm90dG9tOiAnNHB4JyB9fT57c3RhdC5sYWJlbH08L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEzcHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBzdGF0LmNvbG9yIH19PntzdGF0LnZhbHVlfTwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxNnB4JywgbWFyZ2luQm90dG9tOiAnOHB4JyB9fT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnMjRweCcsIGhlaWdodDogJzJweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC41KScsIGJvcmRlclRvcDogJzJweCBkYXNoZWQgcmdiYSg5NiwxNjUsMjUwLDAuNSknIH19IC8+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjUpJyB9fT5JbnZlc3RlZDwvc3Bhbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnMjRweCcsIGhlaWdodDogJzJweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH19IC8+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjUpJyB9fT5Qb3J0Zm9saW8gVmFsdWU8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlclJhZGl1czogJzEycHgnLCBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICdyZ2JhKDAsMCwwLDAuMiknLCBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScsIHBhZGRpbmc6ICcxMnB4IDhweCA0cHgnIH19PgogICAgICAgICAgICAgIDxEQ0FDaGFydCBpbnZlc3RlZD17ZGNhUmVzdWx0LmludmVzdGVkQXJyfSB2YWx1ZT17ZGNhUmVzdWx0LnZhbHVlQXJyfSAvPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknLCBtYXJnaW5Ub3A6ICcxMHB4JyB9fT4KICAgICAgICAgICAgKiBTaW11bGFzaSBtZW5nZ3VuYWthbiBoYXJnYSBsaXZlIHNhYXQgaW5pIHNlYmFnYWkgcmVmZXJlbnNpLiBCdWthbiBmaW5hbmNpYWwgYWR2aWNlLgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CiAgICA8L2Rpdj4KICApOwp9KTsKRENBVGFiLmRpc3BsYXlOYW1lID0gJ0RDQVRhYic7CgovLyDilIDilIDilIAgUG9zaXRpb24gU2l6ZXIgVGFiIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgUG9zaXRpb25TaXplclRhYiA9IG1lbW8oKHsgYXNzZXRzLCBzdGF0ZSwgZGlzcGF0Y2ggfTogewogIGFzc2V0czogQ3J5cHRvQXNzZXRbXTsKICBzdGF0ZTogIENvbnZlcnRlclN0YXRlOwogIGRpc3BhdGNoOiBSZWFjdC5EaXNwYXRjaDxDb252ZXJ0ZXJBY3Rpb24+Owp9KSA9PiB7CiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2soKGtleToga2V5b2YgQ29udmVydGVyU3RhdGUsIHZhbHVlOiBzdHJpbmcpID0+IGRpc3BhdGNoKHsgdHlwZTogJ1NFVCcsIGtleSwgdmFsdWUgfSksIFtkaXNwYXRjaF0pOwogIGNvbnN0IGFzc2V0ID0gdXNlTWVtbygoKSA9PiBhc3NldHMuZmluZChhID0+IGEuaWQgPT09IHN0YXRlLnBvc0NvaW4pLCBbYXNzZXRzLCBzdGF0ZS5wb3NDb2luXSk7CgogIGNvbnN0IHJlc3VsdCA9IHVzZU1lbW8oKCkgPT4gewogICAgY29uc3QgYWNjb3VudCA9IHBhcnNlRmxvYXQoc3RhdGUucG9zQWNjb3VudFNpemUpIHx8IDA7CiAgICBjb25zdCByaXNrUGN0ID0gcGFyc2VGbG9hdChzdGF0ZS5wb3NSaXNrUGN0KSB8fCAwOwogICAgY29uc3QgZW50cnkgICA9IHBhcnNlRmxvYXQoc3RhdGUucG9zRW50cnlQcmljZSkgfHwgKGFzc2V0Py5wcmljZSA/PyAwKTsKICAgIGNvbnN0IHNsICAgICAgPSBwYXJzZUZsb2F0KHN0YXRlLnBvc1N0b3BMb3NzKSB8fCAwOwogICAgaWYgKCFhY2NvdW50IHx8ICFyaXNrUGN0IHx8ICFlbnRyeSB8fCAhc2wgfHwgc2wgPj0gZW50cnkpIHJldHVybiBudWxsOwogICAgY29uc3Qgcmlza1VzZCAgID0gYWNjb3VudCAqIChyaXNrUGN0IC8gMTAwKTsKICAgIGNvbnN0IHNsUGN0ICAgICA9ICgoZW50cnkgLSBzbCkgLyBlbnRyeSkgKiAxMDA7CiAgICBjb25zdCBwb3NTaXplICAgPSByaXNrVXNkIC8gKGVudHJ5ICogKHNsUGN0IC8gMTAwKSk7CiAgICBjb25zdCBwb3NWYWx1ZSAgPSBwb3NTaXplICogZW50cnk7CiAgICBjb25zdCBsZXZlcmFnZSAgPSBwb3NWYWx1ZSAvIGFjY291bnQ7CiAgICBjb25zdCByclJhdGlvICAgPSAoZW50cnkgKiAxLjAyIC0gZW50cnkpIC8gKGVudHJ5IC0gc2wpOwogICAgcmV0dXJuIHsgcmlza1VzZCwgc2xQY3QsIHBvc1NpemUsIHBvc1ZhbHVlLCBsZXZlcmFnZSwgcnJSYXRpbyB9OwogIH0sIFtzdGF0ZSwgYXNzZXRdKTsKCiAgY29uc3QgRklFTERTID0gdXNlTWVtbygoKSA9PiBPYmplY3QuZnJlZXplKFsKICAgIHsga2V5OiAncG9zQWNjb3VudFNpemUnIGFzIGNvbnN0LCBsYWJlbDogJ1VrdXJhbiBBa3VuIChVU0QpJywgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcxMDAwMCcgfSwKICAgIHsga2V5OiAncG9zUmlza1BjdCcgICAgIGFzIGNvbnN0LCBsYWJlbDogJ1Jpc2sgcGVyIFRyYWRlICglKScsICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnMicgfSwKICAgIHsga2V5OiAncG9zRW50cnlQcmljZScgIGFzIGNvbnN0LCBsYWJlbDogJ0VudHJ5IFByaWNlIOKAlCBrb3NvbmcgPSBsaXZlJywgICBwbGFjZWhvbGRlcjogYXNzZXQgPyBmb3JtYXRQcmljZShhc3NldC5wcmljZSkgOiAnJyB9LAogICAgeyBrZXk6ICdwb3NTdG9wTG9zcycgICAgYXMgY29uc3QsIGxhYmVsOiAnU3RvcCBMb3NzIFByaWNlIChVU0QpJywgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnIH0sCiAgXSksIFthc3NldF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPGRpdiBzdHlsZT17Q0FSRF9TVFlMRX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc4cHgnLCBtYXJnaW5Cb3R0b206ICcxNnB4JyB9fT4KICAgICAgICAgIDxUYXJnZXQgc2l6ZT17MTR9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjgpJyB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgIFBvc2l0aW9uIFNpemVyCiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogJzEwcHgnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHBhZGRpbmc6ICcycHggNnB4JywgYm9yZGVyUmFkaXVzOiAnNHB4JywgbWFyZ2luTGVmdDogJ2F1dG8nLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTEsMTEzLDEzMywwLjEpJywgY29sb3I6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuOCknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgyNTEsMTEzLDEzMywwLjIpJyB9fT4KICAgICAgICAgICAgUmlzayBNYW5hZ2VtZW50CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICcxZnIgMWZyJywgZ2FwOiAnMTZweCcgfX0+CiAgICAgICAgICA8Q29pblNlbGVjdG9yIGFzc2V0cz17YXNzZXRzfSB2YWx1ZT17c3RhdGUucG9zQ29pbn0gb25DaGFuZ2U9e3YgPT4gc2V0KCdwb3NDb2luJywgdil9IGxhYmVsPSJDb2luIiAvPgogICAgICAgICAge0ZJRUxEUy5tYXAoZmllbGQgPT4gKAogICAgICAgICAgICA8ZGl2IGtleT17ZmllbGQua2V5fT4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT57ZmllbGQubGFiZWx9PC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgIHR5cGU9Im51bWJlciIgdmFsdWU9e3N0YXRlW2ZpZWxkLmtleV0gYXMgc3RyaW5nfSBvbkNoYW5nZT17ZSA9PiBzZXQoZmllbGQua2V5LCBlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPXtmaWVsZC5wbGFjZWhvbGRlcn0gbWluPSIwIgogICAgICAgICAgICAgICAgc3R5bGU9e0lOUFVUX0JBU0V9CiAgICAgICAgICAgICAgICBvbkZvY3VzPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3JnYmEoOTYsMTY1LDI1MCwwLjM1KSc7IH19CiAgICAgICAgICAgICAgICBvbkJsdXI9e2UgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKSc7IH19CiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICApKX0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICB7cmVzdWx0ID8gKAogICAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJywgbWFyZ2luQm90dG9tOiAnMTRweCcgfX0+CiAgICAgICAgICAgIEhhc2lsIEthbGt1bGFzaQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ3JlcGVhdCgzLCAxZnIpJywgZ2FwOiAnMTBweCcgfX0+CiAgICAgICAgICAgIHtbCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1Jpc2sgVVNEJywgICAgICAgIHZhbHVlOiAnJCcgKyByZXN1bHQucmlza1VzZC50b0ZpeGVkKDIpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnU0wgRGlzdGFuY2UnLCAgICAgdmFsdWU6IHJlc3VsdC5zbFBjdC50b0ZpeGVkKDIpICsgJyUnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJyB9LAogICAgICAgICAgICAgIHsgbGFiZWw6ICdQb3NpdGlvbiBTaXplJywgICB2YWx1ZTogcmVzdWx0LnBvc1NpemUudG9GaXhlZCg2KSArICcgJyArIChhc3NldD8uc3ltYm9sLnRvVXBwZXJDYXNlKCkgPz8gJycpLCAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1Bvc2l0aW9uIFZhbHVlJywgIHZhbHVlOiAnJCcgKyByZXN1bHQucG9zVmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSksICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMTY3LDEzOSwyNTAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0xldmVyYWdlIFVzZWQnLCAgIHZhbHVlOiByZXN1bHQubGV2ZXJhZ2UudG9GaXhlZCgyKSArICd4JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVzdWx0LmxldmVyYWdlID4gMyA/ICdyZ2JhKDI1MSwxMTMsMTMzLDEpJyA6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1I6UiAoMiUgVFApJywgICAgIHZhbHVlOiAnMTonICsgcmVzdWx0LnJyUmF0aW8udG9GaXhlZCgyKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVzdWx0LnJyUmF0aW8gPj0gMiA/ICdyZ2JhKDUyLDIxMSwxNTMsMSknIDogJ3JnYmEoMjUxLDE5MSwzNiwxKScgfSwKICAgICAgICAgICAgXS5tYXAoc3RhdCA9PiAoCiAgICAgICAgICAgICAgPGRpdiBrZXk9e3N0YXQubGFiZWx9IHN0eWxlPXt7IGJvcmRlclJhZGl1czogJzEycHgnLCBwYWRkaW5nOiAnMTJweCcsIGJhY2tncm91bmQ6ICd2YXIoLS16bS1zdXJmYWNlLTEpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknIH19PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknLCBtYXJnaW5Cb3R0b206ICc0cHgnIH19PntzdGF0LmxhYmVsfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IHN0YXQuY29sb3IgfX0+e3N0YXQudmFsdWV9PC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICB7cmVzdWx0LmxldmVyYWdlID4gNSAmJiAoCiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JywgcGFkZGluZzogJzEwcHggMTJweCcsIGJvcmRlclJhZGl1czogJzhweCcsIG1hcmdpblRvcDogJzEycHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTEsMTEzLDEzMywwLjA3KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1MSwxMTMsMTMzLDAuMTgpJyB9fT4KICAgICAgICAgICAgICA8VHJlbmRpbmdVcCBzaXplPXsxMn0gc3R5bGU9e3sgY29sb3I6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuOCknIH19IC8+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzExcHgnLCBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMC44KScgfX0+CiAgICAgICAgICAgICAgICBMZXZlcmFnZSB0aW5nZ2khIFBlcnRpbWJhbmdrYW4ga2VjaWxrYW4gcG9zaXRpb24gYXRhdSBwZXJsZWJhciBTTC4KICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKX0KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luVG9wOiAnMTBweCcgfX0+CiAgICAgICAgICAgICogQnVrYW4gZmluYW5jaWFsIGFkdmljZS4gU2VsYWx1IGF0dXIgcmlzayBzZXN1YWkgdG9sZXJhbnNpIGthbXUuCiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgKSA6ICgKICAgICAgICA8ZGl2IHN0eWxlPXt7IC4uLkNBUkRfU1RZTEUsIHRleHRBbGlnbjogJ2NlbnRlcicsIHBhZGRpbmc6ICc0MHB4JyB9fT4KICAgICAgICAgIDxUYXJnZXQgc2l6ZT17Mjh9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjIpJywgbWFyZ2luOiAnMCBhdXRvIDhweCcgfX0gLz4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgSXNpIHNlbXVhIGZpZWxkIGRpIGF0YXMgdW50dWsga2Fsa3VsYXNpIHBvc2l0aW9uIHNpemUKICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICApfQogICAgPC9kaXY+CiAgKTsKfSk7ClBvc2l0aW9uU2l6ZXJUYWIuZGlzcGxheU5hbWUgPSAnUG9zaXRpb25TaXplclRhYic7CgovLyDilIDilIDilIAgTWFpbiBQYWdlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgQ29udmVydGVyID0gbWVtbygoKSA9PiB7CiAgY29uc3QgeyBhc3NldHMsIGxvYWRpbmcgfSA9IHVzZUNyeXB0bygpOwogIGNvbnN0IHsgaXNNb2JpbGUgfSA9IHVzZUJyZWFrcG9pbnQoKTsKICBjb25zdCBtb3VudGVkUmVmID0gdXNlUmVmKHRydWUpOwogIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZTxUYWI+KCdDb252ZXJ0ZXInKTsKICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSAgICAgICAgID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBJTklUSUFMKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7CiAgICByZXR1cm4gKCkgPT4geyBtb3VudGVkUmVmLmN1cnJlbnQgPSBmYWxzZTsgfTsKICB9LCBbXSk7CgogIGNvbnN0IGhhbmRsZVRhYiA9IHVzZUNhbGxiYWNrKCh0YWI6IFRhYikgPT4gewogICAgaWYgKCFtb3VudGVkUmVmLmN1cnJlbnQpIHJldHVybjsKICAgIHNldEFjdGl2ZVRhYih0YWIpOwogIH0sIFtdKTsKCiAgaWYgKGxvYWRpbmcgJiYgYXNzZXRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuICgKICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIG1pbkhlaWdodDogJzYwdmgnIH19PgogICAgICAgIDxMb2FkZXIyIHN0eWxlPXt7IGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDEpJywgYW5pbWF0aW9uOiAnc3BpbiAxcyBsaW5lYXIgaW5maW5pdGUnIH19IHNpemU9ezMyfSAvPgogICAgICA8L2Rpdj4KICAgICk7CiAgfQoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KICAgICAgey8qIEhlYWRlciAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxMnB4Jywgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScgfX0+CiAgICAgICAgPGgxIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcyMHB4JywgZm9udFdlaWdodDogNzAwLCBtYXJnaW46IDAsIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDk2LDE2NSwyNTAsMSksIHJnYmEoMTY3LDEzOSwyNTAsMSkpJywgV2Via2l0QmFja2dyb3VuZENsaXA6ICd0ZXh0JywgV2Via2l0VGV4dEZpbGxDb2xvcjogJ3RyYW5zcGFyZW50JywgbGV0dGVyU3BhY2luZzogJzAuMDRlbScgfX0+CiAgICAgICAgICBDb252ZXJ0ZXIgJiBUb29scwogICAgICAgIDwvaDE+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc2cHgnLCBwYWRkaW5nOiAnM3B4IDEwcHgnLCBib3JkZXJSYWRpdXM6ICc2cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSg5NiwxNjUsMjUwLDAuMDYpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE1KScgfX0+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyB3aWR0aDogJzZweCcsIGhlaWdodDogJzZweCcsIGJvcmRlclJhZGl1czogJzUwJScsIGJhY2tncm91bmQ6ICdyZ2JhKDUyLDIxMSwxNTMsMSknLCBib3hTaGFkb3c6ICcwIDAgNXB4IHJnYmEoNTIsMjExLDE1MywxKScsIGZsZXhTaHJpbms6IDAgfX0gLz4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMC44NSknLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNmVtJyB9fT4KICAgICAgICAgICAgTGl2ZSBQcmljZXMKICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICB7LyogVGFicyAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcsIGZsZXhXcmFwOiBpc01vYmlsZSA/ICd3cmFwJyA6ICdub3dyYXAnIH19IHJvbGU9InRhYmxpc3QiIGFyaWEtbGFiZWw9IkNvbnZlcnRlciB0b29scyI+CiAgICAgICAge1RBQlMubWFwKHRhYiA9PiB7CiAgICAgICAgICBjb25zdCBhY3RpdmUgPSBhY3RpdmVUYWIgPT09IHRhYjsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgICBrZXk9e3RhYn0KICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVUYWIodGFiKX0KICAgICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXthY3RpdmV9CiAgICAgICAgICAgICAgcm9sZT0idGFiIgogICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAgICAgICc4cHggMTZweCcsCiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLAogICAgICAgICAgICAgICAgZm9udFNpemU6ICAgICAnMTJweCcsCiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBGT05UX01PTk8sCiAgICAgICAgICAgICAgICBjdXJzb3I6ICAgICAgICdwb2ludGVyJywKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICAgYWN0aXZlID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjEyKScgOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgY29sb3I6ICAgICAgICBhY3RpdmUgPyAncmdiYSg5NiwxNjUsMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgYm9yZGVyOiAgICAgICAnMXB4IHNvbGlkICcgKyAoYWN0aXZlID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjI4KScgOiAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKScpLAogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogICAnYWxsIDAuMTVzJywKICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICAgJ3RyYW5zZm9ybScsCiAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tem0tZ2xhc3MtaG92ZXIpJzsgfX0KICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOyB9fQogICAgICAgICAgICA+CiAgICAgICAgICAgICAge3RhYn0KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICApOwogICAgICAgIH0pfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBDb250ZW50ICovfQogICAgICB7YWN0aXZlVGFiID09PSAnQ29udmVydGVyJyAgICAgICAmJiA8Q29udmVydGVyVGFiICAgICBhc3NldHM9e2Fzc2V0c30gc3RhdGU9e3N0YXRlfSBkaXNwYXRjaD17ZGlzcGF0Y2h9IC8+fQogICAgICB7YWN0aXZlVGFiID09PSAnRENBIEthbGt1bGF0b3InICAmJiA8RENBVGFiICAgICAgICAgICBhc3NldHM9e2Fzc2V0c30gc3RhdGU9e3N0YXRlfSBkaXNwYXRjaD17ZGlzcGF0Y2h9IC8+fQogICAgICB7YWN0aXZlVGFiID09PSAnUG9zaXRpb24gU2l6ZXInICAmJiA8UG9zaXRpb25TaXplclRhYiBhc3NldHM9e2Fzc2V0c30gc3RhdGU9e3N0YXRlfSBkaXNwYXRjaD17ZGlzcGF0Y2h9IC8+fQogICAgPC9kaXY+CiAgKTsKfSk7CkNvbnZlcnRlci5kaXNwbGF5TmFtZSA9ICdDb252ZXJ0ZXInOwoKZXhwb3J0IGRlZmF1bHQgQ29udmVydGVyOwo=";

function delay(ms) { return new Promise(r => setTimeout(r, ms)); }

async function req(method, path, body) {
  return new Promise((resolve, reject) => {
    const data = JSON.stringify(body);
    const options = {
      hostname: "api.github.com",
      path,
      method,
      headers: {
        "Authorization": `Bearer ${TOKEN}`,
        "Content-Type": "application/json",
        "User-Agent": "push102-zeromeridian",
        "Accept": "application/vnd.github.v3+json",
        "Content-Length": Buffer.byteLength(data),
      }
    };
    const r = https.request(options, res => {
      let body = "";
      res.on("data", d => body += d);
      res.on("end", () => resolve({ status: res.statusCode, body: JSON.parse(body || "{}") }));
    });
    r.on("error", reject);
    r.write(data);
    r.end();
  });
}

async function getSHA(fp) {
  return new Promise((resolve) => {
    const options = {
      hostname: "api.github.com",
      path: `/repos/${OWNER}/${REPO}/contents/${fp}`,
      method: "GET",
      headers: {
        "Authorization": `Bearer ${TOKEN}`,
        "User-Agent": "push102-zeromeridian",
        "Accept": "application/vnd.github.v3+json",
      }
    };
    const r = https.request(options, res => {
      let body = "";
      res.on("data", d => body += d);
      res.on("end", () => {
        try {
          const parsed = JSON.parse(body);
          resolve(parsed.sha || null);
        } catch { resolve(null); }
      });
    });
    r.on("error", () => resolve(null));
    r.end();
  });
}

async function push(fp, b64content, msg) {
  for (let a = 1; a <= 3; a++) {
    const sha = await getSHA(fp);
    const body = { message: msg, content: b64content };
    if (sha) body.sha = sha;
    const r = await req("PUT", `/repos/${OWNER}/${REPO}/contents/${fp}`, body);
    if (r.status === 200 || r.status === 201) {
      console.log(`‚úÖ ${fp}`);
      return true;
    }
    if (r.status === 409) {
      console.log(`‚ö†Ô∏è  409 conflict on ${fp}, retry ${a}...`);
      await delay(2500 * a);
      continue;
    }
    console.error(`‚ùå ${fp} ‚Üí HTTP ${r.status}`, JSON.stringify(r.body).slice(0, 200));
    return false;
  }
  return false;
}

console.log("üöÄ push102 ‚Äî ZER√ò MERIDIAN ‚Äî 6 pages upgrade");
console.log("‚îÄ".repeat(50));

await push("src/pages/OrderBook.tsx", C0, "push102: fix standards ‚Äî JetBrains Mono, borderRadius unified ‚Äî OrderBook.tsx");
await delay(500);
await push("src/pages/Portfolio.tsx", C1, "push102: fix standards ‚Äî JetBrains Mono, borderRadius unified ‚Äî Portfolio.tsx");
await delay(500);
await push("src/pages/Derivatives.tsx", C2, "push102: fix standards ‚Äî JetBrains Mono, borderRadius unified ‚Äî Derivatives.tsx");
await delay(500);
await push("src/pages/Intelligence.tsx", C3, "push102: fix standards ‚Äî JetBrains Mono, borderRadius unified ‚Äî Intelligence.tsx");
await delay(500);
await push("src/pages/Alerts.tsx", C4, "push102: fix standards ‚Äî JetBrains Mono, borderRadius unified ‚Äî Alerts.tsx");
await delay(500);
await push("src/pages/Converter.tsx", C5, "push102: fix standards ‚Äî JetBrains Mono, borderRadius unified ‚Äî Converter.tsx");
await delay(500);

console.log("‚îÄ".repeat(50));
console.log("‚úÖ push102 COMPLETE");
