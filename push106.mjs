// push106.mjs — ZERØ MERIDIAN push106
// Intelligence + Alerts + Converter — 18-point checklist LOLOS
// Fixes: page padding, lastUpdated timestamp, error state, row hover
import https from "https";

const OWNER = "wr98-code", REPO = "new-zeromeridian";
const TOKEN = process.env.GH_TOKEN;
if (!TOKEN) { console.error("❌ Set GH_TOKEN dulu!"); process.exit(1); }

const C_Intelligence = "LyoqCiAqIEludGVsbGlnZW5jZS50c3gg4oCUIFpFUsOYIE1FUklESUFOIDIwMjYgcHVzaDg1CiAqIHB1c2g4NTogUkVBTCBEQVRBIOKAlCBOZXdzL1NlbnRpbWVudC9OYXJyYXRpdmVzL0Z1bmRpbmcgbGl2ZSBmZWVkcy4KICogLSBSZWFjdC5tZW1vICsgZGlzcGxheU5hbWUg4pyTCiAqIC0gcmdiYSgpIG9ubHkg4pyTICBaZXJvIGNsYXNzTmFtZSDinJMgIFplcm8gdGVtcGxhdGUgbGl0ZXJhbHMgaW4gSlNYIOKckwogKiAtIHVzZUNhbGxiYWNrICsgdXNlTWVtbyDinJMgIG1vdW50ZWRSZWYgaW4gaG9va3Mg4pyTCiAqIC0gT2JqZWN0LmZyZWV6ZSgpIGFsbCBzdGF0aWMgZGF0YSDinJMKICovCgppbXBvcnQgUmVhY3QsIHsgbWVtbywgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBtb3Rpb24sIEFuaW1hdGVQcmVzZW5jZSB9IGZyb20gJ2ZyYW1lci1tb3Rpb24nOwppbXBvcnQgeyB1c2VDcnlwdG9OZXdzLCB0eXBlIE5ld3NJdGVtLCB0eXBlIE5ld3NGaWx0ZXIgfSBmcm9tICdAL2hvb2tzL3VzZUNyeXB0b05ld3MnOwppbXBvcnQgeyB1c2VTb2NpYWxTZW50aW1lbnQsIHR5cGUgRnVuZGluZ0RhdGEgfSBmcm9tICdAL2hvb2tzL3VzZVNvY2lhbFNlbnRpbWVudCc7CmltcG9ydCB7IHVzZUNyeXB0byB9IGZyb20gJ0AvY29udGV4dHMvQ3J5cHRvQ29udGV4dCc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwoKY29uc3QgQyA9IE9iamVjdC5mcmVlemUoewogIGJnOiAgICAgICAgICAncmdiYSg2LDgsMTQsMSknLAogIGNhcmQ6ICAgICAgICAncmdiYSgxNCwxNywyOCwxKScsCiAgYm9yZGVyOiAgICAgICdyZ2JhKDMyLDQyLDY4LDEpJywKICBhY2NlbnQ6ICAgICAgJ3JnYmEoMCwyMzgsMjU1LDEpJywKICBwb3NpdGl2ZTogICAgJ3JnYmEoMzQsMjU1LDE3MCwxKScsCiAgcG9zRGltOiAgICAgICdyZ2JhKDM0LDI1NSwxNzAsMC4xMiknLAogIG5lZ2F0aXZlOiAgICAncmdiYSgyNTUsNjgsMTM2LDEpJywKICBuZWdEaW06ICAgICAgJ3JnYmEoMjU1LDY4LDEzNiwwLjEyKScsCiAgdGV4dFByaW1hcnk6ICdyZ2JhKDI0MCwyNDAsMjQ4LDEpJywKICB0ZXh0U2VjOiAgICAgJ3JnYmEoMTM4LDEzOCwxNTgsMSknLAogIHZpb2xldDogICAgICAncmdiYSgxNzYsMTMwLDI1NSwxKScsCn0pOwoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CmNvbnN0IEZPTlRfVUkgICA9ICInSmV0QnJhaW5zIE1vbm8nLCBtb25vc3BhY2UiOwoKY29uc3QgVEFCUyA9IE9iamVjdC5mcmVlemUoWydOZXdzIEZlZWQnLCAnTWFya2V0IFNlbnRpbWVudCcsICdOYXJyYXRpdmVzJywgJ0Z1bmRpbmcgJiBPSSddIGFzIGNvbnN0KTsKdHlwZSBUYWIgPSB0eXBlb2YgVEFCU1tudW1iZXJdOwoKY29uc3QgTkVXU19GSUxURVJTID0gT2JqZWN0LmZyZWV6ZShbJ0FMTCcsICdJTVBPUlRBTlQnLCAnQlRDJywgJ0VUSCcsICdBTFRDT0lOJ10gYXMgY29uc3QpOwoKY29uc3QgTkFSUkFUSVZFUyA9IE9iamVjdC5mcmVlemUoWwogIHsgaWQ6ICdkZWZpJywgICBsYWJlbDogJ0RlRmknLCAgICAgICBpY29uOiAn4pqX77iPJywgY29sb3I6ICdyZ2JhKDM0LDI1NSwxNzAsMSknLCAgIGNvbG9yRGltOiAncmdiYSgzNCwyNTUsMTcwLDAuMSknLCAgIGNvaW5zOiBbJ1VOSScsJ0FBVkUnLCdDUlYnLCdNS1InLCdDT01QJywnU05YJywnWUZJJywnTERPJ10sICAgICAgICAgIGtleXdvcmRzOiBbJ2RlZmknLCdsaXF1aWRpdHknLCd5aWVsZCcsJ2FtbScsJ2RleCcsJ2xlbmRpbmcnLCdwcm90b2NvbCcsJ3ZhdWx0Jywnc3Rha2luZyddIH0sCiAgeyBpZDogJ2wyJywgICAgIGxhYmVsOiAnTGF5ZXIgMicsICAgIGljb246ICfimqEnLCBjb2xvcjogJ3JnYmEoMCwyMzgsMjU1LDEpJywgICAgY29sb3JEaW06ICdyZ2JhKDAsMjM4LDI1NSwwLjEpJywgICAgY29pbnM6IFsnTUFUSUMnLCdBUkInLCdPUCcsJ0lNWCcsJ0xSQycsJ01FVElTJywnWksnXSwgICAgICAgICAgICAgICAgIGtleXdvcmRzOiBbJ2xheWVyMicsJ2wyJywncm9sbHVwJywnYXJiaXRydW0nLCdvcHRpbWlzbScsJ3BvbHlnb24nLCd6a3N5bmMnLCdzY2FsaW5nJywnYmFzZSddIH0sCiAgeyBpZDogJ2FpJywgICAgIGxhYmVsOiAnQUkgw5cgQ3J5cHRvJyxpY29uOiAn8J+klicsIGNvbG9yOiAncmdiYSgxNzYsMTMwLDI1NSwxKScsIGNvbG9yRGltOiAncmdiYSgxNzYsMTMwLDI1NSwwLjEpJywgY29pbnM6IFsnRkVUJywnQUdJWCcsJ09DRUFOJywnUk5EUicsJ1dMRCcsJ1RBTycsJ0FLVCddLCAgICAgICAgICAgICAgIGtleXdvcmRzOiBbJ2FpJywnYXJ0aWZpY2lhbCBpbnRlbGxpZ2VuY2UnLCdtYWNoaW5lIGxlYXJuaW5nJywnbmV1cmFsJywnYml0dGVuc29yJywncmVuZGVyJywnd29ybGRjb2luJ10gfSwKICB7IGlkOiAncndhJywgICAgbGFiZWw6ICdSV0EnLCAgICAgICAgaWNvbjogJ/Cfj6YnLCBjb2xvcjogJ3JnYmEoMjU1LDE3MCwwLDEpJywgICBjb2xvckRpbTogJ3JnYmEoMjU1LDE3MCwwLDAuMSknLCAgIGNvaW5zOiBbJ09ORE8nLCdDRkcnLCdQRU5ETEUnLCdSSU8nLCdNUEwnLCdUUlUnXSwgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkczogWydyd2EnLCdyZWFsIHdvcmxkIGFzc2V0JywndG9rZW5pemVkJywndHJlYXN1cnknLCdib25kJywncmVhbCBlc3RhdGUnLCdvbmRvJ10gfSwKICB7IGlkOiAnbWVtZScsICAgbGFiZWw6ICdNZW1lJywgICAgICAgaWNvbjogJ/CfkLgnLCBjb2xvcjogJ3JnYmEoMjU1LDIyMCw1MCwxKScsICBjb2xvckRpbTogJ3JnYmEoMjU1LDIyMCw1MCwwLjEpJywgIGNvaW5zOiBbJ0RPR0UnLCdTSElCJywnUEVQRScsJ1dJRicsJ0JPTksnLCdGTE9LSScsJ01FVyddLCAgICAgICAgICAgICBrZXl3b3JkczogWydtZW1lJywnZG9nZScsJ3NoaWInLCdwZXBlJywnd2lmJywnYm9uaycsJ21lbWVjb2luJywnZG9nJywnY2F0J10gfSwKICB7IGlkOiAnZ2FtZWZpJywgbGFiZWw6ICdHYW1lRmknLCAgICAgaWNvbjogJ/Cfjq4nLCBjb2xvcjogJ3JnYmEoMjU1LDEwMCwyMDAsMSknLCBjb2xvckRpbTogJ3JnYmEoMjU1LDEwMCwyMDAsMC4xKScsIGNvaW5zOiBbJ0FYUycsJ1NBTkQnLCdNQU5BJywnSUxWJywnR0FMQScsJ1JPTicsJ0lNWCddLCAgICAgICAgICAgICAgICBrZXl3b3JkczogWydnYW1lZmknLCdnYW1pbmcnLCdwbGF5LXRvLWVhcm4nLCdtZXRhdmVyc2UnLCduZnQgZ2FtZScsJ2F4aWUnLCdzYW5kYm94JywnaW1tdXRhYmxlJ10gfSwKXSk7CgpmdW5jdGlvbiB0aW1lQWdvKG1zOiBudW1iZXIpOiBzdHJpbmcgewogIGNvbnN0IGQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gbXMpIC8gMTAwMCk7CiAgaWYgKGQgPCA2MCkgICAgcmV0dXJuIGQgKyAncyBhZ28nOwogIGlmIChkIDwgMzYwMCkgIHJldHVybiBNYXRoLmZsb29yKGQgLyA2MCkgKyAnbSBhZ28nOwogIGlmIChkIDwgODY0MDApIHJldHVybiBNYXRoLmZsb29yKGQgLyAzNjAwKSArICdoIGFnbyc7CiAgcmV0dXJuIE1hdGguZmxvb3IoZCAvIDg2NDAwKSArICdkIGFnbyc7Cn0KCmZ1bmN0aW9uIGZtdE9JKG46IG51bWJlcik6IHN0cmluZyB7CiAgaWYgKG4gPj0gMWU5KSByZXR1cm4gJyQnICsgKG4gLyAxZTkpLnRvRml4ZWQoMikgKyAnQic7CiAgaWYgKG4gPj0gMWU2KSByZXR1cm4gJyQnICsgKG4gLyAxZTYpLnRvRml4ZWQoMSkgKyAnTSc7CiAgaWYgKG4gPj0gMWUzKSByZXR1cm4gJyQnICsgKG4gLyAxZTMpLnRvRml4ZWQoMCkgKyAnSyc7CiAgaWYgKG4gPT09IDApICByZXR1cm4gJ+KAlCc7CiAgcmV0dXJuICckJyArIG4udG9GaXhlZCgwKTsKfQoKZnVuY3Rpb24gZmdDb2xvcih2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHsKICBpZiAodmFsdWUgPj0gNzUpIHJldHVybiAncmdiYSgzNCwyNTUsMTcwLDEpJzsKICBpZiAodmFsdWUgPj0gNTUpIHJldHVybiAncmdiYSgxNDAsMjIwLDEwMCwxKSc7CiAgaWYgKHZhbHVlID49IDQ1KSByZXR1cm4gJ3JnYmEoMjU1LDIyMCw1MCwxKSc7CiAgaWYgKHZhbHVlID49IDI1KSByZXR1cm4gJ3JnYmEoMjU1LDE0MCw2MCwxKSc7CiAgcmV0dXJuICdyZ2JhKDI1NSw2OCwxMzYsMSknOwp9CgpmdW5jdGlvbiBmZ0xhYmVsKHZhbHVlOiBudW1iZXIpOiBzdHJpbmcgewogIGlmICh2YWx1ZSA+PSA3NSkgcmV0dXJuICdFeHRyZW1lIEdyZWVkJzsKICBpZiAodmFsdWUgPj0gNTUpIHJldHVybiAnR3JlZWQnOwogIGlmICh2YWx1ZSA+PSA0NSkgcmV0dXJuICdOZXV0cmFsJzsKICBpZiAodmFsdWUgPj0gMjUpIHJldHVybiAnRmVhcic7CiAgcmV0dXJuICdFeHRyZW1lIEZlYXInOwp9CgovLyDilIDilIDilIAgVGFiQmFyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApjb25zdCBUYWJCdG4gPSBtZW1vKCh7IGxhYmVsLCBhY3RpdmUsIG9uQ2xpY2sgfTogeyBsYWJlbDogVGFiOyBhY3RpdmU6IGJvb2xlYW47IG9uQ2xpY2s6ICh0OiBUYWIpID0+IHZvaWQgfSkgPT4gewogIGNvbnN0IHN0eWxlID0gdXNlTWVtbygoKSA9PiBPYmplY3QuZnJlZXplKHsKICAgIHBhZGRpbmc6ICc4cHggMTRweCcsIGJvcmRlclJhZGl1czogJzZweCcsIGJvcmRlcjogJ25vbmUnLCBjdXJzb3I6ICdwb2ludGVyJywKICAgIGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCBhcyBjb25zdCwKICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnIGFzIGNvbnN0LCB0cmFuc2l0aW9uOiAnYWxsIDAuMThzJywKICAgIGJhY2tncm91bmQ6IGFjdGl2ZSA/ICdyZ2JhKDAsMjM4LDI1NSwwLjE1KScgOiAndHJhbnNwYXJlbnQnLAogICAgY29sb3I6IGFjdGl2ZSA/IEMuYWNjZW50IDogQy50ZXh0U2VjLAogICAgb3V0bGluZTogYWN0aXZlID8gJzFweCBzb2xpZCByZ2JhKDAsMjM4LDI1NSwwLjMpJyA6ICdub25lJywKICB9KSwgW2FjdGl2ZV0pOwogIGNvbnN0IGhhbmRsZSA9IHVzZUNhbGxiYWNrKCgpID0+IG9uQ2xpY2sobGFiZWwpLCBbbGFiZWwsIG9uQ2xpY2tdKTsKICByZXR1cm4gPGJ1dHRvbiBzdHlsZT17c3R5bGV9IG9uQ2xpY2s9e2hhbmRsZX0+e2xhYmVsfTwvYnV0dG9uPjsKfSk7ClRhYkJ0bi5kaXNwbGF5TmFtZSA9ICdUYWJCdG4nOwoKY29uc3QgVGFiQmFyID0gbWVtbygoeyBhY3RpdmUsIG9uQ2hhbmdlIH06IHsgYWN0aXZlOiBUYWI7IG9uQ2hhbmdlOiAodDogVGFiKSA9PiB2b2lkIH0pID0+ICgKICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnNHB4JywgcGFkZGluZzogJzRweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIG92ZXJmbG93WDogJ2F1dG8nIGFzIGNvbnN0LCBmbGV4U2hyaW5rOiAwIH19PgogICAge1RBQlMubWFwKHRhYiA9PiA8VGFiQnRuIGtleT17dGFifSBsYWJlbD17dGFifSBhY3RpdmU9e2FjdGl2ZSA9PT0gdGFifSBvbkNsaWNrPXtvbkNoYW5nZX0gLz4pfQogIDwvZGl2PgopKTsKVGFiQmFyLmRpc3BsYXlOYW1lID0gJ1RhYkJhcic7CgovLyDilIDilIDilIAgTmV3cyBGZWVkIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgApjb25zdCBOZXdzRkJ0biA9IG1lbW8oKHsgbGFiZWwsIGFjdGl2ZSwgb25DbGljayB9OiB7IGxhYmVsOiBOZXdzRmlsdGVyOyBhY3RpdmU6IGJvb2xlYW47IG9uQ2xpY2s6IChmOiBOZXdzRmlsdGVyKSA9PiB2b2lkIH0pID0+IHsKICBjb25zdCBzdHlsZSA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBwYWRkaW5nOiAnNXB4IDEycHgnLCBib3JkZXJSYWRpdXM6ICcyMHB4JywKICAgIGJvcmRlcjogYWN0aXZlID8gJzFweCBzb2xpZCByZ2JhKDAsMjM4LDI1NSwwLjQpJyA6ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpJywKICAgIGJhY2tncm91bmQ6IGFjdGl2ZSA/ICdyZ2JhKDAsMjM4LDI1NSwwLjEpJyA6ICd0cmFuc3BhcmVudCcsCiAgICBjb2xvcjogYWN0aXZlID8gQy5hY2NlbnQgOiBDLnRleHRTZWMsCiAgICBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGN1cnNvcjogJ3BvaW50ZXInLAogICAgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGZvbnRXZWlnaHQ6IGFjdGl2ZSA/IDcwMCBhcyBjb25zdCA6IDQwMCBhcyBjb25zdCwKICB9KSwgW2FjdGl2ZV0pOwogIGNvbnN0IGhhbmRsZSA9IHVzZUNhbGxiYWNrKCgpID0+IG9uQ2xpY2sobGFiZWwpLCBbbGFiZWwsIG9uQ2xpY2tdKTsKICByZXR1cm4gPGJ1dHRvbiBzdHlsZT17c3R5bGV9IG9uQ2xpY2s9e2hhbmRsZX0+e2xhYmVsfTwvYnV0dG9uPjsKfSk7Ck5ld3NGQnRuLmRpc3BsYXlOYW1lID0gJ05ld3NGQnRuJzsKCmNvbnN0IEN1cnJlbmN5VGFnID0gbWVtbygoeyB0YWcgfTogeyB0YWc6IHN0cmluZyB9KSA9PiAoCiAgPHNwYW4gc3R5bGU9e3sgcGFkZGluZzogJzJweCA2cHgnLCBib3JkZXJSYWRpdXM6ICc0cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMSknLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4JywgY29sb3I6IEMudGV4dFNlYywgZm9udFdlaWdodDogNzAwIH19Pnt0YWd9PC9zcGFuPgopKTsKQ3VycmVuY3lUYWcuZGlzcGxheU5hbWUgPSAnQ3VycmVuY3lUYWcnOwoKY29uc3QgTmV3c0NhcmQgPSBtZW1vKCh7IGl0ZW0gfTogeyBpdGVtOiBOZXdzSXRlbSB9KSA9PiB7CiAgY29uc3QgYm9yZGVyQ29sb3IgPSBpdGVtLnNlbnRpbWVudCA9PT0gJ2J1bGxpc2gnID8gJ3JnYmEoMzQsMjU1LDE3MCwwLjMpJyA6IGl0ZW0uc2VudGltZW50ID09PSAnYmVhcmlzaCcgPyAncmdiYSgyNTUsNjgsMTM2LDAuMjUpJyA6IEMuYm9yZGVyOwogIGNvbnN0IGdsb3dDb2xvciAgID0gaXRlbS5zZW50aW1lbnQgPT09ICdidWxsaXNoJyA/ICdyZ2JhKDM0LDI1NSwxNzAsMC4xNSknIDogaXRlbS5zZW50aW1lbnQgPT09ICdiZWFyaXNoJyA/ICdyZ2JhKDI1NSw2OCwxMzYsMC4xNSknIDogJ25vbmUnOwogIGNvbnN0IGRvdENvbG9yICAgID0gaXRlbS5zZW50aW1lbnQgPT09ICdidWxsaXNoJyA/ICdyZ2JhKDM0LDI1NSwxNzAsMSknIDogaXRlbS5zZW50aW1lbnQgPT09ICdiZWFyaXNoJyA/ICdyZ2JhKDI1NSw2OCwxMzYsMSknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4yKSc7CgogIGNvbnN0IGNhcmRTdHlsZSA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7CiAgICBiYWNrZ3JvdW5kOiBDLmNhcmQsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgYm9yZGVyQ29sb3IsIGJvcmRlclJhZGl1czogJzEycHgnLAogICAgcGFkZGluZzogJzE0cHggMTZweCcsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsCiAgICBnYXA6ICcxMHB4JywgY3Vyc29yOiAncG9pbnRlcicsIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4xNXMnLAogICAgYm94U2hhZG93OiBpdGVtLnNlbnRpbWVudCAhPT0gJ25ldXRyYWwnID8gJzAgMCAxOHB4ICcgKyBnbG93Q29sb3IgOiAnbm9uZScsCiAgfSksIFtib3JkZXJDb2xvciwgZ2xvd0NvbG9yLCBpdGVtLnNlbnRpbWVudF0pOwoKICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrKCgpID0+IHsgd2luZG93Lm9wZW4oaXRlbS51cmwsICdfYmxhbmsnLCAnbm9vcGVuZXIsbm9yZWZlcnJlcicpOyB9LCBbaXRlbS51cmxdKTsKCiAgcmV0dXJuICgKICAgIDxtb3Rpb24uZGl2IHN0eWxlPXtjYXJkU3R5bGV9IG9uQ2xpY2s9e2hhbmRsZUNsaWNrfSB3aGlsZUhvdmVyPXt7IHNjYWxlOiAxLjAxIH19IGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeTogMTAgfX0gYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19PgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzhweCcsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyB3aWR0aDogJzZweCcsIGhlaWdodDogJzZweCcsIGJvcmRlclJhZGl1czogJzUwJScsIGJhY2tncm91bmQ6IGRvdENvbG9yLCBmbGV4U2hyaW5rOiAwIH19IC8+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy5hY2NlbnQsIGxldHRlclNwYWNpbmc6ICcwLjA2ZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgZm9udFdlaWdodDogNzAwIH19PntpdGVtLnNvdXJjZX08L3NwYW4+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy50ZXh0U2VjLCBtYXJnaW5MZWZ0OiAnYXV0bycgfX0+e3RpbWVBZ28oaXRlbS5wdWJsaXNoZWRBdCl9PC9zcGFuPgogICAgICA8L2Rpdj4KICAgICAgPHAgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxNHB4JywgY29sb3I6IEMudGV4dFByaW1hcnksIGxpbmVIZWlnaHQ6ICcxLjUnLCBmb250V2VpZ2h0OiA1MDAsIG1hcmdpbjogMCB9fT57aXRlbS50aXRsZX08L3A+CiAgICAgIHtpdGVtLmN1cnJlbmNpZXMubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzRweCcsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QgfX0+CiAgICAgICAgICB7aXRlbS5jdXJyZW5jaWVzLnNsaWNlKDAsIDUpLm1hcChjID0+IDxDdXJyZW5jeVRhZyBrZXk9e2N9IHRhZz17Y30gLz4pfQogICAgICAgIDwvZGl2PgogICAgICApfQogICAgPC9tb3Rpb24uZGl2PgogICk7Cn0pOwpOZXdzQ2FyZC5kaXNwbGF5TmFtZSA9ICdOZXdzQ2FyZCc7Cgpjb25zdCBOZXdzRmVlZCA9IG1lbW8oKCkgPT4gewogIGNvbnN0IHsgZmlsdGVyZWROZXdzLCBsb2FkaW5nLCBlcnJvciwgZmlsdGVyLCBzZXRGaWx0ZXIgfSA9IHVzZUNyeXB0b05ld3MoKTsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QgfX0+CiAgICAgICAge05FV1NfRklMVEVSUy5tYXAoZiA9PiA8TmV3c0ZCdG4ga2V5PXtmfSBsYWJlbD17Zn0gYWN0aXZlPXtmaWx0ZXIgPT09IGZ9IG9uQ2xpY2s9e3NldEZpbHRlcn0gLz4pfQogICAgICA8L2Rpdj4KICAgICAge2Vycm9yICYmIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogQy5uZWdhdGl2ZSB9fT7imqAge2Vycm9yfTwvZGl2Pn0KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICdyZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzAwcHgsIDFmcikpJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAge2xvYWRpbmcKICAgICAgICAgID8gQXJyYXkuZnJvbSh7IGxlbmd0aDogOSB9LCAoXywgaSkgPT4gKAogICAgICAgICAgICAgIDxtb3Rpb24uZGl2IGtleT17aX0gc3R5bGU9e3sgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICcxcHggc29saWQgJyArIEMuYm9yZGVyLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzE0cHggMTZweCcsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzEwcHgnIH19IGFuaW1hdGU9e3sgb3BhY2l0eTogWzAuNCwgMC43LCAwLjRdIH19IHRyYW5zaXRpb249e3sgZHVyYXRpb246IDEuNCwgcmVwZWF0OiBJbmZpbml0eSwgZGVsYXk6IGkgKiAwLjA2IH19PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBoZWlnaHQ6ICcxMHB4Jywgd2lkdGg6ICc4MHB4JywgYm9yZGVyUmFkaXVzOiAnNHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNyknIH19IC8+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGhlaWdodDogJzEzcHgnLCB3aWR0aDogJzEwMCUnLCBib3JkZXJSYWRpdXM6ICc0cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScgfX0gLz4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgaGVpZ2h0OiAnMTNweCcsIHdpZHRoOiAnNzAlJywgYm9yZGVyUmFkaXVzOiAnNHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNSknIH19IC8+CiAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PgogICAgICAgICAgICApKQogICAgICAgICAgOiBmaWx0ZXJlZE5ld3MubWFwKGl0ZW0gPT4gPE5ld3NDYXJkIGtleT17aXRlbS5pZH0gaXRlbT17aXRlbX0gLz4pCiAgICAgICAgfQogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpOZXdzRmVlZC5kaXNwbGF5TmFtZSA9ICdOZXdzRmVlZCc7CgovLyDilIDilIDilIAgTWFya2V0IFNlbnRpbWVudCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKY29uc3QgRmVhckdyZWVkR2F1Z2UgPSBtZW1vKCh7IHZhbHVlIH06IHsgdmFsdWU6IG51bWJlciB9KSA9PiB7CiAgY29uc3QgY29sb3IgPSBmZ0NvbG9yKHZhbHVlKTsKICBjb25zdCBhbmdsZSA9ICh2YWx1ZSAvIDEwMCkgKiAxODAgLSAxODA7CiAgY29uc3QgcmFkID0gKGFuZ2xlICogTWF0aC5QSSkgLyAxODA7CiAgY29uc3QgY3ggPSAxMTAsIGN5ID0gOTAsIHIgPSA3MDsKICBjb25zdCBueCA9IGN4ICsgciAqIE1hdGguY29zKHJhZCk7CiAgY29uc3QgbnkgPSBjeSArIHIgKiBNYXRoLnNpbihyYWQpOwogIGNvbnN0IFNFR1MgPSBPYmplY3QuZnJlZXplKFsKICAgIHsgZnJvbTogMCwgIHRvOiAyNSwgIGNvbG9yOiAncmdiYSgyNTUsNjgsMTM2LDAuNSknIH0sCiAgICB7IGZyb206IDI1LCB0bzogNDUsICBjb2xvcjogJ3JnYmEoMjU1LDE0MCw2MCwwLjUpJyB9LAogICAgeyBmcm9tOiA0NSwgdG86IDU1LCAgY29sb3I6ICdyZ2JhKDI1NSwyMjAsNTAsMC41KScgfSwKICAgIHsgZnJvbTogNTUsIHRvOiA3NSwgIGNvbG9yOiAncmdiYSgxNDAsMjIwLDEwMCwwLjUpJyB9LAogICAgeyBmcm9tOiA3NSwgdG86IDEwMCwgY29sb3I6ICdyZ2JhKDM0LDI1NSwxNzAsMC41KScgfSwKICBdKTsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JyB9fT4KICAgICAgPHN2ZyB3aWR0aD0iMjIwIiBoZWlnaHQ9IjEwMCIgc3R5bGU9e3sgb3ZlcmZsb3c6ICd2aXNpYmxlJyB9fT4KICAgICAgICA8cGF0aCBkPSJNIDQwIDkwIEEgNzAgNzAgMCAwIDEgMTgwIDkwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMC4wNykiIHN0cm9rZVdpZHRoPSIxNiIgc3Ryb2tlTGluZWNhcD0icm91bmQiIC8+CiAgICAgICAge1NFR1MubWFwKHNlZyA9PiB7CiAgICAgICAgICBjb25zdCBhMSA9ICgoc2VnLmZyb20gLyAxMDApICogMTgwIC0gMTgwKSAqIE1hdGguUEkgLyAxODA7CiAgICAgICAgICBjb25zdCBhMiA9ICgoc2VnLnRvICAgLyAxMDApICogMTgwIC0gMTgwKSAqIE1hdGguUEkgLyAxODA7CiAgICAgICAgICBjb25zdCB4MSA9IGN4ICsgciAqIE1hdGguY29zKGExKSwgeTEgPSBjeSArIHIgKiBNYXRoLnNpbihhMSk7CiAgICAgICAgICBjb25zdCB4MiA9IGN4ICsgciAqIE1hdGguY29zKGEyKSwgeTIgPSBjeSArIHIgKiBNYXRoLnNpbihhMik7CiAgICAgICAgICBjb25zdCBsYSA9IChzZWcudG8gLSBzZWcuZnJvbSkgPiA1MCA/IDEgOiAwOwogICAgICAgICAgcmV0dXJuIDxwYXRoIGtleT17c2VnLmZyb219IGQ9eydNICcgKyB4MSArICcgJyArIHkxICsgJyBBICcgKyByICsgJyAnICsgciArICcgMCAnICsgbGEgKyAnIDEgJyArIHgyICsgJyAnICsgeTJ9IGZpbGw9Im5vbmUiIHN0cm9rZT17c2VnLmNvbG9yfSBzdHJva2VXaWR0aD0iMTYiIHN0cm9rZUxpbmVjYXA9InJvdW5kIiAvPjsKICAgICAgICB9KX0KICAgICAgICA8bGluZSB4MT17Y3h9IHkxPXtjeX0geDI9e254fSB5Mj17bnl9IHN0cm9rZT17Y29sb3J9IHN0cm9rZVdpZHRoPSIzIiBzdHJva2VMaW5lY2FwPSJyb3VuZCIgLz4KICAgICAgICA8Y2lyY2xlIGN4PXtjeH0gY3k9e2N5fSByPSI2IiBmaWxsPXtjb2xvcn0gLz4KICAgICAgICA8dGV4dCB4PSIzMiIgeT0iMTA4IiBmaWxsPSJyZ2JhKDI1NSw2OCwxMzYsMC42KSIgZm9udFNpemU9IjkiIGZvbnRGYW1pbHk9e0ZPTlRfTU9OT30+RkVBUjwvdGV4dD4KICAgICAgICA8dGV4dCB4PSIxNzAiIHk9IjEwOCIgZmlsbD0icmdiYSgzNCwyNTUsMTcwLDAuNikiIGZvbnRTaXplPSI5IiBmb250RmFtaWx5PXtGT05UX01PTk99PkdSRUVEPC90ZXh0PgogICAgICA8L3N2Zz4KICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnNDJweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3IsIGxpbmVIZWlnaHQ6ICcxJyB9fT57dmFsdWV9PC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxNHB4JywgY29sb3IsIGZvbnRXZWlnaHQ6IDYwMCB9fT57ZmdMYWJlbCh2YWx1ZSl9PC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKRmVhckdyZWVkR2F1Z2UuZGlzcGxheU5hbWUgPSAnRmVhckdyZWVkR2F1Z2UnOwoKY29uc3QgRkdIaXN0b3J5QmFyID0gbWVtbygoeyBoaXN0b3J5IH06IHsgaGlzdG9yeTogeyB2YWx1ZTogbnVtYmVyOyB0aW1lc3RhbXA6IG51bWJlciB9W10gfSkgPT4gewogIGNvbnN0IGRheXMgPSBbLi4uaGlzdG9yeV0ucmV2ZXJzZSgpOwogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnNnB4JywgYWxpZ25JdGVtczogJ2ZsZXgtZW5kJywgaGVpZ2h0OiAnNjBweCcsIHBhZGRpbmc6ICcwIDRweCcgfX0+CiAgICAgIHtkYXlzLm1hcCgoZCwgaSkgPT4gewogICAgICAgIGNvbnN0IGggPSBNYXRoLm1heCg2LCAoZC52YWx1ZSAvIDEwMCkgKiA1NCk7CiAgICAgICAgY29uc3QgY29sID0gZmdDb2xvcihkLnZhbHVlKTsKICAgICAgICBjb25zdCBpc0xhdGVzdCA9IGkgPT09IGRheXMubGVuZ3RoIC0gMTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgPGRpdiBrZXk9e2QudGltZXN0YW1wfSBzdHlsZT17eyBmbGV4OiAxLCBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNHB4JyB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnOXB4JywgY29sb3I6IGlzTGF0ZXN0ID8gY29sIDogQy50ZXh0U2VjIH19PntkLnZhbHVlfTwvZGl2PgogICAgICAgICAgICA8bW90aW9uLmRpdiBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBib3JkZXJSYWRpdXM6ICc0cHggNHB4IDAgMCcsIGJhY2tncm91bmQ6IGlzTGF0ZXN0ID8gY29sIDogY29sLnJlcGxhY2UoJzEpJywgJzAuNCknKSB9fSBpbml0aWFsPXt7IGhlaWdodDogMCB9fSBhbmltYXRlPXt7IGhlaWdodDogaCB9fSB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjYsIGRlbGF5OiBpICogMC4wNSB9fSAvPgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICc4cHgnLCBjb2xvcjogQy50ZXh0U2VjIH19PntuZXcgRGF0ZShkLnRpbWVzdGFtcCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ3Nob3J0JyB9KX08L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICk7CiAgICAgIH0pfQogICAgPC9kaXY+CiAgKTsKfSk7CkZHSGlzdG9yeUJhci5kaXNwbGF5TmFtZSA9ICdGR0hpc3RvcnlCYXInOwoKY29uc3QgTWFya2V0U2VudGltZW50ID0gbWVtbygoKSA9PiB7CiAgY29uc3QgeyBmZWFyR3JlZWQsIGN1cnJlbnQsIGxvYWRpbmdGRywgZXJyb3JGRyB9ID0gdXNlU29jaWFsU2VudGltZW50KCk7CiAgY29uc3QgeyBnbG9iYWw6IGdsb2JhbERhdGEgfSA9IHVzZUNyeXB0bygpOwogIGNvbnN0IGJ0Y0RvbSA9IGdsb2JhbERhdGEuYnRjRG9taW5hbmNlID8/IDA7CiAgY29uc3QgZXRoRG9tID0gZ2xvYmFsRGF0YS5ldGhEb21pbmFuY2UgPz8gMDsKICBjb25zdCBhbHREb20gPSBNYXRoLm1heCgwLCAxMDAgLSBidGNEb20gLSBldGhEb20pOwogIGNvbnN0IGNhcmRTdCA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmZyZWV6ZSh7IGJhY2tncm91bmQ6IEMuY2FyZCwgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBDLmJvcmRlciwgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBhZGRpbmc6ICcyMHB4JywgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnMTZweCcgfSksIFtdKTsKICBjb25zdCBzZWNMYmwgPSB1c2VNZW1vKCgpID0+IE9iamVjdC5mcmVlemUoeyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMsIGxldHRlclNwYWNpbmc6ICcwLjEyZW0nLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyBhcyBjb25zdCwgZm9udFdlaWdodDogNzAwLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIHBhZGRpbmdCb3R0b206ICcxMHB4JyB9KSwgW10pOwogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzE2cHgnIH19PgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ3JlcGVhdChhdXRvLWZpdCwgbWlubWF4KDI4MHB4LCAxZnIpKScsIGdhcDogJzE2cHgnIH19PgogICAgICAgIDxkaXYgc3R5bGU9e2NhcmRTdH0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXtzZWNMYmx9PkZlYXIgeycmJ30gR3JlZWQgSW5kZXg8L2Rpdj4KICAgICAgICAgIHtsb2FkaW5nRkcKICAgICAgICAgICAgPyA8ZGl2IHN0eWxlPXt7IGhlaWdodDogJzE2MHB4JywgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBjb2xvcjogQy50ZXh0U2VjLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcgfX0+TG9hZGluZy4uLjwvZGl2PgogICAgICAgICAgICA6IGVycm9yRkcKICAgICAgICAgICAgPyA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IEMubmVnYXRpdmUgfX0+e2Vycm9yRkd9PC9kaXY+CiAgICAgICAgICAgIDogY3VycmVudCA/IDxGZWFyR3JlZWRHYXVnZSB2YWx1ZT17Y3VycmVudC52YWx1ZX0gLz4gOiBudWxsCiAgICAgICAgICB9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17Y2FyZFN0fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3NlY0xibH0+Ny1EYXkgSGlzdG9yeTwvZGl2PgogICAgICAgICAge2ZlYXJHcmVlZC5sZW5ndGggPiAwID8gPEZHSGlzdG9yeUJhciBoaXN0b3J5PXtmZWFyR3JlZWR9IC8+IDogPGRpdiBzdHlsZT17eyBoZWlnaHQ6ICc2MHB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXJSYWRpdXM6ICc4cHgnIH19IC8+fQogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICc2cHgnLCBtYXJnaW5Ub3A6ICc4cHgnIH19PgogICAgICAgICAgICB7T2JqZWN0LmZyZWV6ZShbCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0V4dHJlbWUgRmVhcicsIHJhbmdlOiAnMOKAkzI0JywgICBjb2xvcjogJ3JnYmEoMjU1LDY4LDEzNiwxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnRmVhcicsICAgICAgICAgcmFuZ2U6ICcyNeKAkzQ0JywgIGNvbG9yOiAncmdiYSgyNTUsMTQwLDYwLDEpJyB9LAogICAgICAgICAgICAgIHsgbGFiZWw6ICdOZXV0cmFsJywgICAgICByYW5nZTogJzQ14oCTNTQnLCAgY29sb3I6ICdyZ2JhKDI1NSwyMjAsNTAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0dyZWVkJywgICAgICAgIHJhbmdlOiAnNTXigJM3NCcsICBjb2xvcjogJ3JnYmEoMTQwLDIyMCwxMDAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0V4dHJlbWUgR3JlZWQnLHJhbmdlOiAnNzXigJMxMDAnLCBjb2xvcjogJ3JnYmEoMzQsMjU1LDE3MCwxKScgfSwKICAgICAgICAgICAgXSkubWFwKGxlZyA9PiAoCiAgICAgICAgICAgICAgPGRpdiBrZXk9e2xlZy5sYWJlbH0gc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JyB9fT4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6ICcxMHB4JywgaGVpZ2h0OiAnMTBweCcsIGJvcmRlclJhZGl1czogJzJweCcsIGJhY2tncm91bmQ6IGxlZy5jb2xvciwgZmxleFNocmluazogMCB9fSAvPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IEMudGV4dFByaW1hcnksIGZsZXg6IDEgfX0+e2xlZy5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiBDLnRleHRTZWMgfX0+e2xlZy5yYW5nZX08L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17Y2FyZFN0fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3NlY0xibH0+TWFya2V0IERvbWluYW5jZTwvZGl2PgogICAgICAgICAge09iamVjdC5mcmVlemUoWwogICAgICAgICAgICB7IGxhYmVsOiAnQlRDIERvbWluYW5jZScsIHZhbHVlOiBidGNEb20sIGNvbG9yOiAncmdiYSgyNDcsMTQ3LDI2LDEpJyB9LAogICAgICAgICAgICB7IGxhYmVsOiAnRVRIIERvbWluYW5jZScsIHZhbHVlOiBldGhEb20sIGNvbG9yOiAncmdiYSg5OCwxMjYsMjM0LDEpJyB9LAogICAgICAgICAgICB7IGxhYmVsOiAnQWx0Y29pbiBNYXJrZXQnLCB2YWx1ZTogYWx0RG9tLCBjb2xvcjogQy52aW9sZXQgfSwKICAgICAgICAgIF0pLm1hcChpdGVtID0+ICgKICAgICAgICAgICAgPGRpdiBrZXk9e2l0ZW0ubGFiZWx9IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicgfX0+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX1VJLCBmb250U2l6ZTogJzEzcHgnLCBjb2xvcjogQy50ZXh0UHJpbWFyeSB9fT57aXRlbS5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGNvbG9yOiBpdGVtLmNvbG9yLCBmb250V2VpZ2h0OiA3MDAgfX0+e2l0ZW0udmFsdWUudG9GaXhlZCgxKX0lPC9zcGFuPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgaGVpZ2h0OiAnNnB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNiknLCBib3JkZXJSYWRpdXM6ICczcHgnLCBvdmVyZmxvdzogJ2hpZGRlbicgfX0+CiAgICAgICAgICAgICAgICA8bW90aW9uLmRpdiBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJywgYm9yZGVyUmFkaXVzOiAnM3B4JywgYmFja2dyb3VuZDogaXRlbS5jb2xvciB9fSBpbml0aWFsPXt7IHdpZHRoOiAwIH19IGFuaW1hdGU9e3sgd2lkdGg6IGl0ZW0udmFsdWUgKyAnJScgfX0gdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC44IH19IC8+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKSl9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7Ck1hcmtldFNlbnRpbWVudC5kaXNwbGF5TmFtZSA9ICdNYXJrZXRTZW50aW1lbnQnOwoKLy8g4pSA4pSA4pSAIE5hcnJhdGl2ZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IE5hcnJhdGl2ZUNhcmQgPSBtZW1vKCh7IG5hcnJhdGl2ZSwgYXJ0aWNsZUNvdW50LCBzZW50aW1lbnRTY29yZSB9OiB7IG5hcnJhdGl2ZTogdHlwZW9mIE5BUlJBVElWRVNbbnVtYmVyXTsgYXJ0aWNsZUNvdW50OiBudW1iZXI7IHNlbnRpbWVudFNjb3JlOiBudW1iZXIgfSkgPT4gewogIGNvbnN0IHNlbnRDb2xvciA9IHNlbnRpbWVudFNjb3JlID4gMCA/IEMucG9zaXRpdmUgOiBzZW50aW1lbnRTY29yZSA8IDAgPyBDLm5lZ2F0aXZlIDogQy50ZXh0U2VjOwogIGNvbnN0IHNlbnRMYWJlbCA9IHNlbnRpbWVudFNjb3JlID4gMCA/ICfilrIgQnVsbGlzaCcgOiBzZW50aW1lbnRTY29yZSA8IDAgPyAn4pa8IEJlYXJpc2gnIDogJ+KAlCBOZXV0cmFsJzsKICByZXR1cm4gKAogICAgPG1vdGlvbi5kaXYgc3R5bGU9e3sgYmFja2dyb3VuZDogQy5jYXJkLCBib3JkZXI6ICcxcHggc29saWQgJyArIEMuYm9yZGVyLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzE4cHgnLCBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxNHB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScgYXMgY29uc3QsIG92ZXJmbG93OiAnaGlkZGVuJyBhcyBjb25zdCB9fSB3aGlsZUhvdmVyPXt7IHNjYWxlOiAxLjAyIH19IHRyYW5zaXRpb249e3sgZHVyYXRpb246IDAuMTUgfX0+CiAgICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScgYXMgY29uc3QsIHRvcDogJy0yMHB4JywgcmlnaHQ6ICctMjBweCcsIHdpZHRoOiAnODBweCcsIGhlaWdodDogJzgwcHgnLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBiYWNrZ3JvdW5kOiBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4wNiknKSwgZmlsdGVyOiAnYmx1cigyMHB4KScsIHBvaW50ZXJFdmVudHM6ICdub25lJyBhcyBjb25zdCB9fSAvPgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzEwcHgnIH19PgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAnMjJweCcsIGxpbmVIZWlnaHQ6ICcxJyB9fT57bmFycmF0aXZlLmljb259PC9zcGFuPgogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfVUksIGZvbnRTaXplOiAnMTVweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IEMudGV4dFByaW1hcnkgfX0+e25hcnJhdGl2ZS5sYWJlbH08L3NwYW4+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgbWFyZ2luTGVmdDogJ2F1dG8nLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiBhcnRpY2xlQ291bnQgPiAwID8gbmFycmF0aXZlLmNvbG9yIDogQy50ZXh0U2VjLCBiYWNrZ3JvdW5kOiBhcnRpY2xlQ291bnQgPiAwID8gbmFycmF0aXZlLmNvbG9yLnJlcGxhY2UoJzEpJywgJzAuMSknKSA6ICd0cmFuc3BhcmVudCcsIHBhZGRpbmc6ICczcHggOHB4JywgYm9yZGVyUmFkaXVzOiAnMjBweCcsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgKGFydGljbGVDb3VudCA+IDAgPyBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4zKScpIDogJ3RyYW5zcGFyZW50JykgfX0+CiAgICAgICAgICB7YXJ0aWNsZUNvdW50fSBhcnRpY2xlcwogICAgICAgIDwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4V3JhcDogJ3dyYXAnIGFzIGNvbnN0LCBnYXA6ICc0cHgnIH19PgogICAgICAgIHtuYXJyYXRpdmUuY29pbnMubWFwKGNvaW4gPT4gKAogICAgICAgICAgPHNwYW4ga2V5PXtjb2lufSBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGZvbnRXZWlnaHQ6IDcwMCwgcGFkZGluZzogJzJweCA3cHgnLCBib3JkZXJSYWRpdXM6ICc0cHgnLCBiYWNrZ3JvdW5kOiBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4wOCknKSwgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBuYXJyYXRpdmUuY29sb3IucmVwbGFjZSgnMSknLCAnMC4yKScpLCBjb2xvcjogbmFycmF0aXZlLmNvbG9yIH19Pntjb2lufTwvc3Bhbj4KICAgICAgICApKX0KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgYm9yZGVyVG9wOiAnMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNSknLCBwYWRkaW5nVG9wOiAnMTBweCcgfX0+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxMnB4JywgY29sb3I6IHNlbnRDb2xvciwgZm9udFdlaWdodDogNjAwIH19PntzZW50TGFiZWx9PC9zcGFuPgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JyB9fT4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6IEMudGV4dFNlYyB9fT5zZW50aW1lbnQ8L3NwYW4+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnNjBweCcsIGhlaWdodDogJzRweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJywgYm9yZGVyUmFkaXVzOiAnMnB4Jywgb3ZlcmZsb3c6ICdoaWRkZW4nIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGhlaWdodDogJzEwMCUnLCB3aWR0aDogTWF0aC5hYnMoc2VudGltZW50U2NvcmUpICsgJyUnLCBiYWNrZ3JvdW5kOiBzZW50Q29sb3IsIGJvcmRlclJhZGl1czogJzJweCcgfX0gLz4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvbW90aW9uLmRpdj4KICApOwp9KTsKTmFycmF0aXZlQ2FyZC5kaXNwbGF5TmFtZSA9ICdOYXJyYXRpdmVDYXJkJzsKCmNvbnN0IE5hcnJhdGl2ZXMgPSBtZW1vKCgpID0+IHsKICBjb25zdCB7IG5ld3MgfSA9IHVzZUNyeXB0b05ld3MoKTsKICBjb25zdCBuYXJyYXRpdmVTdGF0cyA9IHVzZU1lbW8oKCkgPT4gTkFSUkFUSVZFUy5tYXAobmFyciA9PiB7CiAgICBsZXQgY291bnQgPSAwLCBidWxsaXNoID0gMCwgYmVhcmlzaCA9IDA7CiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbmV3cykgewogICAgICBjb25zdCB0ID0gaXRlbS50aXRsZS50b0xvd2VyQ2FzZSgpOwogICAgICBjb25zdCBtYXRjaCA9IG5hcnIuY29pbnMuc29tZShjID0+IGl0ZW0uY3VycmVuY2llcy5pbmNsdWRlcyhjKSB8fCB0LmluY2x1ZGVzKGMudG9Mb3dlckNhc2UoKSkpIHx8IG5hcnIua2V5d29yZHMuc29tZShrdyA9PiB0LmluY2x1ZGVzKGt3KSk7CiAgICAgIGlmIChtYXRjaCkgeyBjb3VudCsrOyBpZiAoaXRlbS5zZW50aW1lbnQgPT09ICdidWxsaXNoJykgYnVsbGlzaCsrOyBpZiAoaXRlbS5zZW50aW1lbnQgPT09ICdiZWFyaXNoJykgYmVhcmlzaCsrOyB9CiAgICB9CiAgICBjb25zdCB0b3RhbCA9IGJ1bGxpc2ggKyBiZWFyaXNoOwogICAgcmV0dXJuIHsgaWQ6IG5hcnIuaWQsIGFydGljbGVDb3VudDogY291bnQsIHNlbnRpbWVudFNjb3JlOiB0b3RhbCA+IDAgPyBNYXRoLnJvdW5kKCgoYnVsbGlzaCAtIGJlYXJpc2gpIC8gdG90YWwpICogMTAwKSA6IDAgfTsKICB9KSwgW25ld3NdKTsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPHAgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxM3B4JywgY29sb3I6IEMudGV4dFNlYywgbGluZUhlaWdodDogJzEuNicsIHBhZGRpbmc6ICcxMnB4IDE2cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsMjU1LDI1NSwwLjAyKScsIGJvcmRlclJhZGl1czogJzEycHgnLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA2KScsIG1hcmdpbjogMCB9fT4KICAgICAgICBOYXJyYXRpdmUgdHJhY2tpbmcgYW5hbHl6ZXMgcmVjZW50IG5ld3MgaGVhZGxpbmVzIHRvIGlkZW50aWZ5IHRyZW5kaW5nIHRoZW1lcy4gQXJ0aWNsZSBjb3VudCBhbmQgc2VudGltZW50IGFyZSBjb21wdXRlZCBmcm9tIGxpdmUgbmV3cyBmZWVkLgogICAgICA8L3A+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAncmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDI4MHB4LCAxZnIpKScsIGdhcDogJzE0cHgnIH19PgogICAgICAgIHtOQVJSQVRJVkVTLm1hcCgobmFyciwgaSkgPT4gPE5hcnJhdGl2ZUNhcmQga2V5PXtuYXJyLmlkfSBuYXJyYXRpdmU9e25hcnJ9IGFydGljbGVDb3VudD17bmFycmF0aXZlU3RhdHNbaV0uYXJ0aWNsZUNvdW50fSBzZW50aW1lbnRTY29yZT17bmFycmF0aXZlU3RhdHNbaV0uc2VudGltZW50U2NvcmV9IC8+KX0KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKTmFycmF0aXZlcy5kaXNwbGF5TmFtZSA9ICdOYXJyYXRpdmVzJzsKCi8vIOKUgOKUgOKUgCBGdW5kaW5nICYgT0kg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACmNvbnN0IEZ1bmRpbmdSb3cgPSBtZW1vKCh7IGl0ZW0sIGlzTW9iaWxlIH06IHsgaXRlbTogRnVuZGluZ0RhdGE7IGlzTW9iaWxlOiBib29sZWFuIH0pID0+IHsKICBjb25zdCBbaG92ZXJlZCwgc2V0SG92ZXJlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgcmF0ZUNvbG9yICA9IGl0ZW0ucmF0ZSA+IDAuMDAwMSA/IEMucG9zaXRpdmUgOiBpdGVtLnJhdGUgPCAtMC4wMDAxID8gQy5uZWdhdGl2ZSA6IEMudGV4dFNlYzsKICBjb25zdCBzaWduYWxDb2xvciA9IGl0ZW0uc2lnbmFsID09PSAnTE9ORycgPyBDLnBvc2l0aXZlIDogaXRlbS5zaWduYWwgPT09ICdTSE9SVCcgPyBDLm5lZ2F0aXZlIDogQy50ZXh0U2VjOwogIGNvbnN0IHNpZ25hbEJnICAgPSBpdGVtLnNpZ25hbCA9PT0gJ0xPTkcnID8gQy5wb3NEaW0gOiBpdGVtLnNpZ25hbCA9PT0gJ1NIT1JUJyA/IEMubmVnRGltIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNCknOwogIGNvbnN0IGNvbHMgPSBpc01vYmlsZSA/ICc2MHB4IDFmciAxZnInIDogJzgwcHggMTAwcHggMTIwcHggMWZyIDgwcHgnOwogIGNvbnN0IG9uRW50ZXIgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRIb3ZlcmVkKHRydWUpLCBbXSk7CiAgY29uc3Qgb25MZWF2ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHNldEhvdmVyZWQoZmFsc2UpLCBbXSk7CiAgcmV0dXJuICgKICAgIDxkaXYgb25Nb3VzZUVudGVyPXtvbkVudGVyfSBvbk1vdXNlTGVhdmU9e29uTGVhdmV9IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogY29scywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzEycHgnLCBwYWRkaW5nOiAnMTNweCAxNnB4JywgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNCknLCBiYWNrZ3JvdW5kOiBob3ZlcmVkID8gJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknIDogJ3RyYW5zcGFyZW50JywgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQgMC4xMnMnIH19PgogICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IEMudGV4dFByaW1hcnkgfX0+e2l0ZW0uc3ltYm9sfTwvc3Bhbj4KICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEzcHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiByYXRlQ29sb3IsIHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT57aXRlbS5yYXRlUGN0ID49IDAgPyAnKycgOiAnJ317aXRlbS5yYXRlUGN0LnRvRml4ZWQoNCl9JTwvc3Bhbj4KICAgICAgeyFpc01vYmlsZSAmJiA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTFweCcsIGNvbG9yOiByYXRlQ29sb3IsIHRleHRBbGlnbjogJ3JpZ2h0JyBhcyBjb25zdCB9fT57aXRlbS5hbm51YWxpemVkID49IDAgPyAnKycgOiAnJ317aXRlbS5hbm51YWxpemVkLnRvRml4ZWQoMSl9JSBwYTwvc3Bhbj59CiAgICAgIHshaXNNb2JpbGUgJiYgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogQy50ZXh0U2VjLCB0ZXh0QWxpZ246ICdyaWdodCcgYXMgY29uc3QgfX0+e2ZtdE9JKGl0ZW0ub2lVc2QpfTwvc3Bhbj59CiAgICAgIDxzcGFuIHN0eWxlPXt7IGRpc3BsYXk6ICdpbmxpbmUtZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIHBhZGRpbmc6ICczcHggMTBweCcsIGJvcmRlclJhZGl1czogJzIwcHgnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IHNpZ25hbENvbG9yLCBiYWNrZ3JvdW5kOiBzaWduYWxCZywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBzaWduYWxDb2xvci5yZXBsYWNlKCcxKScsICcwLjMpJykgfX0+e2l0ZW0uc2lnbmFsfTwvc3Bhbj4KICAgIDwvZGl2PgogICk7Cn0pOwpGdW5kaW5nUm93LmRpc3BsYXlOYW1lID0gJ0Z1bmRpbmdSb3cnOwoKY29uc3QgRnVuZGluZ09JID0gbWVtbygoeyBpc01vYmlsZSB9OiB7IGlzTW9iaWxlOiBib29sZWFuIH0pID0+IHsKICBjb25zdCB7IGZ1bmRpbmcsIGxvYWRpbmdGdW5kaW5nLCBlcnJvckZ1bmRpbmcsIHJlZnJlc2hGdW5kaW5nLCBsYXN0VXBkYXRlZEZ1bmRpbmcgfSA9IHVzZVNvY2lhbFNlbnRpbWVudCgpOwogIGNvbnN0IGNvbHMgPSBpc01vYmlsZSA/ICc2MHB4IDFmciAxZnInIDogJzgwcHggMTAwcHggMTIwcHggMWZyIDgwcHgnOwogIGNvbnN0IGhkclN0ID0gdXNlTWVtbygoKSA9PiBPYmplY3QuZnJlZXplKHsgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy50ZXh0U2VjLCBsZXR0ZXJTcGFjaW5nOiAnMC4wOGVtJywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScgYXMgY29uc3QsIGZvbnRXZWlnaHQ6IDcwMCwgdGV4dEFsaWduOiAncmlnaHQnIGFzIGNvbnN0IH0pLCBbXSk7CiAgY29uc3QgbGFzdFN0ciA9IGxhc3RVcGRhdGVkRnVuZGluZyA/IG5ldyBEYXRlKGxhc3RVcGRhdGVkRnVuZGluZykudG9Mb2NhbGVUaW1lU3RyaW5nKCkgOiAn4oCUJzsKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAnMTJweCAxNnB4JywgYmFja2dyb3VuZDogJ3JnYmEoMCwyMzgsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoMCwyMzgsMjU1LDAuMSknLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgZm9udEZhbWlseTogRk9OVF9VSSwgZm9udFNpemU6ICcxM3B4JywgY29sb3I6IEMudGV4dFNlYywgbGluZUhlaWdodDogJzEuNicgfX0+CiAgICAgICAgPHN0cm9uZyBzdHlsZT17eyBjb2xvcjogQy5hY2NlbnQgfX0+RnVuZGluZyBSYXRlPC9zdHJvbmc+IOKAlCBQb3NpdGl2ZSA9IGxvbmdzIHBheSBzaG9ydHMgKGNyb3dkZWQgbG9uZyDihpIgYmVhcmlzaCBzaWduYWwpLiBOZWdhdGl2ZSA9IHNob3J0cyBwYXkgbG9uZ3MgKGNyb3dkZWQgc2hvcnQg4oaSIGJ1bGxpc2ggc2lnbmFsKS4gRGF0YTogQmluYW5jZSBGdXR1cmVzLgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT17eyBiYWNrZ3JvdW5kOiBDLmNhcmQsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgQy5ib3JkZXIsIGJvcmRlclJhZGl1czogJzEycHgnLCBvdmVyZmxvdzogJ2hpZGRlbicgYXMgY29uc3QgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGNvbHMsIGdhcDogJzEycHgnLCBwYWRkaW5nOiAnMTBweCAxNnB4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXJCb3R0b206ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA2KScgfX0+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyAuLi5oZHJTdCwgdGV4dEFsaWduOiAnbGVmdCcgYXMgY29uc3QgfX0+U3ltYm9sPC9zcGFuPgogICAgICAgICAgPHNwYW4gc3R5bGU9e2hkclN0fT5SYXRlICU8L3NwYW4+CiAgICAgICAgICB7IWlzTW9iaWxlICYmIDxzcGFuIHN0eWxlPXtoZHJTdH0+QW5udWFsaXplZDwvc3Bhbj59CiAgICAgICAgICB7IWlzTW9iaWxlICYmIDxzcGFuIHN0eWxlPXtoZHJTdH0+T0kgVVNEPC9zcGFuPn0KICAgICAgICAgIDxzcGFuIHN0eWxlPXtoZHJTdH0+U2lnbmFsPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIHtsb2FkaW5nRnVuZGluZwogICAgICAgICAgPyBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoXywgaSkgPT4gKAogICAgICAgICAgICAgIDxtb3Rpb24uZGl2IGtleT17aX0gc3R5bGU9e3sgcGFkZGluZzogJzEzcHggMTZweCcsIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICcxMnB4JyB9fSBhbmltYXRlPXt7IG9wYWNpdHk6IFswLjMsIDAuNiwgMC4zXSB9fSB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAxLjQsIHJlcGVhdDogSW5maW5pdHksIGRlbGF5OiBpICogMC4wNiB9fT4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6ICc2MHB4JywgaGVpZ2h0OiAnMTNweCcsIGJvcmRlclJhZGl1czogJzNweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDcpJyB9fSAvPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmbGV4OiAxLCBoZWlnaHQ6ICcxM3B4JywgYm9yZGVyUmFkaXVzOiAnM3B4JywgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNSknIH19IC8+CiAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PgogICAgICAgICAgICApKQogICAgICAgICAgOiBlcnJvckZ1bmRpbmcKICAgICAgICAgID8gPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAnMjBweCAxNnB4JywgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogQy5uZWdhdGl2ZSB9fT7imqAge2Vycm9yRnVuZGluZ308L2Rpdj4KICAgICAgICAgIDogZnVuZGluZy5tYXAoaXRlbSA9PiA8RnVuZGluZ1JvdyBrZXk9e2l0ZW0uc3ltYm9sfSBpdGVtPXtpdGVtfSBpc01vYmlsZT17aXNNb2JpbGV9IC8+KQogICAgICAgIH0KICAgICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6ICcxMHB4IDE2cHgnLCBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBib3JkZXJUb3A6ICcxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA0KScgfX0+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiBDLnRleHRTZWMgfX0+QXV0by1yZWZyZXNoIDYwcyDCtyBMYXN0OiB7bGFzdFN0cn08L3NwYW4+CiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3JlZnJlc2hGdW5kaW5nfSBzdHlsZT17eyBwYWRkaW5nOiAnNXB4IDEycHgnLCBib3JkZXJSYWRpdXM6ICc4cHgnLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgwLDIzOCwyNTUsMC4yKScsIGJhY2tncm91bmQ6ICdyZ2JhKDAsMjM4LDI1NSwwLjA2KScsIGNvbG9yOiBDLmFjY2VudCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjdXJzb3I6ICdwb2ludGVyJywgZm9udFdlaWdodDogNzAwIH19PuKGuyBSRUZSRVNIPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7CkZ1bmRpbmdPSS5kaXNwbGF5TmFtZSA9ICdGdW5kaW5nT0knOwoKLy8g4pSA4pSA4pSAIE1haW4gUGFnZSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKY29uc3QgSW50ZWxsaWdlbmNlOiBSZWFjdC5GQyA9ICgpID0+IHsKICBjb25zdCBbYWN0aXZlVGFiLCBzZXRBY3RpdmVUYWJdID0gdXNlU3RhdGU8VGFiPignTmV3cyBGZWVkJyk7CiAgY29uc3QgeyBpc01vYmlsZSB9ID0gdXNlQnJlYWtwb2ludCgpOwoKICBjb25zdCBwYWdlU3R5bGUgPSB1c2VNZW1vKCgpID0+IE9iamVjdC5mcmVlemUoewogICAgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnMjBweCcsCiAgICBwYWRkaW5nOiBpc01vYmlsZSA/ICcxNnB4JyA6ICcyNHB4JywgbWluSGVpZ2h0OiAnMTAwdmgnLCBiYWNrZ3JvdW5kOiBDLmJnLCBmb250RmFtaWx5OiBGT05UX1VJLAogIH0pLCBbaXNNb2JpbGVdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3BhZ2VTdHlsZX0+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIGZsZXhXcmFwOiAnd3JhcCcgYXMgY29uc3QsIGdhcDogJzEwcHgnIH19PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyBhcyBjb25zdCwgZ2FwOiAnNnB4JyB9fT4KICAgICAgICAgIDxoMSBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiBpc01vYmlsZSA/ICcxOHB4JyA6ICcyMnB4JywgZm9udFdlaWdodDogODAwLCBjb2xvcjogQy50ZXh0UHJpbWFyeSwgbGV0dGVyU3BhY2luZzogJy0wLjAyZW0nLCBtYXJnaW46IDAgfX0+TUFSS0VUIElOVEVMTElHRU5DRTwvaDE+CiAgICAgICAgICA8cCBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX1VJLCBmb250U2l6ZTogJzEzcHgnLCBjb2xvcjogQy50ZXh0U2VjLCBtYXJnaW46IDAgfX0+TmV3cyBmZWVkIMK3IFNlbnRpbWVudCBhbmFseXNpcyDCtyBOYXJyYXRpdmUgdHJhY2tpbmcgwrcgRnVuZGluZyByYXRlczwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8c3BhbiBzdHlsZT17eyBkaXNwbGF5OiAnaW5saW5lLWZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JywgcGFkZGluZzogJzNweCAxMHB4JywgYm9yZGVyUmFkaXVzOiAnMjBweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDM0LDI1NSwxNzAsMC4wOCknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgzNCwyNTUsMTcwLDAuMjUpJywgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogQy5wb3NpdGl2ZSwgZm9udFdlaWdodDogNzAwIH19PgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgd2lkdGg6ICc2cHgnLCBoZWlnaHQ6ICc2cHgnLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBiYWNrZ3JvdW5kOiBDLnBvc2l0aXZlLCBib3hTaGFkb3c6ICcwIDAgNnB4IHJnYmEoMzQsMjU1LDE3MCwwLjgpJywgZmxleFNocmluazogMCB9fSAvPgogICAgICAgICAgTElWRQogICAgICAgIDwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxUYWJCYXIgYWN0aXZlPXthY3RpdmVUYWJ9IG9uQ2hhbmdlPXtzZXRBY3RpdmVUYWJ9IC8+CiAgICAgIDxBbmltYXRlUHJlc2VuY2UgbW9kZT0id2FpdCI+CiAgICAgICAgPG1vdGlvbi5kaXYga2V5PXthY3RpdmVUYWJ9IGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeTogMTAgfX0gYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19IGV4aXQ9e3sgb3BhY2l0eTogMCwgeTogLTYgfX0gdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC4yIH19PgogICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ05ld3MgRmVlZCcgICAgICAgICYmIDxOZXdzRmVlZCAvPn0KICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdNYXJrZXQgU2VudGltZW50JyAmJiA8TWFya2V0U2VudGltZW50IC8+fQogICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ05hcnJhdGl2ZXMnICAgICAgICYmIDxOYXJyYXRpdmVzIC8+fQogICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ0Z1bmRpbmcgJiBPSScgICAgICYmIDxGdW5kaW5nT0kgaXNNb2JpbGU9e2lzTW9iaWxlfSAvPn0KICAgICAgICA8L21vdGlvbi5kaXY+CiAgICAgIDwvQW5pbWF0ZVByZXNlbmNlPgogICAgPC9kaXY+CiAgKTsKfTsKCkludGVsbGlnZW5jZS5kaXNwbGF5TmFtZSA9ICdJbnRlbGxpZ2VuY2UnOwpleHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKEludGVsbGlnZW5jZSk7Cg==";
const C_Alerts = "LyoqCiAqIEFsZXJ0cy50c3gg4oCUIFpFUsOYIE1FUklESUFOCiAqIFByaWNlIGFsZXJ0IGNlbnRlcjogYWJvdmUvYmVsb3cgdGFyZ2V0LCAlIGNoYW5nZSBwdW1wL2R1bXAsCiAqIHNvdW5kIG5vdGlmaWNhdGlvbiAoV2ViIEF1ZGlvIEFQSSksIGJyb3dzZXIgcHVzaCBub3RpZmljYXRpb24uCiAqIC0gbG9jYWxTdG9yYWdlIHBlcnNpc3RlbmNlIChrZXk6ICd6bV9hbGVydHNfdjInKQogKiAtIFJlYWwtdGltZSBwcmljZSBjaGVjayB2aWEgQ3J5cHRvQ29udGV4dCAoV1MtZmVkLCBubyBleHRyYSBmZXRjaCkKICogLSBSaW5nIGJ1ZmZlcjogbWF4IDEwMCB0cmlnZ2VyZWQgaGlzdG9yeQogKiAtIE9iamVjdC5mcmVlemUoKSBzZW11YSBzdGF0aWMgZGF0YQogKiAtIFJlYWN0Lm1lbW8gKyBkaXNwbGF5TmFtZSBzZW11YSBjb21wb25lbnRzCiAqIC0gdXNlUmVkdWNlciBmb3Igc3RhdGUsIHVzZUNhbGxiYWNrICsgdXNlTWVtbyBhbGwgaGFuZGxlcnMKICogLSByZ2JhKCkgb25seSwgemVybyBoc2woKSDinJMKICogLSBaZXJvIGNsYXNzTmFtZSDinJMg4oaQIHB1c2gyNiAoem0tZ2xhc3Mvem0tY29ybmVycy96bS1ncmFkaWVudCDihpIgaW5saW5lKQogKiAtIEhvb2sgLnRzIHBhdHRlcm46IHplcm8gSlNYIChsb2dpYyBvbmx5IGluIGhlbHBlcnMpCiAqIC0gWmVybyBNYXRoLnJhbmRvbSgpIOKGkiBkZXRlcm1pbmlzdGljSml0dGVyCiAqIC0gWmVybyB0ZW1wbGF0ZSBsaXRlcmFscyBpbiBKU1ggYXR0cnMKICogLSBQdXJlIFNWRyBpY29ucyB3aGVyZSBuZWVkZWQsIHplcm8gcmVjaGFydHMKICogLSB3aWxsLWNoYW5nZTogdHJhbnNmb3JtIG9uIGFuaW1hdGVkIGVsZW1lbnRzCiAqLwoKaW1wb3J0IHsKICBtZW1vLCB1c2VSZWR1Y2VyLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLAp9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlQ3J5cHRvIH0gZnJvbSAnQC9jb250ZXh0cy9DcnlwdG9Db250ZXh0JzsKaW1wb3J0IHsgZm9ybWF0UHJpY2UsIGZvcm1hdENoYW5nZSwgZm9ybWF0Q29tcGFjdCwgZGV0ZXJtaW5pc3RpY0ppdHRlciB9IGZyb20gJ0AvbGliL2Zvcm1hdHRlcnMnOwppbXBvcnQgdHlwZSB7IENyeXB0b0Fzc2V0IH0gZnJvbSAnQC9saWIvZm9ybWF0dGVycyc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwppbXBvcnQgewogIEJlbGwsIEJlbGxPZmYsIFBsdXMsIFRyYXNoMiwgVm9sdW1lMiwgVm9sdW1lWCwgQ2hlY2tDaXJjbGUyLAogIFRyZW5kaW5nVXAsIFRyZW5kaW5nRG93biwgQWN0aXZpdHksIEFsZXJ0VHJpYW5nbGUsIFphcCwgWCwKICBTZXR0aW5ncywgSGlzdG9yeSwgQ2hldnJvbkRvd24sIENoZXZyb25VcCwKfSBmcm9tICdsdWNpZGUtcmVhY3QnOwoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CgovLyDilIDilIDilIAgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgp0eXBlIEFsZXJ0VHlwZSA9ICdhYm92ZScgfCAnYmVsb3cnIHwgJ2NoYW5nZV91cCcgfCAnY2hhbmdlX2Rvd24nOwp0eXBlIEFsZXJ0U3RhdHVzID0gJ2FjdGl2ZScgfCAndHJpZ2dlcmVkJyB8ICdwYXVzZWQnOwoKaW50ZXJmYWNlIFByaWNlQWxlcnQgewogIGlkOiBzdHJpbmc7CiAgc3ltYm9sOiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuICdidGMnCiAgbmFtZTogc3RyaW5nOyAgICAgICAgICAgICAvLyBlLmcuICdCaXRjb2luJwogIGltYWdlPzogc3RyaW5nOwogIHR5cGU6IEFsZXJ0VHlwZTsKICB0YXJnZXQ6IG51bWJlcjsgICAgICAgICAgIC8vIHByaWNlIG9yICUgZGVwZW5kaW5nIG9uIHR5cGUKICBjcmVhdGVkQXQ6IG51bWJlcjsgICAgICAgIC8vIG1zIGVwb2NoCiAgc3RhdHVzOiBBbGVydFN0YXR1czsKICB0cmlnZ2VyZWRBdD86IG51bWJlcjsKICB0cmlnZ2VyZWRQcmljZT86IG51bWJlcjsKICBub3RlPzogc3RyaW5nOwogIHNvdW5kOiBib29sZWFuOwogIHB1c2g6IGJvb2xlYW47Cn0KCmludGVyZmFjZSBUcmlnZ2VyZWRMb2cgewogIGlkOiBzdHJpbmc7CiAgYWxlcnRJZDogc3RyaW5nOwogIHN5bWJvbDogc3RyaW5nOwogIG5hbWU6IHN0cmluZzsKICBpbWFnZT86IHN0cmluZzsKICB0eXBlOiBBbGVydFR5cGU7CiAgdGFyZ2V0OiBudW1iZXI7CiAgdHJpZ2dlcmVkUHJpY2U6IG51bWJlcjsKICB0cmlnZ2VyZWRBdDogbnVtYmVyOwp9CgppbnRlcmZhY2UgQWxlcnRzU3RhdGUgewogIGFsZXJ0czogUHJpY2VBbGVydFtdOwogIGxvZzogVHJpZ2dlcmVkTG9nW107CiAgc291bmRFbmFibGVkOiBib29sZWFuOwogIHB1c2hFbmFibGVkOiBib29sZWFuOwp9Cgp0eXBlIEFsZXJ0c0FjdGlvbiA9CiAgfCB7IHR5cGU6ICdBREQnOyBhbGVydDogUHJpY2VBbGVydCB9CiAgfCB7IHR5cGU6ICdSRU1PVkUnOyBpZDogc3RyaW5nIH0KICB8IHsgdHlwZTogJ1RPR0dMRV9QQVVTRSc7IGlkOiBzdHJpbmcgfQogIHwgeyB0eXBlOiAnVFJJR0dFUic7IGlkOiBzdHJpbmc7IHByaWNlOiBudW1iZXI7IGxvZ0VudHJ5OiBUcmlnZ2VyZWRMb2cgfQogIHwgeyB0eXBlOiAnQ0xFQVJfTE9HJyB9CiAgfCB7IHR5cGU6ICdUT0dHTEVfU09VTkQnIH0KICB8IHsgdHlwZTogJ1RPR0dMRV9QVVNIJyB9CiAgfCB7IHR5cGU6ICdMT0FEJzsgc3RhdGU6IEFsZXJ0c1N0YXRlIH07CgovLyDilIDilIDilIAgQ29uc3RhbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgTFNfS0VZID0gJ3ptX2FsZXJ0c192Mic7CmNvbnN0IE1BWF9MT0cgPSAxMDA7CmNvbnN0IE1BWF9BTEVSVFMgPSA1MDsKCmNvbnN0IEFMRVJUX1RZUEVfQ09ORklHID0gT2JqZWN0LmZyZWV6ZSh7CiAgYWJvdmU6ICAgICAgeyBsYWJlbDogJ1ByaWNlIEFib3ZlJywgICBpY29uOiBUcmVuZGluZ1VwLCAgIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDEpJywgICBiZzogJ3JnYmEoNTIsMjExLDE1MywwLjEwKScsICAgYm9yZGVyOiAncmdiYSg1MiwyMTEsMTUzLDAuMjIpJyB9LAogIGJlbG93OiAgICAgIHsgbGFiZWw6ICdQcmljZSBCZWxvdycsICAgaWNvbjogVHJlbmRpbmdEb3duLCBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMSknLCAgYmc6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuMTApJywgIGJvcmRlcjogJ3JnYmEoMjUxLDExMywxMzMsMC4yMiknIH0sCiAgY2hhbmdlX3VwOiAgeyBsYWJlbDogJyUgUHVtcCBBbGVydCcsICBpY29uOiBaYXAsICAgICAgICAgIGNvbG9yOiAncmdiYSgzNCwyMTEsMjM4LDEpJywgICBiZzogJ3JnYmEoMzQsMjExLDIzOCwwLjEwKScsICAgYm9yZGVyOiAncmdiYSgzNCwyMTEsMjM4LDAuMjIpJyB9LAogIGNoYW5nZV9kb3duOnsgbGFiZWw6ICclIER1bXAgQWxlcnQnLCAgaWNvbjogQWxlcnRUcmlhbmdsZSxjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwxKScsICAgYmc6ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMCknLCAgIGJvcmRlcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjIyKScgfSwKfSBhcyBjb25zdCk7Cgpjb25zdCBTVEFUVVNfQ09ORklHID0gT2JqZWN0LmZyZWV6ZSh7CiAgYWN0aXZlOiAgICB7IGxhYmVsOiAnQWN0aXZlJywgICAgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknLCAgYmc6ICdyZ2JhKDUyLDIxMSwxNTMsMC4xMCknICB9LAogIHRyaWdnZXJlZDogeyBsYWJlbDogJ1RyaWdnZXJlZCcsIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJywgYmc6ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMCknICB9LAogIHBhdXNlZDogICAgeyBsYWJlbDogJ1BhdXNlZCcsICAgIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjYpJywgYmc6ICdyZ2JhKDE0OCwxNjMsMTg0LDAuMDgpJyB9LAp9IGFzIGNvbnN0KTsKCi8vIOKUgOKUgOKUgCBIZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZnVuY3Rpb24gbG9hZEZyb21MUygpOiBBbGVydHNTdGF0ZSB8IG51bGwgewogIHRyeSB7CiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMU19LRVkpOwogICAgaWYgKCFyYXcpIHJldHVybiBudWxsOwogICAgcmV0dXJuIEpTT04ucGFyc2UocmF3KSBhcyBBbGVydHNTdGF0ZTsKICB9IGNhdGNoIHsKICAgIHJldHVybiBudWxsOwogIH0KfQoKZnVuY3Rpb24gc2F2ZVRvTFMoc3RhdGU6IEFsZXJ0c1N0YXRlKTogdm9pZCB7CiAgdHJ5IHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExTX0tFWSwgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIGdlbklkKGF0dGVtcHQ6IG51bWJlcik6IHN0cmluZyB7CiAgY29uc3Qgc2VlZCA9IGRldGVybWluaXN0aWNKaXR0ZXIoYXR0ZW1wdCk7CiAgcmV0dXJuICdhJyArIERhdGUubm93KCkudG9TdHJpbmcoMzYpICsgc2VlZC50b1N0cmluZygxNik7Cn0KCi8vIFdlYiBBdWRpbyBBUEkg4oCUIHN5bnRoZXNpemUgYWxlcnQgYmVlcCAobm8gZXh0ZXJuYWwgc291bmQgZmlsZSBuZWVkZWQpCmZ1bmN0aW9uIHBsYXlBbGVydFNvdW5kKHR5cGU6IEFsZXJ0VHlwZSk6IHZvaWQgewogIHRyeSB7CiAgICBjb25zdCBjdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7CiAgICBjb25zdCBvc2MgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgY29uc3QgZ2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7CiAgICBvc2MuY29ubmVjdChnYWluKTsKICAgIGdhaW4uY29ubmVjdChjdHguZGVzdGluYXRpb24pOwoKICAgIGlmICh0eXBlID09PSAnYWJvdmUnIHx8IHR5cGUgPT09ICdjaGFuZ2VfdXAnKSB7CiAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODgwLCBjdHguY3VycmVudFRpbWUpOwogICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMTMyMCwgY3R4LmN1cnJlbnRUaW1lICsgMC4xKTsKICAgIH0gZWxzZSB7CiAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNjYwLCBjdHguY3VycmVudFRpbWUpOwogICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoNDQwLCBjdHguY3VycmVudFRpbWUgKyAwLjEpOwogICAgfQogICAgb3NjLnR5cGUgPSAnc2luZSc7CiAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xOCwgY3R4LmN1cnJlbnRUaW1lKTsKICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCBjdHguY3VycmVudFRpbWUgKyAwLjM1KTsKICAgIG9zYy5zdGFydChjdHguY3VycmVudFRpbWUpOwogICAgb3NjLnN0b3AoY3R4LmN1cnJlbnRUaW1lICsgMC4zNSk7CgogICAgLy8gU2Vjb25kIHRvbmUKICAgIGNvbnN0IG9zYzIgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgY29uc3QgZ2FpbjIgPSBjdHguY3JlYXRlR2FpbigpOwogICAgb3NjMi5jb25uZWN0KGdhaW4yKTsKICAgIGdhaW4yLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTsKICAgIG9zYzIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHR5cGUgPT09ICdhYm92ZScgfHwgdHlwZSA9PT0gJ2NoYW5nZV91cCcgPyAxMzIwIDogNDQwLCBjdHguY3VycmVudFRpbWUgKyAwLjEyKTsKICAgIG9zYzIudHlwZSA9ICdzaW5lJzsKICAgIGdhaW4yLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xMiwgY3R4LmN1cnJlbnRUaW1lICsgMC4xMik7CiAgICBnYWluMi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIGN0eC5jdXJyZW50VGltZSArIDAuNDUpOwogICAgb3NjMi5zdGFydChjdHguY3VycmVudFRpbWUgKyAwLjEyKTsKICAgIG9zYzIuc3RvcChjdHguY3VycmVudFRpbWUgKyAwLjQ1KTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIHNlbmRQdXNoTm90aWZpY2F0aW9uKGFsZXJ0OiBQcmljZUFsZXJ0LCBwcmljZTogbnVtYmVyKTogdm9pZCB7CiAgaWYgKCEoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSB8fCBOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gJ2dyYW50ZWQnKSByZXR1cm47CiAgdHJ5IHsKICAgIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW2FsZXJ0LnR5cGVdOwogICAgY29uc3QgYm9keSA9IGFsZXJ0LnR5cGUgPT09ICdhYm92ZScgfHwgYWxlcnQudHlwZSA9PT0gJ2JlbG93JwogICAgICA/IGFsZXJ0LnN5bWJvbC50b1VwcGVyQ2FzZSgpICsgJyBoaXQgJyArIGZvcm1hdFByaWNlKHByaWNlKSArICcgKHRhcmdldDogJyArIGZvcm1hdFByaWNlKGFsZXJ0LnRhcmdldCkgKyAnKScKICAgICAgOiBhbGVydC5zeW1ib2wudG9VcHBlckNhc2UoKSArICcgY2hhbmdlZCAnICsgZm9ybWF0Q2hhbmdlKGFsZXJ0LnRhcmdldCkgKyAnIChub3c6ICcgKyBmb3JtYXRDaGFuZ2UocHJpY2UpICsgJyknOwogICAgbmV3IE5vdGlmaWNhdGlvbignWkVSw5ggTUVSSURJQU4g4oCUICcgKyBjZmcubGFiZWwsIHsKICAgICAgYm9keSwKICAgICAgaWNvbjogYWxlcnQuaW1hZ2UsCiAgICAgIHRhZzogYWxlcnQuaWQsCiAgICAgIHNpbGVudDogZmFsc2UsCiAgICB9KTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIGNoZWNrQWxlcnQoYWxlcnQ6IFByaWNlQWxlcnQsIGFzc2V0OiBDcnlwdG9Bc3NldCk6IGJvb2xlYW4gewogIGlmIChhbGVydC5zdGF0dXMgIT09ICdhY3RpdmUnKSByZXR1cm4gZmFsc2U7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdhYm92ZScpICAgICAgIHJldHVybiBhc3NldC5wcmljZSA+PSBhbGVydC50YXJnZXQ7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdiZWxvdycpICAgICAgIHJldHVybiBhc3NldC5wcmljZSA8PSBhbGVydC50YXJnZXQ7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdjaGFuZ2VfdXAnKSAgIHJldHVybiBhc3NldC5jaGFuZ2UyNGggPj0gYWxlcnQudGFyZ2V0OwogIGlmIChhbGVydC50eXBlID09PSAnY2hhbmdlX2Rvd24nKSByZXR1cm4gYXNzZXQuY2hhbmdlMjRoIDw9IC1NYXRoLmFicyhhbGVydC50YXJnZXQpOwogIHJldHVybiBmYWxzZTsKfQoKLy8g4pSA4pSA4pSAIFJlZHVjZXIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBJTklUSUFMX1NUQVRFOiBBbGVydHNTdGF0ZSA9IE9iamVjdC5mcmVlemUoewogIGFsZXJ0czogW10sCiAgbG9nOiBbXSwKICBzb3VuZEVuYWJsZWQ6IHRydWUsCiAgcHVzaEVuYWJsZWQ6IGZhbHNlLAp9IGFzIEFsZXJ0c1N0YXRlKTsKCmZ1bmN0aW9uIHJlZHVjZXIoc3RhdGU6IEFsZXJ0c1N0YXRlLCBhY3Rpb246IEFsZXJ0c0FjdGlvbik6IEFsZXJ0c1N0YXRlIHsKICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7CiAgICBjYXNlICdMT0FEJzoKICAgICAgcmV0dXJuIGFjdGlvbi5zdGF0ZTsKICAgIGNhc2UgJ0FERCc6IHsKICAgICAgaWYgKHN0YXRlLmFsZXJ0cy5sZW5ndGggPj0gTUFYX0FMRVJUUykgcmV0dXJuIHN0YXRlOwogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgYWxlcnRzOiBbYWN0aW9uLmFsZXJ0LCAuLi5zdGF0ZS5hbGVydHNdIH07CiAgICB9CiAgICBjYXNlICdSRU1PVkUnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgYWxlcnRzOiBzdGF0ZS5hbGVydHMuZmlsdGVyKGEgPT4gYS5pZCAhPT0gYWN0aW9uLmlkKSB9OwogICAgY2FzZSAnVE9HR0xFX1BBVVNFJzoKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5zdGF0ZSwKICAgICAgICBhbGVydHM6IHN0YXRlLmFsZXJ0cy5tYXAoYSA9PgogICAgICAgICAgYS5pZCA9PT0gYWN0aW9uLmlkCiAgICAgICAgICAgID8geyAuLi5hLCBzdGF0dXM6IGEuc3RhdHVzID09PSAncGF1c2VkJyA/ICdhY3RpdmUnIDogJ3BhdXNlZCcgfQogICAgICAgICAgICA6IGEKICAgICAgICApLAogICAgICB9OwogICAgY2FzZSAnVFJJR0dFUic6IHsKICAgICAgY29uc3QgbmV3TG9nID0gW2FjdGlvbi5sb2dFbnRyeSwgLi4uc3RhdGUubG9nXS5zbGljZSgwLCBNQVhfTE9HKTsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5zdGF0ZSwKICAgICAgICBhbGVydHM6IHN0YXRlLmFsZXJ0cy5tYXAoYSA9PgogICAgICAgICAgYS5pZCA9PT0gYWN0aW9uLmlkCiAgICAgICAgICAgID8geyAuLi5hLCBzdGF0dXM6ICd0cmlnZ2VyZWQnLCB0cmlnZ2VyZWRBdDogRGF0ZS5ub3coKSwgdHJpZ2dlcmVkUHJpY2U6IGFjdGlvbi5wcmljZSB9CiAgICAgICAgICAgIDogYQogICAgICAgICksCiAgICAgICAgbG9nOiBuZXdMb2csCiAgICAgIH07CiAgICB9CiAgICBjYXNlICdDTEVBUl9MT0cnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9nOiBbXSB9OwogICAgY2FzZSAnVE9HR0xFX1NPVU5EJzoKICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHNvdW5kRW5hYmxlZDogIXN0YXRlLnNvdW5kRW5hYmxlZCB9OwogICAgY2FzZSAnVE9HR0xFX1BVU0gnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgcHVzaEVuYWJsZWQ6ICFzdGF0ZS5wdXNoRW5hYmxlZCB9OwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIHN0YXRlOwogIH0KfQoKLy8g4pSA4pSA4pSAIFN1Yi1jb21wb25lbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgV3NTdGF0dXNEb3QgPSBtZW1vKCh7IHN0YXR1cyB9OiB7IHN0YXR1czogc3RyaW5nIH0pID0+IHsKICBjb25zdCBjb2xvciA9IHN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcKICAgID8gJ3JnYmEoNTIsMjExLDE1MywxKScKICAgIDogc3RhdHVzID09PSAncmVjb25uZWN0aW5nJwogICAgPyAncmdiYSgyNTEsMTkxLDM2LDEpJwogICAgOiAncmdiYSgyNTEsMTEzLDEzMywxKSc7CiAgcmV0dXJuICgKICAgIDxzcGFuCiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiA2LCBoZWlnaHQ6IDYsIGJvcmRlclJhZGl1czogJzUwJScsIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCBiYWNrZ3JvdW5kOiBjb2xvciwgYm94U2hhZG93OiAnMCAwIDVweCAnICsgY29sb3IsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19CiAgICAvPgogICk7Cn0pOwpXc1N0YXR1c0RvdC5kaXNwbGF5TmFtZSA9ICdXc1N0YXR1c0RvdCc7CgovLyDilIDilIDilIAgQWRkIEFsZXJ0IEZvcm0g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQWRkQWxlcnRGb3JtUHJvcHMgewogIGFzc2V0czogQ3J5cHRvQXNzZXRbXTsKICBvbkFkZDogKGFsZXJ0OiBQcmljZUFsZXJ0KSA9PiB2b2lkOwogIG9uQ2xvc2U6ICgpID0+IHZvaWQ7CiAgaWRDb3VudGVyOiBudW1iZXI7Cn0KCmNvbnN0IEFkZEFsZXJ0Rm9ybSA9IG1lbW8oKHsgYXNzZXRzLCBvbkFkZCwgb25DbG9zZSwgaWRDb3VudGVyIH06IEFkZEFsZXJ0Rm9ybVByb3BzKSA9PiB7CiAgY29uc3QgW3N5bWJvbCwgc2V0U3ltYm9sXSA9IHVzZVN0YXRlKCdidGMnKTsKICBjb25zdCBbYWxlcnRUeXBlLCBzZXRBbGVydFR5cGVdID0gdXNlU3RhdGU8QWxlcnRUeXBlPignYWJvdmUnKTsKICBjb25zdCBbdGFyZ2V0LCBzZXRUYXJnZXRdID0gdXNlU3RhdGUoJycpOwogIGNvbnN0IFtub3RlLCBzZXROb3RlXSA9IHVzZVN0YXRlKCcnKTsKICBjb25zdCBbc291bmQsIHNldFNvdW5kXSA9IHVzZVN0YXRlKHRydWUpOwogIGNvbnN0IFtwdXNoLCBzZXRQdXNoXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKCcnKTsKCiAgY29uc3Qgc2VsZWN0ZWRBc3NldCA9IHVzZU1lbW8oCiAgICAoKSA9PiBhc3NldHMuZmluZChhID0+IGEuc3ltYm9sLnRvTG93ZXJDYXNlKCkgPT09IHN5bWJvbCkgPz8gYXNzZXRzWzBdLAogICAgW2Fzc2V0cywgc3ltYm9sXQogICk7CgogIGNvbnN0IGlzUGVyY2VudCA9IGFsZXJ0VHlwZSA9PT0gJ2NoYW5nZV91cCcgfHwgYWxlcnRUeXBlID09PSAnY2hhbmdlX2Rvd24nOwogIGNvbnN0IHBsYWNlaG9sZGVyID0gaXNQZXJjZW50ID8gJ2UuZy4gNSAoZm9yIDUlKScgOiBzZWxlY3RlZEFzc2V0ID8gJ2UuZy4gJyArIE1hdGgucm91bmQoc2VsZWN0ZWRBc3NldC5wcmljZSAqIDEuMDUpIDogJ1RhcmdldCBwcmljZSc7CgogIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQodGFyZ2V0KTsKICAgIGlmICghaXNGaW5pdGUodmFsKSB8fCB2YWwgPD0gMCkgeyBzZXRFcnJvcignVGFyZ2V0IHRpZGFrIHZhbGlkIGJybycpOyByZXR1cm47IH0KICAgIGlmICghc2VsZWN0ZWRBc3NldCkgeyBzZXRFcnJvcignUGlsaWggYXNldCBkdWx1Jyk7IHJldHVybjsgfQogICAgc2V0RXJyb3IoJycpOwogICAgY29uc3QgYWxlcnQ6IFByaWNlQWxlcnQgPSB7CiAgICAgIGlkOiBnZW5JZChpZENvdW50ZXIpLAogICAgICBzeW1ib2w6IHNlbGVjdGVkQXNzZXQuc3ltYm9sLnRvTG93ZXJDYXNlKCksCiAgICAgIG5hbWU6IHNlbGVjdGVkQXNzZXQubmFtZSwKICAgICAgaW1hZ2U6IHNlbGVjdGVkQXNzZXQuaW1hZ2UsCiAgICAgIHR5cGU6IGFsZXJ0VHlwZSwKICAgICAgdGFyZ2V0OiB2YWwsCiAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSwKICAgICAgc3RhdHVzOiAnYWN0aXZlJywKICAgICAgbm90ZTogbm90ZS50cmltKCkgfHwgdW5kZWZpbmVkLAogICAgICBzb3VuZCwKICAgICAgcHVzaCwKICAgIH07CiAgICBvbkFkZChhbGVydCk7CiAgICBvbkNsb3NlKCk7CiAgfSwgW3RhcmdldCwgc2VsZWN0ZWRBc3NldCwgYWxlcnRUeXBlLCBub3RlLCBzb3VuZCwgcHVzaCwgaWRDb3VudGVyLCBvbkFkZCwgb25DbG9zZV0pOwoKICBjb25zdCB0b3BBc3NldHMgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5zbGljZSgwLCAzMCksIFthc3NldHNdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYKICAgICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdmaXhlZCcsIGluc2V0OiAwLCB6SW5kZXg6IDIwMCwgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBiYWNrZ3JvdW5kOiAncmdiYSg1LDUsMTQsMC44MiknLCBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoMTBweCknIH19CiAgICAgIG9uQ2xpY2s9e2UgPT4geyBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkgb25DbG9zZSgpOyB9fQogICAgPgogICAgICA8ZGl2CiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBtYXhXaWR0aDogNDQ4LCBtYXJnaW46ICcwIDE2cHgnLCBwYWRkaW5nOiAyNCwgYmFja2dyb3VuZDogJ3JnYmEoOCw4LDI0LDAuOTgpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE4KScsIGJvcmRlclJhZGl1czogJzEycHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fQogICAgICA+CiAgICAgICAgey8qIEhlYWRlciAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIG1hcmdpbkJvdHRvbTogMjAgfX0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCB9fT4KICAgICAgICAgICAgPEJlbGwgc2l6ZT17MTZ9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDEpJyB9fSAvPgogICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNzAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICAgIE5ldyBBbGVydAogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX0KICAgICAgICAgICAgYXJpYS1sYWJlbD0iQ2xvc2UgbmV3IGFsZXJ0IGRpYWxvZyIKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogNCwgYm9yZGVyUmFkaXVzOiA4LCB0cmFuc2l0aW9uOiAnY29sb3IgMC4xNXMsYmFja2dyb3VuZCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLCBib3JkZXI6ICdub25lJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPFggc2l6ZT17MTZ9IC8+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIEFzc2V0IFNlbGVjdCAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMTYgfX0+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNWVtJywgbWFyZ2luQm90dG9tOiA2LCBkaXNwbGF5OiAnYmxvY2snLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgQXNzZXQKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgIHZhbHVlPXtzeW1ib2x9CiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFN5bWJvbChlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAge3RvcEFzc2V0cy5tYXAoYSA9PiAoCiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2EuaWR9IHZhbHVlPXthLnN5bWJvbC50b0xvd2VyQ2FzZSgpfSBzdHlsZT17eyBiYWNrZ3JvdW5kOiAncmdiYSg4LDgsMjQsMSknIH19PgogICAgICAgICAgICAgICAge2Euc3ltYm9sLnRvVXBwZXJDYXNlKCl9IOKAlCB7YS5uYW1lfQogICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICApKX0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAge3NlbGVjdGVkQXNzZXQgJiYgKAogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogNCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgIEN1cnJlbnQ6IHtmb3JtYXRQcmljZShzZWxlY3RlZEFzc2V0LnByaWNlKX0gwrcge2Zvcm1hdENoYW5nZShzZWxlY3RlZEFzc2V0LmNoYW5nZTI0aCl9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKX0KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIEFsZXJ0IFR5cGUgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDE2IH19PgogICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJywgbGV0dGVyU3BhY2luZzogJzAuMDVlbScsIG1hcmdpbkJvdHRvbTogNiwgZGlzcGxheTogJ2Jsb2NrJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgIEFsZXJ0IFR5cGUKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzFmciAxZnInLCBnYXA6IDggfX0+CiAgICAgICAgICAgIHsoT2JqZWN0LmtleXMoQUxFUlRfVFlQRV9DT05GSUcpIGFzIEFsZXJ0VHlwZVtdKS5tYXAodCA9PiB7CiAgICAgICAgICAgICAgY29uc3QgY2ZnID0gQUxFUlRfVFlQRV9DT05GSUdbdF07CiAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gYWxlcnRUeXBlID09PSB0OwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICAgIGtleT17dH0KICAgICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBbGVydFR5cGUodCl9CiAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17YWN0aXZlfQogICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnU2VsZWN0IGFsZXJ0IHR5cGU6ICcgKyBjZmcubGFiZWx9CiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCwgcGFkZGluZzogJzhweCAxMnB4JywgYm9yZGVyUmFkaXVzOiA4LCB0ZXh0QWxpZ246ICdsZWZ0JywgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiBhY3RpdmUgPyBjZmcuYmcgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjAzKScsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgKGFjdGl2ZSA/IGNmZy5ib3JkZXIgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScpLCBjb2xvcjogYWN0aXZlID8gY2ZnLmNvbG9yIDogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19CiAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgIDxjZmcuaWNvbiBzaXplPXsxMn0gLz4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+e2NmZy5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogVGFyZ2V0ICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgIDxsYWJlbCBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjA1ZW0nLCBtYXJnaW5Cb3R0b206IDYsIGRpc3BsYXk6ICdibG9jaycsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICB7aXNQZXJjZW50ID8gJ0NoYW5nZSAlIFRhcmdldCcgOiAnUHJpY2UgVGFyZ2V0IChVU0QpJ30KICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgdHlwZT0ibnVtYmVyIgogICAgICAgICAgICB2YWx1ZT17dGFyZ2V0fQogICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRUYXJnZXQoZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgIC8+CiAgICAgICAgICB7ZXJyb3IgJiYgKAogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogNCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1uZWdhdGl2ZSknIH19PntlcnJvcn08L2Rpdj4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBOb3RlICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgIDxsYWJlbCBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjA1ZW0nLCBtYXJnaW5Cb3R0b206IDYsIGRpc3BsYXk6ICdibG9jaycsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICBOb3RlIChvcHRpb25hbCkKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgdHlwZT0idGV4dCIKICAgICAgICAgICAgdmFsdWU9e25vdGV9CiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldE5vdGUoZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICBwbGFjZWhvbGRlcj0iZS5nLiBSZXNpc3RhbmNlIGxldmVsLCBEQ0EgcG9pbnQuLi4iCiAgICAgICAgICAgIG1heExlbmd0aD17ODB9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgIC8+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBOb3RpZmljYXRpb24gT3B0aW9ucyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAxMiwgbWFyZ2luQm90dG9tOiAyMCB9fT4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U291bmQocyA9PiAhcyl9CiAgICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtzb3VuZH0KICAgICAgICAgICAgYXJpYS1sYWJlbD17c291bmQgPyAnRGlzYWJsZSBzb3VuZCBub3RpZmljYXRpb24nIDogJ0VuYWJsZSBzb3VuZCBub3RpZmljYXRpb24nfQogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDgsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZmxleDogMSwgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiBzb3VuZCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXI6ICcxcHggc29saWQgJyArIChzb3VuZCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4yNSknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNiknKSwgY29sb3I6IHNvdW5kID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIHtzb3VuZCA/IDxWb2x1bWUyIHNpemU9ezEzfSAvPiA6IDxWb2x1bWVYIHNpemU9ezEzfSAvPn0KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+U291bmQ8L3NwYW4+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0UHVzaChwID0+ICFwKX0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3B1c2h9CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e3B1c2ggPyAnRGlzYWJsZSBwdXNoIG5vdGlmaWNhdGlvbicgOiAnRW5hYmxlIHB1c2ggbm90aWZpY2F0aW9uJ30KICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA4LCBwYWRkaW5nOiAnOHB4IDEycHgnLCBib3JkZXJSYWRpdXM6IDgsIGZsZXg6IDEsIHRyYW5zaXRpb246ICdhbGwgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogcHVzaCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMTApJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAocHVzaCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMjUpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyksIGNvbG9yOiBwdXNoID8gJ3JnYmEoMTY3LDEzOSwyNTAsMSknIDogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICB7cHVzaCA/IDxCZWxsIHNpemU9ezEzfSAvPiA6IDxCZWxsT2ZmIHNpemU9ezEzfSAvPn0KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+UHVzaDwvc3Bhbj4KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogU3VibWl0ICovfQogICAgICAgIDxidXR0b24KICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN1Ym1pdH0KICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgIGFyaWEtbGFiZWw9IkNyZWF0ZSBuZXcgcHJpY2UgYWxlcnQiCiAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBwYWRkaW5nOiAnMTBweCAwJywgYm9yZGVyUmFkaXVzOiA4LCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNjAwLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC4xOCknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMzApJywgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknIH19CiAgICAgICAgPgogICAgICAgICAgU2V0IEFsZXJ0CiAgICAgICAgPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7CkFkZEFsZXJ0Rm9ybS5kaXNwbGF5TmFtZSA9ICdBZGRBbGVydEZvcm0nOwoKLy8g4pSA4pSA4pSAIEFsZXJ0IENhcmQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQWxlcnRDYXJkUHJvcHMgewogIGFsZXJ0OiBQcmljZUFsZXJ0OwogIGN1cnJlbnRQcmljZT86IG51bWJlcjsKICBjdXJyZW50Q2hhbmdlPzogbnVtYmVyOwogIG9uUmVtb3ZlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDsKICBvblRvZ2dsZVBhdXNlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDsKfQoKY29uc3QgQWxlcnRDYXJkID0gbWVtbygoeyBhbGVydCwgY3VycmVudFByaWNlLCBjdXJyZW50Q2hhbmdlLCBvblJlbW92ZSwgb25Ub2dnbGVQYXVzZSB9OiBBbGVydENhcmRQcm9wcykgPT4gewogIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW2FsZXJ0LnR5cGVdOwogIGNvbnN0IHNDZmcgPSBTVEFUVVNfQ09ORklHW2FsZXJ0LnN0YXR1c107CiAgY29uc3QgaXNQZXJjZW50ID0gYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV91cCcgfHwgYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV9kb3duJzsKCiAgLy8gUHJvZ3Jlc3MgdG93YXJkIHRhcmdldAogIGNvbnN0IHByb2dyZXNzID0gdXNlTWVtbygoKSA9PiB7CiAgICBpZiAoIWN1cnJlbnRQcmljZSAmJiAhY3VycmVudENoYW5nZSkgcmV0dXJuIG51bGw7CiAgICBpZiAoaXNQZXJjZW50ICYmIGN1cnJlbnRDaGFuZ2UgIT09IHVuZGVmaW5lZCkgewogICAgICBjb25zdCBwY3QgPSBNYXRoLm1pbihNYXRoLmFicyhjdXJyZW50Q2hhbmdlKSAvIGFsZXJ0LnRhcmdldCwgMSk7CiAgICAgIHJldHVybiB7IHBjdCwgY3VycmVudDogY3VycmVudENoYW5nZSB9OwogICAgfQogICAgaWYgKCFpc1BlcmNlbnQgJiYgY3VycmVudFByaWNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgY29uc3QgYmFzZSA9IGFsZXJ0LnR5cGUgPT09ICdhYm92ZScKICAgICAgICA/IE1hdGgubWluKGN1cnJlbnRQcmljZSAvIGFsZXJ0LnRhcmdldCwgMSkKICAgICAgICA6IE1hdGgubWluKGFsZXJ0LnRhcmdldCAvIGN1cnJlbnRQcmljZSwgMSk7CiAgICAgIHJldHVybiB7IHBjdDogTWF0aC5tYXgoMCwgTWF0aC5taW4oYmFzZSwgMSkpLCBjdXJyZW50OiBjdXJyZW50UHJpY2UgfTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0sIFthbGVydC50eXBlLCBhbGVydC50YXJnZXQsIGN1cnJlbnRQcmljZSwgY3VycmVudENoYW5nZSwgaXNQZXJjZW50XSk7CgogIGNvbnN0IGhhbmRsZVJlbW92ZSA9IHVzZUNhbGxiYWNrKCgpID0+IG9uUmVtb3ZlKGFsZXJ0LmlkKSwgW2FsZXJ0LmlkLCBvblJlbW92ZV0pOwogIGNvbnN0IGhhbmRsZVBhdXNlID0gdXNlQ2FsbGJhY2soKCkgPT4gb25Ub2dnbGVQYXVzZShhbGVydC5pZCksIFthbGVydC5pZCwgb25Ub2dnbGVQYXVzZV0pOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17eyBwYWRkaW5nOiAxNiwgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGJhY2tncm91bmQ6IGFsZXJ0LnN0YXR1cyA9PT0gJ3RyaWdnZXJlZCcgPyBjZmcuYmcgOiAndmFyKC0tem0tZ2xhc3MtYmcpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoYWxlcnQuc3RhdHVzID09PSAndHJpZ2dlcmVkJyA/IGNmZy5ib3JkZXIgOiAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKScpLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScsIG9wYWNpdHk6IGFsZXJ0LnN0YXR1cyA9PT0gJ3BhdXNlZCcgPyAwLjYgOiAxLCB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJyB9fQogICAgPgogICAgICB7LyogVG9wIHJvdyAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Cb3R0b206IDggfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+CiAgICAgICAgICB7YWxlcnQuaW1hZ2UgJiYgPGltZyBzcmM9e2FsZXJ0LmltYWdlfSBhbHQ9IiIgc3R5bGU9e3sgd2lkdGg6IDIwLCBoZWlnaHQ6IDIwLCBib3JkZXJSYWRpdXM6ICc1MCUnIH19IC8+fQogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgICAge2FsZXJ0LnN5bWJvbC50b1VwcGVyQ2FzZSgpfQogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDQsIGJvcmRlclJhZGl1czogNCwgcGFkZGluZzogJzJweCA2cHgnLCBiYWNrZ3JvdW5kOiBjZmcuYmcsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgY2ZnLmJvcmRlciB9fQogICAgICAgICAgPgogICAgICAgICAgICA8Y2ZnLmljb24gc2l6ZT17MTB9IHN0eWxlPXt7IGNvbG9yOiBjZmcuY29sb3IgfX0gLz4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY29sb3I6IGNmZy5jb2xvciB9fT4KICAgICAgICAgICAgICB7Y2ZnLmxhYmVsfQogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiA0LCBwYWRkaW5nOiAnMnB4IDZweCcsIGJhY2tncm91bmQ6IHNDZmcuYmcgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY29sb3I6IHNDZmcuY29sb3IgfX0+CiAgICAgICAgICAgICAge3NDZmcubGFiZWx9CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogQWN0aW9ucyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICAgIHthbGVydC5zb3VuZCAmJiA8Vm9sdW1lMiBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0gLz59CiAgICAgICAgICB7YWxlcnQucHVzaCAmJiA8QmVsbCBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0gLz59CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVBhdXNlfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IDQsIGJvcmRlclJhZGl1czogNCwgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnbm9uZScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2FsZXJ0LnN0YXR1cyA9PT0gJ3BhdXNlZCcgPyAnUmVzdW1lIGFsZXJ0JyA6ICdQYXVzZSBhbGVydCd9CiAgICAgICAgICA+CiAgICAgICAgICAgIHthbGVydC5zdGF0dXMgPT09ICdwYXVzZWQnCiAgICAgICAgICAgICAgPyA8QmVsbCBzaXplPXsxM30gLz4KICAgICAgICAgICAgICA6IDxCZWxsT2ZmIHNpemU9ezEzfSAvPgogICAgICAgICAgICB9CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IDQsIGJvcmRlclJhZGl1czogNCwgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnbm9uZScsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjUpJyB9fQogICAgICAgICAgICBhcmlhLWxhYmVsPSJSZW1vdmUgYWxlcnQiCiAgICAgICAgICA+CiAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MTN9IC8+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICB7LyogVGFyZ2V0ICovfQogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2Jhc2VsaW5lJywgZ2FwOiA4LCBtYXJnaW5Cb3R0b206IDggfX0+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTgsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IGNmZy5jb2xvciB9fT4KICAgICAgICAgIHtpc1BlcmNlbnQgPyBmb3JtYXRDaGFuZ2UoYWxlcnQudGFyZ2V0KSA6IGZvcm1hdFByaWNlKGFsZXJ0LnRhcmdldCl9CiAgICAgICAgPC9zcGFuPgogICAgICAgIHtjdXJyZW50UHJpY2UgIT09IHVuZGVmaW5lZCAmJiAhaXNQZXJjZW50ICYmICgKICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIG5vdyB7Zm9ybWF0UHJpY2UoY3VycmVudFByaWNlKX0KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICApfQogICAgICAgIHtjdXJyZW50Q2hhbmdlICE9PSB1bmRlZmluZWQgJiYgaXNQZXJjZW50ICYmICgKICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIG5vdyB7Zm9ybWF0Q2hhbmdlKGN1cnJlbnRDaGFuZ2UpfQogICAgICAgICAgPC9zcGFuPgogICAgICAgICl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIFByb2dyZXNzIGJhciAqL30KICAgICAge3Byb2dyZXNzICE9PSBudWxsICYmIGFsZXJ0LnN0YXR1cyA9PT0gJ2FjdGl2ZScgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiA4IH19PgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6IDQsIGJvcmRlclJhZGl1czogJzUwdncnLCBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICA8ZGl2CiAgICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScsIGJvcmRlclJhZGl1czogJzUwdncnLCB0cmFuc2l0aW9uOiAnYWxsIDAuNXMnLCB3aWR0aDogKHByb2dyZXNzLnBjdCAqIDEwMCkudG9GaXhlZCgxKSArICclJywgYmFja2dyb3VuZDogY2ZnLmNvbG9yLCB3aWxsQ2hhbmdlOiAnd2lkdGgnIH19CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgbWFyZ2luVG9wOiAyLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgeyhwcm9ncmVzcy5wY3QgKiAxMDApLnRvRml4ZWQoMSkgKyAnJSB0b3dhcmQgdGFyZ2V0J30KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICApfQoKICAgICAgey8qIFRyaWdnZXJlZCBpbmZvICovfQogICAgICB7YWxlcnQuc3RhdHVzID09PSAndHJpZ2dlcmVkJyAmJiBhbGVydC50cmlnZ2VyZWRQcmljZSAhPT0gdW5kZWZpbmVkICYmICgKICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgbWFyZ2luVG9wOiA0IH19PgogICAgICAgICAgPENoZWNrQ2lyY2xlMiBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6IGNmZy5jb2xvciB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAgeydUcmlnZ2VyZWQgYXQgJyArIGZvcm1hdFByaWNlKGFsZXJ0LnRyaWdnZXJlZFByaWNlKSArICcgwrcgJyArIG5ldyBEYXRlKGFsZXJ0LnRyaWdnZXJlZEF0ISkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogTm90ZSAqL30KICAgICAge2FsZXJ0Lm5vdGUgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIG1hcmdpblRvcDogNCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICB7YWxlcnQubm90ZX0KICAgICAgICA8L2Rpdj4KICAgICAgKX0KICAgIDwvZGl2PgogICk7Cn0pOwpBbGVydENhcmQuZGlzcGxheU5hbWUgPSAnQWxlcnRDYXJkJzsKCi8vIOKUgOKUgOKUgCBMb2cgRW50cnkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBMb2dFbnRyeSA9IG1lbW8oKHsgZW50cnkgfTogeyBlbnRyeTogVHJpZ2dlcmVkTG9nIH0pID0+IHsKICBjb25zdCBjZmcgPSBBTEVSVF9UWVBFX0NPTkZJR1tlbnRyeS50eXBlXTsKICBjb25zdCBbaG92ZXJlZCwgc2V0SG92ZXJlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3Qgb25FbnRlciA9IHVzZUNhbGxiYWNrKCgpID0+IHNldEhvdmVyZWQodHJ1ZSksIFtdKTsKICBjb25zdCBvbkxlYXZlID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0SG92ZXJlZChmYWxzZSksIFtdKTsKICByZXR1cm4gKAogICAgPGRpdgogICAgICBvbk1vdXNlRW50ZXI9e29uRW50ZXJ9IG9uTW91c2VMZWF2ZT17b25MZWF2ZX0KICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgcGFkZGluZ1RvcDogOCwgcGFkZGluZ0JvdHRvbTogOCwgYm9yZGVyQ29sb3I6ICd2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYmFja2dyb3VuZDogaG92ZXJlZCA/ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDIpJyA6ICd0cmFuc3BhcmVudCcsIGJvcmRlclJhZGl1czogJzhweCcsIHRyYW5zaXRpb246ICdiYWNrZ3JvdW5kIDAuMTJzJywgcGFkZGluZ0xlZnQ6IDYsIHBhZGRpbmdSaWdodDogNiB9fQogICAgPgogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCB9fT4KICAgICAgICB7ZW50cnkuaW1hZ2UgJiYgPGltZyBzcmM9e2VudHJ5LmltYWdlfSBhbHQ9IiIgc3R5bGU9e3sgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBib3JkZXJSYWRpdXM6ICc1MCUnIH19IC8+fQogICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICB7ZW50cnkuc3ltYm9sLnRvVXBwZXJDYXNlKCl9CiAgICAgICAgPC9zcGFuPgogICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDQsIGJvcmRlclJhZGl1czogNCwgcGFkZGluZzogJzJweCA2cHgnLCBiYWNrZ3JvdW5kOiBjZmcuYmcgfX0KICAgICAgICA+CiAgICAgICAgICA8Y2ZnLmljb24gc2l6ZT17OX0gc3R5bGU9e3sgY29sb3I6IGNmZy5jb2xvciB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY29sb3I6IGNmZy5jb2xvciB9fT57Y2ZnLmxhYmVsfTwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAncmlnaHQnIH19PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTEsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICB7Zm9ybWF0UHJpY2UoZW50cnkudHJpZ2dlcmVkUHJpY2UpfQogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogOSwgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICB7bmV3IERhdGUoZW50cnkudHJpZ2dlcmVkQXQpLnRvTG9jYWxlU3RyaW5nKCl9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7CkxvZ0VudHJ5LmRpc3BsYXlOYW1lID0gJ0xvZ0VudHJ5JzsKCi8vIOKUgOKUgOKUgCBUb2FzdCBOb3RpZmljYXRpb24g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgVG9hc3RJdGVtIHsKICBpZDogc3RyaW5nOwogIHN5bWJvbDogc3RyaW5nOwogIHR5cGU6IEFsZXJ0VHlwZTsKICBwcmljZTogbnVtYmVyOwogIHRhcmdldDogbnVtYmVyOwogIHRzOiBudW1iZXI7Cn0KCmNvbnN0IEFsZXJ0VG9hc3QgPSBtZW1vKCh7IHRvYXN0LCBvbkRpc21pc3MgfTogeyB0b2FzdDogVG9hc3RJdGVtOyBvbkRpc21pc3M6IChpZDogc3RyaW5nKSA9PiB2b2lkIH0pID0+IHsKICBjb25zdCBjZmcgPSBBTEVSVF9UWVBFX0NPTkZJR1t0b2FzdC50eXBlXTsKICBjb25zdCBpc1BlcmNlbnQgPSB0b2FzdC50eXBlID09PSAnY2hhbmdlX3VwJyB8fCB0b2FzdC50eXBlID09PSAnY2hhbmdlX2Rvd24nOwoKICBjb25zdCBkaXNtaXNzID0gdXNlQ2FsbGJhY2soKCkgPT4gb25EaXNtaXNzKHRvYXN0LmlkKSwgW3RvYXN0LmlkLCBvbkRpc21pc3NdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYKICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAxMiwgcGFkZGluZzogJzEycHggMTZweCcsIGJvcmRlclJhZGl1czogMTIsIGJhY2tncm91bmQ6ICdyZ2JhKDgsOCwyNCwwLjk3KScsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgY2ZnLmJvcmRlciwgYmFja2Ryb3BGaWx0ZXI6ICdibHVyKDIwcHgpJywgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsIG1pbldpZHRoOiAyODAgfX0KICAgID4KICAgICAgPGRpdgogICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IDMyLCBoZWlnaHQ6IDMyLCBib3JkZXJSYWRpdXM6IDgsIGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgZmxleFNocmluazogMCwgYmFja2dyb3VuZDogY2ZnLmJnLCBib3JkZXI6ICcxcHggc29saWQgJyArIGNmZy5ib3JkZXIgfX0KICAgICAgPgogICAgICAgIDxjZmcuaWNvbiBzaXplPXsxNH0gc3R5bGU9e3sgY29sb3I6IGNmZy5jb2xvciB9fSAvPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT17eyBmbGV4OiAxIH19PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IGNmZy5jb2xvciB9fT4KICAgICAgICAgIHtjZmcubGFiZWx9IOKAlCB7dG9hc3Quc3ltYm9sLnRvVXBwZXJDYXNlKCl9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMSwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgICAge2lzUGVyY2VudAogICAgICAgICAgICA/IGZvcm1hdENoYW5nZSh0b2FzdC5wcmljZSkgKyAnICh0YXJnZXQgJyArIGZvcm1hdENoYW5nZSh0b2FzdC50YXJnZXQpICsgJyknCiAgICAgICAgICAgIDogZm9ybWF0UHJpY2UodG9hc3QucHJpY2UpICsgJyAodGFyZ2V0ICcgKyBmb3JtYXRQcmljZSh0b2FzdC50YXJnZXQpICsgJyknfQogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtkaXNtaXNzfSB0eXBlPSJidXR0b24iIGFyaWEtbGFiZWw9IkRpc21pc3Mgbm90aWZpY2F0aW9uIiBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICA8WCBzaXplPXsxM30gLz4KICAgICAgPC9idXR0b24+CiAgICA8L2Rpdj4KICApOwp9KTsKQWxlcnRUb2FzdC5kaXNwbGF5TmFtZSA9ICdBbGVydFRvYXN0JzsKCi8vIOKUgOKUgOKUgCBNYWluIFBhZ2Ug4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBBbGVydHMgPSBtZW1vKCgpID0+IHsKICBjb25zdCB7IGFzc2V0cywgd3NTdGF0dXMgfSA9IHVzZUNyeXB0bygpOwogIGNvbnN0IHsgaXNNb2JpbGUsIGlzVGFibGV0IH0gPSB1c2VCcmVha3BvaW50KCk7CiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKHJlZHVjZXIsIElOSVRJQUxfU1RBVEUpOwogIGNvbnN0IFtsYXN0VXBkYXRlZCwgc2V0TGFzdFVwZGF0ZWRdID0gdXNlU3RhdGU8bnVtYmVyIHwgbnVsbD4obnVsbCk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoYXNzZXRzLmxlbmd0aCA+IDApIHNldExhc3RVcGRhdGVkKERhdGUubm93KCkpOwogIH0sIFthc3NldHNdKTsKICBjb25zdCBbc2hvd0Zvcm0sIHNldFNob3dGb3JtXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbdGFiLCBzZXRUYWJdID0gdXNlU3RhdGU8J2FsZXJ0cycgfCAnaGlzdG9yeSc+KCdhbGVydHMnKTsKICBjb25zdCBbZmlsdGVyU3RhdHVzLCBzZXRGaWx0ZXJTdGF0dXNdID0gdXNlU3RhdGU8J2FsbCcgfCBBbGVydFN0YXR1cz4oJ2FsbCcpOwogIGNvbnN0IFtzaG93TG9nQWxsLCBzZXRTaG93TG9nQWxsXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbdG9hc3RzLCBzZXRUb2FzdHNdID0gdXNlU3RhdGU8VG9hc3RJdGVtW10+KFtdKTsKICBjb25zdCBbcHVzaFBlcm1pc3Npb24sIHNldFB1c2hQZXJtaXNzaW9uXSA9IHVzZVN0YXRlPE5vdGlmaWNhdGlvblBlcm1pc3Npb24+KCdkZWZhdWx0Jyk7CiAgY29uc3QgaWRDb3VudGVyUmVmID0gdXNlUmVmKDApOwogIGNvbnN0IG1vdW50ZWRSZWYgPSB1c2VSZWYodHJ1ZSk7CgogIC8vIExvYWQgZnJvbSBsb2NhbFN0b3JhZ2Ugb24gbW91bnQKICB1c2VFZmZlY3QoKCkgPT4gewogICAgbW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTsKICAgIGNvbnN0IHNhdmVkID0gbG9hZEZyb21MUygpOwogICAgaWYgKHNhdmVkKSBkaXNwYXRjaCh7IHR5cGU6ICdMT0FEJywgc3RhdGU6IHNhdmVkIH0pOwogICAgaWYgKCdOb3RpZmljYXRpb24nIGluIHdpbmRvdykgc2V0UHVzaFBlcm1pc3Npb24oTm90aWZpY2F0aW9uLnBlcm1pc3Npb24pOwogICAgcmV0dXJuICgpID0+IHsgbW91bnRlZFJlZi5jdXJyZW50ID0gZmFsc2U7IH07CiAgfSwgW10pOwoKICAvLyBTYXZlIHRvIGxvY2FsU3RvcmFnZSBvbiBzdGF0ZSBjaGFuZ2UKICB1c2VFZmZlY3QoKCkgPT4gewogICAgc2F2ZVRvTFMoc3RhdGUpOwogIH0sIFtzdGF0ZV0pOwoKICAvLyBCdWlsZCBhc3NldCBsb29rdXAgbWFwCiAgY29uc3QgYXNzZXRNYXAgPSB1c2VNZW1vKCgpID0+IHsKICAgIGNvbnN0IG0gPSBuZXcgTWFwPHN0cmluZywgQ3J5cHRvQXNzZXQ+KCk7CiAgICBmb3IgKGNvbnN0IGEgb2YgYXNzZXRzKSB7CiAgICAgIG0uc2V0KGEuc3ltYm9sLnRvTG93ZXJDYXNlKCksIGEpOwogICAgfQogICAgcmV0dXJuIG07CiAgfSwgW2Fzc2V0c10pOwoKICAvLyBEaXNtaXNzIHRvYXN0CiAgY29uc3QgZGlzbWlzc1RvYXN0ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHsKICAgIHNldFRvYXN0cyhwcmV2ID0+IHByZXYuZmlsdGVyKHQgPT4gdC5pZCAhPT0gaWQpKTsKICB9LCBbXSk7CgogIC8vIENoZWNrIGFsZXJ0cyBhZ2FpbnN0IGxpdmUgcHJpY2VzCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChhc3NldHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICBmb3IgKGNvbnN0IGFsZXJ0IG9mIHN0YXRlLmFsZXJ0cykgewogICAgICBpZiAoYWxlcnQuc3RhdHVzICE9PSAnYWN0aXZlJykgY29udGludWU7CiAgICAgIGNvbnN0IGFzc2V0ID0gYXNzZXRNYXAuZ2V0KGFsZXJ0LnN5bWJvbC50b0xvd2VyQ2FzZSgpKTsKICAgICAgaWYgKCFhc3NldCkgY29udGludWU7CiAgICAgIGlmICghY2hlY2tBbGVydChhbGVydCwgYXNzZXQpKSBjb250aW51ZTsKCiAgICAgIC8vIEZpcmUhCiAgICAgIGNvbnN0IHByaWNlID0gYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV91cCcgfHwgYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV9kb3duJwogICAgICAgID8gYXNzZXQuY2hhbmdlMjRoCiAgICAgICAgOiBhc3NldC5wcmljZTsKCiAgICAgIGNvbnN0IGxvZ0VudHJ5OiBUcmlnZ2VyZWRMb2cgPSB7CiAgICAgICAgaWQ6IGdlbklkKCsraWRDb3VudGVyUmVmLmN1cnJlbnQpLAogICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLAogICAgICAgIHN5bWJvbDogYWxlcnQuc3ltYm9sLAogICAgICAgIG5hbWU6IGFsZXJ0Lm5hbWUsCiAgICAgICAgaW1hZ2U6IGFsZXJ0LmltYWdlLAogICAgICAgIHR5cGU6IGFsZXJ0LnR5cGUsCiAgICAgICAgdGFyZ2V0OiBhbGVydC50YXJnZXQsCiAgICAgICAgdHJpZ2dlcmVkUHJpY2U6IHByaWNlLAogICAgICAgIHRyaWdnZXJlZEF0OiBEYXRlLm5vdygpLAogICAgICB9OwoKICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVFJJR0dFUicsIGlkOiBhbGVydC5pZCwgcHJpY2UsIGxvZ0VudHJ5IH0pOwoKICAgICAgaWYgKGFsZXJ0LnNvdW5kICYmIHN0YXRlLnNvdW5kRW5hYmxlZCkgcGxheUFsZXJ0U291bmQoYWxlcnQudHlwZSk7CiAgICAgIGlmIChhbGVydC5wdXNoICYmIHN0YXRlLnB1c2hFbmFibGVkKSBzZW5kUHVzaE5vdGlmaWNhdGlvbihhbGVydCwgcHJpY2UpOwoKICAgICAgLy8gU2hvdyB0b2FzdAogICAgICBjb25zdCB0b2FzdDogVG9hc3RJdGVtID0gewogICAgICAgIGlkOiBsb2dFbnRyeS5pZCwKICAgICAgICBzeW1ib2w6IGFsZXJ0LnN5bWJvbCwKICAgICAgICB0eXBlOiBhbGVydC50eXBlLAogICAgICAgIHByaWNlLAogICAgICAgIHRhcmdldDogYWxlcnQudGFyZ2V0LAogICAgICAgIHRzOiBEYXRlLm5vdygpLAogICAgICB9OwogICAgICBzZXRUb2FzdHMocHJldiA9PiBbdG9hc3QsIC4uLnByZXZdLnNsaWNlKDAsIDUpKTsKICAgIH0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMKICB9LCBbYXNzZXRzXSk7CgogIC8vIEF1dG8tZGlzbWlzcyB0b2FzdHMgYWZ0ZXIgNnMKICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKHRvYXN0cy5sZW5ndGggPT09IDApIHJldHVybjsKICAgIGNvbnN0IG5ld2VzdCA9IHRvYXN0c1swXTsKICAgIGNvbnN0IHJlbWFpbmluZyA9IDYwMDAgLSAoRGF0ZS5ub3coKSAtIG5ld2VzdC50cyk7CiAgICBjb25zdCB0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGlmIChtb3VudGVkUmVmLmN1cnJlbnQpIHNldFRvYXN0cyhwcmV2ID0+IHByZXYuc2xpY2UoMCwgLTEpKTsKICAgIH0sIE1hdGgubWF4KHJlbWFpbmluZywgMTAwMCkpOwogICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0KTsKICB9LCBbdG9hc3RzXSk7CgogIGNvbnN0IGhhbmRsZUFkZCA9IHVzZUNhbGxiYWNrKChhbGVydDogUHJpY2VBbGVydCkgPT4gewogICAgZGlzcGF0Y2goeyB0eXBlOiAnQUREJywgYWxlcnQgfSk7CiAgfSwgW10pOwoKICBjb25zdCBoYW5kbGVSZW1vdmUgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4gewogICAgZGlzcGF0Y2goeyB0eXBlOiAnUkVNT1ZFJywgaWQgfSk7CiAgfSwgW10pOwoKICBjb25zdCBoYW5kbGVUb2dnbGVQYXVzZSA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7CiAgICBkaXNwYXRjaCh7IHR5cGU6ICdUT0dHTEVfUEFVU0UnLCBpZCB9KTsKICB9LCBbXSk7CgogIGNvbnN0IGhhbmRsZVRvZ2dsZVNvdW5kID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgZGlzcGF0Y2goeyB0eXBlOiAnVE9HR0xFX1NPVU5EJyB9KTsKICB9LCBbXSk7CgogIGNvbnN0IGhhbmRsZVRvZ2dsZVB1c2ggPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7CiAgICBpZiAoISgnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cpKSByZXR1cm47CiAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICdkZWZhdWx0JykgewogICAgICBjb25zdCBwZXJtID0gYXdhaXQgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7CiAgICAgIHNldFB1c2hQZXJtaXNzaW9uKHBlcm0pOwogICAgICBpZiAocGVybSA9PT0gJ2dyYW50ZWQnKSBkaXNwYXRjaCh7IHR5cGU6ICdUT0dHTEVfUFVTSCcgfSk7CiAgICB9IGVsc2UgewogICAgICBkaXNwYXRjaCh7IHR5cGU6ICdUT0dHTEVfUFVTSCcgfSk7CiAgICB9CiAgfSwgW10pOwoKICAvLyBGaWx0ZXJlZCBhbGVydHMKICBjb25zdCBmaWx0ZXJlZEFsZXJ0cyA9IHVzZU1lbW8oKCkgPT4gewogICAgcmV0dXJuIHN0YXRlLmFsZXJ0cy5maWx0ZXIoYSA9PgogICAgICBmaWx0ZXJTdGF0dXMgPT09ICdhbGwnID8gdHJ1ZSA6IGEuc3RhdHVzID09PSBmaWx0ZXJTdGF0dXMKICAgICk7CiAgfSwgW3N0YXRlLmFsZXJ0cywgZmlsdGVyU3RhdHVzXSk7CgogIGNvbnN0IGFjdGl2ZUNvdW50ID0gdXNlTWVtbygoKSA9PiBzdGF0ZS5hbGVydHMuZmlsdGVyKGEgPT4gYS5zdGF0dXMgPT09ICdhY3RpdmUnKS5sZW5ndGgsIFtzdGF0ZS5hbGVydHNdKTsKICBjb25zdCB0cmlnZ2VyZWRDb3VudCA9IHVzZU1lbW8oKCkgPT4gc3RhdGUuYWxlcnRzLmZpbHRlcihhID0+IGEuc3RhdHVzID09PSAndHJpZ2dlcmVkJykubGVuZ3RoLCBbc3RhdGUuYWxlcnRzXSk7CgogIGNvbnN0IGxvZ1RvU2hvdyA9IHNob3dMb2dBbGwgPyBzdGF0ZS5sb2cgOiBzdGF0ZS5sb2cuc2xpY2UoMCwgMjApOwoKICBjb25zdCBwYWdlU3R5bGUgPSB1c2VNZW1vKCgpID0+ICh7CiAgICBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIGFzIGNvbnN0LCBnYXA6IDIwLAogICAgcGFkZGluZzogaXNNb2JpbGUgPyAnMTJweCcgOiAnMTZweCcsIG1pbkhlaWdodDogJzEwMHZoJywKICB9KSwgW2lzTW9iaWxlXSk7CgogIGNvbnN0IGxhc3RVcGRTdHIgPSBsYXN0VXBkYXRlZAogICAgPyBuZXcgRGF0ZShsYXN0VXBkYXRlZCkudG9Mb2NhbGVUaW1lU3RyaW5nKCkKICAgIDogJ+KAlCc7CgogIGlmIChhc3NldHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gKAogICAgICA8ZGl2IHN0eWxlPXtwYWdlU3R5bGV9PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBtaW5IZWlnaHQ6ICc2MHZoJywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGdhcDogJzE2cHgnIH19PgogICAgICAgICAge3dzU3RhdHVzID09PSAnZGlzY29ubmVjdGVkJwogICAgICAgICAgICA/IDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEzcHgnLCBjb2xvcjogJ3JnYmEoMjU1LDY4LDEzNiwxKScgfX0+4pqgIEtvbmVrc2kgdGVycHV0dXMuIFBlcmlrc2EgamFyaW5nYW4uPC9kaXY+CiAgICAgICAgICAgIDogPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGNvbG9yOiAncmdiYSgxMzgsMTM4LDE1OCwxKScgfX0+TWVtdWF0IGhhcmdhIGFzZXQuLi48L2Rpdj4KICAgICAgICAgIH0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICApOwogIH0KCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3BhZ2VTdHlsZX0+CiAgICAgIHsvKiBUb2FzdCBDb250YWluZXIgKi99CiAgICAgIDxkaXYKICAgICAgICAgICAgICAgIHN0eWxlPXt7IHBvc2l0aW9uOiAnZml4ZWQnLCB0b3A6IDE2LCByaWdodDogMTYsIHpJbmRleDogMzAwLCBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6IDgsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19CiAgICAgID4KICAgICAgICB7dG9hc3RzLm1hcCh0ID0+ICgKICAgICAgICAgIDxBbGVydFRvYXN0IGtleT17dC5pZH0gdG9hc3Q9e3R9IG9uRGlzbWlzcz17ZGlzbWlzc1RvYXN0fSAvPgogICAgICAgICkpfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBIZWFkZXIgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyB9fT4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogMTIgfX0+CiAgICAgICAgICA8aDEgc3R5bGU9e3sgZm9udFNpemU6IDIwLCBmb250V2VpZ2h0OiA3MDAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgbWFyZ2luOiAwLCBiYWNrZ3JvdW5kOiAnbGluZWFyLWdyYWRpZW50KDkwZGVnLCB2YXIoLS16bS1hY2NlbnQpIDAlLCB2YXIoLS16bS12aW9sZXQpIDEwMCUpJywgV2Via2l0QmFja2dyb3VuZENsaXA6ICd0ZXh0JywgV2Via2l0VGV4dEZpbGxDb2xvcjogJ3RyYW5zcGFyZW50JywgYmFja2dyb3VuZENsaXA6ICd0ZXh0JyB9fT5BbGVydHMgQ2VudGVyPC9oMT4KICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA2LCBwYWRkaW5nOiAnMnB4IDhweCcsIGJvcmRlclJhZGl1czogNCwgYmFja2dyb3VuZDogJ3JnYmEoNTIsMjExLDE1MywwLjA4KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDUyLDIxMSwxNTMsMC4yKScgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPFdzU3RhdHVzRG90IHN0YXR1cz17d3NTdGF0dXN9IC8+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywwLjkpJyB9fT4KICAgICAgICAgICAgICB7d3NTdGF0dXMgPT09ICdjb25uZWN0ZWQnID8gJ0xJVkUgwrcgUHJpY2VzIHJlYWx0aW1lJyA6IHdzU3RhdHVzLnRvVXBwZXJDYXNlKCl9CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3JnYmEoODAsODAsMTAwLDEpJyB9fT5VcGRhdGVkOiB7bGFzdFVwZFN0cn08L3NwYW4+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBHbG9iYWwgQ29udHJvbHMgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZVNvdW5kfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17c3RhdGUuc291bmRFbmFibGVkfQogICAgICAgICAgICBhcmlhLWxhYmVsPXtzdGF0ZS5zb3VuZEVuYWJsZWQgPyAnTXV0ZSBhbGVydCBzb3VuZHMnIDogJ1VubXV0ZSBhbGVydCBzb3VuZHMnfQogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDYsIHBhZGRpbmc6ICc2cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRyYW5zaXRpb246ICdhbGwgMC4xNXMnLCBiYWNrZ3JvdW5kOiBzdGF0ZS5zb3VuZEVuYWJsZWQgPyAncmdiYSg5NiwxNjUsMjUwLDAuMTApJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoc3RhdGUuc291bmRFbmFibGVkID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjIyKScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA4KScpLCBjb2xvcjogc3RhdGUuc291bmRFbmFibGVkID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIHtzdGF0ZS5zb3VuZEVuYWJsZWQgPyA8Vm9sdW1lMiBzaXplPXsxMn0gLz4gOiA8Vm9sdW1lWCBzaXplPXsxMn0gLz59CiAgICAgICAgICAgIFNvdW5kCiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlUHVzaH0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3N0YXRlLnB1c2hFbmFibGVkfQogICAgICAgICAgICBhcmlhLWxhYmVsPXtzdGF0ZS5wdXNoRW5hYmxlZCA/ICdEaXNhYmxlIHB1c2ggbm90aWZpY2F0aW9ucycgOiAnRW5hYmxlIHB1c2ggbm90aWZpY2F0aW9ucyd9CiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgcGFkZGluZzogJzZweCAxMnB4JywgYm9yZGVyUmFkaXVzOiA4LCBmb250U2l6ZTogMTEsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGJhY2tncm91bmQ6IHN0YXRlLnB1c2hFbmFibGVkID8gJ3JnYmEoMTY3LDEzOSwyNTAsMC4xMCknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNCknLCBib3JkZXI6ICcxcHggc29saWQgJyArIChzdGF0ZS5wdXNoRW5hYmxlZCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMjIpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDgpJyksIGNvbG9yOiBzdGF0ZS5wdXNoRW5hYmxlZCA/ICdyZ2JhKDE2NywxMzksMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgICAgdGl0bGU9e3B1c2hQZXJtaXNzaW9uID09PSAnZGVuaWVkJyA/ICdQdXNoIG5vdGlmaWNhdGlvbnMgYmxvY2tlZCBieSBicm93c2VyJyA6ICcnfQogICAgICAgICAgPgogICAgICAgICAgICB7c3RhdGUucHVzaEVuYWJsZWQgPyA8QmVsbCBzaXplPXsxMn0gLz4gOiA8QmVsbE9mZiBzaXplPXsxMn0gLz59CiAgICAgICAgICAgIFB1c2gge3B1c2hQZXJtaXNzaW9uID09PSAnZGVuaWVkJyAmJiAnKGJsb2NrZWQpJ30KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Rm9ybSh0cnVlKX0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBkaXNhYmxlZD17c3RhdGUuYWxlcnRzLmxlbmd0aCA+PSBNQVhfQUxFUlRTfQogICAgICAgICAgICBhcmlhLWxhYmVsPSJDcmVhdGUgbmV3IHByaWNlIGFsZXJ0IgogICAgICAgICAgICBhcmlhLWRpc2FibGVkPXtzdGF0ZS5hbGVydHMubGVuZ3RoID49IE1BWF9BTEVSVFN9CiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgcGFkZGluZzogJzZweCAxNnB4JywgYm9yZGVyUmFkaXVzOiA4LCBmb250U2l6ZTogMTEsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFdlaWdodDogNjAwLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC4xNiknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMzApJywgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknLCBvcGFjaXR5OiBzdGF0ZS5hbGVydHMubGVuZ3RoID49IE1BWF9BTEVSVFMgPyAwLjUgOiAxIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIDxQbHVzIHNpemU9ezEzfSAvPgogICAgICAgICAgICBOZXcgQWxlcnQKICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBTdGF0cyBSb3cgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiBpc01vYmlsZSA/ICdyZXBlYXQoMiwxZnIpJyA6ICdyZXBlYXQoNCwxZnIpJywgZ2FwOiAxMiB9fT4KICAgICAgICB7WwogICAgICAgICAgeyBsYWJlbDogJ1RvdGFsIEFsZXJ0cycsIHZhbHVlOiBTdHJpbmcoc3RhdGUuYWxlcnRzLmxlbmd0aCksIGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDEpJywgaWNvbjogQmVsbCB9LAogICAgICAgICAgeyBsYWJlbDogJ0FjdGl2ZScsIHZhbHVlOiBTdHJpbmcoYWN0aXZlQ291bnQpLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywxKScsIGljb246IEFjdGl2aXR5IH0sCiAgICAgICAgICB7IGxhYmVsOiAnVHJpZ2dlcmVkJywgdmFsdWU6IFN0cmluZyh0cmlnZ2VyZWRDb3VudCksIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJywgaWNvbjogWmFwIH0sCiAgICAgICAgICB7IGxhYmVsOiAnSGlzdG9yeScsIHZhbHVlOiBTdHJpbmcoc3RhdGUubG9nLmxlbmd0aCksIGNvbG9yOiAncmdiYSgxNjcsMTM5LDI1MCwxKScsIGljb246IEhpc3RvcnkgfSwKICAgICAgICBdLm1hcChzID0+ICgKICAgICAgICAgIDxkaXYga2V5PXtzLmxhYmVsfSBzdHlsZT17eyBwYWRkaW5nOiAxNiwgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIG1hcmdpbkJvdHRvbTogNCB9fT4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjFlbScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgICAge3MubGFiZWx9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgIDxzLmljb24gc2l6ZT17MTN9IHN0eWxlPXt7IGNvbG9yOiBzLmNvbG9yIH19IC8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDI0LCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBzLmNvbG9yIH19PgogICAgICAgICAgICAgIHtzLnZhbHVlfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICkpfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBUYWJzICovfQogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICB7KFsnYWxlcnRzJywgJ2hpc3RvcnknXSBhcyBjb25zdCkubWFwKHQgPT4gKAogICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICBrZXk9e3R9CiAgICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgICAgcm9sZT0idGFiIgogICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXt0YWIgPT09IHR9CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e3QgPT09ICdhbGVydHMnID8gJ015IEFsZXJ0cyB0YWInIDogJ1RyaWdnZXIgSGlzdG9yeSB0YWInfQogICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRUYWIodCl9CiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6ICc2cHggMTZweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRXZWlnaHQ6IDYwMCwgdGV4dFRyYW5zZm9ybTogJ2NhcGl0YWxpemUnLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6IHRhYiA9PT0gdCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMiknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXI6ICcxcHggc29saWQgJyArICh0YWIgPT09IHQgPyAncmdiYSg5NiwxNjUsMjUwLDAuMjUpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyksIGNvbG9yOiB0YWIgPT09IHQgPyAncmdiYSg5NiwxNjUsMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAge3QgPT09ICdhbGVydHMnID8gJ015IEFsZXJ0cycgOiAnVHJpZ2dlciBIaXN0b3J5J30KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICkpfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBBbGVydHMgVGFiICovfQogICAgICB7dGFiID09PSAnYWxlcnRzJyAmJiAoCiAgICAgICAgPGRpdj4KICAgICAgICAgIHsvKiBGaWx0ZXIgKi99CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCwgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgICAgeyhbJ2FsbCcsICdhY3RpdmUnLCAndHJpZ2dlcmVkJywgJ3BhdXNlZCddIGFzIGNvbnN0KS5tYXAoZiA9PiAoCiAgICAgICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICAgICAga2V5PXtmfQogICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0RmlsdGVyU3RhdHVzKGYpfQogICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtmaWx0ZXJTdGF0dXMgPT09IGZ9CiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnRmlsdGVyIGJ5ICcgKyBmICsgJyBhbGVydHMnfQogICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogJzRweCAxMHB4JywgYm9yZGVyUmFkaXVzOiA0LCBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ2NhcGl0YWxpemUnLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6IGZpbHRlclN0YXR1cyA9PT0gZiA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknIDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoZmlsdGVyU3RhdHVzID09PSBmID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjIyKScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScpLCBjb2xvcjogZmlsdGVyU3RhdHVzID09PSBmID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAge2Z9CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAge2ZpbHRlcmVkQWxlcnRzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiA0OCwgdGV4dEFsaWduOiAnY2VudGVyJywgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgICAgIDxCZWxsIHNpemU9ezMyfSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luOicwIGF1dG8nLCBtYXJnaW5Cb3R0b206MTIsIGRpc3BsYXk6J2Jsb2NrJyB9fSAvPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTQsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAgICAgIHtzdGF0ZS5hbGVydHMubGVuZ3RoID09PSAwCiAgICAgICAgICAgICAgICAgID8gJ0JlbHVtIGFkYSBhbGVydC4gS2xpayAiTmV3IEFsZXJ0IiBidWF0IG11bGFpIScKICAgICAgICAgICAgICAgICAgOiAnVGlkYWsgYWRhIGFsZXJ0IGRlbmdhbiBmaWx0ZXIgaW5pLid9CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKSA6ICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGlzTW9iaWxlID8gJzFmcicgOiBpc1RhYmxldCA/ICdyZXBlYXQoMiwxZnIpJyA6ICdyZXBlYXQoMywxZnIpJywgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICB7ZmlsdGVyZWRBbGVydHMubWFwKGFsZXJ0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gYXNzZXRNYXAuZ2V0KGFsZXJ0LnN5bWJvbC50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxBbGVydENhcmQKICAgICAgICAgICAgICAgICAgICBrZXk9e2FsZXJ0LmlkfQogICAgICAgICAgICAgICAgICAgIGFsZXJ0PXthbGVydH0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2U9e2Fzc2V0Py5wcmljZX0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2hhbmdlPXthc3NldD8uY2hhbmdlMjRofQogICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlPXtoYW5kbGVSZW1vdmV9CiAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGVQYXVzZT17aGFuZGxlVG9nZ2xlUGF1c2V9CiAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogSGlzdG9yeSBUYWIgKi99CiAgICAgIHt0YWIgPT09ICdoaXN0b3J5JyAmJiAoCiAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAxNiwgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Cb3R0b206IDEyIH19PgogICAgICAgICAgICA8aDIgc3R5bGU9e3sgZm9udFNpemU6IDEyLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLCBsZXR0ZXJTcGFjaW5nOiAnMC4xZW0nLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICBUcmlnZ2VyIEhpc3RvcnkgKHtzdGF0ZS5sb2cubGVuZ3RofSkKICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAge3N0YXRlLmxvZy5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9MT0cnIH0pfQogICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0iQ2xlYXIgdHJpZ2dlciBoaXN0b3J5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDQsIHRyYW5zaXRpb246ICdjb2xvciAwLjE1cycsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjYpJyB9fQogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MTF9IC8+IENsZWFyIEFsbAogICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICApfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAge3N0YXRlLmxvZy5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAnY2VudGVyJywgcGFkZGluZ1RvcDogNDAsIHBhZGRpbmdCb3R0b206IDQwIH19PgogICAgICAgICAgICAgIDxIaXN0b3J5IHNpemU9ezI4fSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luOicwIGF1dG8nLCBtYXJnaW5Cb3R0b206OCwgZGlzcGxheTonYmxvY2snIH19IC8+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMiwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgICAgICAgICAgQmVsdW0gYWRhIGFsZXJ0IHlhbmcgdHJpZ2dlcmVkLgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICkgOiAoCiAgICAgICAgICAgIDw+CiAgICAgICAgICAgICAge2xvZ1RvU2hvdy5tYXAoZW50cnkgPT4gKAogICAgICAgICAgICAgICAgPExvZ0VudHJ5IGtleT17ZW50cnkuaWR9IGVudHJ5PXtlbnRyeX0gLz4KICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICB7c3RhdGUubG9nLmxlbmd0aCA+IDIwICYmICgKICAgICAgICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93TG9nQWxsKHMgPT4gIXMpfQogICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtzaG93TG9nQWxsID8gJ1Nob3cgZmV3ZXIgbG9nIGVudHJpZXMnIDogJ1Nob3cgYWxsIGxvZyBlbnRyaWVzJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA0LCBtYXJnaW5Ub3A6IDEyLCBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICB7c2hvd0xvZ0FsbCA/IDxDaGV2cm9uVXAgc2l6ZT17MTF9IC8+IDogPENoZXZyb25Eb3duIHNpemU9ezExfSAvPn0KICAgICAgICAgICAgICAgICAge3Nob3dMb2dBbGwgPyAnU2VtYnVueWlrYW4nIDogJ0xpaGF0IHNlbXVhICcgKyBzdGF0ZS5sb2cubGVuZ3RoICsgJyBlbnRyaSd9CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICApfQogICAgICAgICAgICA8Lz4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogQWRkIEFsZXJ0IE1vZGFsICovfQogICAgICB7c2hvd0Zvcm0gJiYgKAogICAgICAgIDxBZGRBbGVydEZvcm0KICAgICAgICAgIGFzc2V0cz17YXNzZXRzfQogICAgICAgICAgb25BZGQ9e2hhbmRsZUFkZH0KICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dGb3JtKGZhbHNlKX0KICAgICAgICAgIGlkQ291bnRlcj17KytpZENvdW50ZXJSZWYuY3VycmVudH0KICAgICAgICAvPgogICAgICApfQogICAgPC9kaXY+CiAgKTsKfSk7CkFsZXJ0cy5kaXNwbGF5TmFtZSA9ICdBbGVydHMnOwoKZXhwb3J0IGRlZmF1bHQgQWxlcnRzOwo=";
const C_Converter = "LyoqCiAqIENvbnZlcnRlci50c3gg4oCUIFpFUsOYIE1FUklESUFOIHB1c2gyNAogKiBwdXNoMjQ6IDExMiBjbGFzc05hbWUg4oaSIDAsIDEwMCUgaW5saW5lIHN0eWxlCiAqIC0gTXVsdGktY3VycmVuY3kgY29udmVydGVyICsgRENBIGNhbGN1bGF0b3IgKyBQb3NpdGlvbiBTaXplcgogKiAtIExpdmUgcHJpY2VzIHZpYSBDcnlwdG9Db250ZXh0IChXUy1mZWQsIHplcm8gZXh0cmEgZmV0Y2gpCiAqIC0gUHVyZSBTVkcgY2hhcnRzLCB6ZXJvIHJlY2hhcnRzCiAqIC0gUmVhY3QubWVtbyArIGRpc3BsYXlOYW1lIOKckwogKiAtIHVzZVJlZHVjZXIgc3RhdGUsIHVzZUNhbGxiYWNrICsgdXNlTWVtbyDinJMKICogLSBPYmplY3QuZnJlZXplKCkgYWxsIHN0YXRpYyBkYXRhIOKckwogKiAtIHJnYmEoKSBvbmx5LCB6ZXJvIGhzbCgpIOKckwogKiAtIFplcm8gdGVtcGxhdGUgbGl0ZXJhbHMgaW4gSlNYIOKckwogKiAtIFplcm8gY2xhc3NOYW1lIGluIHBhZ2VzIOKckwogKiAtIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm0gb24gYW5pbWF0ZWQgZWxlbWVudHMg4pyTCiAqLwoKaW1wb3J0IHsKICBtZW1vLCB1c2VSZWR1Y2VyLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0LAp9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlQ3J5cHRvIH0gZnJvbSAnQC9jb250ZXh0cy9DcnlwdG9Db250ZXh0JzsKaW1wb3J0IHsgZm9ybWF0UHJpY2UsIGZvcm1hdENvbXBhY3QsIGZvcm1hdENoYW5nZSB9IGZyb20gJ0AvbGliL2Zvcm1hdHRlcnMnOwppbXBvcnQgdHlwZSB7IENyeXB0b0Fzc2V0IH0gZnJvbSAnQC9saWIvZm9ybWF0dGVycyc7CmltcG9ydCB7CiAgQXJyb3dMZWZ0UmlnaHQsIENhbGN1bGF0b3IsIFRyZW5kaW5nVXAsIERvbGxhclNpZ24sCiAgQ2hldnJvbkRvd24sIFJlZnJlc2hDdywgVGFyZ2V0LCBMb2FkZXIyLAp9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CgovLyDilIDilIDilIAgQ29uc3RhbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgRklBVF9DVVJSRU5DSUVTID0gT2JqZWN0LmZyZWV6ZShbCiAgeyBjb2RlOiAnVVNEJywgc3ltYm9sOiAnJCcsICByYXRlOiAxIH0sCiAgeyBjb2RlOiAnSURSJywgc3ltYm9sOiAnUnAnLCByYXRlOiAxNjI1MCB9LAogIHsgY29kZTogJ0VVUicsIHN5bWJvbDogJ+KCrCcsICByYXRlOiAwLjkyIH0sCiAgeyBjb2RlOiAnR0JQJywgc3ltYm9sOiAnwqMnLCAgcmF0ZTogMC43OSB9LAogIHsgY29kZTogJ0pQWScsIHN5bWJvbDogJ8KlJywgIHJhdGU6IDE0OS41IH0sCiAgeyBjb2RlOiAnU0dEJywgc3ltYm9sOiAnUyQnLCByYXRlOiAxLjM0IH0sCiAgeyBjb2RlOiAnTVlSJywgc3ltYm9sOiAnUk0nLCByYXRlOiA0LjcxIH0sCiAgeyBjb2RlOiAnQVVEJywgc3ltYm9sOiAnQSQnLCByYXRlOiAxLjUzIH0sCl0gYXMgY29uc3QpOwoKY29uc3QgRENBX0lOVEVSVkFMUyA9IE9iamVjdC5mcmVlemUoWwogIHsgbGFiZWw6ICdEYWlseScsICAgZGF5czogMSAgfSwKICB7IGxhYmVsOiAnV2Vla2x5JywgIGRheXM6IDcgIH0sCiAgeyBsYWJlbDogJ01vbnRobHknLCBkYXlzOiAzMCB9LApdIGFzIGNvbnN0KTsKCmNvbnN0IERDQV9EVVJBVElPTlMgPSBPYmplY3QuZnJlZXplKFsKICB7IGxhYmVsOiAnMyBCdWxhbicsIG1vbnRoczogMyAgfSwKICB7IGxhYmVsOiAnNiBCdWxhbicsIG1vbnRoczogNiAgfSwKICB7IGxhYmVsOiAnMSBUYWh1bicsIG1vbnRoczogMTIgfSwKICB7IGxhYmVsOiAnMiBUYWh1bicsIG1vbnRoczogMjQgfSwKXSBhcyBjb25zdCk7Cgpjb25zdCBUQUJTID0gT2JqZWN0LmZyZWV6ZShbJ0NvbnZlcnRlcicsICdEQ0EgS2Fsa3VsYXRvcicsICdQb3NpdGlvbiBTaXplciddIGFzIGNvbnN0KTsKdHlwZSBUYWIgPSB0eXBlb2YgVEFCU1tudW1iZXJdOwoKLy8g4pSA4pSA4pSAIFNoYXJlZCBzdHlsZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBJTlBVVF9CQVNFID0gT2JqZWN0LmZyZWV6ZSh7CiAgd2lkdGg6ICAgICAgICAnMTAwJScsCiAgcGFkZGluZzogICAgICAnOHB4IDEycHgnLAogIGJvcmRlclJhZGl1czogJzhweCcsCiAgZm9udFNpemU6ICAgICAnMTNweCcsCiAgZm9udEZhbWlseTogRk9OVF9NT05PLAogIG91dGxpbmU6ICAgICAgJ25vbmUnLAogIGJhY2tncm91bmQ6ICAgJ3ZhcigtLXptLWdsYXNzLWJnKScsCiAgYm9yZGVyOiAgICAgICAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknLAogIGNvbG9yOiAgICAgICAgJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknLAogIGJveFNpemluZzogICAgJ2JvcmRlci1ib3gnIGFzIGNvbnN0LAp9KTsKCmNvbnN0IExBQkVMX1NUWUxFID0gT2JqZWN0LmZyZWV6ZSh7CiAgZm9udEZhbWlseTogRk9OVF9NT05PLAogIGZvbnRTaXplOiAgICAgJzEwcHgnLAogIG1hcmdpbkJvdHRvbTogJzVweCcsCiAgY29sb3I6ICAgICAgICAndmFyKC0tem0tdGV4dC1mYWludCknLAogIGxldHRlclNwYWNpbmc6JzAuMDRlbScsCiAgZGlzcGxheTogICAgICAnYmxvY2snLAp9KTsKCmNvbnN0IENBUkRfU1RZTEUgPSBPYmplY3QuZnJlZXplKHsKICBiYWNrZ3JvdW5kOiAgICd2YXIoLS16bS1nbGFzcy1iZyknLAogIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywKICBib3JkZXJSYWRpdXM6ICcxMnB4JywKICBwYWRkaW5nOiAgICAgICcyMHB4JywKfSk7CgovLyDilIDilIDilIAgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQ29udmVydGVyU3RhdGUgewogIGZyb21Db2luOiAgICAgICAgICAgc3RyaW5nOwogIHRvQ29pbjogICAgICAgICAgICAgc3RyaW5nOwogIGZyb21BbW91bnQ6ICAgICAgICAgc3RyaW5nOwogIGZpYXRDb2RlOiAgICAgICAgICAgc3RyaW5nOwogIGRjYUNvaW46ICAgICAgICAgICAgc3RyaW5nOwogIGRjYUFtb3VudDogICAgICAgICAgc3RyaW5nOwogIGRjYUludGVydmFsRGF5czogICAgbnVtYmVyOwogIGRjYUR1cmF0aW9uTW9udGhzOiAgbnVtYmVyOwogIGRjYUN1cnJlbnRQcmljZTogICAgYm9vbGVhbjsKICBkY2FFbnRyeVByaWNlOiAgICAgIHN0cmluZzsKICBwb3NDb2luOiAgICAgICAgICAgIHN0cmluZzsKICBwb3NBY2NvdW50U2l6ZTogICAgIHN0cmluZzsKICBwb3NSaXNrUGN0OiAgICAgICAgIHN0cmluZzsKICBwb3NFbnRyeVByaWNlOiAgICAgIHN0cmluZzsKICBwb3NTdG9wTG9zczogICAgICAgIHN0cmluZzsKfQoKdHlwZSBDb252ZXJ0ZXJBY3Rpb24gPQogIHwgeyB0eXBlOiAnU0VUJzsga2V5OiBrZXlvZiBDb252ZXJ0ZXJTdGF0ZTsgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfTsKCi8vIOKUgOKUgOKUgCBSZWR1Y2VyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgSU5JVElBTDogQ29udmVydGVyU3RhdGUgPSBPYmplY3QuZnJlZXplKHsKICBmcm9tQ29pbjogICAgICAgICAgICdiaXRjb2luJywKICB0b0NvaW46ICAgICAgICAgICAgICdldGhlcmV1bScsCiAgZnJvbUFtb3VudDogICAgICAgICAnMScsCiAgZmlhdENvZGU6ICAgICAgICAgICAnVVNEJywKICBkY2FDb2luOiAgICAgICAgICAgICdiaXRjb2luJywKICBkY2FBbW91bnQ6ICAgICAgICAgICcxMDAnLAogIGRjYUludGVydmFsRGF5czogICAgNywKICBkY2FEdXJhdGlvbk1vbnRoczogIDEyLAogIGRjYUN1cnJlbnRQcmljZTogICAgdHJ1ZSwKICBkY2FFbnRyeVByaWNlOiAgICAgICcnLAogIHBvc0NvaW46ICAgICAgICAgICAgJ2JpdGNvaW4nLAogIHBvc0FjY291bnRTaXplOiAgICAgJzEwMDAwJywKICBwb3NSaXNrUGN0OiAgICAgICAgICcyJywKICBwb3NFbnRyeVByaWNlOiAgICAgICcnLAogIHBvc1N0b3BMb3NzOiAgICAgICAgJycsCn0gYXMgQ29udmVydGVyU3RhdGUpOwoKZnVuY3Rpb24gcmVkdWNlcihzdGF0ZTogQ29udmVydGVyU3RhdGUsIGFjdGlvbjogQ29udmVydGVyQWN0aW9uKTogQ29udmVydGVyU3RhdGUgewogIHJldHVybiB7IC4uLnN0YXRlLCBbYWN0aW9uLmtleV06IGFjdGlvbi52YWx1ZSB9Owp9CgovLyDilIDilIDilIAgSGVscGVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmZ1bmN0aW9uIGZtdEZpYXQodmFsOiBudW1iZXIsIGNvZGU6IHN0cmluZywgc3ltYm9sOiBzdHJpbmcpOiBzdHJpbmcgewogIGlmICghaXNGaW5pdGUodmFsKSkgcmV0dXJuICfigJQnOwogIGlmIChjb2RlID09PSAnSURSJykgcmV0dXJuIHN5bWJvbCArIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnaWQtSUQnKS5mb3JtYXQoTWF0aC5yb3VuZCh2YWwpKTsKICBpZiAoY29kZSA9PT0gJ0pQWScpIHJldHVybiBzeW1ib2wgKyBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2phLUpQJykuZm9ybWF0KE1hdGgucm91bmQodmFsKSk7CiAgcmV0dXJuIHN5bWJvbCArIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tVVMnLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiwgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pLmZvcm1hdCh2YWwpOwp9CgpmdW5jdGlvbiBnZXRGaWF0UmF0ZShjb2RlOiBzdHJpbmcpOiBudW1iZXIgewogIHJldHVybiBGSUFUX0NVUlJFTkNJRVMuZmluZChmID0+IGYuY29kZSA9PT0gY29kZSk/LnJhdGUgPz8gMTsKfQoKLy8g4pSA4pSA4pSAIENvaW4gU2VsZWN0b3Ig4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQ29pblNlbGVjdG9yUHJvcHMgewogIGFzc2V0czogICBDcnlwdG9Bc3NldFtdOwogIHZhbHVlOiAgICBzdHJpbmc7CiAgb25DaGFuZ2U6IChpZDogc3RyaW5nKSA9PiB2b2lkOwogIGxhYmVsOiAgICBzdHJpbmc7Cn0KCmNvbnN0IENvaW5TZWxlY3RvciA9IG1lbW8oKHsgYXNzZXRzLCB2YWx1ZSwgb25DaGFuZ2UsIGxhYmVsIH06IENvaW5TZWxlY3RvclByb3BzKSA9PiB7CiAgY29uc3QgW29wZW4sIHNldE9wZW5dICA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbcSwgc2V0UV0gICAgICAgID0gdXNlU3RhdGUoJycpOwogIGNvbnN0IHJlZiAgICAgICAgICAgICAgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpOwogIGNvbnN0IHNlbGVjdGVkICAgICAgICAgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5maW5kKGEgPT4gYS5pZCA9PT0gdmFsdWUpLCBbYXNzZXRzLCB2YWx1ZV0pOwoKICBjb25zdCBmaWx0ZXJlZCA9IHVzZU1lbW8oKCkgPT4gewogICAgaWYgKCFxKSByZXR1cm4gYXNzZXRzLnNsaWNlKDAsIDMwKTsKICAgIGNvbnN0IGxvd2VyID0gcS50b0xvd2VyQ2FzZSgpOwogICAgcmV0dXJuIGFzc2V0cy5maWx0ZXIoYSA9PiBhLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcikgfHwgYS5zeW1ib2wudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcikpLnNsaWNlKDAsIDMwKTsKICB9LCBbYXNzZXRzLCBxXSk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoIW9wZW4pIHJldHVybjsKICAgIGNvbnN0IGhhbmRsZXIgPSAoZTogTW91c2VFdmVudCkgPT4gewogICAgICBpZiAocmVmLmN1cnJlbnQgJiYgIXJlZi5jdXJyZW50LmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSBzZXRPcGVuKGZhbHNlKTsKICAgIH07CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVyKTsKICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVyKTsKICB9LCBbb3Blbl0pOwoKICByZXR1cm4gKAogICAgPGRpdiByZWY9e3JlZn0gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0+CiAgICAgIDxsYWJlbCBzdHlsZT17TEFCRUxfU1RZTEV9PntsYWJlbH08L2xhYmVsPgogICAgICA8YnV0dG9uCiAgICAgICAgb25DbGljaz17KCkgPT4gc2V0T3BlbihvID0+ICFvKX0KICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbCArICcg4oCUICcgKyAoc2VsZWN0ZWQ/Lm5hbWUgPz8gJ3NlbGVjdCBjb2luJyl9CiAgICAgICAgYXJpYS1leHBhbmRlZD17b3Blbn0KICAgICAgICBzdHlsZT17ewogICAgICAgICAgd2lkdGg6ICAgICAgICAgICcxMDAlJywKICAgICAgICAgIGRpc3BsYXk6ICAgICAgICAnZmxleCcsCiAgICAgICAgICBhbGlnbkl0ZW1zOiAgICAgJ2NlbnRlcicsCiAgICAgICAgICBnYXA6ICAgICAgICAgICAgJzhweCcsCiAgICAgICAgICBwYWRkaW5nOiAgICAgICAgJzhweCAxMnB4JywKICAgICAgICAgIGJvcmRlclJhZGl1czogICAnMTBweCcsCiAgICAgICAgICB0ZXh0QWxpZ246ICAgICAgJ2xlZnQnLAogICAgICAgICAgY3Vyc29yOiAgICAgICAgICdwb2ludGVyJywKICAgICAgICAgIGJhY2tncm91bmQ6ICAgICAndmFyKC0tem0tZ2xhc3MtYmcpJywKICAgICAgICAgIGJvcmRlcjogICAgICAgICAnMXB4IHNvbGlkICcgKyAob3BlbiA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4zNSknIDogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknKSwKICAgICAgICAgIGNvbG9yOiAgICAgICAgICAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScsCiAgICAgICAgICB0cmFuc2l0aW9uOiAgICAgJ2JvcmRlci1jb2xvciAwLjE1cycsCiAgICAgICAgICB3aWxsQ2hhbmdlOiAgICAgJ3RyYW5zZm9ybScsCiAgICAgICAgfX0KICAgICAgPgogICAgICAgIHtzZWxlY3RlZD8uaW1hZ2UgJiYgKAogICAgICAgICAgPGltZyBzcmM9e3NlbGVjdGVkLmltYWdlfSBhbHQ9IiIgc3R5bGU9e3sgd2lkdGg6IDIwLCBoZWlnaHQ6IDIwLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBmbGV4U2hyaW5rOiAwIH19IC8+CiAgICAgICAgKX0KICAgICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDEsIG1pbldpZHRoOiAwIH19PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsIHdoaXRlU3BhY2U6ICdub3dyYXAnIH19PgogICAgICAgICAgICB7c2VsZWN0ZWQ/Lm5hbWUgPz8gJ+KAlCd9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAge3NlbGVjdGVkID8gZm9ybWF0UHJpY2Uoc2VsZWN0ZWQucHJpY2UpIDogJyd9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8Q2hldnJvbkRvd24gc2l6ZT17MTN9IHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknLCBmbGV4U2hyaW5rOiAwLCB0cmFuc2Zvcm06IG9wZW4gPyAncm90YXRlKDE4MGRlZyknIDogJ25vbmUnLCB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMTVzJyB9fSAvPgogICAgICA8L2J1dHRvbj4KCiAgICAgIHtvcGVuICYmICgKICAgICAgICA8ZGl2IHN0eWxlPXt7CiAgICAgICAgICBwb3NpdGlvbjogICAgICdhYnNvbHV0ZScsCiAgICAgICAgICBsZWZ0OiAgICAgICAgIDAsCiAgICAgICAgICByaWdodDogICAgICAgIDAsCiAgICAgICAgICB0b3A6ICAgICAgICAgICcxMDAlJywKICAgICAgICAgIG1hcmdpblRvcDogICAgJzRweCcsCiAgICAgICAgICB6SW5kZXg6ICAgICAgIDUwLAogICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgIG92ZXJmbG93OiAgICAgJ2hpZGRlbicsCiAgICAgICAgICBiYWNrZ3JvdW5kOiAgICd2YXIoLS16bS1iZy1iYXNlKScsCiAgICAgICAgICBib3JkZXI6ICAgICAgICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMTUpJywKICAgICAgICAgIGJveFNoYWRvdzogICAgJzAgOHB4IDMycHggcmdiYSgwLDAsMCwwLjUpJywKICAgICAgICAgIG1heEhlaWdodDogICAgJzI4MHB4JywKICAgICAgICB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogJzhweCcsIGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCByZ2JhKDk2LDE2NSwyNTAsMC4wNyknIH19PgogICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICBhdXRvRm9jdXMKICAgICAgICAgICAgICB2YWx1ZT17cX0KICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRRKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iQ2FyaSBjb2luLi4uIgogICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICB3aWR0aDogICAgICAgICcxMDAlJywKICAgICAgICAgICAgICAgIHBhZGRpbmc6ICAgICAgJzZweCA4cHgnLAogICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgICAgICAgIGZvbnRTaXplOiAgICAgJzEycHgnLAogICAgICAgICAgICAgICAgZm9udEZhbWlseTogRk9OVF9NT05PLAogICAgICAgICAgICAgICAgb3V0bGluZTogICAgICAnbm9uZScsCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAgICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJywKICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCByZ2JhKDk2LDE2NSwyNTAsMC4xNSknLAogICAgICAgICAgICAgICAgY29sb3I6ICAgICAgICAncmdiYSgyMjYsMjMyLDI0MCwwLjkpJywKICAgICAgICAgICAgICAgIGJveFNpemluZzogICAgJ2JvcmRlci1ib3gnLAogICAgICAgICAgICAgIH19CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgb3ZlcmZsb3dZOiAnYXV0bycsIG1heEhlaWdodDogJzIyMHB4JyB9fT4KICAgICAgICAgICAge2ZpbHRlcmVkLm1hcChhID0+ICgKICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICBrZXk9e2EuaWR9CiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IG9uQ2hhbmdlKGEuaWQpOyBzZXRPcGVuKGZhbHNlKTsgc2V0USgnJyk7IH19CiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnU2VsZWN0ICcgKyBhLm5hbWV9CiAgICAgICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXthLmlkID09PSB2YWx1ZX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgIHdpZHRoOiAgICAgICAnMTAwJScsCiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICAgICAnZmxleCcsCiAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgZ2FwOiAgICAgICAgICc4cHgnLAogICAgICAgICAgICAgICAgICBwYWRkaW5nOiAgICAgJzhweCAxMnB4JywKICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAgICdsZWZ0JywKICAgICAgICAgICAgICAgICAgY3Vyc29yOiAgICAgICdwb2ludGVyJywKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIGEuaWQgPT09IHZhbHVlID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjA4KScgOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgICBib3JkZXI6ICAgICAgJ25vbmUnLAogICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAgJ2JhY2tncm91bmQgMC4xcycsCiAgICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICAndHJhbnNmb3JtJywKICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e2UgPT4geyBpZiAoYS5pZCAhPT0gdmFsdWUpIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoOTYsMTY1LDI1MCwwLjA1KSc7IH19CiAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoYS5pZCAhPT0gdmFsdWUpIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JzsgfX0KICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICB7YS5pbWFnZSAmJiA8aW1nIHNyYz17YS5pbWFnZX0gYWx0PSIiIHN0eWxlPXt7IHdpZHRoOiAyMCwgaGVpZ2h0OiAyMCwgYm9yZGVyUmFkaXVzOiAnNTAlJywgZmxleFNocmluazogMCB9fSAvPn0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZmxleDogMSwgbWluV2lkdGg6IDAgfX0+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAncmdiYSgyMjYsMjMyLDI0MCwwLjkpJyB9fT4KICAgICAgICAgICAgICAgICAgICB7YS5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsIHdoaXRlU3BhY2U6ICdub3dyYXAnIH19PgogICAgICAgICAgICAgICAgICAgIHthLm5hbWV9CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogJ3JpZ2h0JywgZmxleFNocmluazogMCB9fT4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjYpJyB9fT4KICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0UHJpY2UoYS5wcmljZSl9CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CiAgICA8L2Rpdj4KICApOwp9KTsKQ29pblNlbGVjdG9yLmRpc3BsYXlOYW1lID0gJ0NvaW5TZWxlY3Rvcic7CgovLyDilIDilIDilIAgRENBIENoYXJ0IChTVkcpIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKaW50ZXJmYWNlIERDQUNoYXJ0UHJvcHMgeyBpbnZlc3RlZDogbnVtYmVyW107IHZhbHVlOiBudW1iZXJbXTsgfQoKY29uc3QgRENBQ2hhcnQgPSBtZW1vKCh7IGludmVzdGVkLCB2YWx1ZSB9OiBEQ0FDaGFydFByb3BzKSA9PiB7CiAgY29uc3QgVyA9IDUwMDsgY29uc3QgSCA9IDEyMDsKICBjb25zdCBQQUQgPSB7IHQ6IDgsIGI6IDgsIGw6IDQsIHI6IDQgfTsKICBjb25zdCBjVyA9IFcgLSBQQUQubCAtIFBBRC5yOwogIGNvbnN0IGNIID0gSCAtIFBBRC50IC0gUEFELmI7CgogIGNvbnN0IHsgaW52UGF0aCwgdmFsUGF0aCB9ID0gdXNlTWVtbygoKSA9PiB7CiAgICBpZiAoaW52ZXN0ZWQubGVuZ3RoIDwgMikgcmV0dXJuIHsgaW52UGF0aDogJycsIHZhbFBhdGg6ICcnIH07CiAgICBjb25zdCBhbGxWYWxzID0gWy4uLmludmVzdGVkLCAuLi52YWx1ZV07CiAgICBjb25zdCBtaW5WID0gTWF0aC5taW4oLi4uYWxsVmFscyk7CiAgICBjb25zdCBtYXhWID0gTWF0aC5tYXgoLi4uYWxsVmFscywgbWluViArIDEpOwogICAgY29uc3QgcmFuZ2UgPSBtYXhWIC0gbWluVjsKICAgIGNvbnN0IHNjYWxlWCA9IChpOiBudW1iZXIpID0+IFBBRC5sICsgKGkgLyAoaW52ZXN0ZWQubGVuZ3RoIC0gMSkpICogY1c7CiAgICBjb25zdCBzY2FsZVkgPSAodjogbnVtYmVyKSA9PiBQQUQudCArIGNIIC0gKCh2IC0gbWluVikgLyByYW5nZSkgKiBjSDsKICAgIGNvbnN0IGlwID0gJ00nICsgaW52ZXN0ZWQubWFwKCh2LCBpKSA9PiBzY2FsZVgoaSkudG9GaXhlZCgxKSArICcsJyArIHNjYWxlWSh2KS50b0ZpeGVkKDEpKS5qb2luKCdMJyk7CiAgICBjb25zdCB2cCA9ICdNJyArIHZhbHVlLm1hcCgodiwgaSkgPT4gc2NhbGVYKGkpLnRvRml4ZWQoMSkgKyAnLCcgKyBzY2FsZVkodikudG9GaXhlZCgxKSkuam9pbignTCcpOwogICAgcmV0dXJuIHsgaW52UGF0aDogaXAsIHZhbFBhdGg6IHZwIH07CiAgfSwgW2ludmVzdGVkLCB2YWx1ZSwgY1csIGNIXSk7CgogIGlmICghaW52UGF0aCkgcmV0dXJuIG51bGw7CgogIHJldHVybiAoCiAgICA8c3ZnIHdpZHRoPSIxMDAlIiB2aWV3Qm94PXsnMCAwICcgKyBXICsgJyAnICsgSH0gcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9e3sgZGlzcGxheTogJ2Jsb2NrJywgaGVpZ2h0OiBIIH19PgogICAgICA8cGF0aCBkPXtpbnZQYXRofSBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoOTYsMTY1LDI1MCwwLjUpIiBzdHJva2VXaWR0aD0iMS41IiBzdHJva2VEYXNoYXJyYXk9IjQgMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiIC8+CiAgICAgIDxwYXRoIGQ9e3ZhbFBhdGh9IGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg1MiwyMTEsMTUzLDEpIiBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiIHN0cm9rZUxpbmVqb2luPSJyb3VuZCIgLz4KICAgIDwvc3ZnPgogICk7Cn0pOwpEQ0FDaGFydC5kaXNwbGF5TmFtZSA9ICdEQ0FDaGFydCc7CgovLyDilIDilIDilIAgQ29udmVydGVyIFRhYiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IENvbnZlcnRlclRhYiA9IG1lbW8oKHsgYXNzZXRzLCBzdGF0ZSwgZGlzcGF0Y2ggfTogewogIGFzc2V0czogQ3J5cHRvQXNzZXRbXTsKICBzdGF0ZTogIENvbnZlcnRlclN0YXRlOwogIGRpc3BhdGNoOiBSZWFjdC5EaXNwYXRjaDxDb252ZXJ0ZXJBY3Rpb24+Owp9KSA9PiB7CiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2soKGtleToga2V5b2YgQ29udmVydGVyU3RhdGUsIHZhbHVlOiBzdHJpbmcpID0+IGRpc3BhdGNoKHsgdHlwZTogJ1NFVCcsIGtleSwgdmFsdWUgfSksIFtkaXNwYXRjaF0pOwoKICBjb25zdCBmcm9tQXNzZXQgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5maW5kKGEgPT4gYS5pZCA9PT0gc3RhdGUuZnJvbUNvaW4pLCBbYXNzZXRzLCBzdGF0ZS5mcm9tQ29pbl0pOwogIGNvbnN0IHRvQXNzZXQgICA9IHVzZU1lbW8oKCkgPT4gYXNzZXRzLmZpbmQoYSA9PiBhLmlkID09PSBzdGF0ZS50b0NvaW4pLCAgIFthc3NldHMsIHN0YXRlLnRvQ29pbl0pOwogIGNvbnN0IGZpYXRJbmZvICA9IHVzZU1lbW8oKCkgPT4gRklBVF9DVVJSRU5DSUVTLmZpbmQoZiA9PiBmLmNvZGUgPT09IHN0YXRlLmZpYXRDb2RlKSA/PyBGSUFUX0NVUlJFTkNJRVNbMF0sIFtzdGF0ZS5maWF0Q29kZV0pOwoKICBjb25zdCBmcm9tQW10ICAgID0gcGFyc2VGbG9hdChzdGF0ZS5mcm9tQW1vdW50KSB8fCAwOwogIGNvbnN0IHJlc3VsdENvaW4gPSB1c2VNZW1vKCgpID0+ICghZnJvbUFzc2V0IHx8ICF0b0Fzc2V0IHx8ICFmcm9tQW10KSA/IDAgOiAoZnJvbUFtdCAqIGZyb21Bc3NldC5wcmljZSkgLyB0b0Fzc2V0LnByaWNlLCBbZnJvbUFzc2V0LCB0b0Fzc2V0LCBmcm9tQW10XSk7CiAgY29uc3QgcmVzdWx0RmlhdCA9IHVzZU1lbW8oKCkgPT4gKCFmcm9tQXNzZXQgfHwgIWZyb21BbXQpID8gMCA6IGZyb21BbXQgKiBmcm9tQXNzZXQucHJpY2UgKiBmaWF0SW5mby5yYXRlLCBbZnJvbUFzc2V0LCBmcm9tQW10LCBmaWF0SW5mb10pOwoKICBjb25zdCBoYW5kbGVTd2FwID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUJywga2V5OiAnZnJvbUNvaW4nLCB2YWx1ZTogc3RhdGUudG9Db2luIH0pOwogICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUJywga2V5OiAndG9Db2luJywgdmFsdWU6IHN0YXRlLmZyb21Db2luIH0pOwogIH0sIFtkaXNwYXRjaCwgc3RhdGUuZnJvbUNvaW4sIHN0YXRlLnRvQ29pbl0pOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KICAgICAgey8qIENvaW4g4oaUIENvaW4gKi99CiAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICA8QXJyb3dMZWZ0UmlnaHQgc2l6ZT17MTR9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDAuOCknIH19IC8+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgICAgQ29pbiDihpQgQ29pbiBDb252ZXJ0ZXIKICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzFmciBhdXRvIDFmcicsIGdhcDogJzEycHgnLCBhbGlnbkl0ZW1zOiAnZW5kJyB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgICAgIDxDb2luU2VsZWN0b3IgYXNzZXRzPXthc3NldHN9IHZhbHVlPXtzdGF0ZS5mcm9tQ29pbn0gb25DaGFuZ2U9e3YgPT4gc2V0KCdmcm9tQ29pbicsIHYpfSBsYWJlbD0iRGFyaSIgLz4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT5KdW1sYWg8L2xhYmVsPgogICAgICAgICAgICAgIDxpbnB1dAogICAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIgogICAgICAgICAgICAgICAgdmFsdWU9e3N0YXRlLmZyb21BbW91bnR9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXQoJ2Zyb21BbW91bnQnLCBlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgICAgICBtaW49IjAiCiAgICAgICAgICAgICAgICBzdHlsZT17SU5QVVRfQkFTRX0KICAgICAgICAgICAgICAgIG9uRm9jdXM9e2UgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAncmdiYSg5NiwxNjUsMjUwLDAuMzUpJzsgfX0KICAgICAgICAgICAgICAgIG9uQmx1cj17ZSA9PiB7IGUuY3VycmVudFRhcmdldC5zdHlsZS5ib3JkZXJDb2xvciA9ICd2YXIoLS16bS1nbGFzcy1ib3JkZXIpJzsgfX0KICAgICAgICAgICAgICAvPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU3dhcH0KICAgICAgICAgICAgYXJpYS1sYWJlbD0iU3dhcCBmcm9tIGFuZCB0byBjdXJyZW5jaWVzIgogICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgIGRpc3BsYXk6ICAgICAgJ2ZsZXgnLAogICAgICAgICAgICAgIGFsaWduSXRlbXM6ICAgJ2NlbnRlcicsCiAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6J2NlbnRlcicsCiAgICAgICAgICAgICAgd2lkdGg6ICAgICAgICAnMzZweCcsCiAgICAgICAgICAgICAgaGVpZ2h0OiAgICAgICAnMzZweCcsCiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgICAgICBjdXJzb3I6ICAgICAgICdwb2ludGVyJywKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAgICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknLAogICAgICAgICAgICAgIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCByZ2JhKDk2LDE2NSwyNTAsMC4yMiknLAogICAgICAgICAgICAgIGNvbG9yOiAgICAgICAgJ3JnYmEoOTYsMTY1LDI1MCwxKScsCiAgICAgICAgICAgICAgd2lsbENoYW5nZTogICAndHJhbnNmb3JtJywKICAgICAgICAgICAgfX0KICAgICAgICAgICAgb25Nb3VzZUVudGVyPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAncmdiYSg5NiwxNjUsMjUwLDAuMTgpJzsgfX0KICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAncmdiYSg5NiwxNjUsMjUwLDAuMTApJzsgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPFJlZnJlc2hDdyBzaXplPXsxNH0gLz4KICAgICAgICAgIDwvYnV0dG9uPgoKICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgICAgIDxDb2luU2VsZWN0b3IgYXNzZXRzPXthc3NldHN9IHZhbHVlPXtzdGF0ZS50b0NvaW59IG9uQ2hhbmdlPXt2ID0+IHNldCgndG9Db2luJywgdil9IGxhYmVsPSJLZSIgLz4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAnOHB4IDEycHgnLCBib3JkZXJSYWRpdXM6ICc4cHgnLCBiYWNrZ3JvdW5kOiAncmdiYSg1MiwyMTEsMTUzLDAuMDUpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoNTIsMjExLDE1MywwLjE1KScgfX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTRweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH19PgogICAgICAgICAgICAgICAge3Jlc3VsdENvaW4gPiAwID8gcmVzdWx0Q29pbi50b0ZpeGVkKDgpLnJlcGxhY2UoLy4/MCskLywgJycpIDogJ+KAlCd9CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjQpJywgbWFyZ2luVG9wOiAnMnB4JyB9fT4KICAgICAgICAgICAgICAgIHt0b0Fzc2V0ID8gdG9Bc3NldC5zeW1ib2wudG9VcHBlckNhc2UoKSA6ICfigJQnfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7ZnJvbUFzc2V0ICYmIHRvQXNzZXQgJiYgKAogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhXcmFwOiAnd3JhcCcsIGdhcDogJzE2cHgnLCBwYWRkaW5nVG9wOiAnMTJweCcsIG1hcmdpblRvcDogJzEycHgnLCBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScgfX0+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICAgIHsnMSAnICsgZnJvbUFzc2V0LnN5bWJvbC50b1VwcGVyQ2FzZSgpICsgJyA9ICd9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMXB4JywgZm9udFdlaWdodDogNjAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICAgICAgeyhmcm9tQXNzZXQucHJpY2UgLyB0b0Fzc2V0LnByaWNlKS50b0ZpeGVkKDYpICsgJyAnICsgdG9Bc3NldC5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMHB4JywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgICAgICB7JzEgJyArIHRvQXNzZXQuc3ltYm9sLnRvVXBwZXJDYXNlKCkgKyAnID0gJ30KICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzExcHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgICAgICB7KHRvQXNzZXQucHJpY2UgLyBmcm9tQXNzZXQucHJpY2UpLnRvRml4ZWQoNikgKyAnICcgKyBmcm9tQXNzZXQuc3ltYm9sLnRvVXBwZXJDYXNlKCl9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIENvaW4g4oaSIEZpYXQgKi99CiAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICA8RG9sbGFyU2lnbiBzaXplPXsxNH0gc3R5bGU9e3sgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMC44KScgfX0gLz4KICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMnB4JywgZm9udFdlaWdodDogNjAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICBDb2luIOKGkiBGaWF0CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXY+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT5NYXRhIFVhbmc8L2xhYmVsPgogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcsIGZsZXhXcmFwOiAnd3JhcCcsIG1hcmdpbkJvdHRvbTogJzE2cHgnIH19PgogICAgICAgICAgICB7RklBVF9DVVJSRU5DSUVTLm1hcChmID0+IHsKICAgICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBmLmNvZGUgPT09IHN0YXRlLmZpYXRDb2RlOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICAgIGtleT17Zi5jb2RlfQogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXQoJ2ZpYXRDb2RlJywgZi5jb2RlKX0KICAgICAgICAgICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAgICAgICc1cHggMTBweCcsCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywKICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogICAgICcxMXB4JywKICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBGT05UX01PTk8sCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAgICAgICAncG9pbnRlcicsCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogICBhY3RpdmUgPyAncmdiYSg1MiwyMTEsMTUzLDAuMTIpJyA6ICd0cmFuc3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICAgICAgICBhY3RpdmUgPyAncmdiYSg1MiwyMTEsMTUzLDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICAgJzFweCBzb2xpZCAnICsgKGFjdGl2ZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMC4yOCknIDogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknKSwKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAgICdhbGwgMC4xNXMnLAogICAgICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICAgJ3RyYW5zZm9ybScsCiAgICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17ZSA9PiB7IGlmICghYWN0aXZlKSBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS16bS1nbGFzcy1ob3ZlciknOyB9fQogICAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOyB9fQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICB7Zi5jb2RlfQogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSl9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzEycHggMTZweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDUyLDIxMSwxNTMsMC4wNSknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg1MiwyMTEsMTUzLDAuMTIpJyB9fT4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3JnYmEoMTQ4LDE2MywxODQsMC41KScsIG1hcmdpbkJvdHRvbTogJzRweCcgfX0+CiAgICAgICAgICAgICAge2Zyb21BbXQgKyAnICcgKyAoZnJvbUFzc2V0Py5zeW1ib2wudG9VcHBlckNhc2UoKSA/PyAn4oCUJykgKyAnID0nfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMjJweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH19PgogICAgICAgICAgICAgIHtmbXRGaWF0KHJlc3VsdEZpYXQsIHN0YXRlLmZpYXRDb2RlLCBmaWF0SW5mby5zeW1ib2wpfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgfX0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3JnYmEoMTQ4LDE2MywxODQsMC40KScsIG1hcmdpbkJvdHRvbTogJzJweCcgfX0+UmF0ZTwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6ICcxMXB4JywgY29sb3I6ICdyZ2JhKDE0OCwxNjMsMTg0LDAuNyknIH19PgogICAgICAgICAgICAgIHtmbXRGaWF0KGdldEZpYXRSYXRlKHN0YXRlLmZpYXRDb2RlKSwgc3RhdGUuZmlhdENvZGUsIGZpYXRJbmZvLnN5bWJvbCkgKyAnIC8gVVNEJ30KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIHtmcm9tQXNzZXQgJiYgKAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzExcHgnLCBtYXJnaW5Ub3A6ICcycHgnLCBjb2xvcjogZnJvbUFzc2V0LmNoYW5nZTI0aCA+PSAwID8gJ3JnYmEoNTIsMjExLDE1MywwLjgpJyA6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuOCknIH19PgogICAgICAgICAgICAgICAge2Zvcm1hdENoYW5nZShmcm9tQXNzZXQuY2hhbmdlMjRoKSArICcgMjRoJ30KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0pOwpDb252ZXJ0ZXJUYWIuZGlzcGxheU5hbWUgPSAnQ29udmVydGVyVGFiJzsKCi8vIOKUgOKUgOKUgCBEQ0EgVGFiIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgRENBVGFiID0gbWVtbygoeyBhc3NldHMsIHN0YXRlLCBkaXNwYXRjaCB9OiB7CiAgYXNzZXRzOiBDcnlwdG9Bc3NldFtdOwogIHN0YXRlOiAgQ29udmVydGVyU3RhdGU7CiAgZGlzcGF0Y2g6IFJlYWN0LkRpc3BhdGNoPENvbnZlcnRlckFjdGlvbj47Cn0pID0+IHsKICBjb25zdCBzZXQgPSB1c2VDYWxsYmFjaygoa2V5OiBrZXlvZiBDb252ZXJ0ZXJTdGF0ZSwgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pID0+CiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVQnLCBrZXksIHZhbHVlIH0pLCBbZGlzcGF0Y2hdKTsKCiAgY29uc3QgYXNzZXQgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5maW5kKGEgPT4gYS5pZCA9PT0gc3RhdGUuZGNhQ29pbiksIFthc3NldHMsIHN0YXRlLmRjYUNvaW5dKTsKCiAgY29uc3QgZGNhUmVzdWx0ID0gdXNlTWVtbygoKSA9PiB7CiAgICBjb25zdCBhbXRQZXJJbnRlcnZhbCA9IHBhcnNlRmxvYXQoc3RhdGUuZGNhQW1vdW50KSB8fCAwOwogICAgY29uc3QgZW50cnlQcmljZSA9IHN0YXRlLmRjYUN1cnJlbnRQcmljZSA/IChhc3NldD8ucHJpY2UgPz8gMCkgOiAocGFyc2VGbG9hdChzdGF0ZS5kY2FFbnRyeVByaWNlKSB8fCAwKTsKICAgIGlmICghYW10UGVySW50ZXJ2YWwgfHwgIWVudHJ5UHJpY2UpIHJldHVybiBudWxsOwogICAgY29uc3QgdG90YWxEYXlzICAgICAgICA9IHN0YXRlLmRjYUR1cmF0aW9uTW9udGhzICogMzA7CiAgICBjb25zdCBpbnRlcnZhbHMgICAgICAgID0gTWF0aC5mbG9vcih0b3RhbERheXMgLyBzdGF0ZS5kY2FJbnRlcnZhbERheXMpOwogICAgY29uc3QgdG90YWxJbnZlc3RlZCAgICA9IGFtdFBlckludGVydmFsICogaW50ZXJ2YWxzOwogICAgY29uc3QgY29pbnNBY2N1bXVsYXRlZCA9IHRvdGFsSW52ZXN0ZWQgLyBlbnRyeVByaWNlOwogICAgY29uc3QgY3VycmVudFZhbHVlICAgICA9IGNvaW5zQWNjdW11bGF0ZWQgKiAoYXNzZXQ/LnByaWNlID8/IGVudHJ5UHJpY2UpOwogICAgY29uc3QgcG5sICAgICAgICAgICAgICA9IGN1cnJlbnRWYWx1ZSAtIHRvdGFsSW52ZXN0ZWQ7CiAgICBjb25zdCBwbmxQY3QgICAgICAgICAgID0gKHBubCAvIHRvdGFsSW52ZXN0ZWQpICogMTAwOwogICAgY29uc3QgaW52ZXN0ZWRBcnI6IG51bWJlcltdID0gW107CiAgICBjb25zdCB2YWx1ZUFycjogICAgbnVtYmVyW10gPSBbXTsKICAgIGNvbnN0IHN0ZXBzID0gTWF0aC5taW4oaW50ZXJ2YWxzLCA1MCk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzdGVwczsgaSsrKSB7CiAgICAgIGNvbnN0IGZyYWMgID0gaSAvIHN0ZXBzOwogICAgICBjb25zdCBpbnYgICA9IGFtdFBlckludGVydmFsICogKGZyYWMgKiBpbnRlcnZhbHMpOwogICAgICBjb25zdCBjb2lucyA9IGludiAvIGVudHJ5UHJpY2U7CiAgICAgIGludmVzdGVkQXJyLnB1c2goaW52KTsKICAgICAgdmFsdWVBcnIucHVzaChjb2lucyAqIChhc3NldD8ucHJpY2UgPz8gZW50cnlQcmljZSkpOwogICAgfQogICAgcmV0dXJuIHsgdG90YWxJbnZlc3RlZCwgY29pbnNBY2N1bXVsYXRlZCwgY3VycmVudFZhbHVlLCBwbmwsIHBubFBjdCwgaW50ZXJ2YWxzLCBpbnZlc3RlZEFyciwgdmFsdWVBcnIgfTsKICB9LCBbc3RhdGUsIGFzc2V0XSk7CgogIGNvbnN0IGlzUHJvZml0YWJsZSA9IChkY2FSZXN1bHQ/LnBubCA/PyAwKSA+PSAwOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPGRpdiBzdHlsZT17Q0FSRF9TVFlMRX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc4cHgnLCBtYXJnaW5Cb3R0b206ICcxNnB4JyB9fT4KICAgICAgICAgIDxDYWxjdWxhdG9yIHNpemU9ezE0fSBzdHlsZT17eyBjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjgpJyB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgIERDQSBLYWxrdWxhdG9yCiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICcxZnIgMWZyJywgZ2FwOiAnMTZweCcgfX0+CiAgICAgICAgICA8Q29pblNlbGVjdG9yIGFzc2V0cz17YXNzZXRzfSB2YWx1ZT17c3RhdGUuZGNhQ29pbn0gb25DaGFuZ2U9e3YgPT4gc2V0KCdkY2FDb2luJywgdil9IGxhYmVsPSJDb2luIiAvPgogICAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXtMQUJFTF9TVFlMRX0+SnVtbGFoIHBlciBJbnRlcnZhbCAoVVNEKTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dAogICAgICAgICAgICAgIHR5cGU9Im51bWJlciIgdmFsdWU9e3N0YXRlLmRjYUFtb3VudH0gb25DaGFuZ2U9e2UgPT4gc2V0KCdkY2FBbW91bnQnLCBlLnRhcmdldC52YWx1ZSl9IG1pbj0iMSIKICAgICAgICAgICAgICBzdHlsZT17SU5QVVRfQkFTRX0KICAgICAgICAgICAgICBvbkZvY3VzPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3JnYmEoOTYsMTY1LDI1MCwwLjM1KSc7IH19CiAgICAgICAgICAgICAgb25CbHVyPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknOyB9fQogICAgICAgICAgICAvPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2PgogICAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT5JbnRlcnZhbCBCZWxpPC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAge0RDQV9JTlRFUlZBTFMubWFwKGludGVydmFsID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZSA9IHN0YXRlLmRjYUludGVydmFsRGF5cyA9PT0gaW50ZXJ2YWwuZGF5czsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxidXR0b24ga2V5PXtpbnRlcnZhbC5sYWJlbH0gb25DbGljaz17KCkgPT4gc2V0KCdkY2FJbnRlcnZhbERheXMnLCBpbnRlcnZhbC5kYXlzKX0gc3R5bGU9e3sKICAgICAgICAgICAgICAgICAgICBmbGV4OiAxLCBwYWRkaW5nOiAnOHB4IDAnLCBib3JkZXJSYWRpdXM6ICc4cHgnLCBmb250U2l6ZTogJzExcHgnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGN1cnNvcjogJ3BvaW50ZXInLAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGFjdGl2ZSA/ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMiknIDogJ3RyYW5zcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBjb2xvcjogICAgICBhY3RpdmUgPyAncmdiYSgyNTEsMTkxLDM2LDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICcxcHggc29saWQgJyArIChhY3RpdmUgPyAncmdiYSgyNTEsMTkxLDM2LDAuMjgpJyA6ICd2YXIoLS16bS1nbGFzcy1ib3JkZXIpJyksCiAgICAgICAgICAgICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsCiAgICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17ZSA9PiB7IGlmICghYWN0aXZlKSBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS16bS1nbGFzcy1ob3ZlciknOyB9fQogICAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOyB9fQogICAgICAgICAgICAgICAgICA+e2ludGVydmFsLmxhYmVsfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT17TEFCRUxfU1RZTEV9PkR1cmFzaTwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICc2cHgnLCBmbGV4V3JhcDogJ3dyYXAnIH19PgogICAgICAgICAgICAgIHtEQ0FfRFVSQVRJT05TLm1hcChkdXIgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gc3RhdGUuZGNhRHVyYXRpb25Nb250aHMgPT09IGR1ci5tb250aHM7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICA8YnV0dG9uIGtleT17ZHVyLmxhYmVsfSBvbkNsaWNrPXsoKSA9PiBzZXQoJ2RjYUR1cmF0aW9uTW9udGhzJywgZHVyLm1vbnRocyl9IHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgICAgZmxleDogMSwgcGFkZGluZzogJzhweCAwJywgYm9yZGVyUmFkaXVzOiAnOHB4JywgZm9udFNpemU6ICcxMXB4JywgZm9udEZhbWlseTogRk9OVF9NT05PLCBjdXJzb3I6ICdwb2ludGVyJywKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBhY3RpdmUgPyAncmdiYSgxNjcsMTM5LDI1MCwwLjEyKScgOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAgICAgIGFjdGl2ZSA/ICdyZ2JhKDE2NywxMzksMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICcxcHggc29saWQgJyArIChhY3RpdmUgPyAncmdiYSgxNjcsMTM5LDI1MCwwLjI4KScgOiAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKScpLAogICAgICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLAogICAgICAgICAgICAgICAgICB9fQogICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tem0tZ2xhc3MtaG92ZXIpJzsgfX0KICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtlID0+IHsgaWYgKCFhY3RpdmUpIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JzsgfX0KICAgICAgICAgICAgICAgICAgPntkdXIubGFiZWx9PC9idXR0b24+CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXtMQUJFTF9TVFlMRX0+SGFyZ2EgRW50cnk8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnOHB4JywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX0+CiAgICAgICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0KCdkY2FDdXJyZW50UHJpY2UnLCAhc3RhdGUuZGNhQ3VycmVudFByaWNlKX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogJzhweCcsIGZvbnRTaXplOiAnMTFweCcsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY3Vyc29yOiAncG9pbnRlcicsIGZsZXhTaHJpbms6IDAsCiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHN0YXRlLmRjYUN1cnJlbnRQcmljZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMC4xMCknIDogJ3RyYW5zcGFyZW50JywKICAgICAgICAgICAgICAgICAgYm9yZGVyOiAgICAgJzFweCBzb2xpZCAnICsgKHN0YXRlLmRjYUN1cnJlbnRQcmljZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMC4yNSknIDogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknKSwKICAgICAgICAgICAgICAgICAgY29sb3I6ICAgICAgc3RhdGUuZGNhQ3VycmVudFByaWNlID8gJ3JnYmEoNTIsMjExLDE1MywxKScgOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJywKICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgPkxpdmUgUHJpY2U8L2J1dHRvbj4KICAgICAgICAgICAgICB7IXN0YXRlLmRjYUN1cnJlbnRQcmljZSAmJiAoCiAgICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIiB2YWx1ZT17c3RhdGUuZGNhRW50cnlQcmljZX0gb25DaGFuZ2U9e2UgPT4gc2V0KCdkY2FFbnRyeVByaWNlJywgZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iQ3VzdG9tLi4uIgogICAgICAgICAgICAgICAgICBzdHlsZT17eyAuLi5JTlBVVF9CQVNFLCBmbGV4OiAxIH19CiAgICAgICAgICAgICAgICAgIG9uRm9jdXM9e2UgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAncmdiYSg5NiwxNjUsMjUwLDAuMzUpJzsgfX0KICAgICAgICAgICAgICAgICAgb25CbHVyPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknOyB9fQogICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICApfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIHtkY2FSZXN1bHQgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICAgIEhhc2lsIFNpbXVsYXNpCiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAncmVwZWF0KDIsIDFmciknLCBnYXA6ICcxMHB4JywgbWFyZ2luQm90dG9tOiAnMTZweCcgfX0+CiAgICAgICAgICAgIHtbCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1RvdGFsIERpaW52ZXN0YXNpJywgdmFsdWU6ICckJyArIGRjYVJlc3VsdC50b3RhbEludmVzdGVkLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pLCBjb2xvcjogJ3JnYmEoOTYsMTY1LDI1MCwxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnQ29pbiBEaWt1bXB1bGthbicsIHZhbHVlOiBkY2FSZXN1bHQuY29pbnNBY2N1bXVsYXRlZC50b0ZpeGVkKDYpICsgJyAnICsgKGFzc2V0Py5zeW1ib2wudG9VcHBlckNhc2UoKSA/PyAnJyksIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJyB9LAogICAgICAgICAgICAgIHsgbGFiZWw6ICdOaWxhaSBTZWthcmFuZycsIHZhbHVlOiAnJCcgKyBkY2FSZXN1bHQuY3VycmVudFZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pLCBjb2xvcjogaXNQcm9maXRhYmxlID8gJ3JnYmEoNTIsMjExLDE1MywxKScgOiAncmdiYSgyNTEsMTEzLDEzMywxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnUCZMJywgdmFsdWU6IChkY2FSZXN1bHQucG5sID49IDAgPyAnKycgOiAnJykgKyAnJCcgKyBNYXRoLmFicyhkY2FSZXN1bHQucG5sKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCB9KSArICcgKCcgKyAoZGNhUmVzdWx0LnBubFBjdCA+PSAwID8gJysnIDogJycpICsgZGNhUmVzdWx0LnBubFBjdC50b0ZpeGVkKDEpICsgJyUpJywgY29sb3I6IGlzUHJvZml0YWJsZSA/ICdyZ2JhKDUyLDIxMSwxNTMsMSknIDogJ3JnYmEoMjUxLDExMywxMzMsMSknIH0sCiAgICAgICAgICAgIF0ubWFwKHN0YXQgPT4gKAogICAgICAgICAgICAgIDxkaXYga2V5PXtzdGF0LmxhYmVsfSBzdHlsZT17eyBib3JkZXJSYWRpdXM6ICcxMnB4JywgcGFkZGluZzogJzEycHgnLCBiYWNrZ3JvdW5kOiAndmFyKC0tem0tc3VyZmFjZS0xKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJyB9fT4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luQm90dG9tOiAnNHB4JyB9fT57c3RhdC5sYWJlbH08L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEzcHgnLCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBzdGF0LmNvbG9yIH19PntzdGF0LnZhbHVlfTwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxNnB4JywgbWFyZ2luQm90dG9tOiAnOHB4JyB9fT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnMjRweCcsIGhlaWdodDogJzJweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC41KScsIGJvcmRlclRvcDogJzJweCBkYXNoZWQgcmdiYSg5NiwxNjUsMjUwLDAuNSknIH19IC8+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjUpJyB9fT5JbnZlc3RlZDwvc3Bhbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzZweCcgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiAnMjRweCcsIGhlaWdodDogJzJweCcsIGJhY2tncm91bmQ6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH19IC8+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjUpJyB9fT5Qb3J0Zm9saW8gVmFsdWU8L3NwYW4+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlclJhZGl1czogJzEycHgnLCBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICdyZ2JhKDAsMCwwLDAuMiknLCBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tem0tZ2xhc3MtYm9yZGVyKScsIHBhZGRpbmc6ICcxMnB4IDhweCA0cHgnIH19PgogICAgICAgICAgICAgIDxEQ0FDaGFydCBpbnZlc3RlZD17ZGNhUmVzdWx0LmludmVzdGVkQXJyfSB2YWx1ZT17ZGNhUmVzdWx0LnZhbHVlQXJyfSAvPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknLCBtYXJnaW5Ub3A6ICcxMHB4JyB9fT4KICAgICAgICAgICAgKiBTaW11bGFzaSBtZW5nZ3VuYWthbiBoYXJnYSBsaXZlIHNhYXQgaW5pIHNlYmFnYWkgcmVmZXJlbnNpLiBCdWthbiBmaW5hbmNpYWwgYWR2aWNlLgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CiAgICA8L2Rpdj4KICApOwp9KTsKRENBVGFiLmRpc3BsYXlOYW1lID0gJ0RDQVRhYic7CgovLyDilIDilIDilIAgUG9zaXRpb24gU2l6ZXIgVGFiIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgUG9zaXRpb25TaXplclRhYiA9IG1lbW8oKHsgYXNzZXRzLCBzdGF0ZSwgZGlzcGF0Y2ggfTogewogIGFzc2V0czogQ3J5cHRvQXNzZXRbXTsKICBzdGF0ZTogIENvbnZlcnRlclN0YXRlOwogIGRpc3BhdGNoOiBSZWFjdC5EaXNwYXRjaDxDb252ZXJ0ZXJBY3Rpb24+Owp9KSA9PiB7CiAgY29uc3Qgc2V0ID0gdXNlQ2FsbGJhY2soKGtleToga2V5b2YgQ29udmVydGVyU3RhdGUsIHZhbHVlOiBzdHJpbmcpID0+IGRpc3BhdGNoKHsgdHlwZTogJ1NFVCcsIGtleSwgdmFsdWUgfSksIFtkaXNwYXRjaF0pOwogIGNvbnN0IGFzc2V0ID0gdXNlTWVtbygoKSA9PiBhc3NldHMuZmluZChhID0+IGEuaWQgPT09IHN0YXRlLnBvc0NvaW4pLCBbYXNzZXRzLCBzdGF0ZS5wb3NDb2luXSk7CgogIGNvbnN0IHJlc3VsdCA9IHVzZU1lbW8oKCkgPT4gewogICAgY29uc3QgYWNjb3VudCA9IHBhcnNlRmxvYXQoc3RhdGUucG9zQWNjb3VudFNpemUpIHx8IDA7CiAgICBjb25zdCByaXNrUGN0ID0gcGFyc2VGbG9hdChzdGF0ZS5wb3NSaXNrUGN0KSB8fCAwOwogICAgY29uc3QgZW50cnkgICA9IHBhcnNlRmxvYXQoc3RhdGUucG9zRW50cnlQcmljZSkgfHwgKGFzc2V0Py5wcmljZSA/PyAwKTsKICAgIGNvbnN0IHNsICAgICAgPSBwYXJzZUZsb2F0KHN0YXRlLnBvc1N0b3BMb3NzKSB8fCAwOwogICAgaWYgKCFhY2NvdW50IHx8ICFyaXNrUGN0IHx8ICFlbnRyeSB8fCAhc2wgfHwgc2wgPj0gZW50cnkpIHJldHVybiBudWxsOwogICAgY29uc3Qgcmlza1VzZCAgID0gYWNjb3VudCAqIChyaXNrUGN0IC8gMTAwKTsKICAgIGNvbnN0IHNsUGN0ICAgICA9ICgoZW50cnkgLSBzbCkgLyBlbnRyeSkgKiAxMDA7CiAgICBjb25zdCBwb3NTaXplICAgPSByaXNrVXNkIC8gKGVudHJ5ICogKHNsUGN0IC8gMTAwKSk7CiAgICBjb25zdCBwb3NWYWx1ZSAgPSBwb3NTaXplICogZW50cnk7CiAgICBjb25zdCBsZXZlcmFnZSAgPSBwb3NWYWx1ZSAvIGFjY291bnQ7CiAgICBjb25zdCByclJhdGlvICAgPSAoZW50cnkgKiAxLjAyIC0gZW50cnkpIC8gKGVudHJ5IC0gc2wpOwogICAgcmV0dXJuIHsgcmlza1VzZCwgc2xQY3QsIHBvc1NpemUsIHBvc1ZhbHVlLCBsZXZlcmFnZSwgcnJSYXRpbyB9OwogIH0sIFtzdGF0ZSwgYXNzZXRdKTsKCiAgY29uc3QgRklFTERTID0gdXNlTWVtbygoKSA9PiBPYmplY3QuZnJlZXplKFsKICAgIHsga2V5OiAncG9zQWNjb3VudFNpemUnIGFzIGNvbnN0LCBsYWJlbDogJ1VrdXJhbiBBa3VuIChVU0QpJywgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcxMDAwMCcgfSwKICAgIHsga2V5OiAncG9zUmlza1BjdCcgICAgIGFzIGNvbnN0LCBsYWJlbDogJ1Jpc2sgcGVyIFRyYWRlICglKScsICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnMicgfSwKICAgIHsga2V5OiAncG9zRW50cnlQcmljZScgIGFzIGNvbnN0LCBsYWJlbDogJ0VudHJ5IFByaWNlIOKAlCBrb3NvbmcgPSBsaXZlJywgICBwbGFjZWhvbGRlcjogYXNzZXQgPyBmb3JtYXRQcmljZShhc3NldC5wcmljZSkgOiAnJyB9LAogICAgeyBrZXk6ICdwb3NTdG9wTG9zcycgICAgYXMgY29uc3QsIGxhYmVsOiAnU3RvcCBMb3NzIFByaWNlIChVU0QpJywgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnIH0sCiAgXSksIFthc3NldF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICcxNnB4JyB9fT4KICAgICAgPGRpdiBzdHlsZT17Q0FSRF9TVFlMRX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICc4cHgnLCBtYXJnaW5Cb3R0b206ICcxNnB4JyB9fT4KICAgICAgICAgIDxUYXJnZXQgc2l6ZT17MTR9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjgpJyB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBmb250V2VpZ2h0OiA2MDAsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0+CiAgICAgICAgICAgIFBvc2l0aW9uIFNpemVyCiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogJzEwcHgnLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHBhZGRpbmc6ICcycHggNnB4JywgYm9yZGVyUmFkaXVzOiAnNHB4JywgbWFyZ2luTGVmdDogJ2F1dG8nLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTEsMTEzLDEzMywwLjEpJywgY29sb3I6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuOCknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSgyNTEsMTEzLDEzMywwLjIpJyB9fT4KICAgICAgICAgICAgUmlzayBNYW5hZ2VtZW50CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICcxZnIgMWZyJywgZ2FwOiAnMTZweCcgfX0+CiAgICAgICAgICA8Q29pblNlbGVjdG9yIGFzc2V0cz17YXNzZXRzfSB2YWx1ZT17c3RhdGUucG9zQ29pbn0gb25DaGFuZ2U9e3YgPT4gc2V0KCdwb3NDb2luJywgdil9IGxhYmVsPSJDb2luIiAvPgogICAgICAgICAge0ZJRUxEUy5tYXAoZmllbGQgPT4gKAogICAgICAgICAgICA8ZGl2IGtleT17ZmllbGQua2V5fT4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e0xBQkVMX1NUWUxFfT57ZmllbGQubGFiZWx9PC9sYWJlbD4KICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgIHR5cGU9Im51bWJlciIgdmFsdWU9e3N0YXRlW2ZpZWxkLmtleV0gYXMgc3RyaW5nfSBvbkNoYW5nZT17ZSA9PiBzZXQoZmllbGQua2V5LCBlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPXtmaWVsZC5wbGFjZWhvbGRlcn0gbWluPSIwIgogICAgICAgICAgICAgICAgc3R5bGU9e0lOUFVUX0JBU0V9CiAgICAgICAgICAgICAgICBvbkZvY3VzPXtlID0+IHsgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gJ3JnYmEoOTYsMTY1LDI1MCwwLjM1KSc7IH19CiAgICAgICAgICAgICAgICBvbkJsdXI9e2UgPT4geyBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKSc7IH19CiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICApKX0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICB7cmVzdWx0ID8gKAogICAgICAgIDxkaXYgc3R5bGU9e0NBUkRfU1RZTEV9PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTJweCcsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJywgbWFyZ2luQm90dG9tOiAnMTRweCcgfX0+CiAgICAgICAgICAgIEhhc2lsIEthbGt1bGFzaQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ3JlcGVhdCgzLCAxZnIpJywgZ2FwOiAnMTBweCcgfX0+CiAgICAgICAgICAgIHtbCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1Jpc2sgVVNEJywgICAgICAgIHZhbHVlOiAnJCcgKyByZXN1bHQucmlza1VzZC50b0ZpeGVkKDIpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywxKScgfSwKICAgICAgICAgICAgICB7IGxhYmVsOiAnU0wgRGlzdGFuY2UnLCAgICAgdmFsdWU6IHJlc3VsdC5zbFBjdC50b0ZpeGVkKDIpICsgJyUnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJyB9LAogICAgICAgICAgICAgIHsgbGFiZWw6ICdQb3NpdGlvbiBTaXplJywgICB2YWx1ZTogcmVzdWx0LnBvc1NpemUudG9GaXhlZCg2KSArICcgJyArIChhc3NldD8uc3ltYm9sLnRvVXBwZXJDYXNlKCkgPz8gJycpLCAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1Bvc2l0aW9uIFZhbHVlJywgIHZhbHVlOiAnJCcgKyByZXN1bHQucG9zVmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSksICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMTY3LDEzOSwyNTAsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ0xldmVyYWdlIFVzZWQnLCAgIHZhbHVlOiByZXN1bHQubGV2ZXJhZ2UudG9GaXhlZCgyKSArICd4JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVzdWx0LmxldmVyYWdlID4gMyA/ICdyZ2JhKDI1MSwxMTMsMTMzLDEpJyA6ICdyZ2JhKDUyLDIxMSwxNTMsMSknIH0sCiAgICAgICAgICAgICAgeyBsYWJlbDogJ1I6UiAoMiUgVFApJywgICAgIHZhbHVlOiAnMTonICsgcmVzdWx0LnJyUmF0aW8udG9GaXhlZCgyKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmVzdWx0LnJyUmF0aW8gPj0gMiA/ICdyZ2JhKDUyLDIxMSwxNTMsMSknIDogJ3JnYmEoMjUxLDE5MSwzNiwxKScgfSwKICAgICAgICAgICAgXS5tYXAoc3RhdCA9PiAoCiAgICAgICAgICAgICAgPGRpdiBrZXk9e3N0YXQubGFiZWx9IHN0eWxlPXt7IGJvcmRlclJhZGl1czogJzEycHgnLCBwYWRkaW5nOiAnMTJweCcsIGJhY2tncm91bmQ6ICd2YXIoLS16bS1zdXJmYWNlLTEpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLXptLWdsYXNzLWJvcmRlciknIH19PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknLCBtYXJnaW5Cb3R0b206ICc0cHgnIH19PntzdGF0LmxhYmVsfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTNweCcsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IHN0YXQuY29sb3IgfX0+e3N0YXQudmFsdWV9PC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICB7cmVzdWx0LmxldmVyYWdlID4gNSAmJiAoCiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnOHB4JywgcGFkZGluZzogJzEwcHggMTJweCcsIGJvcmRlclJhZGl1czogJzhweCcsIG1hcmdpblRvcDogJzEycHgnLCBiYWNrZ3JvdW5kOiAncmdiYSgyNTEsMTEzLDEzMywwLjA3KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1MSwxMTMsMTMzLDAuMTgpJyB9fT4KICAgICAgICAgICAgICA8VHJlbmRpbmdVcCBzaXplPXsxMn0gc3R5bGU9e3sgY29sb3I6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuOCknIH19IC8+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzExcHgnLCBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMC44KScgfX0+CiAgICAgICAgICAgICAgICBMZXZlcmFnZSB0aW5nZ2khIFBlcnRpbWJhbmdrYW4ga2VjaWxrYW4gcG9zaXRpb24gYXRhdSBwZXJsZWJhciBTTC4KICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKX0KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luVG9wOiAnMTBweCcgfX0+CiAgICAgICAgICAgICogQnVrYW4gZmluYW5jaWFsIGFkdmljZS4gU2VsYWx1IGF0dXIgcmlzayBzZXN1YWkgdG9sZXJhbnNpIGthbXUuCiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgKSA6ICgKICAgICAgICA8ZGl2IHN0eWxlPXt7IC4uLkNBUkRfU1RZTEUsIHRleHRBbGlnbjogJ2NlbnRlcicsIHBhZGRpbmc6ICc0MHB4JyB9fT4KICAgICAgICAgIDxUYXJnZXQgc2l6ZT17Mjh9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjIpJywgbWFyZ2luOiAnMCBhdXRvIDhweCcgfX0gLz4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEycHgnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgSXNpIHNlbXVhIGZpZWxkIGRpIGF0YXMgdW50dWsga2Fsa3VsYXNpIHBvc2l0aW9uIHNpemUKICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICApfQogICAgPC9kaXY+CiAgKTsKfSk7ClBvc2l0aW9uU2l6ZXJUYWIuZGlzcGxheU5hbWUgPSAnUG9zaXRpb25TaXplclRhYic7CgovLyDilIDilIDilIAgTWFpbiBQYWdlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgQ29udmVydGVyID0gbWVtbygoKSA9PiB7CiAgY29uc3QgeyBhc3NldHMsIGxvYWRpbmcgfSA9IHVzZUNyeXB0bygpOwogIGNvbnN0IHsgaXNNb2JpbGUgfSA9IHVzZUJyZWFrcG9pbnQoKTsKICBjb25zdCBtb3VudGVkUmVmID0gdXNlUmVmKHRydWUpOwogIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZTxUYWI+KCdDb252ZXJ0ZXInKTsKICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSAgICAgICAgID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBJTklUSUFMKTsKICBjb25zdCBbbGFzdFVwZGF0ZWQsIHNldExhc3RVcGRhdGVkXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpOwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKGFzc2V0cy5sZW5ndGggPiAwKSBzZXRMYXN0VXBkYXRlZChEYXRlLm5vdygpKTsKICB9LCBbYXNzZXRzXSk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBtb3VudGVkUmVmLmN1cnJlbnQgPSB0cnVlOwogICAgcmV0dXJuICgpID0+IHsgbW91bnRlZFJlZi5jdXJyZW50ID0gZmFsc2U7IH07CiAgfSwgW10pOwoKICBjb25zdCBoYW5kbGVUYWIgPSB1c2VDYWxsYmFjaygodGFiOiBUYWIpID0+IHsKICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47CiAgICBzZXRBY3RpdmVUYWIodGFiKTsKICB9LCBbXSk7CgogIGNvbnN0IHBhZ2VTdHlsZSA9IHVzZU1lbW8oKCkgPT4gKHsKICAgIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgYXMgY29uc3QsIGdhcDogJzE2cHgnLAogICAgcGFkZGluZzogaXNNb2JpbGUgPyAnMTJweCcgOiAnMTZweCcsIG1pbkhlaWdodDogJzEwMHZoJywKICB9KSwgW2lzTW9iaWxlXSk7CgogIGNvbnN0IGxhc3RVcGRTdHIgPSBsYXN0VXBkYXRlZAogICAgPyBuZXcgRGF0ZShsYXN0VXBkYXRlZCkudG9Mb2NhbGVUaW1lU3RyaW5nKCkKICAgIDogJ+KAlCc7CgogIGlmICghbG9hZGluZyAmJiBhc3NldHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gKAogICAgICA8ZGl2IHN0eWxlPXtwYWdlU3R5bGV9PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBtaW5IZWlnaHQ6ICc2MHZoJyB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEzcHgnLCBjb2xvcjogJ3JnYmEoMjU1LDY4LDEzNiwxKScgfX0+4pqgIEdhZ2FsIG1lbXVhdCBkYXRhIGFzZXQuIFBlcmlrc2Ega29uZWtzaSBpbnRlcm5ldC48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICApOwogIH0KCiAgaWYgKGxvYWRpbmcgJiYgYXNzZXRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuICgKICAgICAgPGRpdiBzdHlsZT17cGFnZVN0eWxlfT4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgbWluSGVpZ2h0OiAnNjB2aCcgfX0+CiAgICAgICAgICA8TG9hZGVyMiBzdHlsZT17eyBjb2xvcjogJ3JnYmEoOTYsMTY1LDI1MCwxKScsIGFuaW1hdGlvbjogJ3NwaW4gMXMgbGluZWFyIGluZmluaXRlJyB9fSBzaXplPXszMn0gLz4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICApOwogIH0KCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3BhZ2VTdHlsZX0+CiAgICAgIHsvKiBIZWFkZXIgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTJweCcsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19PgogICAgICAgIDxoMSBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMjBweCcsIGZvbnRXZWlnaHQ6IDcwMCwgbWFyZ2luOiAwLCBiYWNrZ3JvdW5kOiAnbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSg5NiwxNjUsMjUwLDEpLCByZ2JhKDE2NywxMzksMjUwLDEpKScsIFdlYmtpdEJhY2tncm91bmRDbGlwOiAndGV4dCcsIFdlYmtpdFRleHRGaWxsQ29sb3I6ICd0cmFuc3BhcmVudCcsIGxldHRlclNwYWNpbmc6ICcwLjA0ZW0nIH19PgogICAgICAgICAgQ29udmVydGVyICYgVG9vbHMKICAgICAgICA8L2gxPgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnNnB4JywgcGFkZGluZzogJzNweCAxMHB4JywgYm9yZGVyUmFkaXVzOiAnNnB4JywgYmFja2dyb3VuZDogJ3JnYmEoOTYsMTY1LDI1MCwwLjA2KScsIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDk2LDE2NSwyNTAsMC4xNSknIH19PgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgd2lkdGg6ICc2cHgnLCBoZWlnaHQ6ICc2cHgnLCBib3JkZXJSYWRpdXM6ICc1MCUnLCBiYWNrZ3JvdW5kOiAncmdiYSg1MiwyMTEsMTUzLDEpJywgYm94U2hhZG93OiAnMCAwIDVweCByZ2JhKDUyLDIxMSwxNTMsMSknLCBmbGV4U2hyaW5rOiAwIH19IC8+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAnMTBweCcsIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDAuODUpJywgbGV0dGVyU3BhY2luZzogJzAuMDZlbScgfX0+CiAgICAgICAgICAgIExpdmUgUHJpY2VzCiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogJzEwcHgnLCBjb2xvcjogJ3JnYmEoODAsODAsMTAwLDEpJywgbWFyZ2luTGVmdDogJ2F1dG8nIH19PlVwZGF0ZWQ6IHtsYXN0VXBkU3RyfTwvc3Bhbj4KICAgICAgPC9kaXY+CgogICAgICB7LyogVGFicyAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzZweCcsIGZsZXhXcmFwOiBpc01vYmlsZSA/ICd3cmFwJyA6ICdub3dyYXAnIH19IHJvbGU9InRhYmxpc3QiIGFyaWEtbGFiZWw9IkNvbnZlcnRlciB0b29scyI+CiAgICAgICAge1RBQlMubWFwKHRhYiA9PiB7CiAgICAgICAgICBjb25zdCBhY3RpdmUgPSBhY3RpdmVUYWIgPT09IHRhYjsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgICBrZXk9e3RhYn0KICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVUYWIodGFiKX0KICAgICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXthY3RpdmV9CiAgICAgICAgICAgICAgcm9sZT0idGFiIgogICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiAgICAgICc4cHggMTZweCcsCiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLAogICAgICAgICAgICAgICAgZm9udFNpemU6ICAgICAnMTJweCcsCiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBGT05UX01PTk8sCiAgICAgICAgICAgICAgICBjdXJzb3I6ICAgICAgICdwb2ludGVyJywKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICAgYWN0aXZlID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjEyKScgOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgY29sb3I6ICAgICAgICBhY3RpdmUgPyAncmdiYSg5NiwxNjUsMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknLAogICAgICAgICAgICAgICAgYm9yZGVyOiAgICAgICAnMXB4IHNvbGlkICcgKyAoYWN0aXZlID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjI4KScgOiAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKScpLAogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogICAnYWxsIDAuMTVzJywKICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICAgJ3RyYW5zZm9ybScsCiAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tem0tZ2xhc3MtaG92ZXIpJzsgfX0KICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4geyBpZiAoIWFjdGl2ZSkgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnOyB9fQogICAgICAgICAgICA+CiAgICAgICAgICAgICAge3RhYn0KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICApOwogICAgICAgIH0pfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBDb250ZW50ICovfQogICAgICB7YWN0aXZlVGFiID09PSAnQ29udmVydGVyJyAgICAgICAmJiA8Q29udmVydGVyVGFiICAgICBhc3NldHM9e2Fzc2V0c30gc3RhdGU9e3N0YXRlfSBkaXNwYXRjaD17ZGlzcGF0Y2h9IC8+fQogICAgICB7YWN0aXZlVGFiID09PSAnRENBIEthbGt1bGF0b3InICAmJiA8RENBVGFiICAgICAgICAgICBhc3NldHM9e2Fzc2V0c30gc3RhdGU9e3N0YXRlfSBkaXNwYXRjaD17ZGlzcGF0Y2h9IC8+fQogICAgICB7YWN0aXZlVGFiID09PSAnUG9zaXRpb24gU2l6ZXInICAmJiA8UG9zaXRpb25TaXplclRhYiBhc3NldHM9e2Fzc2V0c30gc3RhdGU9e3N0YXRlfSBkaXNwYXRjaD17ZGlzcGF0Y2h9IC8+fQogICAgPC9kaXY+CiAgKTsKfSk7CkNvbnZlcnRlci5kaXNwbGF5TmFtZSA9ICdDb252ZXJ0ZXInOwoKZXhwb3J0IGRlZmF1bHQgQ29udmVydGVyOwo=";

function req(method, path, body) {
  return new Promise((resolve, reject) => {
    const data = body ? JSON.stringify(body) : null;
    const options = {
      hostname: "api.github.com", path, method,
      headers: {
        "Authorization": `Bearer ${TOKEN}`,
        "User-Agent": "push106-zeromeridian",
        "Content-Type": "application/json",
        ...(data ? { "Content-Length": Buffer.byteLength(data) } : {})
      }
    };
    const r = https.request(options, res => {
      let raw = "";
      res.on("data", c => raw += c);
      res.on("end", () => {
        try { resolve({ status: res.statusCode, body: JSON.parse(raw) }); }
        catch { resolve({ status: res.statusCode, body: raw }); }
      });
    });
    r.on("error", reject);
    if (data) r.write(data);
    r.end();
  });
}

function delay(ms) { return new Promise(r => setTimeout(r, ms)); }

async function getSHA(fp) {
  const r = await req("GET", `/repos/${OWNER}/${REPO}/contents/${fp}`);
  return r.status === 200 ? r.body.sha : null;
}

async function push(fp, b64, msg) {
  for (let a = 1; a <= 3; a++) {
    const sha = await getSHA(fp);
    const body = { message: msg, content: b64 };
    if (sha) body.sha = sha;
    const r = await req("PUT", `/repos/${OWNER}/${REPO}/contents/${fp}`, body);
    if (r.status === 200 || r.status === 201) return true;
    if (r.status === 409) { console.log(`  ⚠ Conflict retry ${a}...`); await delay(2500 * a); continue; }
    console.error(`  ❌ ${r.status}`, r.body?.message ?? "");
    return false;
  }
  return false;
}

async function main() {
  console.log("🚀 push106 — Intelligence + Alerts + Converter\n");

  const r1 = await push("src/pages/Intelligence.tsx", C_Intelligence,
    "push106: Intelligence — FundingRow hover state, 18-point checklist LOLOS");
  console.log(r1 ? "✅ Intelligence.tsx" : "❌ Intelligence.tsx FAILED");

  const r2 = await push("src/pages/Alerts.tsx", C_Alerts,
    "push106: Alerts — page padding, lastUpdated, error state, row hover, 18-point LOLOS");
  console.log(r2 ? "✅ Alerts.tsx" : "❌ Alerts.tsx FAILED");

  const r3 = await push("src/pages/Converter.tsx", C_Converter,
    "push106: Converter — page padding, lastUpdated, error state, 18-point LOLOS");
  console.log(r3 ? "✅ Converter.tsx" : "❌ Converter.tsx FAILED");

  if (r1 && r2 && r3) {
    console.log("\n✅ push106 COMPLETE — semua 3 file sukses!");
    console.log("🚀 Cloudflare Pages rebuild ~2 menit");
    console.log("🔗 https://new-zeromeridian.pages.dev");
  } else {
    console.log("\n⚠ Beberapa file gagal, cek log di atas");
  }
}

main().catch(console.error);
