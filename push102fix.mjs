import https from "https";

const OWNER = "wr98-code";
const REPO  = "new-zeromeridian";
const TOKEN = process.env.GH_TOKEN;

if (!TOKEN) { console.error("‚ùå GH_TOKEN not set!"); process.exit(1); }

const C0 = "LyoqCiAqIEFsZXJ0cy50c3gg4oCUIFpFUsOYIE1FUklESUFOCiAqIFByaWNlIGFsZXJ0IGNlbnRlcjogYWJvdmUvYmVsb3cgdGFyZ2V0LCAlIGNoYW5nZSBwdW1wL2R1bXAsCiAqIHNvdW5kIG5vdGlmaWNhdGlvbiAoV2ViIEF1ZGlvIEFQSSksIGJyb3dzZXIgcHVzaCBub3RpZmljYXRpb24uCiAqIC0gbG9jYWxTdG9yYWdlIHBlcnNpc3RlbmNlIChrZXk6ICd6bV9hbGVydHNfdjInKQogKiAtIFJlYWwtdGltZSBwcmljZSBjaGVjayB2aWEgQ3J5cHRvQ29udGV4dCAoV1MtZmVkLCBubyBleHRyYSBmZXRjaCkKICogLSBSaW5nIGJ1ZmZlcjogbWF4IDEwMCB0cmlnZ2VyZWQgaGlzdG9yeQogKiAtIE9iamVjdC5mcmVlemUoKSBzZW11YSBzdGF0aWMgZGF0YQogKiAtIFJlYWN0Lm1lbW8gKyBkaXNwbGF5TmFtZSBzZW11YSBjb21wb25lbnRzCiAqIC0gdXNlUmVkdWNlciBmb3Igc3RhdGUsIHVzZUNhbGxiYWNrICsgdXNlTWVtbyBhbGwgaGFuZGxlcnMKICogLSByZ2JhKCkgb25seSwgemVybyBoc2woKSDinJMKICogLSBaZXJvIGNsYXNzTmFtZSDinJMg4oaQIHB1c2gyNiAoem0tZ2xhc3Mvem0tY29ybmVycy96bS1ncmFkaWVudCDihpIgaW5saW5lKQogKiAtIEhvb2sgLnRzIHBhdHRlcm46IHplcm8gSlNYIChsb2dpYyBvbmx5IGluIGhlbHBlcnMpCiAqIC0gWmVybyBNYXRoLnJhbmRvbSgpIOKGkiBkZXRlcm1pbmlzdGljSml0dGVyCiAqIC0gWmVybyB0ZW1wbGF0ZSBsaXRlcmFscyBpbiBKU1ggYXR0cnMKICogLSBQdXJlIFNWRyBpY29ucyB3aGVyZSBuZWVkZWQsIHplcm8gcmVjaGFydHMKICogLSB3aWxsLWNoYW5nZTogdHJhbnNmb3JtIG9uIGFuaW1hdGVkIGVsZW1lbnRzCiAqLwoKaW1wb3J0IHsKICBtZW1vLCB1c2VSZWR1Y2VyLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLAp9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlQ3J5cHRvIH0gZnJvbSAnQC9jb250ZXh0cy9DcnlwdG9Db250ZXh0JzsKaW1wb3J0IHsgZm9ybWF0UHJpY2UsIGZvcm1hdENoYW5nZSwgZm9ybWF0Q29tcGFjdCwgZGV0ZXJtaW5pc3RpY0ppdHRlciB9IGZyb20gJ0AvbGliL2Zvcm1hdHRlcnMnOwppbXBvcnQgdHlwZSB7IENyeXB0b0Fzc2V0IH0gZnJvbSAnQC9saWIvZm9ybWF0dGVycyc7CmltcG9ydCB7IHVzZUJyZWFrcG9pbnQgfSBmcm9tICdAL2hvb2tzL3VzZUJyZWFrcG9pbnQnOwppbXBvcnQgewogIEJlbGwsIEJlbGxPZmYsIFBsdXMsIFRyYXNoMiwgVm9sdW1lMiwgVm9sdW1lWCwgQ2hlY2tDaXJjbGUyLAogIFRyZW5kaW5nVXAsIFRyZW5kaW5nRG93biwgQWN0aXZpdHksIEFsZXJ0VHJpYW5nbGUsIFphcCwgWCwKICBTZXR0aW5ncywgSGlzdG9yeSwgQ2hldnJvbkRvd24sIENoZXZyb25VcCwKfSBmcm9tICdsdWNpZGUtcmVhY3QnOwoKY29uc3QgRk9OVF9NT05PID0gIidKZXRCcmFpbnMgTW9ubycsIG1vbm9zcGFjZSI7CgovLyDilIDilIDilIAgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgp0eXBlIEFsZXJ0VHlwZSA9ICdhYm92ZScgfCAnYmVsb3cnIHwgJ2NoYW5nZV91cCcgfCAnY2hhbmdlX2Rvd24nOwp0eXBlIEFsZXJ0U3RhdHVzID0gJ2FjdGl2ZScgfCAndHJpZ2dlcmVkJyB8ICdwYXVzZWQnOwoKaW50ZXJmYWNlIFByaWNlQWxlcnQgewogIGlkOiBzdHJpbmc7CiAgc3ltYm9sOiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuICdidGMnCiAgbmFtZTogc3RyaW5nOyAgICAgICAgICAgICAvLyBlLmcuICdCaXRjb2luJwogIGltYWdlPzogc3RyaW5nOwogIHR5cGU6IEFsZXJ0VHlwZTsKICB0YXJnZXQ6IG51bWJlcjsgICAgICAgICAgIC8vIHByaWNlIG9yICUgZGVwZW5kaW5nIG9uIHR5cGUKICBjcmVhdGVkQXQ6IG51bWJlcjsgICAgICAgIC8vIG1zIGVwb2NoCiAgc3RhdHVzOiBBbGVydFN0YXR1czsKICB0cmlnZ2VyZWRBdD86IG51bWJlcjsKICB0cmlnZ2VyZWRQcmljZT86IG51bWJlcjsKICBub3RlPzogc3RyaW5nOwogIHNvdW5kOiBib29sZWFuOwogIHB1c2g6IGJvb2xlYW47Cn0KCmludGVyZmFjZSBUcmlnZ2VyZWRMb2cgewogIGlkOiBzdHJpbmc7CiAgYWxlcnRJZDogc3RyaW5nOwogIHN5bWJvbDogc3RyaW5nOwogIG5hbWU6IHN0cmluZzsKICBpbWFnZT86IHN0cmluZzsKICB0eXBlOiBBbGVydFR5cGU7CiAgdGFyZ2V0OiBudW1iZXI7CiAgdHJpZ2dlcmVkUHJpY2U6IG51bWJlcjsKICB0cmlnZ2VyZWRBdDogbnVtYmVyOwp9CgppbnRlcmZhY2UgQWxlcnRzU3RhdGUgewogIGFsZXJ0czogUHJpY2VBbGVydFtdOwogIGxvZzogVHJpZ2dlcmVkTG9nW107CiAgc291bmRFbmFibGVkOiBib29sZWFuOwogIHB1c2hFbmFibGVkOiBib29sZWFuOwp9Cgp0eXBlIEFsZXJ0c0FjdGlvbiA9CiAgfCB7IHR5cGU6ICdBREQnOyBhbGVydDogUHJpY2VBbGVydCB9CiAgfCB7IHR5cGU6ICdSRU1PVkUnOyBpZDogc3RyaW5nIH0KICB8IHsgdHlwZTogJ1RPR0dMRV9QQVVTRSc7IGlkOiBzdHJpbmcgfQogIHwgeyB0eXBlOiAnVFJJR0dFUic7IGlkOiBzdHJpbmc7IHByaWNlOiBudW1iZXI7IGxvZ0VudHJ5OiBUcmlnZ2VyZWRMb2cgfQogIHwgeyB0eXBlOiAnQ0xFQVJfTE9HJyB9CiAgfCB7IHR5cGU6ICdUT0dHTEVfU09VTkQnIH0KICB8IHsgdHlwZTogJ1RPR0dMRV9QVVNIJyB9CiAgfCB7IHR5cGU6ICdMT0FEJzsgc3RhdGU6IEFsZXJ0c1N0YXRlIH07CgovLyDilIDilIDilIAgQ29uc3RhbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgTFNfS0VZID0gJ3ptX2FsZXJ0c192Mic7CmNvbnN0IE1BWF9MT0cgPSAxMDA7CmNvbnN0IE1BWF9BTEVSVFMgPSA1MDsKCmNvbnN0IEFMRVJUX1RZUEVfQ09ORklHID0gT2JqZWN0LmZyZWV6ZSh7CiAgYWJvdmU6ICAgICAgeyBsYWJlbDogJ1ByaWNlIEFib3ZlJywgICBpY29uOiBUcmVuZGluZ1VwLCAgIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDEpJywgICBiZzogJ3JnYmEoNTIsMjExLDE1MywwLjEwKScsICAgYm9yZGVyOiAncmdiYSg1MiwyMTEsMTUzLDAuMjIpJyB9LAogIGJlbG93OiAgICAgIHsgbGFiZWw6ICdQcmljZSBCZWxvdycsICAgaWNvbjogVHJlbmRpbmdEb3duLCBjb2xvcjogJ3JnYmEoMjUxLDExMywxMzMsMSknLCAgYmc6ICdyZ2JhKDI1MSwxMTMsMTMzLDAuMTApJywgIGJvcmRlcjogJ3JnYmEoMjUxLDExMywxMzMsMC4yMiknIH0sCiAgY2hhbmdlX3VwOiAgeyBsYWJlbDogJyUgUHVtcCBBbGVydCcsICBpY29uOiBaYXAsICAgICAgICAgIGNvbG9yOiAncmdiYSgzNCwyMTEsMjM4LDEpJywgICBiZzogJ3JnYmEoMzQsMjExLDIzOCwwLjEwKScsICAgYm9yZGVyOiAncmdiYSgzNCwyMTEsMjM4LDAuMjIpJyB9LAogIGNoYW5nZV9kb3duOnsgbGFiZWw6ICclIER1bXAgQWxlcnQnLCAgaWNvbjogQWxlcnRUcmlhbmdsZSxjb2xvcjogJ3JnYmEoMjUxLDE5MSwzNiwxKScsICAgYmc6ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMCknLCAgIGJvcmRlcjogJ3JnYmEoMjUxLDE5MSwzNiwwLjIyKScgfSwKfSBhcyBjb25zdCk7Cgpjb25zdCBTVEFUVVNfQ09ORklHID0gT2JqZWN0LmZyZWV6ZSh7CiAgYWN0aXZlOiAgICB7IGxhYmVsOiAnQWN0aXZlJywgICAgY29sb3I6ICdyZ2JhKDUyLDIxMSwxNTMsMSknLCAgYmc6ICdyZ2JhKDUyLDIxMSwxNTMsMC4xMCknICB9LAogIHRyaWdnZXJlZDogeyBsYWJlbDogJ1RyaWdnZXJlZCcsIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJywgYmc6ICdyZ2JhKDI1MSwxOTEsMzYsMC4xMCknICB9LAogIHBhdXNlZDogICAgeyBsYWJlbDogJ1BhdXNlZCcsICAgIGNvbG9yOiAncmdiYSgxNDgsMTYzLDE4NCwwLjYpJywgYmc6ICdyZ2JhKDE0OCwxNjMsMTg0LDAuMDgpJyB9LAp9IGFzIGNvbnN0KTsKCi8vIOKUgOKUgOKUgCBIZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZnVuY3Rpb24gbG9hZEZyb21MUygpOiBBbGVydHNTdGF0ZSB8IG51bGwgewogIHRyeSB7CiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMU19LRVkpOwogICAgaWYgKCFyYXcpIHJldHVybiBudWxsOwogICAgcmV0dXJuIEpTT04ucGFyc2UocmF3KSBhcyBBbGVydHNTdGF0ZTsKICB9IGNhdGNoIHsKICAgIHJldHVybiBudWxsOwogIH0KfQoKZnVuY3Rpb24gc2F2ZVRvTFMoc3RhdGU6IEFsZXJ0c1N0YXRlKTogdm9pZCB7CiAgdHJ5IHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExTX0tFWSwgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIGdlbklkKGF0dGVtcHQ6IG51bWJlcik6IHN0cmluZyB7CiAgY29uc3Qgc2VlZCA9IGRldGVybWluaXN0aWNKaXR0ZXIoYXR0ZW1wdCk7CiAgcmV0dXJuICdhJyArIERhdGUubm93KCkudG9TdHJpbmcoMzYpICsgc2VlZC50b1N0cmluZygxNik7Cn0KCi8vIFdlYiBBdWRpbyBBUEkg4oCUIHN5bnRoZXNpemUgYWxlcnQgYmVlcCAobm8gZXh0ZXJuYWwgc291bmQgZmlsZSBuZWVkZWQpCmZ1bmN0aW9uIHBsYXlBbGVydFNvdW5kKHR5cGU6IEFsZXJ0VHlwZSk6IHZvaWQgewogIHRyeSB7CiAgICBjb25zdCBjdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7CiAgICBjb25zdCBvc2MgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgY29uc3QgZ2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7CiAgICBvc2MuY29ubmVjdChnYWluKTsKICAgIGdhaW4uY29ubmVjdChjdHguZGVzdGluYXRpb24pOwoKICAgIGlmICh0eXBlID09PSAnYWJvdmUnIHx8IHR5cGUgPT09ICdjaGFuZ2VfdXAnKSB7CiAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODgwLCBjdHguY3VycmVudFRpbWUpOwogICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMTMyMCwgY3R4LmN1cnJlbnRUaW1lICsgMC4xKTsKICAgIH0gZWxzZSB7CiAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNjYwLCBjdHguY3VycmVudFRpbWUpOwogICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoNDQwLCBjdHguY3VycmVudFRpbWUgKyAwLjEpOwogICAgfQogICAgb3NjLnR5cGUgPSAnc2luZSc7CiAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xOCwgY3R4LmN1cnJlbnRUaW1lKTsKICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCBjdHguY3VycmVudFRpbWUgKyAwLjM1KTsKICAgIG9zYy5zdGFydChjdHguY3VycmVudFRpbWUpOwogICAgb3NjLnN0b3AoY3R4LmN1cnJlbnRUaW1lICsgMC4zNSk7CgogICAgLy8gU2Vjb25kIHRvbmUKICAgIGNvbnN0IG9zYzIgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgY29uc3QgZ2FpbjIgPSBjdHguY3JlYXRlR2FpbigpOwogICAgb3NjMi5jb25uZWN0KGdhaW4yKTsKICAgIGdhaW4yLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTsKICAgIG9zYzIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHR5cGUgPT09ICdhYm92ZScgfHwgdHlwZSA9PT0gJ2NoYW5nZV91cCcgPyAxMzIwIDogNDQwLCBjdHguY3VycmVudFRpbWUgKyAwLjEyKTsKICAgIG9zYzIudHlwZSA9ICdzaW5lJzsKICAgIGdhaW4yLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xMiwgY3R4LmN1cnJlbnRUaW1lICsgMC4xMik7CiAgICBnYWluMi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIGN0eC5jdXJyZW50VGltZSArIDAuNDUpOwogICAgb3NjMi5zdGFydChjdHguY3VycmVudFRpbWUgKyAwLjEyKTsKICAgIG9zYzIuc3RvcChjdHguY3VycmVudFRpbWUgKyAwLjQ1KTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIHNlbmRQdXNoTm90aWZpY2F0aW9uKGFsZXJ0OiBQcmljZUFsZXJ0LCBwcmljZTogbnVtYmVyKTogdm9pZCB7CiAgaWYgKCEoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSB8fCBOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gJ2dyYW50ZWQnKSByZXR1cm47CiAgdHJ5IHsKICAgIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW2FsZXJ0LnR5cGVdOwogICAgY29uc3QgYm9keSA9IGFsZXJ0LnR5cGUgPT09ICdhYm92ZScgfHwgYWxlcnQudHlwZSA9PT0gJ2JlbG93JwogICAgICA/IGFsZXJ0LnN5bWJvbC50b1VwcGVyQ2FzZSgpICsgJyBoaXQgJyArIGZvcm1hdFByaWNlKHByaWNlKSArICcgKHRhcmdldDogJyArIGZvcm1hdFByaWNlKGFsZXJ0LnRhcmdldCkgKyAnKScKICAgICAgOiBhbGVydC5zeW1ib2wudG9VcHBlckNhc2UoKSArICcgY2hhbmdlZCAnICsgZm9ybWF0Q2hhbmdlKGFsZXJ0LnRhcmdldCkgKyAnIChub3c6ICcgKyBmb3JtYXRDaGFuZ2UocHJpY2UpICsgJyknOwogICAgbmV3IE5vdGlmaWNhdGlvbignWkVSw5ggTUVSSURJQU4g4oCUICcgKyBjZmcubGFiZWwsIHsKICAgICAgYm9keSwKICAgICAgaWNvbjogYWxlcnQuaW1hZ2UsCiAgICAgIHRhZzogYWxlcnQuaWQsCiAgICAgIHNpbGVudDogZmFsc2UsCiAgICB9KTsKICB9IGNhdGNoIHt9Cn0KCmZ1bmN0aW9uIGNoZWNrQWxlcnQoYWxlcnQ6IFByaWNlQWxlcnQsIGFzc2V0OiBDcnlwdG9Bc3NldCk6IGJvb2xlYW4gewogIGlmIChhbGVydC5zdGF0dXMgIT09ICdhY3RpdmUnKSByZXR1cm4gZmFsc2U7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdhYm92ZScpICAgICAgIHJldHVybiBhc3NldC5wcmljZSA+PSBhbGVydC50YXJnZXQ7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdiZWxvdycpICAgICAgIHJldHVybiBhc3NldC5wcmljZSA8PSBhbGVydC50YXJnZXQ7CiAgaWYgKGFsZXJ0LnR5cGUgPT09ICdjaGFuZ2VfdXAnKSAgIHJldHVybiBhc3NldC5jaGFuZ2UyNGggPj0gYWxlcnQudGFyZ2V0OwogIGlmIChhbGVydC50eXBlID09PSAnY2hhbmdlX2Rvd24nKSByZXR1cm4gYXNzZXQuY2hhbmdlMjRoIDw9IC1NYXRoLmFicyhhbGVydC50YXJnZXQpOwogIHJldHVybiBmYWxzZTsKfQoKLy8g4pSA4pSA4pSAIFJlZHVjZXIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBJTklUSUFMX1NUQVRFOiBBbGVydHNTdGF0ZSA9IE9iamVjdC5mcmVlemUoewogIGFsZXJ0czogW10sCiAgbG9nOiBbXSwKICBzb3VuZEVuYWJsZWQ6IHRydWUsCiAgcHVzaEVuYWJsZWQ6IGZhbHNlLAp9IGFzIEFsZXJ0c1N0YXRlKTsKCmZ1bmN0aW9uIHJlZHVjZXIoc3RhdGU6IEFsZXJ0c1N0YXRlLCBhY3Rpb246IEFsZXJ0c0FjdGlvbik6IEFsZXJ0c1N0YXRlIHsKICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7CiAgICBjYXNlICdMT0FEJzoKICAgICAgcmV0dXJuIGFjdGlvbi5zdGF0ZTsKICAgIGNhc2UgJ0FERCc6IHsKICAgICAgaWYgKHN0YXRlLmFsZXJ0cy5sZW5ndGggPj0gTUFYX0FMRVJUUykgcmV0dXJuIHN0YXRlOwogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgYWxlcnRzOiBbYWN0aW9uLmFsZXJ0LCAuLi5zdGF0ZS5hbGVydHNdIH07CiAgICB9CiAgICBjYXNlICdSRU1PVkUnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgYWxlcnRzOiBzdGF0ZS5hbGVydHMuZmlsdGVyKGEgPT4gYS5pZCAhPT0gYWN0aW9uLmlkKSB9OwogICAgY2FzZSAnVE9HR0xFX1BBVVNFJzoKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5zdGF0ZSwKICAgICAgICBhbGVydHM6IHN0YXRlLmFsZXJ0cy5tYXAoYSA9PgogICAgICAgICAgYS5pZCA9PT0gYWN0aW9uLmlkCiAgICAgICAgICAgID8geyAuLi5hLCBzdGF0dXM6IGEuc3RhdHVzID09PSAncGF1c2VkJyA/ICdhY3RpdmUnIDogJ3BhdXNlZCcgfQogICAgICAgICAgICA6IGEKICAgICAgICApLAogICAgICB9OwogICAgY2FzZSAnVFJJR0dFUic6IHsKICAgICAgY29uc3QgbmV3TG9nID0gW2FjdGlvbi5sb2dFbnRyeSwgLi4uc3RhdGUubG9nXS5zbGljZSgwLCBNQVhfTE9HKTsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5zdGF0ZSwKICAgICAgICBhbGVydHM6IHN0YXRlLmFsZXJ0cy5tYXAoYSA9PgogICAgICAgICAgYS5pZCA9PT0gYWN0aW9uLmlkCiAgICAgICAgICAgID8geyAuLi5hLCBzdGF0dXM6ICd0cmlnZ2VyZWQnLCB0cmlnZ2VyZWRBdDogRGF0ZS5ub3coKSwgdHJpZ2dlcmVkUHJpY2U6IGFjdGlvbi5wcmljZSB9CiAgICAgICAgICAgIDogYQogICAgICAgICksCiAgICAgICAgbG9nOiBuZXdMb2csCiAgICAgIH07CiAgICB9CiAgICBjYXNlICdDTEVBUl9MT0cnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9nOiBbXSB9OwogICAgY2FzZSAnVE9HR0xFX1NPVU5EJzoKICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHNvdW5kRW5hYmxlZDogIXN0YXRlLnNvdW5kRW5hYmxlZCB9OwogICAgY2FzZSAnVE9HR0xFX1BVU0gnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgcHVzaEVuYWJsZWQ6ICFzdGF0ZS5wdXNoRW5hYmxlZCB9OwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIHN0YXRlOwogIH0KfQoKLy8g4pSA4pSA4pSAIFN1Yi1jb21wb25lbnRzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKY29uc3QgV3NTdGF0dXNEb3QgPSBtZW1vKCh7IHN0YXR1cyB9OiB7IHN0YXR1czogc3RyaW5nIH0pID0+IHsKICBjb25zdCBjb2xvciA9IHN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcKICAgID8gJ3JnYmEoNTIsMjExLDE1MywxKScKICAgIDogc3RhdHVzID09PSAncmVjb25uZWN0aW5nJwogICAgPyAncmdiYSgyNTEsMTkxLDM2LDEpJwogICAgOiAncmdiYSgyNTEsMTEzLDEzMywxKSc7CiAgcmV0dXJuICgKICAgIDxzcGFuCiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiA2LCBoZWlnaHQ6IDYsIGJvcmRlclJhZGl1czogJzUwJScsIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCBiYWNrZ3JvdW5kOiBjb2xvciwgYm94U2hhZG93OiAnMCAwIDVweCAnICsgY29sb3IsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19CiAgICAvPgogICk7Cn0pOwpXc1N0YXR1c0RvdC5kaXNwbGF5TmFtZSA9ICdXc1N0YXR1c0RvdCc7CgovLyDilIDilIDilIAgQWRkIEFsZXJ0IEZvcm0g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQWRkQWxlcnRGb3JtUHJvcHMgewogIGFzc2V0czogQ3J5cHRvQXNzZXRbXTsKICBvbkFkZDogKGFsZXJ0OiBQcmljZUFsZXJ0KSA9PiB2b2lkOwogIG9uQ2xvc2U6ICgpID0+IHZvaWQ7CiAgaWRDb3VudGVyOiBudW1iZXI7Cn0KCmNvbnN0IEFkZEFsZXJ0Rm9ybSA9IG1lbW8oKHsgYXNzZXRzLCBvbkFkZCwgb25DbG9zZSwgaWRDb3VudGVyIH06IEFkZEFsZXJ0Rm9ybVByb3BzKSA9PiB7CiAgY29uc3QgW3N5bWJvbCwgc2V0U3ltYm9sXSA9IHVzZVN0YXRlKCdidGMnKTsKICBjb25zdCBbYWxlcnRUeXBlLCBzZXRBbGVydFR5cGVdID0gdXNlU3RhdGU8QWxlcnRUeXBlPignYWJvdmUnKTsKICBjb25zdCBbdGFyZ2V0LCBzZXRUYXJnZXRdID0gdXNlU3RhdGUoJycpOwogIGNvbnN0IFtub3RlLCBzZXROb3RlXSA9IHVzZVN0YXRlKCcnKTsKICBjb25zdCBbc291bmQsIHNldFNvdW5kXSA9IHVzZVN0YXRlKHRydWUpOwogIGNvbnN0IFtwdXNoLCBzZXRQdXNoXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKCcnKTsKCiAgY29uc3Qgc2VsZWN0ZWRBc3NldCA9IHVzZU1lbW8oCiAgICAoKSA9PiBhc3NldHMuZmluZChhID0+IGEuc3ltYm9sLnRvTG93ZXJDYXNlKCkgPT09IHN5bWJvbCkgPz8gYXNzZXRzWzBdLAogICAgW2Fzc2V0cywgc3ltYm9sXQogICk7CgogIGNvbnN0IGlzUGVyY2VudCA9IGFsZXJ0VHlwZSA9PT0gJ2NoYW5nZV91cCcgfHwgYWxlcnRUeXBlID09PSAnY2hhbmdlX2Rvd24nOwogIGNvbnN0IHBsYWNlaG9sZGVyID0gaXNQZXJjZW50ID8gJ2UuZy4gNSAoZm9yIDUlKScgOiBzZWxlY3RlZEFzc2V0ID8gJ2UuZy4gJyArIE1hdGgucm91bmQoc2VsZWN0ZWRBc3NldC5wcmljZSAqIDEuMDUpIDogJ1RhcmdldCBwcmljZSc7CgogIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQodGFyZ2V0KTsKICAgIGlmICghaXNGaW5pdGUodmFsKSB8fCB2YWwgPD0gMCkgeyBzZXRFcnJvcignVGFyZ2V0IHRpZGFrIHZhbGlkIGJybycpOyByZXR1cm47IH0KICAgIGlmICghc2VsZWN0ZWRBc3NldCkgeyBzZXRFcnJvcignUGlsaWggYXNldCBkdWx1Jyk7IHJldHVybjsgfQogICAgc2V0RXJyb3IoJycpOwogICAgY29uc3QgYWxlcnQ6IFByaWNlQWxlcnQgPSB7CiAgICAgIGlkOiBnZW5JZChpZENvdW50ZXIpLAogICAgICBzeW1ib2w6IHNlbGVjdGVkQXNzZXQuc3ltYm9sLnRvTG93ZXJDYXNlKCksCiAgICAgIG5hbWU6IHNlbGVjdGVkQXNzZXQubmFtZSwKICAgICAgaW1hZ2U6IHNlbGVjdGVkQXNzZXQuaW1hZ2UsCiAgICAgIHR5cGU6IGFsZXJ0VHlwZSwKICAgICAgdGFyZ2V0OiB2YWwsCiAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSwKICAgICAgc3RhdHVzOiAnYWN0aXZlJywKICAgICAgbm90ZTogbm90ZS50cmltKCkgfHwgdW5kZWZpbmVkLAogICAgICBzb3VuZCwKICAgICAgcHVzaCwKICAgIH07CiAgICBvbkFkZChhbGVydCk7CiAgICBvbkNsb3NlKCk7CiAgfSwgW3RhcmdldCwgc2VsZWN0ZWRBc3NldCwgYWxlcnRUeXBlLCBub3RlLCBzb3VuZCwgcHVzaCwgaWRDb3VudGVyLCBvbkFkZCwgb25DbG9zZV0pOwoKICBjb25zdCB0b3BBc3NldHMgPSB1c2VNZW1vKCgpID0+IGFzc2V0cy5zbGljZSgwLCAzMCksIFthc3NldHNdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYKICAgICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdmaXhlZCcsIGluc2V0OiAwLCB6SW5kZXg6IDIwMCwgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBiYWNrZ3JvdW5kOiAncmdiYSg1LDUsMTQsMC44MiknLCBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoMTBweCknIH19CiAgICAgIG9uQ2xpY2s9e2UgPT4geyBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkgb25DbG9zZSgpOyB9fQogICAgPgogICAgICA8ZGl2CiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBtYXhXaWR0aDogNDQ4LCBtYXJnaW46ICcwIDE2cHgnLCBwYWRkaW5nOiAyNCwgYmFja2dyb3VuZDogJ3JnYmEoOCw4LDI0LDAuOTgpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE4KScsIGJvcmRlclJhZGl1czogJzEycHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fQogICAgICA+CiAgICAgICAgey8qIEhlYWRlciAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIG1hcmdpbkJvdHRvbTogMjAgfX0+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCB9fT4KICAgICAgICAgICAgPEJlbGwgc2l6ZT17MTZ9IHN0eWxlPXt7IGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDEpJyB9fSAvPgogICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNzAwLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtcHJpbWFyeSknIH19PgogICAgICAgICAgICAgIE5ldyBBbGVydAogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX0KICAgICAgICAgICAgYXJpYS1sYWJlbD0iQ2xvc2UgbmV3IGFsZXJ0IGRpYWxvZyIKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogNCwgYm9yZGVyUmFkaXVzOiA4LCB0cmFuc2l0aW9uOiAnY29sb3IgMC4xNXMsYmFja2dyb3VuZCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLCBib3JkZXI6ICdub25lJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPFggc2l6ZT17MTZ9IC8+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIEFzc2V0IFNlbGVjdCAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMTYgfX0+CiAgICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLCBsZXR0ZXJTcGFjaW5nOiAnMC4wNWVtJywgbWFyZ2luQm90dG9tOiA2LCBkaXNwbGF5OiAnYmxvY2snLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgQXNzZXQKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgIHZhbHVlPXtzeW1ib2x9CiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFN5bWJvbChlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAge3RvcEFzc2V0cy5tYXAoYSA9PiAoCiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2EuaWR9IHZhbHVlPXthLnN5bWJvbC50b0xvd2VyQ2FzZSgpfSBzdHlsZT17eyBiYWNrZ3JvdW5kOiAncmdiYSg4LDgsMjQsMSknIH19PgogICAgICAgICAgICAgICAge2Euc3ltYm9sLnRvVXBwZXJDYXNlKCl9IOKAlCB7YS5uYW1lfQogICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICApKX0KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAge3NlbGVjdGVkQXNzZXQgJiYgKAogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogNCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgIEN1cnJlbnQ6IHtmb3JtYXRQcmljZShzZWxlY3RlZEFzc2V0LnByaWNlKX0gwrcge2Zvcm1hdENoYW5nZShzZWxlY3RlZEFzc2V0LmNoYW5nZTI0aCl9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKX0KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIEFsZXJ0IFR5cGUgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDE2IH19PgogICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJywgbGV0dGVyU3BhY2luZzogJzAuMDVlbScsIG1hcmdpbkJvdHRvbTogNiwgZGlzcGxheTogJ2Jsb2NrJywgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICAgIEFsZXJ0IFR5cGUKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzFmciAxZnInLCBnYXA6IDggfX0+CiAgICAgICAgICAgIHsoT2JqZWN0LmtleXMoQUxFUlRfVFlQRV9DT05GSUcpIGFzIEFsZXJ0VHlwZVtdKS5tYXAodCA9PiB7CiAgICAgICAgICAgICAgY29uc3QgY2ZnID0gQUxFUlRfVFlQRV9DT05GSUdbdF07CiAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gYWxlcnRUeXBlID09PSB0OwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICAgIGtleT17dH0KICAgICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBbGVydFR5cGUodCl9CiAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17YWN0aXZlfQogICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnU2VsZWN0IGFsZXJ0IHR5cGU6ICcgKyBjZmcubGFiZWx9CiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCwgcGFkZGluZzogJzhweCAxMnB4JywgYm9yZGVyUmFkaXVzOiA4LCB0ZXh0QWxpZ246ICdsZWZ0JywgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiBhY3RpdmUgPyBjZmcuYmcgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjAzKScsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgKGFjdGl2ZSA/IGNmZy5ib3JkZXIgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScpLCBjb2xvcjogYWN0aXZlID8gY2ZnLmNvbG9yIDogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScsIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nIH19CiAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgIDxjZmcuaWNvbiBzaXplPXsxMn0gLz4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+e2NmZy5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogVGFyZ2V0ICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgIDxsYWJlbCBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjA1ZW0nLCBtYXJnaW5Cb3R0b206IDYsIGRpc3BsYXk6ICdibG9jaycsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICB7aXNQZXJjZW50ID8gJ0NoYW5nZSAlIFRhcmdldCcgOiAnUHJpY2UgVGFyZ2V0IChVU0QpJ30KICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgdHlwZT0ibnVtYmVyIgogICAgICAgICAgICB2YWx1ZT17dGFyZ2V0fQogICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRUYXJnZXQoZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgIC8+CiAgICAgICAgICB7ZXJyb3IgJiYgKAogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogNCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1uZWdhdGl2ZSknIH19PntlcnJvcn08L2Rpdj4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBOb3RlICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgIDxsYWJlbCBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjA1ZW0nLCBtYXJnaW5Cb3R0b206IDYsIGRpc3BsYXk6ICdibG9jaycsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICBOb3RlIChvcHRpb25hbCkKICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgdHlwZT0idGV4dCIKICAgICAgICAgICAgdmFsdWU9e25vdGV9CiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldE5vdGUoZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICBwbGFjZWhvbGRlcj0iZS5nLiBSZXNpc3RhbmNlIGxldmVsLCBEQ0EgcG9pbnQuLi4iCiAgICAgICAgICAgIG1heExlbmd0aD17ODB9CiAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDE0LCBmb250RmFtaWx5OiBGT05UX01PTk8sIG91dGxpbmU6ICdub25lJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoOTYsMTY1LDI1MCwwLjE0KScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1wcmltYXJ5KScgfX0KICAgICAgICAgIC8+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBOb3RpZmljYXRpb24gT3B0aW9ucyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAxMiwgbWFyZ2luQm90dG9tOiAyMCB9fT4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U291bmQocyA9PiAhcyl9CiAgICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtzb3VuZH0KICAgICAgICAgICAgYXJpYS1sYWJlbD17c291bmQgPyAnRGlzYWJsZSBzb3VuZCBub3RpZmljYXRpb24nIDogJ0VuYWJsZSBzb3VuZCBub3RpZmljYXRpb24nfQogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDgsIHBhZGRpbmc6ICc4cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZmxleDogMSwgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGN1cnNvcjogJ3BvaW50ZXInLCBiYWNrZ3JvdW5kOiBzb3VuZCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXI6ICcxcHggc29saWQgJyArIChzb3VuZCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4yNSknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNiknKSwgY29sb3I6IHNvdW5kID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIHtzb3VuZCA/IDxWb2x1bWUyIHNpemU9ezEzfSAvPiA6IDxWb2x1bWVYIHNpemU9ezEzfSAvPn0KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+U291bmQ8L3NwYW4+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0UHVzaChwID0+ICFwKX0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3B1c2h9CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e3B1c2ggPyAnRGlzYWJsZSBwdXNoIG5vdGlmaWNhdGlvbicgOiAnRW5hYmxlIHB1c2ggbm90aWZpY2F0aW9uJ30KICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA4LCBwYWRkaW5nOiAnOHB4IDEycHgnLCBib3JkZXJSYWRpdXM6IDgsIGZsZXg6IDEsIHRyYW5zaXRpb246ICdhbGwgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogcHVzaCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMTApJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAocHVzaCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMjUpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyksIGNvbG9yOiBwdXNoID8gJ3JnYmEoMTY3LDEzOSwyNTAsMSknIDogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICB7cHVzaCA/IDxCZWxsIHNpemU9ezEzfSAvPiA6IDxCZWxsT2ZmIHNpemU9ezEzfSAvPn0KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8gfX0+UHVzaDwvc3Bhbj4KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogU3VibWl0ICovfQogICAgICAgIDxidXR0b24KICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN1Ym1pdH0KICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgIGFyaWEtbGFiZWw9IkNyZWF0ZSBuZXcgcHJpY2UgYWxlcnQiCiAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBwYWRkaW5nOiAnMTBweCAwJywgYm9yZGVyUmFkaXVzOiA4LCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxNCwgZm9udFdlaWdodDogNjAwLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC4xOCknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMzApJywgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknIH19CiAgICAgICAgPgogICAgICAgICAgU2V0IEFsZXJ0CiAgICAgICAgPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfSk7CkFkZEFsZXJ0Rm9ybS5kaXNwbGF5TmFtZSA9ICdBZGRBbGVydEZvcm0nOwoKLy8g4pSA4pSA4pSAIEFsZXJ0IENhcmQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgppbnRlcmZhY2UgQWxlcnRDYXJkUHJvcHMgewogIGFsZXJ0OiBQcmljZUFsZXJ0OwogIGN1cnJlbnRQcmljZT86IG51bWJlcjsKICBjdXJyZW50Q2hhbmdlPzogbnVtYmVyOwogIG9uUmVtb3ZlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDsKICBvblRvZ2dsZVBhdXNlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDsKfQoKY29uc3QgQWxlcnRDYXJkID0gbWVtbygoeyBhbGVydCwgY3VycmVudFByaWNlLCBjdXJyZW50Q2hhbmdlLCBvblJlbW92ZSwgb25Ub2dnbGVQYXVzZSB9OiBBbGVydENhcmRQcm9wcykgPT4gewogIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW2FsZXJ0LnR5cGVdOwogIGNvbnN0IHNDZmcgPSBTVEFUVVNfQ09ORklHW2FsZXJ0LnN0YXR1c107CiAgY29uc3QgaXNQZXJjZW50ID0gYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV91cCcgfHwgYWxlcnQudHlwZSA9PT0gJ2NoYW5nZV9kb3duJzsKCiAgLy8gUHJvZ3Jlc3MgdG93YXJkIHRhcmdldAogIGNvbnN0IHByb2dyZXNzID0gdXNlTWVtbygoKSA9PiB7CiAgICBpZiAoIWN1cnJlbnRQcmljZSAmJiAhY3VycmVudENoYW5nZSkgcmV0dXJuIG51bGw7CiAgICBpZiAoaXNQZXJjZW50ICYmIGN1cnJlbnRDaGFuZ2UgIT09IHVuZGVmaW5lZCkgewogICAgICBjb25zdCBwY3QgPSBNYXRoLm1pbihNYXRoLmFicyhjdXJyZW50Q2hhbmdlKSAvIGFsZXJ0LnRhcmdldCwgMSk7CiAgICAgIHJldHVybiB7IHBjdCwgY3VycmVudDogY3VycmVudENoYW5nZSB9OwogICAgfQogICAgaWYgKCFpc1BlcmNlbnQgJiYgY3VycmVudFByaWNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgY29uc3QgYmFzZSA9IGFsZXJ0LnR5cGUgPT09ICdhYm92ZScKICAgICAgICA/IE1hdGgubWluKGN1cnJlbnRQcmljZSAvIGFsZXJ0LnRhcmdldCwgMSkKICAgICAgICA6IE1hdGgubWluKGFsZXJ0LnRhcmdldCAvIGN1cnJlbnRQcmljZSwgMSk7CiAgICAgIHJldHVybiB7IHBjdDogTWF0aC5tYXgoMCwgTWF0aC5taW4oYmFzZSwgMSkpLCBjdXJyZW50OiBjdXJyZW50UHJpY2UgfTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0sIFthbGVydC50eXBlLCBhbGVydC50YXJnZXQsIGN1cnJlbnRQcmljZSwgY3VycmVudENoYW5nZSwgaXNQZXJjZW50XSk7CgogIGNvbnN0IGhhbmRsZVJlbW92ZSA9IHVzZUNhbGxiYWNrKCgpID0+IG9uUmVtb3ZlKGFsZXJ0LmlkKSwgW2FsZXJ0LmlkLCBvblJlbW92ZV0pOwogIGNvbnN0IGhhbmRsZVBhdXNlID0gdXNlQ2FsbGJhY2soKCkgPT4gb25Ub2dnbGVQYXVzZShhbGVydC5pZCksIFthbGVydC5pZCwgb25Ub2dnbGVQYXVzZV0pOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17eyBwYWRkaW5nOiAxNiwgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGJhY2tncm91bmQ6IGFsZXJ0LnN0YXR1cyA9PT0gJ3RyaWdnZXJlZCcgPyBjZmcuYmcgOiAndmFyKC0tem0tZ2xhc3MtYmcpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoYWxlcnQuc3RhdHVzID09PSAndHJpZ2dlcmVkJyA/IGNmZy5ib3JkZXIgOiAndmFyKC0tem0tZ2xhc3MtYm9yZGVyKScpLCBib3JkZXJSYWRpdXM6ICcxMnB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScsIG9wYWNpdHk6IGFsZXJ0LnN0YXR1cyA9PT0gJ3BhdXNlZCcgPyAwLjYgOiAxLCB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJyB9fQogICAgPgogICAgICB7LyogVG9wIHJvdyAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Cb3R0b206IDggfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+CiAgICAgICAgICB7YWxlcnQuaW1hZ2UgJiYgPGltZyBzcmM9e2FsZXJ0LmltYWdlfSBhbHQ9IiIgc3R5bGU9e3sgd2lkdGg6IDIwLCBoZWlnaHQ6IDIwLCBib3JkZXJSYWRpdXM6ICc1MCUnIH19IC8+fQogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgICAge2FsZXJ0LnN5bWJvbC50b1VwcGVyQ2FzZSgpfQogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDQsIGJvcmRlclJhZGl1czogNCwgcGFkZGluZzogJzJweCA2cHgnLCBiYWNrZ3JvdW5kOiBjZmcuYmcsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgY2ZnLmJvcmRlciB9fQogICAgICAgICAgPgogICAgICAgICAgICA8Y2ZnLmljb24gc2l6ZT17MTB9IHN0eWxlPXt7IGNvbG9yOiBjZmcuY29sb3IgfX0gLz4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY29sb3I6IGNmZy5jb2xvciB9fT4KICAgICAgICAgICAgICB7Y2ZnLmxhYmVsfQogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiA0LCBwYWRkaW5nOiAnMnB4IDZweCcsIGJhY2tncm91bmQ6IHNDZmcuYmcgfX0KICAgICAgICAgID4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgY29sb3I6IHNDZmcuY29sb3IgfX0+CiAgICAgICAgICAgICAge3NDZmcubGFiZWx9CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogQWN0aW9ucyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICAgIHthbGVydC5zb3VuZCAmJiA8Vm9sdW1lMiBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0gLz59CiAgICAgICAgICB7YWxlcnQucHVzaCAmJiA8QmVsbCBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0gLz59CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVBhdXNlfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IDQsIGJvcmRlclJhZGl1czogNCwgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnbm9uZScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2FsZXJ0LnN0YXR1cyA9PT0gJ3BhdXNlZCcgPyAnUmVzdW1lIGFsZXJ0JyA6ICdQYXVzZSBhbGVydCd9CiAgICAgICAgICA+CiAgICAgICAgICAgIHthbGVydC5zdGF0dXMgPT09ICdwYXVzZWQnCiAgICAgICAgICAgICAgPyA8QmVsbCBzaXplPXsxM30gLz4KICAgICAgICAgICAgICA6IDxCZWxsT2ZmIHNpemU9ezEzfSAvPgogICAgICAgICAgICB9CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IDQsIGJvcmRlclJhZGl1czogNCwgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjdXJzb3I6ICdwb2ludGVyJywgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnbm9uZScsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjUpJyB9fQogICAgICAgICAgICBhcmlhLWxhYmVsPSJSZW1vdmUgYWxlcnQiCiAgICAgICAgICA+CiAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MTN9IC8+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICB7LyogVGFyZ2V0ICovfQogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2Jhc2VsaW5lJywgZ2FwOiA4LCBtYXJnaW5Cb3R0b206IDggfX0+CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTgsIGZvbnRXZWlnaHQ6IDcwMCwgY29sb3I6IGNmZy5jb2xvciB9fT4KICAgICAgICAgIHtpc1BlcmNlbnQgPyBmb3JtYXRDaGFuZ2UoYWxlcnQudGFyZ2V0KSA6IGZvcm1hdFByaWNlKGFsZXJ0LnRhcmdldCl9CiAgICAgICAgPC9zcGFuPgogICAgICAgIHtjdXJyZW50UHJpY2UgIT09IHVuZGVmaW5lZCAmJiAhaXNQZXJjZW50ICYmICgKICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIG5vdyB7Zm9ybWF0UHJpY2UoY3VycmVudFByaWNlKX0KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICApfQogICAgICAgIHtjdXJyZW50Q2hhbmdlICE9PSB1bmRlZmluZWQgJiYgaXNQZXJjZW50ICYmICgKICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICAgIG5vdyB7Zm9ybWF0Q2hhbmdlKGN1cnJlbnRDaGFuZ2UpfQogICAgICAgICAgPC9zcGFuPgogICAgICAgICl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIFByb2dyZXNzIGJhciAqL30KICAgICAge3Byb2dyZXNzICE9PSBudWxsICYmIGFsZXJ0LnN0YXR1cyA9PT0gJ2FjdGl2ZScgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiA4IH19PgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6IDQsIGJvcmRlclJhZGl1czogJzUwdncnLCBvdmVyZmxvdzogJ2hpZGRlbicsIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICA8ZGl2CiAgICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScsIGJvcmRlclJhZGl1czogJzUwdncnLCB0cmFuc2l0aW9uOiAnYWxsIDAuNXMnLCB3aWR0aDogKHByb2dyZXNzLnBjdCAqIDEwMCkudG9GaXhlZCgxKSArICclJywgYmFja2dyb3VuZDogY2ZnLmNvbG9yLCB3aWxsQ2hhbmdlOiAnd2lkdGgnIH19CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDksIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgbWFyZ2luVG9wOiAyLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgeyhwcm9ncmVzcy5wY3QgKiAxMDApLnRvRml4ZWQoMSkgKyAnJSB0b3dhcmQgdGFyZ2V0J30KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICApfQoKICAgICAgey8qIFRyaWdnZXJlZCBpbmZvICovfQogICAgICB7YWxlcnQuc3RhdHVzID09PSAndHJpZ2dlcmVkJyAmJiBhbGVydC50cmlnZ2VyZWRQcmljZSAhPT0gdW5kZWZpbmVkICYmICgKICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgbWFyZ2luVG9wOiA0IH19PgogICAgICAgICAgPENoZWNrQ2lyY2xlMiBzaXplPXsxMX0gc3R5bGU9e3sgY29sb3I6IGNmZy5jb2xvciB9fSAvPgogICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAgeydUcmlnZ2VyZWQgYXQgJyArIGZvcm1hdFByaWNlKGFsZXJ0LnRyaWdnZXJlZFByaWNlKSArICcgwrcgJyArIG5ldyBEYXRlKGFsZXJ0LnRyaWdnZXJlZEF0ISkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9CiAgICAgICAgICA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogTm90ZSAqL30KICAgICAge2FsZXJ0Lm5vdGUgJiYgKAogICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIG1hcmdpblRvcDogNCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0+CiAgICAgICAgICB7YWxlcnQubm90ZX0KICAgICAgICA8L2Rpdj4KICAgICAgKX0KICAgIDwvZGl2PgogICk7Cn0pOwpBbGVydENhcmQuZGlzcGxheU5hbWUgPSAnQWxlcnRDYXJkJzsKCi8vIOKUgOKUgOKUgCBMb2cgRW50cnkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpjb25zdCBMb2dFbnRyeSA9IG1lbW8oKHsgZW50cnkgfTogeyBlbnRyeTogVHJpZ2dlcmVkTG9nIH0pID0+IHsKICBjb25zdCBjZmcgPSBBTEVSVF9UWVBFX0NPTkZJR1tlbnRyeS50eXBlXTsKICByZXR1cm4gKAogICAgPGRpdgogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBwYWRkaW5nVG9wOiA4LCBwYWRkaW5nQm90dG9tOiA4LCBib3JkZXJDb2xvcjogJ3ZhcigtLXptLWdsYXNzLWJvcmRlciknIH19CiAgICA+CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA4IH19PgogICAgICAgIHtlbnRyeS5pbWFnZSAmJiA8aW1nIHNyYz17ZW50cnkuaW1hZ2V9IGFsdD0iIiBzdHlsZT17eyB3aWR0aDogMTYsIGhlaWdodDogMTYsIGJvcmRlclJhZGl1czogJzUwJScgfX0gLz59CiAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTEsIGZvbnRXZWlnaHQ6IDYwMCwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgIHtlbnRyeS5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICA8L3NwYW4+CiAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCwgYm9yZGVyUmFkaXVzOiA0LCBwYWRkaW5nOiAnMnB4IDZweCcsIGJhY2tncm91bmQ6IGNmZy5iZyB9fQogICAgICAgID4KICAgICAgICAgIDxjZmcuaWNvbiBzaXplPXs5fSBzdHlsZT17eyBjb2xvcjogY2ZnLmNvbG9yIH19IC8+CiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogOSwgZm9udEZhbWlseTogRk9OVF9NT05PLCBjb2xvcjogY2ZnLmNvbG9yIH19PntjZmcubGFiZWx9PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMSwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXByaW1hcnkpJyB9fT4KICAgICAgICAgIHtmb3JtYXRQcmljZShlbnRyeS50cmlnZ2VyZWRQcmljZSl9CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiA5LCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgIHtuZXcgRGF0ZShlbnRyeS50cmlnZ2VyZWRBdCkudG9Mb2NhbGVTdHJpbmcoKX0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9KTsKTG9nRW50cnkuZGlzcGxheU5hbWUgPSAnTG9nRW50cnknOwoKLy8g4pSA4pSA4pSAIFRvYXN0IE5vdGlmaWNhdGlvbiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmludGVyZmFjZSBUb2FzdEl0ZW0gewogIGlkOiBzdHJpbmc7CiAgc3ltYm9sOiBzdHJpbmc7CiAgdHlwZTogQWxlcnRUeXBlOwogIHByaWNlOiBudW1iZXI7CiAgdGFyZ2V0OiBudW1iZXI7CiAgdHM6IG51bWJlcjsKfQoKY29uc3QgQWxlcnRUb2FzdCA9IG1lbW8oKHsgdG9hc3QsIG9uRGlzbWlzcyB9OiB7IHRvYXN0OiBUb2FzdEl0ZW07IG9uRGlzbWlzczogKGlkOiBzdHJpbmcpID0+IHZvaWQgfSkgPT4gewogIGNvbnN0IGNmZyA9IEFMRVJUX1RZUEVfQ09ORklHW3RvYXN0LnR5cGVdOwogIGNvbnN0IGlzUGVyY2VudCA9IHRvYXN0LnR5cGUgPT09ICdjaGFuZ2VfdXAnIHx8IHRvYXN0LnR5cGUgPT09ICdjaGFuZ2VfZG93bic7CgogIGNvbnN0IGRpc21pc3MgPSB1c2VDYWxsYmFjaygoKSA9PiBvbkRpc21pc3ModG9hc3QuaWQpLCBbdG9hc3QuaWQsIG9uRGlzbWlzc10pOwoKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDEyLCBwYWRkaW5nOiAnMTJweCAxNnB4JywgYm9yZGVyUmFkaXVzOiAxMiwgYmFja2dyb3VuZDogJ3JnYmEoOCw4LDI0LDAuOTcpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyBjZmcuYm9yZGVyLCBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoMjBweCknLCB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJywgbWluV2lkdGg6IDI4MCB9fQogICAgPgogICAgICA8ZGl2CiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogMzIsIGhlaWdodDogMzIsIGJvcmRlclJhZGl1czogOCwgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBmbGV4U2hyaW5rOiAwLCBiYWNrZ3JvdW5kOiBjZmcuYmcsIGJvcmRlcjogJzFweCBzb2xpZCAnICsgY2ZnLmJvcmRlciB9fQogICAgICA+CiAgICAgICAgPGNmZy5pY29uIHNpemU9ezE0fSBzdHlsZT17eyBjb2xvcjogY2ZnLmNvbG9yIH19IC8+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IHN0eWxlPXt7IGZsZXg6IDEgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMiwgZm9udFdlaWdodDogNzAwLCBjb2xvcjogY2ZnLmNvbG9yIH19PgogICAgICAgICAge2NmZy5sYWJlbH0g4oCUIHt0b2FzdC5zeW1ib2wudG9VcHBlckNhc2UoKX0KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDExLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtc2Vjb25kYXJ5KScgfX0+CiAgICAgICAgICB7aXNQZXJjZW50CiAgICAgICAgICAgID8gZm9ybWF0Q2hhbmdlKHRvYXN0LnByaWNlKSArICcgKHRhcmdldCAnICsgZm9ybWF0Q2hhbmdlKHRvYXN0LnRhcmdldCkgKyAnKScKICAgICAgICAgICAgOiBmb3JtYXRQcmljZSh0b2FzdC5wcmljZSkgKyAnICh0YXJnZXQgJyArIGZvcm1hdFByaWNlKHRvYXN0LnRhcmdldCkgKyAnKSd9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8YnV0dG9uIG9uQ2xpY2s9e2Rpc21pc3N9IHR5cGU9ImJ1dHRvbiIgYXJpYS1sYWJlbD0iRGlzbWlzcyBub3RpZmljYXRpb24iIHN0eWxlPXt7IGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgIDxYIHNpemU9ezEzfSAvPgogICAgICA8L2J1dHRvbj4KICAgIDwvZGl2PgogICk7Cn0pOwpBbGVydFRvYXN0LmRpc3BsYXlOYW1lID0gJ0FsZXJ0VG9hc3QnOwoKLy8g4pSA4pSA4pSAIE1haW4gUGFnZSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCmNvbnN0IEFsZXJ0cyA9IG1lbW8oKCkgPT4gewogIGNvbnN0IHsgYXNzZXRzLCB3c1N0YXR1cyB9ID0gdXNlQ3J5cHRvKCk7CiAgY29uc3QgeyBpc01vYmlsZSwgaXNUYWJsZXQgfSA9IHVzZUJyZWFrcG9pbnQoKTsKICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IHVzZVJlZHVjZXIocmVkdWNlciwgSU5JVElBTF9TVEFURSk7CiAgY29uc3QgW3Nob3dGb3JtLCBzZXRTaG93Rm9ybV0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3RhYiwgc2V0VGFiXSA9IHVzZVN0YXRlPCdhbGVydHMnIHwgJ2hpc3RvcnknPignYWxlcnRzJyk7CiAgY29uc3QgW2ZpbHRlclN0YXR1cywgc2V0RmlsdGVyU3RhdHVzXSA9IHVzZVN0YXRlPCdhbGwnIHwgQWxlcnRTdGF0dXM+KCdhbGwnKTsKICBjb25zdCBbc2hvd0xvZ0FsbCwgc2V0U2hvd0xvZ0FsbF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3RvYXN0cywgc2V0VG9hc3RzXSA9IHVzZVN0YXRlPFRvYXN0SXRlbVtdPihbXSk7CiAgY29uc3QgW3B1c2hQZXJtaXNzaW9uLCBzZXRQdXNoUGVybWlzc2lvbl0gPSB1c2VTdGF0ZTxOb3RpZmljYXRpb25QZXJtaXNzaW9uPignZGVmYXVsdCcpOwogIGNvbnN0IGlkQ291bnRlclJlZiA9IHVzZVJlZigwKTsKICBjb25zdCBtb3VudGVkUmVmID0gdXNlUmVmKHRydWUpOwoKICAvLyBMb2FkIGZyb20gbG9jYWxTdG9yYWdlIG9uIG1vdW50CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7CiAgICBjb25zdCBzYXZlZCA9IGxvYWRGcm9tTFMoKTsKICAgIGlmIChzYXZlZCkgZGlzcGF0Y2goeyB0eXBlOiAnTE9BRCcsIHN0YXRlOiBzYXZlZCB9KTsKICAgIGlmICgnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3cpIHNldFB1c2hQZXJtaXNzaW9uKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uKTsKICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlOyB9OwogIH0sIFtdKTsKCiAgLy8gU2F2ZSB0byBsb2NhbFN0b3JhZ2Ugb24gc3RhdGUgY2hhbmdlCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHNhdmVUb0xTKHN0YXRlKTsKICB9LCBbc3RhdGVdKTsKCiAgLy8gQnVpbGQgYXNzZXQgbG9va3VwIG1hcAogIGNvbnN0IGFzc2V0TWFwID0gdXNlTWVtbygoKSA9PiB7CiAgICBjb25zdCBtID0gbmV3IE1hcDxzdHJpbmcsIENyeXB0b0Fzc2V0PigpOwogICAgZm9yIChjb25zdCBhIG9mIGFzc2V0cykgewogICAgICBtLnNldChhLnN5bWJvbC50b0xvd2VyQ2FzZSgpLCBhKTsKICAgIH0KICAgIHJldHVybiBtOwogIH0sIFthc3NldHNdKTsKCiAgLy8gRGlzbWlzcyB0b2FzdAogIGNvbnN0IGRpc21pc3NUb2FzdCA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7CiAgICBzZXRUb2FzdHMocHJldiA9PiBwcmV2LmZpbHRlcih0ID0+IHQuaWQgIT09IGlkKSk7CiAgfSwgW10pOwoKICAvLyBDaGVjayBhbGVydHMgYWdhaW5zdCBsaXZlIHByaWNlcwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoYXNzZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgZm9yIChjb25zdCBhbGVydCBvZiBzdGF0ZS5hbGVydHMpIHsKICAgICAgaWYgKGFsZXJ0LnN0YXR1cyAhPT0gJ2FjdGl2ZScpIGNvbnRpbnVlOwogICAgICBjb25zdCBhc3NldCA9IGFzc2V0TWFwLmdldChhbGVydC5zeW1ib2wudG9Mb3dlckNhc2UoKSk7CiAgICAgIGlmICghYXNzZXQpIGNvbnRpbnVlOwogICAgICBpZiAoIWNoZWNrQWxlcnQoYWxlcnQsIGFzc2V0KSkgY29udGludWU7CgogICAgICAvLyBGaXJlIQogICAgICBjb25zdCBwcmljZSA9IGFsZXJ0LnR5cGUgPT09ICdjaGFuZ2VfdXAnIHx8IGFsZXJ0LnR5cGUgPT09ICdjaGFuZ2VfZG93bicKICAgICAgICA/IGFzc2V0LmNoYW5nZTI0aAogICAgICAgIDogYXNzZXQucHJpY2U7CgogICAgICBjb25zdCBsb2dFbnRyeTogVHJpZ2dlcmVkTG9nID0gewogICAgICAgIGlkOiBnZW5JZCgrK2lkQ291bnRlclJlZi5jdXJyZW50KSwKICAgICAgICBhbGVydElkOiBhbGVydC5pZCwKICAgICAgICBzeW1ib2w6IGFsZXJ0LnN5bWJvbCwKICAgICAgICBuYW1lOiBhbGVydC5uYW1lLAogICAgICAgIGltYWdlOiBhbGVydC5pbWFnZSwKICAgICAgICB0eXBlOiBhbGVydC50eXBlLAogICAgICAgIHRhcmdldDogYWxlcnQudGFyZ2V0LAogICAgICAgIHRyaWdnZXJlZFByaWNlOiBwcmljZSwKICAgICAgICB0cmlnZ2VyZWRBdDogRGF0ZS5ub3coKSwKICAgICAgfTsKCiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1RSSUdHRVInLCBpZDogYWxlcnQuaWQsIHByaWNlLCBsb2dFbnRyeSB9KTsKCiAgICAgIGlmIChhbGVydC5zb3VuZCAmJiBzdGF0ZS5zb3VuZEVuYWJsZWQpIHBsYXlBbGVydFNvdW5kKGFsZXJ0LnR5cGUpOwogICAgICBpZiAoYWxlcnQucHVzaCAmJiBzdGF0ZS5wdXNoRW5hYmxlZCkgc2VuZFB1c2hOb3RpZmljYXRpb24oYWxlcnQsIHByaWNlKTsKCiAgICAgIC8vIFNob3cgdG9hc3QKICAgICAgY29uc3QgdG9hc3Q6IFRvYXN0SXRlbSA9IHsKICAgICAgICBpZDogbG9nRW50cnkuaWQsCiAgICAgICAgc3ltYm9sOiBhbGVydC5zeW1ib2wsCiAgICAgICAgdHlwZTogYWxlcnQudHlwZSwKICAgICAgICBwcmljZSwKICAgICAgICB0YXJnZXQ6IGFsZXJ0LnRhcmdldCwKICAgICAgICB0czogRGF0ZS5ub3coKSwKICAgICAgfTsKICAgICAgc2V0VG9hc3RzKHByZXYgPT4gW3RvYXN0LCAuLi5wcmV2XS5zbGljZSgwLCA1KSk7CiAgICB9CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCiAgfSwgW2Fzc2V0c10pOwoKICAvLyBBdXRvLWRpc21pc3MgdG9hc3RzIGFmdGVyIDZzCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICh0b2FzdHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICBjb25zdCBuZXdlc3QgPSB0b2FzdHNbMF07CiAgICBjb25zdCByZW1haW5pbmcgPSA2MDAwIC0gKERhdGUubm93KCkgLSBuZXdlc3QudHMpOwogICAgY29uc3QgdCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICBpZiAobW91bnRlZFJlZi5jdXJyZW50KSBzZXRUb2FzdHMocHJldiA9PiBwcmV2LnNsaWNlKDAsIC0xKSk7CiAgICB9LCBNYXRoLm1heChyZW1haW5pbmcsIDEwMDApKTsKICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodCk7CiAgfSwgW3RvYXN0c10pOwoKICBjb25zdCBoYW5kbGVBZGQgPSB1c2VDYWxsYmFjaygoYWxlcnQ6IFByaWNlQWxlcnQpID0+IHsKICAgIGRpc3BhdGNoKHsgdHlwZTogJ0FERCcsIGFsZXJ0IH0pOwogIH0sIFtdKTsKCiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHsKICAgIGRpc3BhdGNoKHsgdHlwZTogJ1JFTU9WRScsIGlkIH0pOwogIH0sIFtdKTsKCiAgY29uc3QgaGFuZGxlVG9nZ2xlUGF1c2UgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4gewogICAgZGlzcGF0Y2goeyB0eXBlOiAnVE9HR0xFX1BBVVNFJywgaWQgfSk7CiAgfSwgW10pOwoKICBjb25zdCBoYW5kbGVUb2dnbGVTb3VuZCA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgIGRpc3BhdGNoKHsgdHlwZTogJ1RPR0dMRV9TT1VORCcgfSk7CiAgfSwgW10pOwoKICBjb25zdCBoYW5kbGVUb2dnbGVQdXNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgaWYgKCEoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSkgcmV0dXJuOwogICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVmYXVsdCcpIHsKICAgICAgY29uc3QgcGVybSA9IGF3YWl0IE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpOwogICAgICBzZXRQdXNoUGVybWlzc2lvbihwZXJtKTsKICAgICAgaWYgKHBlcm0gPT09ICdncmFudGVkJykgZGlzcGF0Y2goeyB0eXBlOiAnVE9HR0xFX1BVU0gnIH0pOwogICAgfSBlbHNlIHsKICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVE9HR0xFX1BVU0gnIH0pOwogICAgfQogIH0sIFtdKTsKCiAgLy8gRmlsdGVyZWQgYWxlcnRzCiAgY29uc3QgZmlsdGVyZWRBbGVydHMgPSB1c2VNZW1vKCgpID0+IHsKICAgIHJldHVybiBzdGF0ZS5hbGVydHMuZmlsdGVyKGEgPT4KICAgICAgZmlsdGVyU3RhdHVzID09PSAnYWxsJyA/IHRydWUgOiBhLnN0YXR1cyA9PT0gZmlsdGVyU3RhdHVzCiAgICApOwogIH0sIFtzdGF0ZS5hbGVydHMsIGZpbHRlclN0YXR1c10pOwoKICBjb25zdCBhY3RpdmVDb3VudCA9IHVzZU1lbW8oKCkgPT4gc3RhdGUuYWxlcnRzLmZpbHRlcihhID0+IGEuc3RhdHVzID09PSAnYWN0aXZlJykubGVuZ3RoLCBbc3RhdGUuYWxlcnRzXSk7CiAgY29uc3QgdHJpZ2dlcmVkQ291bnQgPSB1c2VNZW1vKCgpID0+IHN0YXRlLmFsZXJ0cy5maWx0ZXIoYSA9PiBhLnN0YXR1cyA9PT0gJ3RyaWdnZXJlZCcpLmxlbmd0aCwgW3N0YXRlLmFsZXJ0c10pOwoKICBjb25zdCBsb2dUb1Nob3cgPSBzaG93TG9nQWxsID8gc3RhdGUubG9nIDogc3RhdGUubG9nLnNsaWNlKDAsIDIwKTsKCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgZ2FwOiAyMCB9fT4KICAgICAgey8qIFRvYXN0IENvbnRhaW5lciAqL30KICAgICAgPGRpdgogICAgICAgICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdmaXhlZCcsIHRvcDogMTYsIHJpZ2h0OiAxNiwgekluZGV4OiAzMDAsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGdhcDogOCwgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScgfX0KICAgICAgPgogICAgICAgIHt0b2FzdHMubWFwKHQgPT4gKAogICAgICAgICAgPEFsZXJ0VG9hc3Qga2V5PXt0LmlkfSB0b2FzdD17dH0gb25EaXNtaXNzPXtkaXNtaXNzVG9hc3R9IC8+CiAgICAgICAgKSl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIEhlYWRlciAqL30KICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nIH19PgogICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAxMiB9fT4KICAgICAgICAgIDxoMSBzdHlsZT17eyBmb250U2l6ZTogMjAsIGZvbnRXZWlnaHQ6IDcwMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBtYXJnaW46IDAsIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHZhcigtLXptLWFjY2VudCkgMCUsIHZhcigtLXptLXZpb2xldCkgMTAwJSknLCBXZWJraXRCYWNrZ3JvdW5kQ2xpcDogJ3RleHQnLCBXZWJraXRUZXh0RmlsbENvbG9yOiAndHJhbnNwYXJlbnQnLCBiYWNrZ3JvdW5kQ2xpcDogJ3RleHQnIH19PkFsZXJ0cyBDZW50ZXI8L2gxPgogICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDYsIHBhZGRpbmc6ICcycHggOHB4JywgYm9yZGVyUmFkaXVzOiA0LCBiYWNrZ3JvdW5kOiAncmdiYSg1MiwyMTEsMTUzLDAuMDgpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoNTIsMjExLDE1MywwLjIpJyB9fQogICAgICAgICAgPgogICAgICAgICAgICA8V3NTdGF0dXNEb3Qgc3RhdHVzPXt3c1N0YXR1c30gLz4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDEwLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGNvbG9yOiAncmdiYSg1MiwyMTEsMTUzLDAuOSknIH19PgogICAgICAgICAgICAgIHt3c1N0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcgPyAnTElWRSDCtyBQcmljZXMgcmVhbHRpbWUnIDogd3NTdGF0dXMudG9VcHBlckNhc2UoKX0KICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBHbG9iYWwgQ29udHJvbHMgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZVNvdW5kfQogICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17c3RhdGUuc291bmRFbmFibGVkfQogICAgICAgICAgICBhcmlhLWxhYmVsPXtzdGF0ZS5zb3VuZEVuYWJsZWQgPyAnTXV0ZSBhbGVydCBzb3VuZHMnIDogJ1VubXV0ZSBhbGVydCBzb3VuZHMnfQogICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDYsIHBhZGRpbmc6ICc2cHggMTJweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRyYW5zaXRpb246ICdhbGwgMC4xNXMnLCBiYWNrZ3JvdW5kOiBzdGF0ZS5zb3VuZEVuYWJsZWQgPyAncmdiYSg5NiwxNjUsMjUwLDAuMTApJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDQpJywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoc3RhdGUuc291bmRFbmFibGVkID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjIyKScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA4KScpLCBjb2xvcjogc3RhdGUuc291bmRFbmFibGVkID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIHtzdGF0ZS5zb3VuZEVuYWJsZWQgPyA8Vm9sdW1lMiBzaXplPXsxMn0gLz4gOiA8Vm9sdW1lWCBzaXplPXsxMn0gLz59CiAgICAgICAgICAgIFNvdW5kCiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlUHVzaH0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3N0YXRlLnB1c2hFbmFibGVkfQogICAgICAgICAgICBhcmlhLWxhYmVsPXtzdGF0ZS5wdXNoRW5hYmxlZCA/ICdEaXNhYmxlIHB1c2ggbm90aWZpY2F0aW9ucycgOiAnRW5hYmxlIHB1c2ggbm90aWZpY2F0aW9ucyd9CiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgcGFkZGluZzogJzZweCAxMnB4JywgYm9yZGVyUmFkaXVzOiA4LCBmb250U2l6ZTogMTEsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdHJhbnNpdGlvbjogJ2FsbCAwLjE1cycsIGJhY2tncm91bmQ6IHN0YXRlLnB1c2hFbmFibGVkID8gJ3JnYmEoMTY3LDEzOSwyNTAsMC4xMCknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wNCknLCBib3JkZXI6ICcxcHggc29saWQgJyArIChzdGF0ZS5wdXNoRW5hYmxlZCA/ICdyZ2JhKDE2NywxMzksMjUwLDAuMjIpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDgpJyksIGNvbG9yOiBzdGF0ZS5wdXNoRW5hYmxlZCA/ICdyZ2JhKDE2NywxMzksMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgICAgdGl0bGU9e3B1c2hQZXJtaXNzaW9uID09PSAnZGVuaWVkJyA/ICdQdXNoIG5vdGlmaWNhdGlvbnMgYmxvY2tlZCBieSBicm93c2VyJyA6ICcnfQogICAgICAgICAgPgogICAgICAgICAgICB7c3RhdGUucHVzaEVuYWJsZWQgPyA8QmVsbCBzaXplPXsxMn0gLz4gOiA8QmVsbE9mZiBzaXplPXsxMn0gLz59CiAgICAgICAgICAgIFB1c2gge3B1c2hQZXJtaXNzaW9uID09PSAnZGVuaWVkJyAmJiAnKGJsb2NrZWQpJ30KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Rm9ybSh0cnVlKX0KICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICBkaXNhYmxlZD17c3RhdGUuYWxlcnRzLmxlbmd0aCA+PSBNQVhfQUxFUlRTfQogICAgICAgICAgICBhcmlhLWxhYmVsPSJDcmVhdGUgbmV3IHByaWNlIGFsZXJ0IgogICAgICAgICAgICBhcmlhLWRpc2FibGVkPXtzdGF0ZS5hbGVydHMubGVuZ3RoID49IE1BWF9BTEVSVFN9CiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNiwgcGFkZGluZzogJzZweCAxNnB4JywgYm9yZGVyUmFkaXVzOiA4LCBmb250U2l6ZTogMTEsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFdlaWdodDogNjAwLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6ICdyZ2JhKDk2LDE2NSwyNTAsMC4xNiknLCBib3JkZXI6ICcxcHggc29saWQgcmdiYSg5NiwxNjUsMjUwLDAuMzApJywgY29sb3I6ICdyZ2JhKDk2LDE2NSwyNTAsMSknLCBvcGFjaXR5OiBzdGF0ZS5hbGVydHMubGVuZ3RoID49IE1BWF9BTEVSVFMgPyAwLjUgOiAxIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIDxQbHVzIHNpemU9ezEzfSAvPgogICAgICAgICAgICBOZXcgQWxlcnQKICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBTdGF0cyBSb3cgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2dyaWQnLCBncmlkVGVtcGxhdGVDb2x1bW5zOiBpc01vYmlsZSA/ICdyZXBlYXQoMiwxZnIpJyA6ICdyZXBlYXQoNCwxZnIpJywgZ2FwOiAxMiB9fT4KICAgICAgICB7WwogICAgICAgICAgeyBsYWJlbDogJ1RvdGFsIEFsZXJ0cycsIHZhbHVlOiBTdHJpbmcoc3RhdGUuYWxlcnRzLmxlbmd0aCksIGNvbG9yOiAncmdiYSg5NiwxNjUsMjUwLDEpJywgaWNvbjogQmVsbCB9LAogICAgICAgICAgeyBsYWJlbDogJ0FjdGl2ZScsIHZhbHVlOiBTdHJpbmcoYWN0aXZlQ291bnQpLCBjb2xvcjogJ3JnYmEoNTIsMjExLDE1MywxKScsIGljb246IEFjdGl2aXR5IH0sCiAgICAgICAgICB7IGxhYmVsOiAnVHJpZ2dlcmVkJywgdmFsdWU6IFN0cmluZyh0cmlnZ2VyZWRDb3VudCksIGNvbG9yOiAncmdiYSgyNTEsMTkxLDM2LDEpJywgaWNvbjogWmFwIH0sCiAgICAgICAgICB7IGxhYmVsOiAnSGlzdG9yeScsIHZhbHVlOiBTdHJpbmcoc3RhdGUubG9nLmxlbmd0aCksIGNvbG9yOiAncmdiYSgxNjcsMTM5LDI1MCwxKScsIGljb246IEhpc3RvcnkgfSwKICAgICAgICBdLm1hcChzID0+ICgKICAgICAgICAgIDxkaXYga2V5PXtzLmxhYmVsfSBzdHlsZT17eyBwYWRkaW5nOiAxNiwgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIG1hcmdpbkJvdHRvbTogNCB9fT4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZScsIGxldHRlclNwYWNpbmc6ICcwLjFlbScsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19PgogICAgICAgICAgICAgICAge3MubGFiZWx9CiAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgIDxzLmljb24gc2l6ZT17MTN9IHN0eWxlPXt7IGNvbG9yOiBzLmNvbG9yIH19IC8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgZm9udFNpemU6IDI0LCBmb250V2VpZ2h0OiA3MDAsIGNvbG9yOiBzLmNvbG9yIH19PgogICAgICAgICAgICAgIHtzLnZhbHVlfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICkpfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBUYWJzICovfQogICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogNCB9fT4KICAgICAgICB7KFsnYWxlcnRzJywgJ2hpc3RvcnknXSBhcyBjb25zdCkubWFwKHQgPT4gKAogICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICBrZXk9e3R9CiAgICAgICAgICAgIHR5cGU9ImJ1dHRvbiIKICAgICAgICAgICAgcm9sZT0idGFiIgogICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXt0YWIgPT09IHR9CiAgICAgICAgICAgIGFyaWEtbGFiZWw9e3QgPT09ICdhbGVydHMnID8gJ015IEFsZXJ0cyB0YWInIDogJ1RyaWdnZXIgSGlzdG9yeSB0YWInfQogICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRUYWIodCl9CiAgICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6ICc2cHggMTZweCcsIGJvcmRlclJhZGl1czogOCwgZm9udFNpemU6IDExLCBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRXZWlnaHQ6IDYwMCwgdGV4dFRyYW5zZm9ybTogJ2NhcGl0YWxpemUnLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6IHRhYiA9PT0gdCA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMiknIDogJ3JnYmEoMjU1LDI1NSwyNTUsMC4wMyknLCBib3JkZXI6ICcxcHggc29saWQgJyArICh0YWIgPT09IHQgPyAncmdiYSg5NiwxNjUsMjUwLDAuMjUpJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpJyksIGNvbG9yOiB0YWIgPT09IHQgPyAncmdiYSg5NiwxNjUsMjUwLDEpJyA6ICd2YXIoLS16bS10ZXh0LWZhaW50KScgfX0KICAgICAgICAgID4KICAgICAgICAgICAge3QgPT09ICdhbGVydHMnID8gJ015IEFsZXJ0cycgOiAnVHJpZ2dlciBIaXN0b3J5J30KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICkpfQogICAgICA8L2Rpdj4KCiAgICAgIHsvKiBBbGVydHMgVGFiICovfQogICAgICB7dGFiID09PSAnYWxlcnRzJyAmJiAoCiAgICAgICAgPGRpdj4KICAgICAgICAgIHsvKiBGaWx0ZXIgKi99CiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCwgbWFyZ2luQm90dG9tOiAxNiB9fT4KICAgICAgICAgICAgeyhbJ2FsbCcsICdhY3RpdmUnLCAndHJpZ2dlcmVkJywgJ3BhdXNlZCddIGFzIGNvbnN0KS5tYXAoZiA9PiAoCiAgICAgICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICAgICAga2V5PXtmfQogICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0RmlsdGVyU3RhdHVzKGYpfQogICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtmaWx0ZXJTdGF0dXMgPT09IGZ9CiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXsnRmlsdGVyIGJ5ICcgKyBmICsgJyBhbGVydHMnfQogICAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogJzRweCAxMHB4JywgYm9yZGVyUmFkaXVzOiA0LCBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdGV4dFRyYW5zZm9ybTogJ2NhcGl0YWxpemUnLCB0cmFuc2l0aW9uOiAnYWxsIDAuMTVzJywgY3Vyc29yOiAncG9pbnRlcicsIGJhY2tncm91bmQ6IGZpbHRlclN0YXR1cyA9PT0gZiA/ICdyZ2JhKDk2LDE2NSwyNTAsMC4xMCknIDogJ3RyYW5zcGFyZW50JywgYm9yZGVyOiAnMXB4IHNvbGlkICcgKyAoZmlsdGVyU3RhdHVzID09PSBmID8gJ3JnYmEoOTYsMTY1LDI1MCwwLjIyKScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjA2KScpLCBjb2xvcjogZmlsdGVyU3RhdHVzID09PSBmID8gJ3JnYmEoOTYsMTY1LDI1MCwxKScgOiAndmFyKC0tem0tdGV4dC1mYWludCknIH19CiAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAge2Z9CiAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICkpfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAge2ZpbHRlcmVkQWxlcnRzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiA0OCwgdGV4dEFsaWduOiAnY2VudGVyJywgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgICAgIDxCZWxsIHNpemU9ezMyfSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luOicwIGF1dG8nLCBtYXJnaW5Cb3R0b206MTIsIGRpc3BsYXk6J2Jsb2NrJyB9fSAvPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogRk9OVF9NT05PLCBmb250U2l6ZTogMTQsIGNvbG9yOiAndmFyKC0tem0tdGV4dC1zZWNvbmRhcnkpJyB9fT4KICAgICAgICAgICAgICAgIHtzdGF0ZS5hbGVydHMubGVuZ3RoID09PSAwCiAgICAgICAgICAgICAgICAgID8gJ0JlbHVtIGFkYSBhbGVydC4gS2xpayAiTmV3IEFsZXJ0IiBidWF0IG11bGFpIScKICAgICAgICAgICAgICAgICAgOiAnVGlkYWsgYWRhIGFsZXJ0IGRlbmdhbiBmaWx0ZXIgaW5pLid9CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgKSA6ICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZ3JpZCcsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGlzTW9iaWxlID8gJzFmcicgOiBpc1RhYmxldCA/ICdyZXBlYXQoMiwxZnIpJyA6ICdyZXBlYXQoMywxZnIpJywgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICB7ZmlsdGVyZWRBbGVydHMubWFwKGFsZXJ0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gYXNzZXRNYXAuZ2V0KGFsZXJ0LnN5bWJvbC50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxBbGVydENhcmQKICAgICAgICAgICAgICAgICAgICBrZXk9e2FsZXJ0LmlkfQogICAgICAgICAgICAgICAgICAgIGFsZXJ0PXthbGVydH0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2U9e2Fzc2V0Py5wcmljZX0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2hhbmdlPXthc3NldD8uY2hhbmdlMjRofQogICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlPXtoYW5kbGVSZW1vdmV9CiAgICAgICAgICAgICAgICAgICAgb25Ub2dnbGVQYXVzZT17aGFuZGxlVG9nZ2xlUGF1c2V9CiAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogSGlzdG9yeSBUYWIgKi99CiAgICAgIHt0YWIgPT09ICdoaXN0b3J5JyAmJiAoCiAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAxNiwgYmFja2dyb3VuZDogJ3ZhcigtLXptLWdsYXNzLWJnKScsIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS16bS1nbGFzcy1ib3JkZXIpJywgYm9yZGVyUmFkaXVzOiAnMTJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PgogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCBtYXJnaW5Cb3R0b206IDEyIH19PgogICAgICAgICAgICA8aDIgc3R5bGU9e3sgZm9udFNpemU6IDEyLCBmb250RmFtaWx5OiBGT05UX01PTk8sIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLCBsZXR0ZXJTcGFjaW5nOiAnMC4xZW0nLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fT4KICAgICAgICAgICAgICBUcmlnZ2VyIEhpc3RvcnkgKHtzdGF0ZS5sb2cubGVuZ3RofSkKICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAge3N0YXRlLmxvZy5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgICAgICB0eXBlPSJidXR0b24iCiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9MT0cnIH0pfQogICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0iQ2xlYXIgdHJpZ2dlciBoaXN0b3J5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiAxMCwgZm9udEZhbWlseTogRk9OVF9NT05PLCBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDQsIHRyYW5zaXRpb246ICdjb2xvciAwLjE1cycsIGNvbG9yOiAncmdiYSgyNTEsMTEzLDEzMywwLjYpJyB9fQogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MTF9IC8+IENsZWFyIEFsbAogICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICApfQogICAgICAgICAgPC9kaXY+CgogICAgICAgICAge3N0YXRlLmxvZy5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgdGV4dEFsaWduOiAnY2VudGVyJywgcGFkZGluZ1RvcDogNDAsIHBhZGRpbmdCb3R0b206IDQwIH19PgogICAgICAgICAgICAgIDxIaXN0b3J5IHNpemU9ezI4fSBzdHlsZT17eyBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJywgbWFyZ2luOicwIGF1dG8nLCBtYXJnaW5Cb3R0b206OCwgZGlzcGxheTonYmxvY2snIH19IC8+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBGT05UX01PTk8sIGZvbnRTaXplOiAxMiwgY29sb3I6ICd2YXIoLS16bS10ZXh0LXNlY29uZGFyeSknIH19PgogICAgICAgICAgICAgICAgQmVsdW0gYWRhIGFsZXJ0IHlhbmcgdHJpZ2dlcmVkLgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICkgOiAoCiAgICAgICAgICAgIDw+CiAgICAgICAgICAgICAge2xvZ1RvU2hvdy5tYXAoZW50cnkgPT4gKAogICAgICAgICAgICAgICAgPExvZ0VudHJ5IGtleT17ZW50cnkuaWR9IGVudHJ5PXtlbnRyeX0gLz4KICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICB7c3RhdGUubG9nLmxlbmd0aCA+IDIwICYmICgKICAgICAgICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgICAgICAgdHlwZT0iYnV0dG9uIgogICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93TG9nQWxsKHMgPT4gIXMpfQogICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtzaG93TG9nQWxsID8gJ1Nob3cgZmV3ZXIgbG9nIGVudHJpZXMnIDogJ1Nob3cgYWxsIGxvZyBlbnRyaWVzJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiA0LCBtYXJnaW5Ub3A6IDEyLCBmb250U2l6ZTogMTAsIGZvbnRGYW1pbHk6IEZPTlRfTU9OTywgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMTVzLGJhY2tncm91bmQgMC4xNXMnLCBjb2xvcjogJ3ZhcigtLXptLXRleHQtZmFpbnQpJyB9fQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICB7c2hvd0xvZ0FsbCA/IDxDaGV2cm9uVXAgc2l6ZT17MTF9IC8+IDogPENoZXZyb25Eb3duIHNpemU9ezExfSAvPn0KICAgICAgICAgICAgICAgICAge3Nob3dMb2dBbGwgPyAnU2VtYnVueWlrYW4nIDogJ0xpaGF0IHNlbXVhICcgKyBzdGF0ZS5sb2cubGVuZ3RoICsgJyBlbnRyaSd9CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICApfQogICAgICAgICAgICA8Lz4KICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgICl9CgogICAgICB7LyogQWRkIEFsZXJ0IE1vZGFsICovfQogICAgICB7c2hvd0Zvcm0gJiYgKAogICAgICAgIDxBZGRBbGVydEZvcm0KICAgICAgICAgIGFzc2V0cz17YXNzZXRzfQogICAgICAgICAgb25BZGQ9e2hhbmRsZUFkZH0KICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dGb3JtKGZhbHNlKX0KICAgICAgICAgIGlkQ291bnRlcj17KytpZENvdW50ZXJSZWYuY3VycmVudH0KICAgICAgICAvPgogICAgICApfQogICAgPC9kaXY+CiAgKTsKfSk7CkFsZXJ0cy5kaXNwbGF5TmFtZSA9ICdBbGVydHMnOwoKZXhwb3J0IGRlZmF1bHQgQWxlcnRzOwo=";

function delay(ms) { return new Promise(r => setTimeout(r, ms)); }

async function req(method, path, body) {
  return new Promise((resolve, reject) => {
    const data = JSON.stringify(body);
    const options = {
      hostname: "api.github.com",
      path,
      method,
      headers: {
        "Authorization": `Bearer ${TOKEN}`,
        "Content-Type": "application/json",
        "User-Agent": "push102fix-zeromeridian",
        "Accept": "application/vnd.github.v3+json",
        "Content-Length": Buffer.byteLength(data),
      }
    };
    const r = https.request(options, res => {
      let body = "";
      res.on("data", d => body += d);
      res.on("end", () => resolve({ status: res.statusCode, body: JSON.parse(body || "{}") }));
    });
    r.on("error", reject);
    r.write(data);
    r.end();
  });
}

async function getSHA(fp) {
  return new Promise((resolve) => {
    const options = {
      hostname: "api.github.com",
      path: `/repos/${OWNER}/${REPO}/contents/${fp}`,
      method: "GET",
      headers: {
        "Authorization": `Bearer ${TOKEN}`,
        "User-Agent": "push102fix-zeromeridian",
        "Accept": "application/vnd.github.v3+json",
      }
    };
    const r = https.request(options, res => {
      let body = "";
      res.on("data", d => body += d);
      res.on("end", () => {
        try { resolve(JSON.parse(body).sha || null); } catch { resolve(null); }
      });
    });
    r.on("error", () => resolve(null));
    r.end();
  });
}

async function push(fp, b64content, msg) {
  for (let a = 1; a <= 3; a++) {
    const sha = await getSHA(fp);
    const body = { message: msg, content: b64content };
    if (sha) body.sha = sha;
    const r = await req("PUT", `/repos/${OWNER}/${REPO}/contents/${fp}`, body);
    if (r.status === 200 || r.status === 201) { console.log(`‚úÖ ${fp}`); return true; }
    if (r.status === 409) { console.log(`‚ö†Ô∏è  conflict, retry ${a}...`); await delay(2500 * a); continue; }
    console.error(`‚ùå HTTP ${r.status}`, JSON.stringify(r.body).slice(0, 200));
    return false;
  }
  return false;
}

console.log("üîß push102-fix ‚Äî Alerts.tsx FONT_MONO import fix");
await push("src/pages/Alerts.tsx", C0, "push102-fix: Alerts.tsx FONT_MONO const placement fix");
console.log("‚úÖ DONE");
